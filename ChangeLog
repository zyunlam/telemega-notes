commit d8a81e14d572c4fa8d1b5aa7cb477654c206ae1d
Merge: 1311eba0 dce00ba4
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 28 19:40:16 2024 -0600

    Merge branch 'master' into branch-1.9

commit dce00ba450e686e0fef4bd1d6a8b292eca8bfc25
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 15:34:13 2024 -0700

    Version 1.9.18
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b834c989cbddf8db9848af03bb040da1a6a0f651
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 22:30:29 2024 -0700

    doc: Add 1.9.18 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae69294526369f251b221ee1f8ca2cb58b63bd7a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 18:34:30 2024 -0700

    altos/draw: Add 'install' target
    
    Needed for building packages; install is a no-op in this directory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1311eba0bbe32bc1759a3b11b00c78774843383c
Merge: 7b2588ee a0005e3f
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 28 18:44:32 2024 -0600

    Merge branch 'master' into branch-1.9

commit f89bfb0e1a14c9809d35f60fff448a1b3a2f2b68
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 15:49:29 2024 -0700

    Fix up fat build target
    
    Depend on all-recursive so everything gets built before we attempt to
    build the fat bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0005e3f0cc65f874b112996899a782393a1c12d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 15:34:13 2024 -0700

    Version 1.9.18
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f5c037001c51609608940cf16e9e99740aad6ebc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 22:30:29 2024 -0700

    doc: Add 1.9.18 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f8d943c54b1518e77c884b6dc77ee42dc88aaeab
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 15:33:30 2024 -0700

    Add EasyTimer v2 firmware
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 278f686f014e74962721e47aeeb60b59afafb37d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 3 12:31:54 2024 -0800

    altosui: Support gps receiver setting
    
    Create a combo box listing the available receiver models and allow the
    user to select which one to use, including the builtin one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c815c673fa7e82419299d87ffde939fbd842333
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 3 12:24:08 2024 -0800

    altosui: Set the beeper to 0 to disable
    
    Don't force the beeper to the default value when the frequency is set to 0.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2bd6698fb9d403931568ddc80266d1bb61c09a8b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 19 14:07:50 2024 -0700

    altos/test: Add FEC test for simple 'hello' message
    
    This just tests the FEC code using a slightly different data source
    that makes sure odd lengths work correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 19c42c4d97151f2dc38e59cff4d0638694fcd27d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 28 09:45:38 2024 -0700

    altos/test: Adjust CRC error rate after FEC fix
    
    The number of CRC failures during FEC testing is lower now that
    the packet length bug has been fixed in the FEC encode bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abfa580ad700415f5ea240450a1621f9de35de82
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 26 21:38:48 2024 -0700

    altos: ao_fec_prepare using wrong value for input len
    
    The FEC code always sends a multiple of four bytes, padding by two
    bytes for even inputs and one byte for odd. But the preparation step
    was using the wrong value for the length, so the output was getting
    mangled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7a91278051ff75e3edc3e999a6d8096fa4deec4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 3 16:37:09 2024 -0800

    altos/easytimer-v2: Generate combined .ihx file for seeed testing
    
    The test plan for seeed requires a combined loader and firmware image
    for a single flashing step.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a017cfce31429ef25a53a724e99b53c8267ec4ef
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 2 16:23:57 2024 -0700

    altos/stm32f1: Grab both TX/RX DMA mutexes while doing I2C
    
    The I2C engine appears to trigger an extra RX DMA transaction which
    scrambles anything sharing the same DMA units.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d9140ea0d6bf6755a2701115273f02a4c3944e17
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 24 12:46:17 2024 -0800

    altos/easymega-v3.0: Update i2c pin usage
    
    Found an errata which means we had to swap which i2c to use with the
    mag sensor. Swap the mag sensor and fire_c/fire_d.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb3bfea5462d3f3e1a0a5f4645f67996054a78a3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 24 12:45:54 2024 -0800

    altos: Build EasyMega v3.0 by defaul
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 22b5d1a98a86ac4d2d0ef12565a01e3591f9afb9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 24 12:45:09 2024 -0800

    altos/stm32f103: Fix continuous ADC code
    
    This needs the same hacks as the manual ADC code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a9721f344d1837c913fee142c875de4d7357820
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 24 12:44:00 2024 -0800

    altoslib: Add EasyMega v3.0 support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4da8e047c4df06a0fec2c0cd47d26d5f1bef0e31
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 12 22:58:45 2024 -0800

    src/easymini-2.0: Add combined .dfu file for Seeed testing
    
    Provide a combined .dfu for testing EasyMini at Seeed. This
    checks the baro sensor (via POST) and SoC.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 94445131d0be72f099985709dda4203259b1d947
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 2 16:31:03 2024 -0800

    stm32f1: Clean up some ADC definitions
    
    The CR2 bit is called TSVREFE in the docs, use that consistently
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bcf9db74705dcd77eccd8f36f73c2eb99a5f1c70
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 31 22:05:13 2024 -0800

    altosui: Make accel cal dialog say 'beeper' instead of 'antenna'
    
    Quite the plumbing required, but it'll do.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 13befe46b107a88d05710991beab3b7b8478fa09
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 29 18:40:30 2024 -0800

    altos/easytimer-v2: Fix product name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9419cf4f22e5cd337da54d7907fc0a5e848bd464
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 29 18:40:06 2024 -0800

    altos/easytimer-v2: Set default log size to 192kB
    
    This leaves space for 4 flights.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52d0c638343b2424cae08059f788a02efddee19a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 29 18:39:27 2024 -0800

    altoslib: Add EasyTimer-v2 support
    
    Log parsing and idle monitor.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a724a6b223229f8640740874523aee394350e9c6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 29 17:58:02 2024 -0800

    altos/easytimer-v2: Fix up ao_pins.h
    
    Fix M25 CS pin (PA10).
    Fix BMI088 axes
    Fix MMC5983 axes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a148876e36bc3f84f11fdac57a9f69171e30c058
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 28 21:14:06 2024 -0800

    altos/telelco-v3: Minor UI tweaks
    
    "Box"→"Bank" to match docs.
    Auto-center text instead of pre-computing. Way easier.
    Scroll found banks during startup.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7977ff5291c6161d37b7c1b1548258df2e58c09e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 28 00:17:27 2024 -0800

    altos/st7565: Set default contrast to 13
    
    This seems slightly better than 16. Might need to actually keep this
    in config space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ffaee646efded39c3cdb07948823822ce8df8c4e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 23:59:43 2024 -0800

    altos/telelco: Add RSSI display to older devices
    
    Show RSSI value on TeleLCO v2.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1741039eb3633b3f010ac7fc9e6a055d02aa0a15
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 23:48:51 2024 -0800

    altos/telelco: Add per-box RSSI display screen
    
    Shows the last received RSSI value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43d1cfd0d1458c2d4c333155902be28bfe17b6ee
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 23:47:45 2024 -0800

    altos/stm32f1: Set beeper pin to 0 while off
    
    Make sure we don't let the timer leave it sitting high; the
    magnetic beepers probably don't do the right thing in that case.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 323a6a44083f865c90c12e93775ac2dbf9352de3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 23:13:17 2024 -0800

    altos/telelco-v3.0: Show backlight/contrast value as percent
    
    Provide a bit more feedback about the setting.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit efe964558805a18f070f405377ef0f437ccce237
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 23:12:05 2024 -0800

    altos/st7565: Diff image during update
    
    This minimizes the amount of data sent to the device. Mostly this is
    useful to skip updates that don't change the display at all.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf7d2aaccd41837dd2e032023107616266e22a6d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 23:11:15 2024 -0800

    altos/telelco: Update backlight/contrast display upon change
    
    Don't wait for the 1-second poll interval.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1fd9055898fb07033b80f3d9d677a97d485fb2f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 23:10:28 2024 -0800

    altos/draw: Add ao_text_width
    
    Computes the total advance of the given string, not the width of the
    resulting ink.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9103d13f620cb06642aacdff9dcaf05e87d671f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 22:03:00 2024 -0800

    altos/telelco-v3: Add logo to 'info' page
    
    Make the info page a bit more fun
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 936ef3907e956b1a42ad54fe5757bd816b20890f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 16:35:33 2024 -0800

    telelco-v3.0: Add info page
    
    Show model, version, serial, call and freq
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5cea1324ac4a34a21324c4bb50885ffacb6d29da
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 16:03:35 2024 -0800

    altos/telelco-v3.0: Control LCD backlight with PWM
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5506b6c1f75d639e2d952213a53bc9ee34e5a79c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 16:03:20 2024 -0800

    altos: Add support for backlight control in ao_lco_bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ac9267b156d7bb6e942dd630a9ba142ba0c7a00
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 16:01:20 2024 -0800

    altos/stm32f1: For some reason the DBG registers aren't always available
    
    Attempts to discover the device model during flash loading appear to fail
    for unknown reasons. Switch to basing the memory page size on the total
    memory size, which should be just as reliable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff21e293ee8185b19a30df74ca7a1610625ef465
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 15:31:04 2024 -0800

    altos/telelco-v3.0: Configure SPI GPIO pins to 50MHz
    
    Need enough bandwidth to run at 20MHz
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3687628cdd964a5e6729b8c9506efa5e2e9d8a84
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 27 15:30:27 2024 -0800

    altos: Bump ST7565 speed to 20MHz
    
    Go as fast as we can manage
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9e319f5a97df8c0950ec7531d0889cf60e53783
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 26 17:35:43 2024 -0800

    altos/telelco-v3.0: Add contrast setting
    
    Provide a UI for setting the LCD contrast.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 23fec388ebdf4230663324e1f0ebfbd79059e841
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 26 17:35:21 2024 -0800

    altos: Build TeleLCO v3.0 bits by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 470be148d9a9dcd45609942d17fcf7c1555375f3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 26 16:06:44 2024 -0800

    telelco-v3.0: Minor setup fixes
    
    Change beeper to lower tone. Switch LCD SPI to mode 3. Fix the
    quadrature device ID.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54a465d062d9a863f14519267f06927d001e2c23
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 26 16:05:45 2024 -0800

    altos: Fix pretend pad range for TeleLCO
    
    Off-by-one when setting up the pretend pads.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c8e02fea0b6de30c3929bb1551e7de02b7047f3d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 26 14:03:40 2024 -0800

    altos: Add wiring docs to st-7565 header
    
    Write down what worked today.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2216717adac7f7e917e13085de6ce8118023d5f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 26 11:07:55 2024 -0800

    altos: Add SPI bus parameter to ao_spi_speed
    
    The stm32f1 series has two SPI busses and they operate from different
    base clocks, so the computation of the clock divider to get a
    particular frequency depends upon which SPI bus is being used.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3fdf2f80ccf3a2b148b63f5fd5de198957719075
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 26 10:59:19 2024 -0800

    stm32f1: make spi speed per-bus
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 044f68d6be05be8b0a6a2432f64b8fb2e94ca956
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 26 10:57:56 2024 -0800

    switch to mode 3 for LCD

commit 9a5cd9e64a66829fb0cd3713c5cbd41085641db3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 24 15:36:34 2024 -0800

    src/stm32f1: Disable extra JTAG pins in ao_clock_init
    
    Need to enable AFIO before trying to adjust bits there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit de37d4a17e8eac517ed00f179c9cd5c09b820dfc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 13 20:57:38 2024 -0800

    altos/telelco-v3.0: Use timer 2 for fast timer
    
    We need timer 1 for PWM on the backlight
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e82cf4199761e900ef176a2a6ddd5d7cfc38bc07
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 13 20:57:00 2024 -0800

    altos/stm32f1: Support timers 2,3,4 for fast timer
    
    Make the code deal with differences between timer 18 and 234
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d216d17e5317607ced5a2437e5360203647e6eb9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 11 16:17:32 2024 -0700

    altos/telelco-v3.0: Battery voltage is on PA2
    
    Which is ADC input #2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e93b73d9adce883e7e4094a06f4de86f5c774567
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 11 16:16:58 2024 -0700

    altos/telelco-v3.0: Don't connect PA6 to SPI
    
    MISO is not used, and we need the pin for other stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a3fd78224f222adc4cec394a2c8f4153d6e8571c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 11 15:12:34 2024 -0700

    altos/stm32f1: Allow PA6 to be left alone in the SPI code
    
    This is MISO, which the LCD driver doesn't use. Leave it alone so we
    can use it for other stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2447293cbaaf7b783744ca2f68bf1769a8798841
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 11 15:11:06 2024 -0700

    altos/stm32f1: Poke the ADC harder to get it to sample
    
    The ADC requires a bunch of poking to get it started.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 321556be4eda94be40dbefe13f0549ad224c7c33
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 10 23:49:00 2024 -0800

    altos/stm32f1: Turn on ADC during initialization sequence
    
    The ADC needs to be left 'on' so that it will actually
    run the conversion sequence when started.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65cbf1af7a0c5051c75a7e6a104f3ed17cb629a9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 10 17:27:33 2024 -0700

    altos/telelco-v3.0: Add USB pull up
    
    And move the ARM LED to PA9
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb3cd8d1987b3e4d0a09ece97b3124e954c5f949
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 10 17:26:12 2024 -0700

    altos/stm32f1: Add STM_RCC_CFGR_PLLXTPRE_MASK value
    
    Necessary when setting the PLLXTPRE value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cea7122fc1843b14a179ed9311677f69c10b38eb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 10 17:24:32 2024 -0700

    altos/stm32f1: Set PLLXTPRE value
    
    This is the pre-PLL divider value which is needed when we want to
    use a 16MHz crystal and a 72MHz sysclk
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c8a0811abf59fb55cb17d2159289621d26e887ad
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 10 17:22:57 2024 -0700

    altos/stm32f1: Support beeper on tim3
    
    Add a bit more flexibility to the beeper code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b8bc4e4aadd367c40d33afefb526f1c60c7d118
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 20:13:04 2024 -0800

    altos/telelco*: Make LCO voltage display work on 2.0 and 3.0
    
    Fix up the common code to handle LCO voltage display via box 0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d3b9ca44ffe43bd6285c37af4ee1d6174be8fcd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 19:57:03 2024 -0800

    altos/telelco-v3.0: Fix up search UI
    
    Present a progress bar. Show the detected box numbers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c5c7dfe66098bc8af47768146739a7cda605968
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 19:14:03 2024 -0800

    altos/telelco-v3.0: Add ao_adc_single usage to get battery voltage
    
    Poll the ADC to acquire battery voltage data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 37de458faea5f67870b80e3549e37130bf43b11b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 19:13:22 2024 -0800

    altos/stm32f1: Add ao_adc_single support
    
    This supports polling the ADC for values instead of having
    them get dumped into a ring at a regular rate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1760bec9ed19c64f35ea28904cea433d39dead07
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 18:58:41 2024 -0800

    altos: Move ao_adc_single.h API header to kernel/
    
    THis was in stm, but will be needed by other architectures.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a30f526c42177ed7d4ad239f31b7b5163e16a036
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 17:05:34 2024 -0800

    altos/telelco-v3.0: Add some real drawing stuff
    
    This required enabling devices with 128kB flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit edbe6cca1e6b68bcc90064cd70529a9f9b0f9632
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 16:48:43 2024 -0800

    altos/telelco-v3.0: Use eeprom emulation for config storage
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e959061fa17e15dfdd75d35c6c67e68a0e5e98e2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 16:47:47 2024 -0800

    altos/stm32f1: Add eeprom emulation using flash
    
    Use the last 2kB of flash to emulate eeprom storage for TeleLCO. This should
    also be useful for EasyMega.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31756e065828ca5c1779f1349c38d29196f4798d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 16:21:40 2024 -0800

    altos: Add initial TeleLCO-v3 bits
    
    This might light up some of the hardware...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2733436da522650d4e918b7bc7d65f966f149792
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 16:20:42 2024 -0800

    altos: Build in 'draw' directory first
    
    This makes various font bits for targets using graphics
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96cee909d1392f098c22c0122f12e358a7fe8174
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 16:20:18 2024 -0800

    altos/stm32f1: Add ao_fast_timer.c
    
    Needed for TeleLCO
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96459ad1231898c743aacf3fbc1afbf92f5579dc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 6 23:24:13 2024 -0800

    altos/telelco-v3: Move USB pullup from PA9 to PA10
    
    Production boards will have the pull-up on PA10, and Bdale will hack
    up the protos to match so we don't have to have separate firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 28c389c08a37010fdbb26e9923d16c3204862e67
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jan 7 15:55:53 2024 -0700

    fix product name

commit 50dea58c0f2ae87827a1a761ea7868e9798a5fd5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 6 23:16:23 2024 -0800

    altos/telelco-v3: Create initial flash loader setup
    
    Copied from easymega-v3 with USB pull-up moved to PA9. Note this
    assumes the proto boards will have a resistor fitted there, which is
    not in the artwork.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a34be23938cf1b3c3662abe2d39492bda9a4be1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 30 00:46:36 2023 -0700

    altos/easymega-v3.0: Switch to STM32F103
    
    For some reason, there was easymega v3.0 firmware sitting here, but
    it was mostly a copy of easymega v2.0 bits. Fix that to support the
    current design based on the STM32F103 SoC.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4683ef1d97f405fabbc214eb7b83bba15990ff79
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 30 00:45:17 2023 -0700

    drivers: Add real i2c support to mmc5983
    
    It only had bit-banging i2c support; go ahead
    and add "real" i2c support for EasyMega v3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1cad5ca2525fbe067f897871bc2c4dc45a13e85a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 30 00:05:21 2023 -0700

    altos/stm32f1: Add more IP block drivers
    
    adc, beep, exti, i2c
    
    Also hooked up data sampling bits in ao_timer.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3da00a912b07c77d06785933c92e287ab48b0f79
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 16 10:24:36 2023 -0700

    altos: Fix up stm32f103-nucleo 'lco' demo mode
    
    Adjust some layout now that I've got a real screen to play with.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f7d530b9ca06272354d1b7c05813a2523b24887
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 16 10:23:05 2023 -0700

    altos: Clean up st7565 LCD driver
    
    Get rid of AO_ prefix on chip-specific register values.
    Declare ao_st7565_instructions to take const uint8_t * so
    it can accept an array in flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fab278542c9bb31991a93604a9f646e8cd8285af
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 8 17:14:56 2023 -0800

    altos/stm32f103-nucleo: Draw more of the LCO demo screen
    
    Add the box/pad screen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bfafd5b04f0cca36724f3de0b0f18ffac93be591
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 8 15:54:39 2023 -0800

    altos/stm32f103-nucleo: Drive a screen too
    
    Use the ST7565 driver to control an LCD screen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a080a564b9b54e6b3495d30703c45ba2850b1703
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 8 15:53:58 2023 -0800

    altos/stm32f1: Add DMA and SPI drivers
    
    These came from the code for the stm32l15 chips
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b0ea39f7eb18aa73160b0b848a9000892f43c0e7
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 8 15:53:03 2023 -0800

    altos/driver: Document setting for AO_ST7565_BIAS
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b2d2a9de490a140e8f2c5c2fba739662b340fb3b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 8 15:52:11 2023 -0800

    altos/draw: Have each font declare ao_glyph_temp as .comm
    
    Create temporary glyph drawing space by having every glyph declare how
    much space it needs and letting the linker allocate the largest
    possible space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6394680d1e9ff8596068a73eb43e4adc45722455
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 8 15:50:57 2023 -0800

    altos/draw: Skip line adjustment for vertical/horizontal
    
    When e3 is zero, don't adjust the minor position based on
    the major as it doesn't move.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e82ecb3eddd992c1d351ad7489ae5cbdb761cea
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 8 15:50:19 2023 -0800

    altos/draw: Build demos with -O3 to catch more bugs
    
    The compiler fails to do a lot of checks in -O0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5af8252cb6cf51611963f4df97eee04741438ea5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 8 15:49:52 2023 -0800

    src/draw: Provide some useful constants
    
    The two colors and a stride macro
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d65652ac9027475d32510feac9eb8b57a2080d48
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 8 15:14:53 2023 -0800

    altos: Add ST7565 LCD driver
    
    This is the chip used by various NewHaven LCD displays
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09a3c086dae1cce43c843626a1c624b4e2ad8d04
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 25 22:41:48 2023 -0800

    altos/stm32f103-nucleo: Add boot loader
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cea0f40fff14b9d2085e0026a68b742a4b114cb9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 25 19:24:11 2023 -0800

    stm32f1: Get boot loader working
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58f013162125b2143a5a9f1c0544cb20817e9524
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 19 16:29:56 2023 -0800

    altos/stm32f1: Start work on self-flash code
    
    Looks like this uses the same IP block as the stm32f0 series; copied
    the code, haven't gotten it working yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b23ac7ea00ec26779354869765ced9caa2d05738
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 19 15:45:29 2023 -0800

    altos/stm32f103-nucleo: Use more bits
    
    Get the OS running, use the serial for console
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 87b64a15f55ecb20a0f8bb2556e77b45a4d82b82
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 19 15:44:32 2023 -0800

    altos/stm32f1: More stm32f103 work
    
    Serial driver works
    Interrupts work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2cb18542f4f6071232bd046fd1b257228c17a25
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 17 23:02:16 2023 -0800

    altos: Start work on stm32f1 support
    
    Got clocks working. CPU now running at 72MHz.
    Got systick timer working. Ticks at 100Hz.
    Got GPIO working. LED blinks.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c361192dbeabeb434fd6744e575756c012545d1b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 25 22:40:29 2023 -0800

    ao-tools: Add flash utility for stm32f1x chips
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e8b0ac5a17d2fb5a0d99ea86c3a2e1c780d3adf3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 30 12:33:22 2024 -0800

    altos/lpc: Adjust ADC clock from 450kHz to 4.5MHz
    
    A missing zero. Also, let products change this value if desired to
    improve high-impedence performance.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d4e2f95e628b693e418ac9825e81792acf9d809
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 31 17:47:08 2024 -0800

    Fix configure tests for multi-arch libaltos
    
    libaltos builds now require a long list of compilers. Check for all of them
    before enabling it when building in auto mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd20605c9b3c8bc9cbbea4eb1252c9282a317c94
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Jan 22 16:15:44 2024 -0700

    kernel: conditionalize config "report in feet" on presence of baro sensor

commit d4ac6abeb89282d9d96979b2a735aa4dc1e4c33d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 6 22:09:41 2024 -0800

    altos/easytimer-v2: Initialize logging too
    
    Now that the logging bits are all written, let's turn it on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14f1e175af85c0ef4539316d5ce049798a878fcb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 6 22:08:54 2024 -0800

    altos: Updating pyro format tried to copy entries with no value
    
    Need to check for NO_VALUE before attempting to copy data, otherwise
    things will go badly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3f31012645918097dc426cd6ba8763b30e78bab1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 6 22:07:29 2024 -0800

    altos/samd21: Enable stdio for USB by default
    
    samd21 usb driver didn't bother to enable stdio for USB for some
    reason.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e026f1d16eb368d6a27b4c4ffbc4cece3950a07b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 6 17:06:58 2024 -0800

    altos/easytimer-v2: Update comments in flash loader ao_pins.h
    
    No code changes, but the comments were wrong.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d69b6738040bf751d024b4daceace7aedee6f7c7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 6 17:03:30 2024 -0800

    altos/easytimer-v2: Add logging bits
    
    32-byte records with all data in a single record instead of
    separate volt/sensor bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2292d66184e7f40336bfc59d2e9388391bd9511
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 16 10:30:24 2023 -0700

    altos: Build easytimer-v2 bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5de0bd66edf15aaaf8d404d59e2740b8e8050587
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 16 10:29:10 2023 -0700

    altos: Initial easytimer-v2 bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 05839dccf5afa431d93ae6124ab8b76f09bf6b54
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 16 10:25:19 2023 -0700

    altos: Use BMI088 as z-axis accel as needed
    
    When there's no high-g accel available, use the 'along' axis
    to measure acceleration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 010c65fa82aad9d950df519fa7dc111cfbb02104
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 11 13:44:54 2023 -0800

    fixup seven segment debug code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83953c145483f4902e31e22062e9261de4c97aa6
Merge: 7cb9bbe7 960603c4
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 16 09:28:44 2023 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 7cb9bbe7a285867d76c9d535709383a425cba7c7
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 16 09:28:21 2023 -0700

    add a paragraph about how to hook up a pressure sensor to an EasyMotor

commit 960603c4a4def375a585b01f8b9356b62893b7f1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 10 11:24:45 2023 -0700

    micropeak: Include firmware in install bits
    
    These are useful for people building their own hardware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5de950272ddaefa03f964a8d31d21ffc7dccab4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 10 11:19:54 2023 -0700

    doc: Use -optimize with asciidoctorpdf
    
    This does some additional compression on the output to make it
    smaller.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 33b6f363bd1377c2cc55213a15b70c65f729dfb7
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 30 11:52:44 2023 -0600

    update Releasing with learnings from 1.9.17 release

commit 8f3653c4586358bf02f3fc7fa8f71728c2fee01a
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 20 12:02:36 2023 -0600

    doc: fix a typo in the staging example

commit 7b2588ee723827b9be2a2d5f287afb1b5d351b23
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 30 10:48:52 2023 -0600

    update ChangeLog for 1.9.17 release

commit 63a8707ee4120148f6ec5cb073b349beefe377fa
Merge: b071450f a4995df3
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 30 10:46:42 2023 -0600

    Merge branch 'master' into branch-1.9

commit a4995df3d75359d258881934f60980e486681b9d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 30 09:15:28 2023 -0700

    Version 1.9.17
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 847d011791caec4d3b28052d5b4f2f25a7df135a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 30 09:12:34 2023 -0700

    doc: Release notes for 1.9.17
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 914fb3d53bf6fd4b8be8e10eb1a9e1e3e1a323be
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 30 10:27:39 2023 -0600

    ao-bringup: be consistent with success text in TeleGPS test script

commit 484290b35761add128e34c017bbf0e91d9a4a7bc
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 28 11:44:40 2023 -0600

    ao-test-igniter: allow anything other than 'open' to be valid so LED tests work

commit 05b689b29a964a233b2389390c9669538160888e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 4 11:54:10 2023 -0700

    altos: Use ublox-10 mode for TM v4.0
    
    This will only work on a hacked board with a swapped GPS unit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 342bd580ac9f7e5ddd585c795c3aca44f7cde51d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 22 00:01:03 2023 -0700

    altos: Use pyro voltage to check igniters
    
    Instead of using an absolute value for the igniter continuity good
    voltage, use 15/16 of the pyro voltage instead. This ensures we scale
    with the pyro voltage to find marginal igniters even with high voltage
    pyro systems.
    
    This doesn't work on TeleMetrum where we have no pyro voltage
    value. On these boards, continue to use a fixed 3.5V value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92bbfacb64568b3b6d132ba23e17dc57da582626
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 22 00:00:12 2023 -0700

    altos: Don't include ao_pyro.h into telelco code
    
    This isn't used at all.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d6bdabbdfa0cd3854e67fd363dc1bb4bd14e68d9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 21 23:59:07 2023 -0700

    altos: Add pyro voltage divider values to boards with them
    
    EasyMega and TeleMega have separate measurement circuits for pyro
    battery voltages, provide the resistor values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 70481772386d556b8a7981da38a03f5c9b181a7c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 21 23:19:06 2023 -0700

    altos: Compute igniter good/bad thresholds using 3.5V value
    
    Instead of requiring each product to set the ADC values for good/bad
    igniters, compute them based upon a 3.5V value using the ADC
    characteristics already present in ao_pins.h.
    
    This changes the threshold used on LPC parts from 400 (0.189V) to
    7388.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f495f2a479569d839f4efe8f115d51ae162edcfd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 12 23:15:36 2023 -0700

    altos/stmf0: Disable ao_boot_check_pin if not in use
    
    This allows rebuilding the boot loader without boot pin support (as
    required to debug TeleMini) by only editing ao_pins.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2dd10fcc43369129b1d5067f10365574a12943eb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 12 23:13:29 2023 -0700

    altos: Add AO_STACK_CANARY to detect stack overflows sometimes
    
    Checks above and below the current task stack at each switch.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41301eea02a25c77129c852d11977accf26152db
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 12 23:11:01 2023 -0700

    altos/stm32f042: Increase interrupt stack to 256 bytes
    
    Running the radio on TeleMini in monitor idle mode ended up
    overflowing the interrupt stack of 128 bytes. Increase to 256 bytes
    and adjust task stack sizes so targets continue to build.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 444e6b28f99e7849bbc96cb040b2d73f6bc228b9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 6 14:57:53 2023 -0700

    altoslib: Support Monitor Idle for EasyMini-3
    
    Needed to explicitly support this target even though it was almost the
    same as EasyMini v1.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83480da31923ba078746a0f5370cf63d87f31e1e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 14 10:38:01 2023 -0700

    altos-mapd: Install systemd dir in arch-independent location
    
    Use $(bindir)/../lib instead of $(libdir) as the latter has the
    arch-specific directory added.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 062b9709e66ac9f678efc8531dd65dbb497feaee
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Apr 28 00:35:28 2023 -0600

    update Releasing based on 1.9.16 release experiences

commit b4e136c63d5e02b1ce94e6981a99c99ff1389658
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Apr 28 00:29:01 2023 -0600

    have TeleGPS production script save RF cal value

commit b071450f0cf70c2d10d78cc5ca48be1ec7b05c4d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 27 23:53:30 2023 -0600

    updte ChangeLog for 1.9.16 release

commit 1605f722a7e0b2ba54620ce334e79374842e6957
Merge: 459f421a 58fa3379
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 27 23:52:46 2023 -0600

    Merge branch 'master' into branch-1.9

commit 58fa337960b7b528c4755514f5faee894527de92
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 27 20:25:43 2023 -0700

    Version 1.9.16
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5214a559acc582d639e2489c82594e5fb3a4c540
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 27 22:11:30 2023 -0700

    altosdroid: Deal with Google requiring API version 31
    
    Need to add some magic constants to the build.
    Need to support BLUETOOTH_SCAN permission.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1414ad9a8e5b3dce6462f410760e56fd7a1938cb
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Apr 26 18:08:09 2023 -0600

    update TeleGPS v3.0 production script to flash correct firmware versions

commit 7d9933328e2fbbe636d88dd49aa539ee59c5edf6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 26 16:08:38 2023 -0700

    Add TeleGPS v3.0 firmware
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b346b1bc86306f2565d8af4ac8a2bab35145a38
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 26 16:04:21 2023 -0700

    doc: Add 1.9.16 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 12258676d2c19dfe85c3484b064b970865c2f418
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Apr 26 17:06:42 2023 -0600

    add production scripts for TeleGPS v3.0

commit 1ab3cdedb83296a3296aeaaf1e0fa6a11800e331
Merge: 90256e02 38450798
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 26 15:46:15 2023 -0700

    Merge branch 'telegps-v3'

commit 90256e02ccb19646816c428d103460385bee8fb5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 25 14:11:48 2023 -0700

    Version 1.9.15.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb756983a26595a5d2f317a6693f9a670665c86a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 15 21:53:28 2023 -0700

    altos/stm32f04x: Smite the OPL_LAUNCH bit to reset boot config
    
    When rebooting, make sure the option bytes are recomputed based upon
    the latest flash configuration, including whether there's a program
    loaded. This ensures that we don't end up re-starting the DFU loader
    and mangling our ao_boot values. Without this, our flash loader code
    wouldn't be able to see the signal to stay in the loader and we'd end
    up back in the application.
    
    Of course, this is only necessary if we want to reboot just after
    flashing the boot loader without power cycling. Once the chip is power
    cycled, it recomputes the option bytes automatically.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16c3f541e80d77f4adc1a69f15e82c23d7947138
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 15 21:50:08 2023 -0700

    altos/stmf0: Remove some incorrect defines in stm32f0.h
    
    These got copied from the stm32l15x bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38450798207d7bafb72fbc9a4bcdf2c8fec84653
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 20:13:57 2023 -0700

    telegps: Add unit setting to device configuration dialog
    
    This isn't used by TeleGPS, but is needed to make the config system
    work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4f1cdc5c10295ace4940a9b1f9068fd885dc789b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 19:41:02 2023 -0700

    altos/telegps-v3.0: Get LED blinking when GPS locks
    
    Initialize the LED subsystem and assign the green LED to report GPS
    lock.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2aa60e8d3a88b067816e0e90413bbf7c3a0a2f8b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 19:42:31 2023 -0700

    altos/telegps-v3.0: Use all 6kB of available ram
    
    We need more ram for LED blinking.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf26932b4ac73b6945887bdd3bc63d74d0b91f69
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 19:41:50 2023 -0700

    altos/lpc: Support 6k ram targets
    
    Set RAMSIZE in Makefile before including ../lpc/Makefile.defs and it
    will select a suitable linker script.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07bade3be82f8fb0edda6481cc3bda9df425d996
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 19:39:37 2023 -0700

    altos: Make sure storage is setup before starting log
    
    TeleGPS v3.0 uses internal eeprom for config, so storage wasn't
    getting setup before doing the telegps-specific init bits. Instead of
    worrying about it, just call ao_storage_setup at the top so that
    storage is always ready to go.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9307f3bcaa7790fedbed4bedab71ace28bd639e2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 16:44:47 2023 -0700

    altos/telegps-v3.0: Use new MAX 10 support in uBlox driver
    
    Switches to the new packet types as required by this chip.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 957768164e71249c4d9cf4afe29d34dea395b68a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 16:44:04 2023 -0700

    altos: Dump GPS dop/course data from 'g' command
    
    This lets monitor idle show more of the GPS status
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c412aecbb495f3bdb521d0427d4b26cf86f201e7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 16:42:57 2023 -0700

    altos/drivers: Support uBlox Max 10 chips
    
    The set of supported packet types has changed from the last chip;
    update the driver to switch to new packets.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0f7962eedd4408cd0c6570ac4468979fd971378
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 16:38:03 2023 -0700

    altoslib: Parse more GPS monitor data
    
    GPS is being updated to send dop and course data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6da41f0ce2c3394c8910135bcf48d3ec80d2e63
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 16:37:29 2023 -0700

    altoslib: Support TeleGPS v3 monitor idle
    
    Needed to deal with ADC difference from STM-based devices.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2d15724c4a175a4807dbbde6d2c2f241a9c49021
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 28 13:43:38 2023 -0700

    altos/telegps-v3.0: Fix SPI bus usage
    
    CC1200 is on SPI 0, M25 is on SPI 1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5240c06a757dbe9548a7394611b2a121dccf13e2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 28 13:32:48 2023 -0700

    altos/lpcxpresso: Update for 11u24 board
    
    This updates the lpcxpresso demo to support the 11u24 board with
    serial connected like telegps v3.0 on p1_13/p1_14
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbc7a40fd29dd9a2e5f55dd58e9d50e009e7fb22
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 28 11:56:27 2023 -0700

    altos/lpc: Validate UART pin config
    
    Make sure some UART pin configuration has been selected
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb357c306465925f020f756db6b4f0914b1f223f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 27 21:52:27 2023 -0700

    altos/telegps-v3.0: Use eeprom for config
    
    Avoid wasting space in the SPI flash part for device config
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bac27453db0ebfad1c27745200fe6f168d26bd43
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 27 21:51:31 2023 -0700

    altos/lpc: Add support for eeprom on 2x/3x chips
    
    The newer 11U2x and 11U3x parts have enough eeprom to support storing
    config data there. Add support for the IAP calls for read/write.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac188661d3965f150d9b279b107b07e282f50861
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 27 21:29:06 2023 -0700

    altos: Build TeleGPS v3.0 by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 168b5b31eec79aa93bc68ec52ff83dd1948cd4f2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 27 21:27:43 2023 -0700

    altos: Add TeleGPS v3.0 support
    
    LPC 11U24FET48 with CC1200 radio. A bit like TeleGPS v1.0 but with different
    pin assignments and a different radio chip.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68c3a1f238be808b23573dbd19bcfc135d25bd03
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 27 21:26:41 2023 -0700

    altos/lpc: Support UART on pio1_13/pio1_14
    
    This is an alternate configuration for this chip.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d9874c473887a4f43ba14ac855a2db00a740d2d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 27 21:25:43 2023 -0700

    altos: Allow ports to use type other than 'void *' for gpio block
    
    LPC uses integers while everyone else has a struct for each gpio block.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 79826cdbba8fe52e05ccf69e7722890e85cc0d1a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 27 14:39:03 2023 -0800

    altos/draw: Use damage for lco demo
    
    Do some incremental drawing to demonstrate damage in action
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 99b9f6386018ad201c5defc595b22bf6d5d825fe
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 27 14:38:41 2023 -0800

    altos/draw: Use bitstream fonts for LCO demo
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 176b750e26a583e71b68fadd989f66ac965efab3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 27 14:38:09 2023 -0800

    altos/draw: Use <> for include files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c40d91ec83d0af715256747dc4be5cabd2c13959
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 27 14:36:33 2023 -0800

    altos/draw: Add vera sans fonts
    
    These work better in 1-bit mode than frutiger
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c3414603bb9993e4cf3f0163ae0575758201b041
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 27 14:35:36 2023 -0800

    altos/draw: Add damage tracking
    
    This will allow more efficient updating of the screen
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c1fd7fe05092a179f0ce3c0a2294f14e71300f9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 27 14:11:06 2023 -0800

    altos/draw: hand-edit 64-pixel 3/5 to avoid jank
    
    These had random-looking pixels hanging off the ends.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ec077209becf9ad8429f6cdf98fa06831263c813
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 18:55:54 2023 -0800

    altos/draw: Use fewer fonts in lco sample
    
    Saves some memory
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit da605a15bbdc3b0f15cf7c70256ce4c32da071c6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 18:50:31 2023 -0800

    altos/draw: Add line test app
    
    There were bugs, now there's a app to check them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2a21c0f6a770f989833d0bd35761e17f9843353
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 18:49:47 2023 -0800

    altos/draw: Split out draw test scaffolding from lco-test.c
    
    Allows it to be reused.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd5b0ac6f2b0c709fe3d419c4c090aa5638d09e1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 18:48:54 2023 -0800

    altos/draw: Inline span fill for polygons
    
    Instead of calling ao_rect, do the clipping by hand
    and call ao_solid instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc17e4ed423c75624115ee3921aee2111ec1139b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 18:48:05 2023 -0800

    altos/draw: Fix clipping far line end
    
    Make sure the final unclipped pixel gets drawn.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a79e8d8903b63f3f630d7f6455ee09715f55615
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 18:46:40 2023 -0800

    altos/draw: Check for horiz/vert line when clipping
    
    Horizontal or vertical lines won't step along the minor axis while
    clipping.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4fa489276826e33fa5e21d0a94a8ed3e29ebcfd0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 18:46:09 2023 -0800

    altos/draw: Add validation for line drawing
    
    Just make sure it never draws outside the dest.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d804a00a7576d5e3c59c413762248787a1282c16
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 16:04:17 2023 -0800

    altos/draw: Rename test app to 'lco-test'
    
    This seems like a good place to do the LCO UX prototyping
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f4cf599bc358c478a9e0a4b86f26704434a47e4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 16:01:20 2023 -0800

    altos/draw: Mock up TeleLCO boot sequence
    
    Show logo, progress bar and discovered box numbers during
    boot sequence
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5139675bfad723e6a9a606e080541bb0b791f43b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 14:59:58 2023 -0800

    altos/draw: use --gc-sections in demo program
    
    This cleans up all of the unused font bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 79fe00b3c8931c3e6a96cb57fcde2a97cc78ff14
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 14:14:56 2023 -0800

    altos/draw: Rearrange sample LCO screen in draw-test
    
    Place labels at the top, use proportional font so
    the voltage values fit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c6b7a34f8f52dafe7f75d790f74d4dd63fd53d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 13:57:34 2023 -0800

    altos/draw: Add NotoMono font
    
    This has a zero without a dot in it, so it might
    look better on TeleLCO
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c3dff4d7286991888bd79484c19adccc6926afc1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 13:47:34 2023 -0800

    altos/draw: Add transforms to polygon code
    
    This lets the polygons remain constant but have them get
    scaled/translated when presented on the screen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fbbb3a06e42ec51d5d0582fe674528bd0e9e13f2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 13:46:15 2023 -0800

    altos/draw: Convert draw test framework to modern C
    
    Was still using K&R function definitions?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb9f561571dbe8b88a5989c0dc9b33b4a3061e49
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 13:44:52 2023 -0800

    altos/draw: Add monospaced font
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f68d82238ff869b76b554fd8de61e3b6d06e8f9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 13:42:05 2023 -0800

    altos/draw: Move font files to subdirectory
    
    It looks like we might end up with a lot of these
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 126013bb10faeba31bb52aa72b272dbfc3afb9ce
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 26 13:21:24 2023 -0800

    altos/draw: Add more fonts
    
    Add our logo font and more sizes of Frutiger
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e784b9e726a59f2aed71c20d96ebc94aa2d19fb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 25 23:46:25 2023 -0800

    altos/draw: Add logo
    
    Captures the SVG logo polygons and allows them to be
    scaled to suit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 331e2833e178a1a4b0400e1ea06e1e387009f245
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 25 23:45:25 2023 -0800

    altos/draw: Use float for polygon coords
    
    This makes polygons look way better.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 033e32989aab05fe6174a3db4a5eca4df07d7ab8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 25 22:39:07 2023 -0800

    altos/draw: Make test drawing app emulate TeleLCO
    
    Draw some numbers for box and pad. Also allow display of a couple of
    polygons.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 994e8b9e62e561561e49f2cffb82e07fabdd25a0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 25 22:38:33 2023 -0800

    altos/draw: Only cover ASCII
    
    Skip the rest of latin-1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38ff7005463ae83bd662ad06434840327bde729d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 25 22:37:16 2023 -0800

    altos/draw: Add poly fill function
    
    Fill polygons using non-zero winding rule.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9e2f41feac8ccd4e02020cf672366b194d2d60d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 25 19:22:58 2023 -0800

    altos: Fill in more of the draw code
    
    Get multiple fonts working, allow for variable-pitch fonts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 459f421aa6d7f86db9bb35767af75eb75817f28c
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 19 18:26:57 2023 -0700

    releasing 1.9.15

commit 38fac9fd1ebdc0900f598c859453b5fc8fc6b4a6
Merge: 94fdc596 6f1686d7
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 19 18:24:56 2023 -0700

    Merge branch 'master' into branch-1.9

commit 6f1686d7a1de7543a844aa86a8c1e7968911a329
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 16 15:13:01 2023 -0800

    Version 1.9.15
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2d7dc527f1168a344ea0f72770e487753f740c8
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 19 17:50:40 2023 -0700

    ao-bringup: turnon and test scripts for TeleMetrum v4.0 & TeleMega v6.0

commit 213bb501970370d16642c2fc3f5bd9c0a5f9aadb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 18 16:51:09 2023 -0800

    ao-tools/ao-flash: Use 'program' instead of 'flash' for samd21
    
    Switch to the program command, which has a 'reset' option, to get the
    device back to running after loading the boot loader.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7161117ab85720776b2b964885a57053e3ff640
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 16 15:36:30 2023 -0800

    doc: Add TeleMetrum v4.0 to specs and 1.9.15 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d7da481dbdb48729edbf41f2b87273f10511163
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 16 15:36:11 2023 -0800

    altos/telemetrum-v4.0: Add .gitignore
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0eba09d4027d3d4e7a9c35980e405998b2487b1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 16 15:35:29 2023 -0800

    Add TeleMetrum v4.0 firmware to releases
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35c1102409ff1b68a4856748a40bff7861a2fdf2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 16 15:12:24 2023 -0800

    Add TeleMega v6.0 firmware to release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a8c3f09a162359eec40d05a875ca7a09c0efc457
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 16 15:07:20 2023 -0800

    doc: Add HW specs for TeleMega v6.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b780edfc970f67adde7c9b78671b9dab7eeced5f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 16 15:05:27 2023 -0800

    doc: Add initial 1.9.15 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d5d835d65e909de24538ee0edb37d0ad0877f0c6
Merge: 4591878f 7e696108
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Feb 16 15:52:56 2023 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 7e69610859e88cacbc5801bcafecaf84b9f7f455
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 9 15:22:17 2023 -0800

    altos: Fix TMega v6.0 and v5.0 IMU axes
    
    Add documentation to each board in ao_pins.h to clarify
    the required sensor axis orientations.
    
    TeleMega v5.0 had flipped the 'across' axis sensor value signs
    incorrectly, so remove that.
    
    TeleMega v6.0 had selected the wrong axes for across and along, along
    is X and across is Y for this board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b08930aa0f67a445bf2300f3cea07cecf513a2f0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 10 17:58:08 2023 -0800

    altoslib: Hide internals of AltosIMU
    
    Make most of the variables private to prevent access to un-corrected
    data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4591878f7179efc0b784d7358cf3f4063547fb7b
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Feb 14 19:00:29 2023 -0700

    altos: re-number csm85clio outputs 0..49 to match schematic and silkscreen

commit 7b24be27f67f95d909d19d767e4ac5376ea670cf
Merge: 58d13bd9 36ef74a9
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Feb 10 06:52:43 2023 -0700

    Merge branch 'clio'

commit 36ef74a9ce4d4b066c51b76c1155f6ee7811a6cc
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Feb 10 06:52:11 2023 -0700

    altos: add csm84clio-v0.1 firmware

commit 58d13bd9bd0af42ebb3770038cd531e6ca5e9d30
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 9 15:22:17 2023 -0800

    altos/telemega-v6.0: bmi088 axes were wrong
    
    X is 'along', Y is 'across'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 589c1af82a9bccff46ecb3aa0a557b9216b818a8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 9 14:54:19 2023 -0800

    altos/telemega-v6: Remove beep freq defs and use defaults
    
    These values came from the magnetic beeper on Tmega v5 which we aren't
    using.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9518da9c5296a0172ae214b90f03043c786d3e73
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 9 12:35:13 2023 -0800

    altos: Add .gitignore for telemega v6.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 94fdc596ec5177d8a5acb7cf40ecb44e605b605d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Feb 2 12:53:51 2023 -0700

    ChangeLog for releas 1.9.14

commit 0d34cacb37ad37208bd0602364a0be660ddd12bc
Merge: e6a83e73 360aa73c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Feb 2 12:52:01 2023 -0700

    Merge branch 'master' into branch-1.9

commit 360aa73cef6fd7b782c3559aa26b3e501ee72d70
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 2 11:33:35 2023 -0800

    Version 1.9.14
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb66d5f1121cbc7680a61539d97973482c4dae25
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 2 11:33:00 2023 -0800

    doc: Release notes for 1.9.14
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 015ebe291695d0588294a523b864aed73a5178c9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 1 18:00:24 2023 -0800

    altos/drivers: Increase LCO receive timeout to 20ms
    
    Changes in the cc1200 driver appear to have sped up the transition
    from TX to RX enough that we now need to wait a bit longer for
    TeleFire to return a packet. Increase the 38400 bps timeout to 20ms
    and the 9600 bps timeout to 30ms.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe99a50a7c1b4834193bbb73fbfd1b0e49b7ff45
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 1 17:59:28 2023 -0800

    altos/drivers: Use spi duplex to fetch register values
    
    We read register values during regular operation, so let's improve
    performance a bit by making this faster.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a2d18d43722355e834288b0b4c83b021218f15cb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 1 16:29:42 2023 -0800

    altos/telefiretwo-v0.2: Get things building again
    
    This code got very stale and needed some config updates
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 05aacbd4a37d8bbe5b89664fc3630ffc4096ec69
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 1 14:14:55 2023 -0800

    drivers/cc1200: Don't disable cc1200 interrupts ever
    
    The driver now leaves interrupts always enabled, don't disable them in
    ao_radio_recv_abort as nothing will ever turn them back on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e6a83e73b4b2c56b14853f1e717aeaa9f874728d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jan 19 22:57:39 2023 -0700

    releasing 1.9.13

commit 8e42773e7834638464b46495123dbdc2356032bf
Merge: a6c32739 7fe1408a
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jan 19 22:55:56 2023 -0700

    Merge branch 'master' into branch-1.9

commit 7fe1408af6fd65c13cebf33d7bb7bf8517d8ce1e
Merge: 234b275d 5f007934
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jan 19 22:51:27 2023 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 5f007934c12863b5df1adc8d286b20b3488b5a6f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 19 17:28:36 2023 -0800

    Version 1.9.13
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97e6f06783006f59dd596d4f3d741408a1e4e5b1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 19 17:27:18 2023 -0800

    doc: Update copyright year to 2023
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1803c15b9d9110df9e54374b2576681835d6cd87
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 19 17:27:02 2023 -0800

    doc: Add release notes for 1.9.13
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96181ff1e0d376d7a2c9519abbf4f346d8fd47ea
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jan 19 22:41:24 2023 -0700

    doc: update EasyMotor behavior description for firmware 1.9.13 and later

commit 234b275db125304829d1859713388775fd3791db
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jan 19 22:41:24 2023 -0700

    doc: update EasyMotor behavior description for firmware 1.9.13 and later

commit 22f9fb47d97ba13f6b30fab25bce552bccc91997
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 19 17:39:42 2023 -0800

    Disable TM v4.0 firmware for 1.9.13
    
    This will be in 1.9.14
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3021764629a438d1d1b0323a09d6fb2350ce1bfb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 19 17:28:36 2023 -0800

    Version 1.9.13
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2689b30cdccba18d46505774aafc8e6119948191
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 19 17:27:18 2023 -0800

    doc: Update copyright year to 2023
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 399c85245542d95f05063fdd34939dc746f1ea2d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 19 17:27:02 2023 -0800

    doc: Add release notes for 1.9.13
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 691869aa6c542999a4e915c23b6696451dd42f65
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 19 17:20:44 2023 -0800

    altos: Add makefiles for telemega v6
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4ce0ce186b68497cfb14a400410fdd38aa93abc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 19 14:04:50 2023 -0800

    altos/easymotor: Move pressure conversion code to ao_motor_flight.c
    
    This inline function uses a pile of constants which aren't defined in
    ao_pins.h, so move it to ao_motor_flight.c where it is used
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 28e4cb24e0f0ee5abf66c5a0466edfd0e31f4df0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 19 13:20:56 2023 -0800

    easymotor-v3: Fix pressure to adc conversion to use reference voltage
    
    Wasn't taking reference voltage into account, which meant the computed values
    were 3.3 times too high.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b40813fdafce4ebd635aceb4c32355339a4d98d
Merge: 026ab589 4c61c113
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 19 12:21:32 2023 -0800

    Merge branch 'easymotor-flight'

commit 026ab589d0ade3dd59d26888fffd8699ef534671
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 19 12:18:46 2023 -0800

    altos/telelco: Add some debug aids for TeleLCO event stuff
    
    Use (debug & 2) to select just event debugging.
    Add 'pretend' mode to cycle through all possible pad boxes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee49d3c202e1fee14328006e2beb2e774313de2e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 27 21:33:14 2022 -0800

    altoslib: Add TeleMega v6 support
    
    New sensor (bmi088) support, plus other changes as needed. Also found
    some places missing TeleMega-v5 support?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96444c1e0e6a1c179d9695b454012d0b16d0a76c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 27 21:32:39 2022 -0800

    ao-tools: Update ao-eeprom for TeleMega v6
    
    Add new log file format; no other changes needed here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95d39febfa9b6c6f2696fb1b47cf72aa808ec7c9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 27 21:31:38 2022 -0800

    ao-tools: Fix buffer overflow in lib/ao-hex.c
    
    ao_hex_file_create allocated a buffer too short when writing EOF.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08f13d3301bfcf9a5b9b566df4ffd4ed33f236d0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 27 21:30:13 2022 -0800

    altos: Split AO_LOG_NORMALIZED support out in telemetry code
    
    This avoids needing per-driver changes to the telemetry code by using
    the normalized data gathering techniques.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d16160ce2207fd248c2d93a4f7a77a05176204d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 27 21:29:12 2022 -0800

    drivers: Add AO_LOG_NORMALIZED support to BMI088 command
    
    Make this driver work in monitor idle mode
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ad4679dd0bd2d759f708a6ab6d0425eb1cbde7c1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 27 21:01:06 2022 -0800

    src/drivers: Ignore printf warnings in ao_aprs.c
    
    This code uses sprintf to generate the tnc buffer, but the compiler doesn't
    really understand the value limits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c34739489b23e729cd7d35c5ec74416fb51164a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 27 20:24:51 2022 -0800

    doc: Update docs for asciidoctor-pdf version 2.x
    
    Some of the theming stuff changed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fc042fa0a77d808fa7670e213e7e0c273200a043
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 17 18:01:01 2022 -0800

    altos: Add TeleMega v6.0
    
    Like TeleMega v5.0, but replaces MPU6000 with BMI088
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d515a031d388bec41583f0335e97ecd78c75864
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 17:06:58 2022 -0700

    altos: Add BMI088 test framework using Nucleo32 board for stm32f042
    
    This allows a BMI088 chip to be connected to a nucleo-32 board
    with an stm32f042 chip to be tested.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc0adb3723e9d383c8a379850c4cb0650003772e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 17:05:51 2022 -0700

    drivers: Add BMI088 driver
    
    Supports the Bosch BMI-088 3-d accel/gyro device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 560767497057c08a6fc3bc24aaba23a8d6192259
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 5 19:26:42 2022 -0800

    altos: Add timeout in MS5607 get_sample code
    
    MISO is supposed to rise when the sample value is ready, but sometimes
    we miss the interrupt which should be generated. I spent a day
    attempting to fix this, but was unable to make it 100%. Instead, add a
    10ms timeout, which is longer than the sample time (8.2ms), and then
    read MISO directly. If the interrupt fires, we'll read a bit sooner.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4af1fba120644f38e91bae283c9ff2ef32c2e49c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 5 19:51:02 2022 -0800

    altos/stmf0: Add ao_spi_put_pins for MS5067 driver
    
    TeleMini needs this on stmf0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ea3f551b3c4649320efe2fd999f01012bca03bd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 5 19:29:28 2022 -0800

    altos/stm: Add ao_spi_put_pins for MS5607 driver
    
    This function re-configures the GPIO mux to disconnect the SPI block
    from the pins driving the MS5607.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4c61c11322b57ed1910bba33bd2ce11a368e6583
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 4 16:33:02 2022 -0800

    easymotor-v3.0: Clean up build bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a467bf13485649419e1205ee788ef0d58b42d01
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 4 16:32:05 2022 -0800

    easymotor-v3.0: Use motor pressure to trigger data logging
    
    Use this instead of acceleration so it can be used on the ground as
    well as for staged flights.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit da253f1ee9510fba93ddf5c1895570eb5081af46
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 4 14:17:58 2022 -0800

    altos: Add timeout for MS5607 ADC conversion
    
    The MS5607 should signal conversion done by pulling MISO low, but in
    case it doesn't, add a 10ms timeout to wake up after the conversion
    should be done.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2eb61af64b8f38d88fff885f0fccdc0100ab233
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 26 09:57:33 2022 -0800

    altoslib: Add notes about updating ao-eeprom for new product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1708f3fa4ff412da8817ba0fa58d05fe7ef44f5
Merge: 414ad269 999cc72a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 26 09:52:37 2022 -0800

    Merge branch 'master'

commit 414ad2696bbe2a2f245ae7bb2ec8f57bc8cc0097
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 26 09:48:19 2022 -0800

    ao-tools/ao-eeprom: Add support for TeleMega v5.0
    
    Same as TeleMega v4.0 (ao-eeprom doesn't do much with imu data)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 999cc72af08ebf9ce0fd44ed00b42a2cd1a53594
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 20 15:57:44 2022 -0800

    Add TeleMetrum v4.0 to release files
    
    Releasing
    altosui/Makefile
    altosui/altos-windows.nsi.in
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6cb7457b87913d5f18b6b87d401b2782d8f665a4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 20 15:56:06 2022 -0800

    altoslib: Handle TeleMetrum v4.0 in idle mode
    
    Handle config data and idle fetch stuff. Note that TM v4.0 differs
    from older versions a bit as it stores config data in the SPI flash
    chip, not in the SoC.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f80839cec9fef10e182901e08dec81a41c28f34b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 20 15:31:27 2022 -0800

    altos: Enable telemetrum telemetry for telemetrum v4.0
    
    This configuration could be done better ...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a616233dcdb3bcc1ac2b16436f3c6a0f3c746a63
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 18 13:06:12 2022 -0700

    doc: add a link to a reference on ARES/RACES use of PowerPole connectors

commit abcc8ca13005155b11d2316cf88be8cfa0294f44
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 18 12:51:08 2022 -0700

    doc: add a warning to TeleLaunch docs about siren volume levels

commit 4ff9f3271f9d20603626c18ee16b20e50c579ddf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 23:37:29 2022 -0800

    altos: Make sure APRS packets are reasonably separated
    
    Don't let them come too close together.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4960336c0ae960bee40fdd337e58fcc8846ac87
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 23:35:40 2022 -0800

    altos/ms5607: Fixup ms5607 changes for other chips
    
    A couple of chips don't bother providing duplex, so allow for that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c3f98370a7244a053f8e4858b8f136e2fd659b2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 23:34:34 2022 -0800

    altos: Add ao_gps_utc_tick
    
    This indicates which tick is associated with the UTC time found
    in the current ao gps data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce20ccccdf9464877a73f6ff2a5f9ce91f88fc27
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 23:33:29 2022 -0800

    attiny, stm32l0: Note that these chips don't support spi duplex
    
    This makes the ms5607 driver use send/recv instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bf40aa4c9ea9844046b7b84342225274622d7c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 22:48:28 2022 -0800

    samd21: Save interrupt pin status before enabling interrupts
    
    Make sure we capture the correct external interrupt pin state before
    anything changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c0a7dfa4ba4b46dabce0ac7daecf0edd5fb6b62
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 22:47:00 2022 -0800

    altos: Avoid modulus in task queue on parts without idiv
    
    Cortex-M0 parts don't have a hardware divide, so doing a modulus
    to compute task hash indexes is super slow. Avoid that by making the sleep
    queue a power of two.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf51520898fb30b289b2e03b31a1719c172cf422
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 22:38:12 2022 -0800

    altos/cc1200: Simplify interrupt handling
    
    Use PKT_SYNC_RXTX for both packet send/recv signaling. This avoids
    needing to flip the interrupt sense around between tx and rx, allowing
    us to leave interrupts always enabled which avoids adventures on
    samd21 with interrupt configuration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9ed81c072f0c4c2044a284176d66be00a1439a40
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 20:44:38 2022 -0800

    telemetrum-v4.0: Correct beeper configuration
    
    Beeper is on PA16, which is TCC2/0 with config E
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a69c3009a0583d04d1f52a88f4b0135b1944ee35
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 19:39:18 2022 -0800

    telemetrum-v4.0: MS5607 doesn't share SPI controller
    
    The PRIVATE_PINS value is a bit misleading.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c450b5cd80534d067a760e5f0768f39a20604761
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 19:38:56 2022 -0800

    fixup for exti restore
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c82b214e34763e0206cd676cae2d82e735ef2576
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 19:38:09 2022 -0800

    samd21: AO_SPI_0_PA04_PA05_PA06 is FUNC_D
    
    Not FUNC_C
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 479bf2d88544f7f848ae42f77b0fbb74ca61ca27
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 19:37:23 2022 -0800

    samd21: Restore pin cfg when exti is disabled
    
    Instead of clearing the pmux, set it back to the previous value as is
    needed by ms5607.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1cdcaea940864bbe531b32f228bc169b50f4d3a9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 19:36:52 2022 -0800

    samd21: Limit SPI baud value to 1
    
    Keep speeds slow enough
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4cb051d8ec1cdd7fd9cb87129c7425feb21f284e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 19:36:10 2022 -0800

    samd21: PA20 maps to SERCOM3.2 not SERCOM3.3
    
    Flip the DIPO config around for AO_SPI_3_PA22_PA23_PA20
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c182ab460fef614e2b987c808d4b4e2c4240a4f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 19:35:26 2022 -0800

    altos/ms5607: Use duplex for fetching data
    
    Much more efficient than send/recv
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 997d68e13c32118c665fa273c515726c5ab2ce6b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 10 11:47:39 2022 -0800

    telegps: Copy altosui 'beep feet' bits to telegps
    
    Yeah, this is cut&paste coding. Sorry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af241f03c5ec286f536c367b8cd27e9083af792b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 10 11:40:29 2022 -0800

    telemetrum-v4.0: Set USE_SERIAL_1_STDIN to 0
    
    This makes sure the serial driver knows how to manage this port
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 53a9d3b3c2d9fb04d8f5fba42ce19cd13dc65f28
Merge: 31f32f20 543b6d08
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 10 12:34:49 2022 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 31f32f200c3f64b42617638eb2fc390857d2b2e6
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 10 12:34:12 2022 -0700

    ao-tools: return ao-flash-lpc operaton to "full speed"

commit abd437a372932dcc1aafe939e65919a50c203af0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 9 16:29:56 2022 -0800

    metro-m0: Add GPS support
    
    Plug a ublox GPS module into D4(tx)/D3(rx)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4bd22c0cf3fc0358cff263e63ad2cc788be2bb14
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 9 16:29:13 2022 -0800

    samd21: Leave serial RX interrupts enabled
    
    Just discard characters in the ISR. This avoids complex management of
    the enable bit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b0e4fd74d6c6e5ca972d7341c7155663c230e86
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 9 16:28:21 2022 -0800

    drivers/ublox: Clean up some debug mode code
    
    Not used in production, so we didn't catch a couple of type errors.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1dfa369085208a37f1b9c4d42ca85c261abbb1f2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 9 16:02:55 2022 -0800

    telemetrum-v4.0: Remove unused file
    
    Not sure what 'telemetrum.c' was supposed to do, but it's not used.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 543b6d08617fccc55e7dab142017969e5b565690
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Nov 9 09:06:17 2022 -0700

    altosui: force Locale.ROOT during CSV export to avoid commas in decimals

commit c035f20392828c60da75d092eea4d64736316c7b
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Nov 9 08:27:28 2022 -0700

    TeleMetrum v4.0 work in progress

commit 09a2575840f95f9bce6c1da25b04d297455b1487
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 8 16:25:35 2022 -0800

    telemetrum-v4.0: Add beeper and fix ADC defs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9c556954d25daa6fda6771ca6d011d76b5d17524
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 8 16:20:07 2022 -0800

    metro-m0: Hook up ADC sample from A pins
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7bcde16c96f05595969bceef76905aa2e285c66b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 8 16:18:57 2022 -0800

    samd21: Hook up AltOS style ADC
    
    Can't use DMA; samd21 only does ADC in continuous pins. ISR per ADC,
    manually step through.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ca0ed94f30943952b9c63ee558733d37c896b5f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 8 16:17:58 2022 -0800

    samd21: Hook up AltOS timer functionality
    
    Need to run the data sampling stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf793f94a2218b42794fa1ae11babab8cd565a66
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 8 16:17:14 2022 -0800

    samd21: Move DMA channel defs to ao_dma_samd21.h
    
    This way if we need to use DMA for something else, we've got
    a central place to set things up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 925d1cfb19da373249af716a6d7adc6d7450ec25
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 8 16:16:40 2022 -0800

    samd21: Get beep code working
    
    Only supports TCC currently.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f354d17c7f15dcbc8c5b07fe2f950df3cb4552b2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 7 22:23:44 2022 -0800

    metro-m0: Demo pin interrupts
    
    Prints 'pressed' whenever D0 goes low.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 13f0b70a6346c9cfe04e5c494d3f34aa92e0db8b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 7 22:22:26 2022 -0800

    samd21: Wire up pin interrupts
    
    Uses the external interrupt controller. Careful about pin mapping.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca76309700a3f6ec9775f6e6cce5915dcb4515c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 19:31:05 2022 -0800

    altos/telemetrum-v4.0: It links
    
    Still much work to do, but at least it links with most
    of the pieces in place.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ed85dc90345baec2c4143b75c4be819bb6a4d56
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 19:30:38 2022 -0800

    samd21: Stub out beep code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 62381d8582749dc2672a65cb6e7c5b8a404a3b45
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 19:30:27 2022 -0800

    samd21: Stub out exti code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b24faa163ede640305f0660c30d84e558bd2b909
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 19:29:41 2022 -0800

    samd21: Shrink default stack to 512 bytes
    
    Kinda needed to get TM v4.0 to fit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a44cf7f77f0b2e098ef1afc4628898234bf7fb6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 18:33:45 2022 -0800

    altos/telemetrum-v4.0: Almost building
    
    Pin config looks good now, need to get beep and exti drivers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3d95af6866018bf8d472bae192907efcbe5aaa1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 18:33:14 2022 -0800

    samd21: Get serial driver building
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a06c84a27bd760039c522460f79bfe242d2d22c8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 18:31:42 2022 -0800

    samd21: Add SPI configurations used by TM v4.0
    
    SPI 0 on PA04 PA05 PA06
    SPI 3 on PA22 PA23 PA20
    SPI 5 on PB22 PB23 PB03
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e895d310224e612f0294bc953e24ffbe8d29437
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 18:31:16 2022 -0800

    samd21: Get ADC code compiling
    
    This probably isn't complete yet, but it builds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 79613a403cbb545672afc7b169b3a833d587903a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 18:30:31 2022 -0800

    altos/ms5607: Use ao_gpio_set instead of stm_gpio_set
    
    The former is architecture independent.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30149c4764984972eb5d482cfc51657d4ed09ed1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 17:47:57 2022 -0800

    metro-m0: Configure on-board SPI flash part
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9481e33348f098f3df73006641b9a18a04f2c482
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 17:46:56 2022 -0800

    samd21: Add ability to use arbitrary pin configs with SPI
    
    This embeds the DOPO and DIPO configs in the address
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d18ef0a25248f0192c3b539cad36d3de60a6f32
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 15:31:50 2022 -0800

    samd21: Macro-ize the DMA register settings a bit
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 61a3971b7bda2c5a165088befe55467c09292090
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 15:12:33 2022 -0800

    snekboard: Need DMA for SPI now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 183e1bbde14cc33f1e9cc3857dbfc60d2c0c5b82
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 15:11:31 2022 -0800

    samd21: Use DMA for SPI send
    
    Appears to work even
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e5c84201f2a8968ed60941edbc6756c7dbda8a06
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 15:10:31 2022 -0800

    samd21: Fix value defines to be unsigned long
    
    This makes the compiler happy
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbff1483ae7469d3961341a1cfdfeb8b4bb557c1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 15:09:55 2022 -0800

    samd21: Avoid divides in boot loader
    
    The divide code is huge and overflows flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4839569abef7f1d9592a9da5d40fe67dcc048ce1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 15:08:56 2022 -0800

    samd21: Fix up DMA driver
    
    Surprisingly few changes, just some function signatures and a few bit
    twiddles.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4be4ffe72c5f678a66658e9e61d3cfac7f20a9b3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 15:07:46 2022 -0800

    altos: Add metro-m0 port for SAMD21G18 testing
    
    Useful as a test target
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 13a9247afabfaf93ebf46f9a33862864d2772074
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 5 21:05:13 2022 -0700

    samd21: Configure ROM/RAM values per device and provide linker scripts for each
    
    SAMD21 has 4-32k of RAM and 32-256K of ROM
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 608640858d0d02ac06fca22aa3b9db9c89733adb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 5 20:53:23 2022 -0700

    This is what I'm using locally for flashing samd21 parts
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fdc1facebf1d2818394b155a91b68e06db198728
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 5 15:18:27 2022 -0700

    snekboard: Add samd21 SPI test function
    
    Just sends 'hello'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a54f4fae343b7524db508dc1a29d36847a2decde
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 16:33:28 2022 -0700

    altos: Get SAMD21 SPI driver working in non-DMA mode
    
    Only sercom0, and only with fixed pin configurations
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba28c5e7f6aa3d41abc1f598dbc3c2689c9bef9c
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 4 03:15:08 2022 -0600

    ao-tools: increase robustness of turnon_easymotor

commit 1066699ea2e0377af67b3b0c32ec1b023dea0719
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 4 02:56:31 2022 -0600

    ao-bringup: final production test script for EasyMotor v3

commit a2fdfd4f9c92c1d3331f8be0e15ae19209b4ee15
Merge: 28fd8e6f 4a1f441b
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 4 02:41:43 2022 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 28fd8e6f157c37b08b6a17dae664597f01e8aa8a
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 4 02:41:11 2022 -0600

    ao-tools: new ao-test-pressure utility for bench testing EasyMotor

commit fddda6bbe5accb4868ee9bbc337937147da92ad8
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 4 02:40:53 2022 -0600

    update Releasing to include EasyMini v3.0 loader

commit bcc15fb429724956e72f06a4f4b1002b1def7a94
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 4 02:39:34 2022 -0600

    ao-tools: don't do 'm 0' after 'E 0' since EasyMotor doesn't support it

commit 4a1f441b746d4c9d1cb4a52401d76b5e81ba6f48
Merge: e5feac1a d80c1317
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Nov 2 11:34:35 2022 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit e5feac1a3db00816e82cd6b1b4dbde62e40d16a6
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Nov 2 11:33:29 2022 -0600

    EasyMotor v3 production script working, sans pressure input test

commit d80c1317f596f73d192e6fbb33c3579d54802182
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 1 13:00:22 2022 -0700

    Add option to beep max height in feet rather than just meters
    
    Available on all products, plus config UI changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d999b56de8775cd5c2f98f913e555febd92357a9
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Nov 1 10:41:03 2022 -0600

    easymini v3.0 production scripts working

commit 274522bc26910051e30aaebd78e96794161b87e8
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Oct 28 23:43:40 2022 -0600

    update Releasing with tweaks made during 1.9.12 release process

commit a6c32739c75d8c0369617f575a83d70031faf36a
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Oct 28 23:10:24 2022 -0600

    updating changelog for 1.9.12 release

commit bdabc6814b066a9b17a6557910f21b1ed03de3f0
Merge: 37dda254 c5e8826a
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Oct 28 23:10:00 2022 -0600

    Merge branch 'master' into branch-1.9

commit c5e8826aa260d4aca492d684b94adc7eea0254eb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 21:07:15 2022 -0700

    Version 1.9.12
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 140a84ba8ac1e6548ab63ff586cf214d87f727a4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 28 21:57:02 2022 -0700

    Auto-detect windows signing stuff
    
    Still build installers even without signing key
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c4f9aa882256182485f7f2086221841368ddfc7
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Oct 28 22:28:40 2022 -0600

    update Releasing to include reference to jsign as a release dependency

commit 5fd95471791842234a1840477c55ba175fff5a8c
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Oct 28 22:20:03 2022 -0600

    fat: sign Windows installers with our new code signing certificate

commit ef969428f293e5155c00af514ce0782a7cdf25d5
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Oct 28 21:47:04 2022 -0600

    doc: include reference to Loki Research closures in motortest document

commit 74c73edc93110874636b4bbbe01f9f0327230b50
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 21:35:55 2022 -0700

    altosuilib: Remove some debug printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 055803ceca56065ea2253ab3eab20a5defd00135
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 21:21:28 2022 -0700

    altosui: Ship motortest.pdf with packaged builds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f57cba7dd193c5608be187d3d81781215ab38a44
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Oct 27 22:31:34 2022 -0600

    doc: additional improvements to motortest manual

commit f249b61f403b8d2a042641c5ebe0fe4a720ae436
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Oct 27 22:20:19 2022 -0600

    fix mailing list reference to use mailman3 path

commit 975e3133e25c6fb5ea0c0b2487ea34e528660a45
Merge: 05278307 bda33b76
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Oct 28 21:49:16 2022 -0600

    Merge branch 'samd21' of ssh://git.gag.com/scm/git/fw/altos into samd21

commit edef072dd5cffdbd3e8346719a81808b17bdc570
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 21:05:10 2022 -0700

    Add EasyMotor v3 firmware to release
    
    Remove EasyMotor v2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4be94096281536db12378c6fee66ffb774a3eac
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 21:01:19 2022 -0700

    doc: Add preliminary 1.9.12 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 12b03f494462bdf8c076ea474176ec14a18026fa
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 21:00:47 2022 -0700

    doc: Add specs for EasyMini v3 and EasyMotor v3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2fdf4e798bd67b0d7e96f2b8fff49915b71b089e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 21:00:07 2022 -0700

    altosuilib: Limit EasyMotor graphs to motor pressure and accel by default
    
    Change which axes are turned on when the graph is created.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 76f0fe177a38bd16e346edf0808ee8fca343f1a2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 20:59:20 2022 -0700

    altoslib: Map log format back to USB device id
    
    This lets us use the device_id for both telem and eeprom files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14a65822fa2a8bb120638633b068847c8a0197b9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 19:39:16 2022 -0700

    altos: Allow 'c a 0' without Syntax Error
    
    Need to clear error after checking for second value in accel cal
    command.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7172638c3810f6c39e4262fa80edf5ef0dec62d8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 19:25:02 2022 -0700

    easymotor-v3: Fix beeper config
    
    the branch had different beeper config code than mainline.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 898eeb609aa7eb078161a78ac48c727a5255a51c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 19:19:59 2022 -0700

    ao-eeprom: Handle merge conflict from easymotor-v3 branch
    
    Had two copies of the new easymotor log format parsing bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 611ef4497b97bcf5239d6bc2ee13eeba9efd1503
Merge: 1e694ad4 083464b5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 19:16:39 2022 -0700

    Merge branch 'easymotor-v3'

commit 1e694ad4f67735585f0897e2dffac755868f3150
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 17:50:36 2022 -0700

    Add EasyMini v3.0 firmware to release
    
    Followed instructions in Releasing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a81f5a78172663376ad9687976b9821a755d5e31
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 17:43:08 2022 -0700

    altos: Allow setting telemetry interval to zero without crashing
    
    Setting telemetry interval to zero means disable telemetry, but the
    code was using the zero value to compute a bunch of packet delays,
    which involved dividing by the interval value causing a crash when it
    was zero. Skip those subsequent computations as they won't be used
    anyways.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bda33b7697456516c3022f91d2119a56448b42bb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 17:34:56 2022 -0700

    altos/snekboard: Indicate that USB is used for stdio
    
    This isn't the default for some reason?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59f08a3079ccecaeb91b637e7d311f3f98d10c42
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 17:34:11 2022 -0700

    altos/samd21: Automatically erase flash when writing
    
    Need to erase pages before writing them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7e6cbeaf3e84935b38da8605a6d5bb702eff3a5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 17:33:09 2022 -0700

    altos/samd21: Get USB driver working in AltOS
    
    Make sure it deals with the stdio mux, enable the clock for the GPIO
    device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0585dd012a9f76f1ad0f3a85d03075125704dfd3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 17:32:35 2022 -0700

    altos/samd21: Add register definitions
    
    This adds symbols for all of the device registers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4a63617f0eb825a295ae8ee1ee0caf4580b7a13
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 17:31:27 2022 -0700

    ao-tools: Add ao-flash-samd21 script
    
    This takes an .elf or .ihx file and flashes that to a SAMD21 based
    board using openocd. Note that you must have a hacked version of
    OpenOCD for this to work via the ST-link device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d116df20ae2d13bbc29344a91e557448cd8c19b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 13:57:08 2022 -0700

    altos: Add sample samd21 application for snekboard
    
    This runs a primitive application and flash loader on snekboard for
    samd21 development.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c59892cd337162c63e5d7ba8e8eec779d201022d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 13:55:43 2022 -0700

    altos: Add SAMD21 bits
    
    Brought back from snek, these bits provide Altos support for the Atmel
    SAMD21 family of chips.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3a7ae9e964c9554a667a09d6b437fef136bc0fa0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 13:55:04 2022 -0700

    altos: Use --gc-sections
    
    This allows the linker to discard unused functions.
    
    Don't use -ffunctions-sections and -fdata-sections as that eliminates
    several optimization opportunities and increases code size.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1523a986a7c2e8402c628e2697e44fe6281c164e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 13:54:24 2022 -0700

    altos: Switch LED pin number to 8 bits
    
    This assumes each port has fewer than 256 pins and avoids some
    compiler warnings
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 48a8ae2d38ecad5aa84b2158045c6a2fd8abe5ab
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 16:48:05 2022 -0700

    altos: Increase AES IV buffer to hold maximum AES state
    
    The compiler emits warnings if this buffer is only 16 bytes. I'm hoping
    that's because the max key size could be 256 bits instead of 128 bits?
    
    In any case, this makes the compiler happy.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 05278307f5e9fd5f8b1a53078e6f3b125785b019
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 15 21:40:50 2022 -0600

    first stab at support for TeleMetrum v4.0

commit 01811a649548987d3c5c29ca13725717d090502b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 17:34:56 2022 -0700

    altos/snekboard: Indicate that USB is used for stdio
    
    This isn't the default for some reason?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38a40c850716c545004dae01412b3350e5ef8cfd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 17:34:11 2022 -0700

    altos/samd21: Automatically erase flash when writing
    
    Need to erase pages before writing them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd088d263172dbe9ffe399a93a836cac26a37708
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 17:33:09 2022 -0700

    altos/samd21: Get USB driver working in AltOS
    
    Make sure it deals with the stdio mux, enable the clock for the GPIO
    device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4a6a5de714f346b7c57c77e5f6712d39c2042479
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 17:32:35 2022 -0700

    altos/samd21: Add register definitions
    
    This adds symbols for all of the device registers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be0a7f000250704bcdbad82aa4ef4d9966fc6307
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 17:31:27 2022 -0700

    ao-tools: Add ao-flash-samd21 script
    
    This takes an .elf or .ihx file and flashes that to a SAMD21 based
    board using openocd. Note that you must have a hacked version of
    OpenOCD for this to work via the ST-link device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c869985188ce9d28c332e449b36c4c88077cd587
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 13:57:08 2022 -0700

    altos: Add sample samd21 application for snekboard
    
    This runs a primitive application and flash loader on snekboard for
    samd21 development.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5e7e4303f161e38ac2d84110dccafc67b3aa7fc8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 13:55:43 2022 -0700

    altos: Add SAMD21 bits
    
    Brought back from snek, these bits provide Altos support for the Atmel
    SAMD21 family of chips.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 643a1f736d2e57c577458d0e4d2948718d90b301
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 13:55:04 2022 -0700

    altos: Use -ffunction-sections -fdata-sections
    
    This allows the linker to discard unused functions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1f7bf876a67dc176a7a24b241c6dd3fe780082d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 25 13:54:24 2022 -0700

    altos: Switch LED pin number to 8 bits
    
    This assumes each port has fewer than 256 pins and avoids some
    compiler warnings
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3735e1eb27afb873d60164a79a9e2769dc92b3a3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 24 15:54:20 2022 -0700

    easymini: Elide symbols from combined .ihx file
    
    Also add combined hex file to easymini v1.0 for testing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d299191a298f6b6ffeadff15334738810062cf58
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 24 15:53:04 2022 -0700

    ao-elftohex: Add '-n' option to elide symbol table from output
    
    The symbol table is a non-standard Altus Metrum hex file extension;
    add this option to allow use with standard hex file tools.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc4de8365de5829b587a845e0517e8c5fc8c9e29
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 19 09:20:23 2022 -0700

    easymini-v3.0: Create combined .ihx file for testing
    
    This doesn't set the serial number, so it's not useful for production,
    but it should at least provide an easy way to check a board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ed795c24e6269a10e74b9bc3c385e787bcc230fe
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 19 09:09:04 2022 -0700

    ao-elftohex: Allow multiple elf files to be merged together
    
    This allows combining the flash loader and core firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d963cf10f3f54f77a6edf8e7843f70c0268cd31
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 19 08:37:31 2022 -0700

    doc: Update call sign
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 065c60d38f38343bd1f319a87f6b50367a3abbe3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 4 21:05:47 2022 -0700

    altos: Document easymotor record length
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 681638032041efcb05b9623e2a0332ca4e2d0958
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 4 21:05:25 2022 -0700

    ao-eeprom: Add easy motor support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41cf6f6f65681961ed98a59b9fc9da4fe5abef5a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 4 21:04:28 2022 -0700

    altoslib: Replace EasyMotor v2 code with v3
    
    No v2 boards remain in usable condition and we didn't create a new log
    format value for v3, so just replace the v2 code with v3.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 37dda2541ce440a40fcd4dc8387f7cb1cd3f0816
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun May 29 21:08:03 2022 -0600

    releasing 1.9.11

commit 7904b36eaae2468d76f2627bebd86b663afea1f8
Merge: 8970d45e 4e237bd4
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun May 29 21:07:44 2022 -0600

    Merge branch 'master' into branch-1.9

commit 4e237bd43fef1858f88ff8f8750759e16442ea7e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 29 17:50:47 2022 -0700

    Version 1.9.11
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 922a6e4f5c79fe46c1dca4df42c1c97e67dc7d68
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 29 17:48:01 2022 -0700

    doc: Update copyrights to 2022
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 019884004098adfc6e9f285d127a791f4204b180
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 29 17:47:41 2022 -0700

    doc: Add release notes for 1.9.11
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce3e42c286755f3c4e1ee6dedc87e15a76343a37
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 29 17:46:43 2022 -0700

    doc: Document 10mw limit configuration
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2ec815a17e9327414bab7ea09ed483c4f47f460
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 20 16:20:13 2022 -0700

    src: Add easymini-v3.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d95995ec702a891884f353cf2078d7ed3261c5c2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 20 16:20:32 2022 -0700

    lpc: Make beeper configurable
    
    Need to set the port, pin, timer and channel values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 03753fbddfbc82f18b2e4527a2e3afc58ea972f4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 20 16:41:19 2022 -0700

    lpc: ADC 5 was busted
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6edf62c6a1f41fa5cd698067d2327b4847708cc8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 4 17:06:36 2022 -0700

    ao-tools/ao-eeprom: Dump converted info for F packets
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e4fb5c9bc33bb6d2a337f89daec4e6bb94cd8d8
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 12 11:13:44 2022 -0600

    doc: add an appendix with examples for configurable pyro channels

commit 083464b52c835c09a66c06a87246fcd138748a5d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 9 22:38:28 2022 -0700

    ao-eeprom: Add EasyMotor decode
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 61b837129a1b1bbf17413957006fa31a305f6247
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 9 22:50:21 2022 -0500

    recognize EasyMotor-v3 too

commit 9cded6d2b2888b6fd1dbcb08d7404fbc8f52ba60
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 6 23:29:31 2022 -0700

    altos: Add EasyMotor-v3.0 to regular builds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3a2adf8011237852187046a551216736bd1e6bbb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 6 23:28:40 2022 -0700

    lpc: Shuffle more bits around for flash loader
    
    Having a fixed value at 0x2fc means splitting flash and trying to make
    enough space on both sides. Sigh.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72d0c00a063338642a3448f39b0308751285e5ee
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 6 23:20:03 2022 -0700

    easymotor-v3: Increase ADXL spi speed back to normal, remove delay
    
    All done debugging, it seems to work on EasyMotor now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 40a56ed2b5af30c93daa74a15f21e7c8b4cb2a1a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 6 22:45:41 2022 -0700

    lpc: Add SPI mode support. Use for ADXL375 on easymotor
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 434e98d39a19af9c3cf52cba041091f190972a83
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 6 22:32:03 2022 -0700

    reduce adxl speed to 100kHz
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6a7ea9168f1669840eef0fb080759968f4a2f97
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 6 22:31:39 2022 -0700

    Disable adxl debug, set long delay
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b930b52922a1bbb34cb3fda67c2e9b4695a7330f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 6 22:14:32 2022 -0700

    altos: Fix ADXL375 SPI mode definitions and usage
    
    3-wire mode is 1, 4-wire mode is 0. Fortunately, I also messed up the
    shift value, so the 1 got shifted on top of one of the fixed-value bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c49bd3cb0c31a51fae79ddc92237cc309be9a242
Merge: d225adc3 b140da92
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Apr 6 22:51:13 2022 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit b140da92536d7c48ba37868f1c2afce7bb86dfdb
Merge: 1d208c95 302e9b8f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 5 17:55:06 2022 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 1d208c9509f03f7e2c913abe5c0dd78ef0083c0f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 5 17:54:32 2022 -0600

    use correct test script for v1.0 easymega

commit f35d18ca773a109fea572ee1e7134bdc5c4bce14
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 4 14:15:17 2022 -0700

    lpc: Attempt to make beeper generate correct tone
    
    The timer docs are confusing; I can't tell how the PWM configuration
    works.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6659ec1002da325588a631d9c43a7a9b9a4dbfe3
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 4 01:21:44 2022 -0600

    fix SPI index definition

commit 16004c790189bc439285b8afb599ae2b02a13c95
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 4 01:14:36 2022 -0600

    Revert "adxl375: Disable spi duplex"
    
    This reverts commit 21e6dad505677a6b2e19844638ea5b09038b04ae.

commit 3fb95b34a85fb79713c258937a9005faf6f89a03
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 4 00:00:00 2022 -0700

    adxl375: Disable spi duplex
    
    See if this fixes LPC
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06ec7480b669a5bc007d82fbdbe56e4a1a4cf68c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 3 23:53:24 2022 -0700

    easymotor-v3: enable adxl debugging
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5740b82174c70888f6f047917574567bcbca58dc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 3 23:31:44 2022 -0700

    lpc: Fixes for timer configuration
    
    Missed one magic value to make the beeper configurable

commit a6dc1a7098e44bd1b3250b12ca6fda3bb626cbb1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 3 23:23:51 2022 -0700

    lpc: Fix name of timer ioconf constants
    
    All iopin configuration values are per-pin, so they all need to have
    the pin name included in the name.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 741796d39437e850fc255b8b324530bb988b0797
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 3 23:23:51 2022 -0700

    lpc: Fix name of timer ioconf for pio0_1
    
    There are lots more...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9df0b79ed7d66369b31dbdc7acde8e23f5f8612e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 3 23:18:28 2022 -0700

    lpc: Stick magic value at 0x2fc to let us use PIO0_1
    
    This pin is used by the built-in ROM boot loader code to force
    ISP. That keeps us from attaching anything that might be connected to
    ground.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b15c98449da54bae8c4efbfddc7734aeaa43b04
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 3 22:17:15 2022 -0700

    easymotor-v3: Configure beeper
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e585a947c7f07fe204e50fc47beb1cc1e479718
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 3 22:16:48 2022 -0700

    lpc: Make beeper timer configurable
    
    Allow use of any 32-bit timer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 243da063ef0dae656f940eb81ada55867924406f
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 4 00:19:42 2022 -0600

    get ram usage under control, etc

commit 987ad2eb3a89ad920988d38fe8068dda1cd6f16d
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 3 22:11:13 2022 -0600

    a few config tweaks

commit 2bec5edbb068cab88b8d4f30f609712feb186a30
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 3 18:12:20 2022 -0600

    first cut at EasyMotor v3 support

commit 9519f7fc894f08d4841556d0efc520b9cc08a899
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 25 12:34:31 2022 -0700

    need to save .bin for TeleGPS v2.0

commit 302e9b8fda7b36e5009044086737b7791f81addd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 4 14:40:37 2022 -0700

    telegps-v0.3: Reduce stack size to fit in ram
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ad23f26709b822c6d30f7160ffb2f2f51a8af4ce
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 27 16:10:30 2022 -0800

    ao-telem: Read from stdin if no filenames
    
    Make ao-telem work as a filter if no filenames are passed on the
    command line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d225adc3af9e5726d436cbbdbf8dcc5837e50804
Merge: 3759d670 85dd82b2
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 4 01:22:04 2022 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit d0160ed97b432d59e2111d8b17580b9a83e0b03b
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Feb 25 22:11:17 2022 -0700

    dial it down a bit more to not exceed +10 dBm, or 10 mW

commit 3e7661761f6ea81b6a9732359edf4c5ada3e8e20
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 25 15:43:15 2022 -0800

    Allow TX power to be limited to 10mW
    
    This allows the radio power to be limited so that it doesn't generate
    more than 10mW.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58a0a242f31ebe4532564f5c04162e8fb82f9aeb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 21 09:40:07 2022 -0800

    Version 1.9.10.4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57a6f844e2490a963ce1ef3a2beb9e47258967af
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 21 09:43:54 2022 -0800

    altos: Document how delay_done is used in ao_pyro.c
    
    delay_done is the time at which the delay finishes, but non-zero
    values also indicate that some delay is pending. Add a comment about
    why the value is set to 1 when it is zero, and switch the tests of
    this value to comparisons against zero.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d29047255c8e78d4ab2beeef678d466a6bfc0ae2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 19 15:35:31 2022 -0800

    altos: Deal with 8-character version numbers
    
    With 8 characters, the version number isn't null-terminated, so we
    need to limit use to the available length in a couple of places.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 76358fb6e68c1f466e4d76a291f60e1053aa50d0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 21:48:01 2022 -0800

    altos: Add -Wconversion
    
    This adds the -Wconversion flag to detect potential mistakes in
    implicit type conversion.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 48971ced7999b7d1265be967b971ccb9555ce40e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 21:46:57 2022 -0800

    altos/telemega-v5.0: Add casts to beep values
    
    Need to be careful with types to make sure the math doesn't overflow.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d53868e67b51d8908e55c6a2e7a3b687529957d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 21:46:07 2022 -0800

    ao_lco_v2: Add casts to reduce -Wconversion warnings
    
    No bugs identified
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f06b7c66dfa05c51d8b2afbc1e3c94e20767e4f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 21:44:52 2022 -0800

    ao_lco_v2: Use int32_t for temporary box value in step_box
    
    Stepping to the next box will generate negative values and values
    beyond the highest box number. Use a type capable of holding all of
    those values, instead of int16_t.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2f84f860917f88a34571b8b0f64d03adf5c8f54
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 21:42:50 2022 -0800

    telefireone-v1.0: Use a boolean value for ao_log_running
    
    Instead of reading a hex value and saving it directly, use
    zero/none-zero to compute a boolean instead, avoiding a type
    conversion warning.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52e9443d540aa5d3f29576a0440149b1b0f9c359
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 21:41:44 2022 -0800

    altos/telefire: Add cast to AO_LED_CONTINUITY to eliminate -Wconversion warning
    
    All of these products had the same warning.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 877d4643b45ca2099f602390b71e1c77d5e11ef1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 21:38:25 2022 -0800

    altos/stmf0: Add casts to reduce -Wconversion warnings. Use AO_TICK_TYPE
    
    No bugs identified. Serial timeout types updated to AO_TICK_TYPE.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2d4484e1577edc66c52bcb260329387f93123a6d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 21:34:37 2022 -0800

    altos/stm32l0: Add casts to reduce -Wconversion warnings
    
    No bugs identified
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5b3a457f232e39977a437fc52256fc15c612b377
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 21:32:07 2022 -0800

    altos/stm: Add casts to reduce -Wconversion warnings
    
    No bugs identified
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 709666e00339be7b12730c1f4d35721db292f815
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 17:53:41 2022 -0800

    ao_micropeak.c: Add casts to reduce -Wconversion warnings
    
    No bugs identified
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 63fc45973ec92bf3ef7122da0f76d6e111ecd342
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 17:53:11 2022 -0800

    ao_flash_task: Add casts to reduce -Wconversion warnings
    
    No bugs identified
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c5b9b2c6bf57aea4332177e7fb0eb2d490f4f6e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 17:52:11 2022 -0800

    altos/micropeak-v2.0: Add casts to reduce -Wconversion warnings
    
    No bugs identified
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e80a45c1565b14479e3a4cfc968d49b13cef4fe0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 17:49:42 2022 -0800

    altos/lpc: Add casts to reduce -Wconversion warnings
    
    Most of these were caused by int/long mixes as uint32_t is 'long' on
    arm for reasons, meaning that bare int constants need to be cast to
    avoid a warning.
    
    No bugs identified.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2c02cac5442015fee14f88ee016c687c53d8576
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 17:38:56 2022 -0800

    ao_tracker: Fix tracker_interval type to match config type (plus -Wconversion)
    
    config.tracker_interval is uint8_t, so make the local copy match that
    type.
    
    Also fix other warnings found by -Wconversion.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 63c089e2e110a7fe501dd097bd7d26ce4feeb935
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 17:36:12 2022 -0800

    ao_telemetry: Add casts to reduce -Wconversion warnings
    
    No bugs noted
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a2505dc4be4a368911533d42d6344ad03b220468
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 17:34:41 2022 -0800

    ao_telemetry: Use int16_t types for telemetry packet intervals
    
    This avoids concerns about overflow from int8_t types when computing
    long intervals between packets as the base interface type was an
    int16_t. This should help deal with higher sample rate sensors when
    that occurs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 86bd5f53ba4b13df502ec1bc70512f30cac94010
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:49:48 2022 -0800

    ao_telemetry: Switch time variables to AO_TICK_TYPE
    
    This makes sure telemetry packet intervals are computed correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b10049d847fac855b1139d6441de853641b7365b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:44:03 2022 -0800

    ao_task: Task ids are 8-bits, fix type in struct ao_task
    
    These are densely allocated and should never be larger than the
    maximum number of task slots, so fix the type to be 8-bits just like
    all other places where a task_id is used.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55ca3cb64e19664e5ffc19d6ff92f46e4252f3b8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:40:19 2022 -0800

    ao_serial: Change serial_sleep_for APIs to use AO_TICK_TYPE
    
    These timeouts should all be short, but there's no reason to use a
    different type.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a95afdd417119da6089403f870959a726b0c548
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:39:45 2022 -0800

    kalman, report, romconfig, sample, send_packet: Clean up -Wconversion warnings
    
    No bugs detected
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8275b761d182ec587104f084f331d7c2ebc2d1e6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:35:18 2022 -0800

    ao_monitor: Clean up -Wconversion warnings
    
    No bugs detected
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b5962ab4f804df3145481a54b00fed27561f8725
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:33:12 2022 -0800

    ao_radio_cmac_cmd: Clean up types for -Wconversion
    
    Use more reasonable types for lengths and the like to avoid
    overflows. No actual bugs detected.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit acc642801aa5f8c0c05bde134e5924fe957ce023
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:31:09 2022 -0800

    ao_radio_cmac: Make recv timeouts AO_TICK_TYPE
    
    While these should generally be short enough to live in a 16-bit type,
    use AO_TICK_TYPE for consistency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f385aabe458ed162fa8b45afc433ee5de8bb7b60
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:18:49 2022 -0800

    ao_micro: Add casts to micropeak code for -Wconversion warnings
    
    No bugs detected
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b123c095384b57446d45d8678dff5448a7c659e4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:12:47 2022 -0800

    ao_log: Add casts to reduce -Wconversion warnings
    
    No bugs noted here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b870641ff0299b973de815523bdfd3db5be8bbf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:11:07 2022 -0800

    ao_log: Fix sensor time triggers to use AO_TICK_TYPE
    
    These values were used to determine when various log information would
    be recorded. Using the wrong type meant that they would always
    trigger, causing the log to fill up rapidly with data that should be
    sampled at a lower rate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc2d28eab4a998bf5fc60831aaa48d094cbe8785
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:10:06 2022 -0800

    more 16-bit log tick values

commit 9020a82d8b1496bc47dbe454b0735467b5a599b8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:06:18 2022 -0800

    ao_log: Change flight type to uint16_t, widen APIs dealing with flight numbers to int32_t
    
    Real Flight numbers are 16-bit unsigned values, but APIs using them
    pass values that areoverloaded to also represent broken log slots
    using negative numbers. This means that these APIs need to be able to
    represent all 65535 possible flight numbers *and* all possible log
    slots as negative values. Switch the variables holding only flight
    numbers to uint16_t and those holding either a flight number or log
    slot to int32_t.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e73e5298206db0e781cc76ee151e96d29f29341
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:00:38 2022 -0800

    ao_gps, ao_log: Make conversions to 16-bit time log values explicit
    
    All log formats record only the low 16-bits of the time value, make
    conversions to those explicit to silence -Wconversion warnings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7917ec1f105f39799acbea0f4c28d25db4f66eb4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 14:50:58 2022 -0800

    ao_flight: ao_interval_end type was too small, could cause premature landing state
    
    ao_interval_end is used to provide a window of time during which the
    max/min values for sensors are measured. After that time expires,
    those bounds are compared to see if the airframe has been stable and
    should be moved to landing state. With a type that is too small, that
    could happen immediately after transitioning to main (for baro-enabled
    devices) or coast (for accel-only devices). For baro devices, this
    would disable any redundant main firing events. For accel-only
    devices, this could disable all events occuring after coast, including
    firing separation charges or motor igniters.
    
    There are also a couple of additional changes to reduce -Wconversion
    messages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f06cf3e8fe0531b927d5e11ae2b0e9af3663b0f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 14:43:31 2022 -0800

    ao_convert_pa: Switch array index to unsigned type
    
    This seems more appropriate for this use.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4aa984bbcce1cdc4f4b82516a9f2a32cf5061dfa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 14:42:45 2022 -0800

    ao_companion: Make motor_number uint16_t
    
    Make it match the types used elsewhere
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f51316c02a8385223567e1aa8e3f5a0b74c16cd6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 14:41:59 2022 -0800

    fifo: Add casts to fifo operation macros for -Wconversion
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba0239ca6839605c7ce45d56677bb9a3b782b7f2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 14:41:10 2022 -0800

    beep, cmd, config, convert_volt, data, distance, fec, kalman: -Wconversion warnings
    
    No bugs noted, just adding casts to resolve -Wconversion warnings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bdf0671cb36daca741c4842a37a3fc71744a63a2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 14:15:42 2022 -0800

    altos/ao_freq: Use uint32_t for radio freq setting value
    
    These values are always unsigned; changing this resolves some
    -Wconversion messages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d276e01ba96e8174e590b101cc9ef002e6cb67b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 14:13:53 2022 -0800

    altos/ao_stdio: use uint8_t for stdio index
    
    This makes type usage of this value consistent. Also fix another
    -Wconversion warning.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 161f2a3aa7f7364c6d972df4199200828dfe3294
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 14:12:31 2022 -0800

    altos: Switch ao_radio_recv timeout to AO_TICK_TYPE
    
    Make sure all times are in the wider type.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72a452d1ca5b3f9f1defef47465e24a10ca72d58
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 14:10:31 2022 -0800

    drivers/ao_rn4678: Fix timeouts to use AO_TICK_TYPE
    
    Also fix other -Wconversion messages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f56c5763d1c078c5de15e92103b751ea26b7684
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 14:08:56 2022 -0800

    drivers/ao_quadrature: Fix -Wconversion warnings
    
    No bugs detected.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dbaef3237cc6874faf8eb9030a15b578b58fd83f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 14:06:25 2022 -0800

    drivers/ao_pad: Convert from/to 16-bit times over the air
    
    The radio protocol sends only 16 bits of time, make sure we translate
    from/to those correctly. No bugs detected, just casts added to
    clarify. Also fix other -Wconversion warnings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 11d6e27bfd94ce58b702bfd0889f064ce1ef5a48
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 14:00:43 2022 -0800

    drivers/ao_packet: Switch time values to AO_TICK_TYPE
    
    Make sure times are kept in the right type. Also resolved other
    -Wconversion issues.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c309956389acc01f784f3d0e11745f5ac0a77e06
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 13:59:26 2022 -0800

    drivers: Resolve -Wconversion in m25, mma655x, mmc5983, mpu and ms5607
    
    No bugs identified.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9c27459fe1417b460f01f053bc44474623b1cbca
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 09:33:17 2022 -0800

    drivers/ao_lco: Fix box types to be uint16_t. Also clean other -Wconversion messages
    
    Old LCO code uses 0x1000 as magic value for "DRAG" box, so we need 16
    bits. Switch all box variables to 16 bits, use int32_t when switching
    box numbers to deal with negative values and still hold the whole
    possible range (even though 16 bits "should" be plenty).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71c3652d6c511db03402f5b7487bc4098e6d850f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 09:29:06 2022 -0800

    ao_hmc5883: Add explicit casts for -Wconversion
    
    No bugs noted.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c783aafd89777626c362e15c47360b399d03c45d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 09:26:08 2022 -0800

    ao_companion: Make time conversion to 16-bits in companion protocol explicit
    
    Companion protocol only passes low 16-bits. Also add explicit casts for -Wconversion
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fadb563f8aeeee895a7232bb71fa5bade6ef66f0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 09:25:15 2022 -0800

    ao_gps_skytrac, ao_gps_ublox: Add explicit casts to quiet -Wconversion
    
    No bugs noted.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 452dd07575a118f29a0dfa712deeb18e92ffb1f4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 09:20:29 2022 -0800

    drivers: Fix type of radio timeout parameter
    
    Move from uint16_t to AO_TICK_TYPE. Also add explicit casts to quiet
    remaining -Wconversion messages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46200359c388062a5e7bc40d780808d92a59f0ed
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 09:16:49 2022 -0800

    altos/drivers/ao_button: Save all 32-bits of irq status
    
    Was saving in a uint8_t
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7fd29d922be98ddc6406f2323599ef63061044ed
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 09:15:57 2022 -0800

    altos/drivers: Add explicit casts in ao_aprs, ao_bmx160 and ao_btm
    
    No bugs spotted here, but this quiets -Wconversion warnings
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5bdb250a43c9e87185f3ddedbd8364f24306bbfd
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 27 15:52:44 2022 -0800

    altos/attiny: Eliminate warnings from -Wconversion
    
    These have no effect on the generated code as they simply make
    implicit conversions explicit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85dd82b200d649fbf08aa31e5acde8f1f40d531a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 16 17:00:59 2022 -0800

    altos: Re-enable apogee delay
    
    When the igniter code was changed to support booster mode, the code
    which delayed apogee firing based on the configure apogee delay value
    was lost. Re-enable that by sticking a delay before firing the drogue
    charge when the ignite mode is not redundant apogee.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d91e0b962d95051a10147e691b133927bf3fb8cb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 9 09:58:07 2022 -0800

    Version 1.9.10.3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d11edd6d595eb1a0786f61d4ae4bdf37ecf1a4fb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 9 09:51:33 2022 -0800

    libaltos: Build Mac OSX libaltos.dylib for arm64 too
    
    Make this work on the M1.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c67c0c789787fcd18b513a775d2415e0af0a2d0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 9 09:49:49 2022 -0800

    Switch from AdoptOpenJDK to Adoptium
    
    This project moved to Eclipse foundation but seems otherwise about the same.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c5d39fe3ac9252547f966a86f413eebd7b44088f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 28 15:27:02 2022 -0800

    ao_pyro: Move delay_done out of pyro structure
    
    The pyro structure should be read-only in flight operations. Move the
    'delay_done' element to a parallel array as that gets written. Change
    types to pointers to const structs to enforce this in the future.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 606a67724dea8ab3d52d52456722dc593cf8ac8d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 27 15:49:15 2022 -0800

    altos: AES code was storing bytes in an int array
    
    The only operations using these values are logic using bytes, not
    arithmetic, so shrinking the size of the elements should have no
    effect on operation.
    
    This saves space *and* eliminates a type conversion warning from
    -Wconversion.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3759d6707d67e2584670ea89086576b695ea3509
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 25 12:34:31 2022 -0700

    need to save .bin for TeleGPS v2.0

commit 59cbf80e63b4c88de45e59c6e3d209f99910fcf3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 21 19:45:14 2022 -0800

    data_interval == 0 means no data collection
    
    All of the timer functions were still taking one sample every 256
    clock ticks.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2dc5d4eecc97b640a2e1f012b4411955682b61c8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 11 14:34:14 2022 -0800

    Version 1.9.10.2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d24aba871ee9aa3671e15510ee4e2a0266c3d583
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 11 14:32:55 2022 -0800

    altosdroid: Add BLUETOOTH_CONNECT permission, handle its lack
    
    Android 12 switched how bluetooth permissions work, so now we need a
    new one to talk to devices. Also deal with a lack of that by not
    crashing when we can't get the name of a BT device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f46240dfc57164f0c1b0c4c4ed9695bca63860d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 16 13:39:33 2021 -0800

    altos: Switch all tick variables to AO_TICK_TYPE/AO_TICK_SIGNED
    
    Instead of trying to pick and choose which work as 16-bit values,
    change everything that doesn't affect external values (log, companion,
    radio) to AO_TICK_TYPE.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e068689f41b74c883615f9f11a322a962cbb792
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 16 13:38:39 2021 -0800

    altos/attiny: Switch to avrisp2 for development programmer
    
    My bench programmer puck is the avrisp2, not usbtiny
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d317c2e30c408909807bde7c5577e499bd3c6f17
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 16 13:37:17 2021 -0800

    ao-tools/ao-test-igniter: Deal with devices that use both 'apogee' for ADC
    
    Some devices report drogue igniter ADC value with 'apogee' tag. Deal
    with this.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55698a6232bde408ce7e12bb7ee52ba72985fc78
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 16 13:36:10 2021 -0800

    micropeak: detect empty log received from device
    
    Avoid reporting a failure to the user when the device has no flight
    log.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e3127155c02cd42ef8aa42d167fc214e8997113f
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 22 11:35:52 2021 -0700

    doc: add an appendix on frequency calibration to the all-in-one manual

commit 66152b176bad12fbff3188397c607793c0bdd380
Merge: 8e1145b9 0921e8b1
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Dec 20 13:49:41 2021 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 8e1145b9894537e33747fecc7d61d87eadab6135
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Dec 20 13:49:28 2021 -0700

    need to capture .bin file for telebt loader, too

commit 0921e8b166c41ea8f65df14cea893481d8e1f0f1
Merge: 236d80fa 9db486f6
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Nov 3 13:24:41 2021 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 9db486f6d78b8a2ae855168338e0ea7d6ee4231f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 16 16:27:52 2021 -0700

    Version 1.9.10.1
    
    AltosDroid fixes (rotation, crash in maps stuff)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1b7357aa5bca6afb588b0bfb5cfe72c4d0255ef
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 16 15:48:22 2021 -0700

    altosdroid: Fix tab updates on Android 11 after rotate
    
    Android 11 appears to have "optimized" application rotation by
    regenerating fragments automatically. This means the tab fragments
    aren't getting created by TabsAdapter.getItem, so that code didn't
    know about them, which caused it to not know which tab was active so
    all of the application state wasn't getting updated in the tabs after
    rotation.
    
    Fix this by telling TabsAdapter about fragments that are already
    created -- altosdroid hears about them in the registerTab hook.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ef3cd5abdb863c534a0abc5d0a726cfa5108eb4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 10 23:01:18 2021 -0700

    altosdroid: Skip map draw before transform is set
    
    A crash report indicates that this can happen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f426462c7e86dc0aa48c004e115144b25eadacf8
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Oct 10 22:21:49 2021 -0600

    fix version in 1.9.10 release notes

commit 8970d45ea43bfff1de38778ee8b14c3e54639555
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Oct 10 21:42:19 2021 -0600

    releasing 1.9.10

commit ed267e76eb03c34ec233c33a002ec9e5e53ec83a
Merge: bd71c839 ef70f80b
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Oct 10 21:41:50 2021 -0600

    Merge branch 'master' into branch-1.9

commit ef70f80b324e9c8ba7046b5000e0f28f77a54f8c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 10 09:57:45 2021 -0700

    Version 1.9.10
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 67a1d9b5bcd9bd7dd4156010264cef6b9c87caa3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 10 09:49:49 2021 -0700

    altos/telemega-v5.0: Add .gitignore
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47d7affffdf97188a034bb48918ec22f03ea5b38
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 10 09:47:52 2021 -0700

    doc: Version 1.9.10 notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb39995ded6b564efcb5a5312119d2672b437bc8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 9 21:32:17 2021 -0700

    altosdroid: Catch log file open failures and show an error dialog
    
    Android changed which directories we can write to once, let's hope it
    doesn't happen again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3488d86de2e114a46e59bd4d2a2d7b95bf633963
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 9 21:31:24 2021 -0700

    altoslib: Add callback from AltosLog on file open failure
    
    This lets the UI tell the user that logging isn't working.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b3ccb73a26f91917d327558295506ce3c02d684
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 9 20:58:26 2021 -0700

    altosdroid: Switch storage to media dir
    
    Even with the WRITE_EXTERNAL_STORAGE permission, we appear to no
    longer have permission to write to a random external storage
    dir. Instead, we only have permission to write to an app-specific dir,
    buried deep in the directory tree. We can get that directory name with
    getExternalMediaDirs()[0].
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 536e53c2e17b37df8c65d2f6921a5d68791a7789
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 8 18:31:35 2021 -0700

    Version 1.9.9.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5cb393c1743a5c0f307631199abba067821db370
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 7 22:45:37 2021 -0700

    libaltos: Use original windows printf/scanf
    
    mingw now uses "improved" versions of printf/scanf, which may cause
    trouble with some windows 10 installs. Just use the old versions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 236d80fac2b4293c5750c9d80b387afd4d0fc5cc
Merge: 047a3f1f 6ef22682
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Oct 7 12:11:06 2021 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit c15bb9513ab0f8636bf52ec827551134c773e832
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 6 22:58:09 2021 -0700

    libaltos: Make windows dlls reproducible
    
    Use SOURCE_DATE_EPOCH=0 to ensure these dlls are
    reproducible.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd71c839b542c417a90ab59db97e0969f7e27731
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Oct 7 00:00:42 2021 -0600

    releasing 1.9.9

commit 2f1d5b25e72324512238920b45e864bf7c5d16fe
Merge: c0fe810e 6ef22682
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 23:59:20 2021 -0600

    Merge branch 'master' into branch-1.9

commit 6ef2268220a8ee6a83ce7400614d27589c57534a
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 23:53:28 2021 -0600

    libaltos: don't carry pre-built .dll files in the repo any more

commit 44530c7439c311c573cbd4b865e7bf2c1581ab83
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 6 21:13:38 2021 -0700

    Version 1.9.9
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9841667f100585ccf50879a6bf627198578c8313
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 24 09:44:56 2021 -0700

    1.9.9 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 071bcedab48d3bd71f42c685d01fc5c64f702ba3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 29 10:24:02 2021 -0700

    altos: Measure mmc5983 offset
    
    This improves mmc5983 accuracy by using the SET/RESET mechanism which
    flips the orientation of the mag sensor to cal-out any sensor bias.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a268f959f5ee76133f4f707cf81a2c0fe4c8e73
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 29 10:22:13 2021 -0700

    altoslib: Parse TeleMega v5.0 eeprom records
    
    Oops. Missed one spot in adding TeleMega v5.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 236200c028dd48bbffbde1278d8b1c6de39fbdb1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 24 09:43:15 2021 -0700

    altos: Fix config upgrade from 1.24 to 1.25
    
    Alignment of pyro field changed due to increased size of fields which
    shifted the whole struct by two bytes, leading to mis-updating the struct.
    Fix that by creating a mirror of the ao_config type for version 1.24 and
    then using that to fetch the old data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1115f566119deaa508f753576703917f28ef54b7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 20 20:24:13 2021 -0700

    Remind us to update ANDROID_VERSION
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce5cb9b985fbb803de8794af69027fba55e48f79
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 20 20:23:10 2021 -0700

    altosdroid: Set android version to 30
    
    Need to change this for each release we do
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 047a3f1f08687113b80123cc7568d7057a23bcc3
Merge: 01b5d271 e7a19e6d
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 22 11:53:17 2021 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit e7a19e6dec201603e98b94b0ba790aa7d2d344f8
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 20 18:17:49 2021 -0600

    snapshot TeleMega v4 turnon and test scripts before crafting v5 versions

commit 95fc564503ced6febe7136813e76592ecac9c1d7
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 20 18:22:55 2021 -0600

    update TeleMega bench scripts for v5.0 hardware

commit 01b5d271d21e0c60508c06f4af1ff34bf75bf9fe
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 22 11:45:49 2021 -0600

    capture odd changes from production machine?

commit 3fb07b29d7bad57a52e4b0c75d623577ca1d4da3
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 20 22:06:30 2021 -0600

    capture updates to Releasing from 1.9.8 release

commit c0fe810e9b12a07c59ed12124bf9045a7c13d122
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 20 21:25:42 2021 -0600

    update ChangeLog for 1.9.8 release

commit 47e98987fd8789583406eba7d2bc2d47bfad1f11
Merge: 7d52b911 fbf4b677
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 20 21:24:45 2021 -0600

    Merge branch 'master' into branch-1.9

commit fbf4b67782f186172146e1ef911ed1bc083f4c12
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 20 19:56:45 2021 -0700

    Version 1.9.8
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7efc09d6ed5c128dfb1adb74627362d9263a64b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 20 19:54:36 2021 -0700

    doc: Update for 1.9.8
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 969cf2419022727c30e6d2d8af6afbf7ff1c630b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 20 19:52:35 2021 -0700

    doc: Add specs for TeleMega v5.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aff90e4bbcfb62f84ce9d8679cfc0da0ebb5e301
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 20 19:49:49 2021 -0700

    doc: Note pyro channel time limits on <1.9.8 firmware
    
    16-bit delay values instead of 32-bit
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6de071bcfca217a28d94255339b2f5e09d05fa5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 20 19:59:45 2021 -0700

    libaltos: Ignore cjnitest files for all targets
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b5f890661457e7dd0f4558c60e8d55a114401cc2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 20 19:58:30 2021 -0700

    altoslib: Document how to add a new product
    
    Avoid missing some steps
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7732ffbba08db0fcd6b8c2181584da1bc7d5d84
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 20 17:17:06 2021 -0700

    Add test-easymini-v1.0 script
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 568379f381dbb4bf587e95ce1d9c400e856ff6c6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 20 16:28:37 2021 -0700

    altos: All beep-enabled boards have beep config
    
    HAS_BEEP_CONFIG is no longer used, switch to HAS_BEEP
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c89268c1fa70fbdc661ac0963b9f8fe22c42bbfe
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 21:04:41 2021 -0700

    altos: Deal with cc1201 limitations
    
    The CC1201 works fine at higher data rates, but at lower rates it
    can't crank the RX bandwidth as tight as the CC1200. Deal with this by
    checking the part number and using the correct settings for each one
    when running at 9600 or 2400 baud.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 839024907e2777c07e4722e7bb0ab8993abf5638
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 17:09:11 2021 -0700

    Bump version to 1.9.7.1
    
    Preliminary release for TeleMega v5.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ebb5044b02c7933df4d3caf739b0e3d5c12d464d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 19:12:42 2021 -0700

    libaltos: Update windows DLLs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07fa6611080cc7a4ae2815e9867afde5be7a3f89
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 19:01:34 2021 -0700

    altosdroid: Add tilt angle to pad and flight tabs
    
    Useful for monitoring attitude
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c10d049ca9729dfe7832096c40f837d6510d5b2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 16:50:18 2021 -0700

    Add TeleMega v5.0 firmware
    
    Followed steps in Releasing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a18da7cfcd45518eeb5433a1ad5d14a3cd65c160
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 16:30:51 2021 -0700

    altos: Build TeleMega v5.0 bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 476e90203b14e4fc380c86e065cd6c41296caaa1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 16:30:08 2021 -0700

    altos/telemega-v5.0: Space tones closer together
    
    TeleMega beeper needs tones fairly closely spaced to
    keep them in range.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91656c9d1d6175e06d4bed8e448ac6773e172de0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 16:29:33 2021 -0700

    altos: Allow beep tone spacing to be changed
    
    New beeper needs closer spaced tones
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82323e51d2372e559604545673c90dceb920f12d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 16:28:22 2021 -0700

    altos: Fix up HAS_FLIGHT_DEBUG
    
    Some printf formats weren't right.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43c375cf8835ad892f20c4b988badd893927f4ee
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 14:56:51 2021 -0700

    altosui: Add options for low frequency beeper
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db950e97caefdd3257c1a2de3547ab88a2bd2344
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 14:56:16 2021 -0700

    altoslib: Support TeleMega v5.0
    
    Add normalized data support
    Add telemega idle monitor and telemetry packet support.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 064e30c73ff539ec53d15efe6cbab982b9c35eaf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 14:54:16 2021 -0700

    altos: Update telemega-v5.0 config
    
    Fix cc120x interrupt pin.
    Enable normalized data.
    Select 2100Hz beeper default.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 876a0f9d2a3324e2591e21bcf2dafcfb6009c081
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 14:53:47 2021 -0700

    altos: Add normalized telemetry support
    
    Just like logs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea0ab578e4e745f4ee94c2551834e105152fdba1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 14:53:02 2021 -0700

    altos: Support normalized log
    
    Write log data with standard axes instead of device-specific ones.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 363d42306bdc2f303b31e2ecae39fa11b503244f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 14:52:13 2021 -0700

    altos: Allow devices to override default beep
    
    New beeper will want new default.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a830c7f9ed41565c72edb85852e2df8bfa351f5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 14:50:28 2021 -0700

    altos: Support normalized axes in mpu6000 and mmc5983
    
    For monitor idle, devices selecting 'normalized' log format also
    get 'normalized' command mode. This reports data in a standard format,
    along/across/through instead of raw device axes which depend on how the
    part is mounted.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdfa9303a024300141e8b328f81404a9b7466207
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 14:48:50 2021 -0700

    altos: Detect CC120X device type
    
    Not that it has any effect on the driver, but maybe it should?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a913364ffd84edb36eb848e65863e963f51cd15
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 18 22:45:33 2021 -0700

    altos/telemega-v5.0: Fix config for MMC5983
    
    SPI mode 3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac2003b9556595db12e1fc671ef6226c56b777ad
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 18 22:44:19 2021 -0700

    altos/stm: Minor cleanups in ao_arch_funcs.h
    
    Fix ao_gpio_set_output_mode to actually work again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71674569800c58db0a9f3d63495c0e1341e51b32
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 18 22:43:34 2021 -0700

    altos: Get MMC5983 driver working
    
    SPI ID is different.
    Clean up pin settings to avoid transients
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ed101d634968666cd3ee2d8c49737970caf406b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 18 22:05:32 2021 -0700

    altos: Add bit-bang i2c driver
    
    Useful for debugging stuff, not useful for flight code as it
    burns the CPU for timing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41b754f955de6f196e44f30334436e5237fb9110
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 18 22:15:50 2021 -0700

    altos/stm: Use picolibc startup code
    
    Instead of custom bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0298477a4acfbfd78ab8dd150ee480bd14bd073
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 18 22:11:11 2021 -0700

    altos: Record MPU6000 failure but let device boot
    
    Don't panic on MPU6000 failure
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4fed4123fd40a6fb211b542b7c922ec8b2ae0c6b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 17 14:24:21 2021 -0700

    altos: Fix telemega v5.0 CS_FLASH pin
    
    It's on GPIOD 10, not GPIOD 3.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98e54df2385fcaf263de14f89a1f0728bfdd541a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 7 07:54:01 2021 -0700

    Show mag sensor SPI ID

commit 7230dbad9326d55427e23924e45cf8270411ff7b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 6 23:07:24 2021 -0700

    telemega-v5.0: Add Makefiles
    
    Oops
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4891f212ab13941cbe89471114dc1e5cf0f8affb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 17 20:04:08 2021 -0700

    altos: Prepare for picolibc stdio change
    
    Instead of __iob, picolibc will use stdin, stdout and stderr globals.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8384b9f6f2fe2c2a17566f771554d9b0e174d1b1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 17 20:02:05 2021 -0700

    micropeak: Show error message if USB adapter open fails
    
    Pop up an error dialog and *don't* show the download dialog as if the
    open had worked.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea380005c74ba2ea9738de1d909b5650b2f44706
Merge: cee8c407 b6619833
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Aug 28 13:16:45 2021 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit cee8c407bf2b22d40350672deacbc10768bffa46
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Aug 28 13:16:08 2021 -0600

    doc: add mounting hole spacing information to product outlines

commit b6619833a3a581e74796b5c2ab837b52a4e9f6f3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 15 17:08:44 2021 -0700

    libaltos: Add new microchip MAC address to bluetooth map
    
    The new batch of BT modules use a new MAC prefix.  On Linux, also add
    the RFCOMM channel discovery code in case this happens again. On
    windows, suffer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d3a208c9d85d73cab7c2bac91c12e540d76c76f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 2 17:04:20 2021 -0700

    altos: Change MMC5893 driver to avoid interrupts
    
    Set the chip to sample at 200Hz and then simply read the results at
    100Hz to get a reasonably recent sample. This avoids a delay at each
    sample interval.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb77758b7dcdd0bcef12cd1d56cf4d447cbe5c8c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 31 22:03:15 2021 -0600

    altos: Add MMC5983 driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5b580ff01ef0618236bfeb63690fd32710c684b4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 31 22:02:42 2021 -0600

    altos: Add preliminary TeleMega v5.0 bits
    
    Axes not checked yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15dbd68ae4018180bb7a7aced849d23cd2200472
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 22:13:58 2021 -0700

    ao-bringup: Use ao-test-igniter voltage check feature in pyro tests
    
    This makes sure all pyro channels are 'in range' during testing to
    validate the ADC is operating nominally.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a63e025d1b0ae5d53f6281d49e66729f3cde36be
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 22:03:04 2021 -0700

    ao-test-igniter: Also test ADC voltage for in-range of 1-4 volts
    
    This should catch ADC issues, like a solder bridge on the SoC.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50385fa8941b58192f8955b3873a75251cde5844
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 21 14:26:35 2021 -0700

    altos: Fixes for GCC 10 (-fno-common is default)
    
    A couple of duplicate global definitions which GCC 10 flags
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a78fd63e8a1362af01d4f01e335ff449f0a5d7e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 11 22:27:27 2021 -0700

    ao-bringup: Revert EasyMini scripts to 1.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc765b10da7f1dc8e267bcd70b4dcee243475c83
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 12 10:08:05 2021 -0700

    libaltos: Use cross compilers to build libaltos for i686, amd64, aarch64, armel and armhf
    
    Use current debian packages to build libraries for x86 and arm debian hosts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 772b15425317d1da231c9925839320721cdb1269
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 12 10:03:24 2021 -0700

    altosdroid: Show altitude as well as height
    
    TeleGPS is more useful with altitude
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0232784711f1f26f1972142920375e2e24ab1e2e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 12 10:00:30 2021 -0700

    doc: telemini force freq is pin 6, not 7
    
    Telemini debug connector has only 6 pins
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db30a0dd958617cbe7fa8054ebb7b40ced90b602
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 5 22:52:35 2021 -0700

    kernel: Widen pyro time values to 32 bits
    
    This lets time values of greater than 327 seconds be used. 99% of this
    code is to adjust existing configurations to the new structure, which is
    wider than the old.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a7c2d3416594fc1cb43532970476631b407e975
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 23 21:35:07 2021 -0700

    altosuilib: Remove spurious message about libaltos
    
    Wait until we've tried all libaltos options before complaining.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6f6b53283d6a02cb62d3315d71e5a6911f59646
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 20 17:06:28 2021 -0700

    altosdroid: Work without GPS available
    
    On devices without GPS receivers, use network location instead of
    crashing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d52b9117c0c003506af1b103db4938efdafda5a
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jun 8 22:56:37 2021 -0600

    update ChangeLog for 1.9.7 release

commit 8750dde659cec836fa6354651d5967b7aac1dff0
Merge: dcd1feb8 24215a4a
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jun 8 22:56:04 2021 -0600

    Merge branch 'master' into branch-1.9

commit 24215a4a2049e51c335b76767f9ed13d186ac408
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jun 8 22:51:28 2021 -0600

    doc: update copyright year assertions

commit ec00f55171a6c5c827c1296178be43d311801be8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 12 18:39:48 2021 -0700

    Version 1.9.7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b5ab12ca11272479330a1d630da15cbf0d76735c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 19 11:01:16 2021 -0700

    doc: Update 1.9.7 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d9aaab9209a7afea60a8b394e4d3d5325f0f01e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 7 16:14:25 2021 -0700

    altosdroid: Bump to version 29
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3104c3d2b1e781592f5d6841ba1ef2ba6c49642b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 15 20:19:56 2021 -0700

    altosdroid: Update target API to 29
    
    Required by current Android store
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82ef65a98e8e018fe8aa0665fd8a4af3fff3097a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 11 22:28:32 2021 -0700

    altosdroid: Revert getResource().getColor to old API
    
    This should keep it compatible with API version 21
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 76847aadc1ea770099c6be05727dfa232e53205c
Merge: daa635de 7643f408
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Jun 7 17:11:01 2021 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 7643f408834a872ed5d7ae67770b1b7c98f3b90c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 30 15:08:25 2021 -0700

    Version 1.9.6.5
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b45adfbc0eb769800068c2d432e9db52425ee316
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 19 10:52:47 2021 -0700

    altoslib: Protect has_monitor_battery from unset product
    
    AltosDroid can query has_monitor_battery before the product data has
    been set.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a427131788a3e477629a0de26f0f41b5e98333b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 19 10:51:44 2021 -0700

    altosdroid: Don't start bluetooth if address is null
    
    If the address.address string is null, don't bother starting the
    bluetooth service.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9eb0fbd7eff5694064f9d123220b523a98fef0a4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 19 10:50:22 2021 -0700

    altosdroid: protect USB read/write when connection is null
    
    Check to see if connection is valid before attempting to read/write to
    it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55a820e517f9705bc80c653b456ce5d8b3a634bc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 19 10:48:58 2021 -0700

    altosdroid: Synchronize access to the 'rockets' list for online maps
    
    Online maps gets rockets added by the telem code and the same data are
    used to create the maps UI. Synchronise access to that object to prevent
    simutaneous operations.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09a2a37b31b816236f023ba2a1d767646d5c8f34
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 19 10:47:37 2021 -0700

    altosdroid: Safeguard preferences code in case it's called too early
    
    Make sure there's a backend set up before accessing data as it seems
    this code can be called before the preferences code is called before
    the backend is created.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a7cc99d9db45c6c4ba929acf5b57e22d826c82a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 18 23:26:12 2021 -0700

    altosdroid: Skip clicks on BT device entries that are too short
    
    Maybe these are some kind of extra object? In any case, nothing that
    we care about, so just ignore the click.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit daa635de77da3a1926ceb2e2d91e31ec169e173c
Merge: a2e71a40 362f11ff
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue May 18 23:54:48 2021 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 362f11fffb63c5c4d4e2ccfc59c0e6ae83a55d01
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 18 22:37:01 2021 -0700

    altoslib: Fix accel value flipping for TM v3.0
    
    TM v3.0 uses the same log file format value as TM v2.0 but has a
    different accelerometer, which requires a different function for
    inverting the raw values. Detect v2.0 devices and use the old function
    for them while using the new function for all others.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a575eebbf87243c3a314929a2469db5bac0c7b42
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 17 23:09:29 2021 -0700

    altosuilib: Zap all flash when upgrading TeleGPS from pre-1.9.7
    
    Old versions of TeleGPS firmware would end up spraying log data all
    over flash as they mis-computed the place to append new log data.
    
    When the right hardware is detected, a warning dialog will pop up and,
    if agreed to, the log storage flash will be completely erased before
    the firmware upgrade happens.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 565778b66e59069fc6a6d6518f28354eae954dc1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 17 22:38:14 2021 -0700

    altos: Simplify discovery of log end position
    
    Binary search using log block indices rather than byte positions. This
    makes the code much easier to understand as there isn't a mystic modulus.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8dec0d1be5a2d7633045c5c0e86b32a9e6b60299
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 17 22:33:21 2021 -0700

    altos/telegps-*: Fix log end discovery at startup
    
    We need to find the first unwritten log block to start appending data,
    but the code was actually looking for the first empty 256-byte chunk,
    which meant that we'd leave a gap of erased data after the previous
    log. AltosUI would stop at that point and not recover the remaining
    stored data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a2e71a40e53602c0cebe4c36d3658201dc0c2bae
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 00:27:55 2021 -0600

    ao-bringup: fix easymotor script to use .bin for dfu-util

commit fa273e51e772540f61fffbdc4431fe07bcd57630
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 12 18:38:50 2021 -0700

    doc: Update for 1.9.7
    
    Add release notes
    Add specs for EasyMotor
    Update copyright year to 2021
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4708930ebfbc056bb4faae9b23720d3be401978
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 12 18:39:48 2021 -0700

    Version 1.9.7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8437a3f994845dd84080cc20122494aaf901124
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 12 18:36:45 2021 -0600

    ao-bringup: add tools for flash/cal/test of EasyMotor v2

commit 1451e2fd2092d720b0d49b93ac01bed7e88b831f
Merge: 9c26fe3e b115522c
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 12 18:27:17 2021 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 9c26fe3e4fddfd2a3f3e5a7da68ef65422053063
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 12 18:26:46 2021 -0600

    ao-tools: update ao-flash-stm32f0x to work with openocd in Debian unstable

commit b115522c41228b26133f322ea68ddb187c0b68cc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 12 13:04:20 2021 -0700

    doc: Fix typography in motortest doc
    
     1. Use correct quotes.
     2. Eliminate double space after punctuation.
     3. Use elipses instead of three full stops.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 410af114b4827e46a5a297dbb7c26dc087b932fb
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 12 14:02:32 2021 -0600

    altos: include EasyMotor v2 firmware in upcoming release

commit 21da0503635a643529d457dccd7e12eb39029fdb
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 12 13:51:06 2021 -0600

    docs: minor text tweak in motor testing docs

commit c6bcfa5ede86a718105cc334099e4a6b028b08c3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 31 09:23:14 2021 -0700

    altoslib: Write IMU headers to CSV file when present
    
    The IMU data were being written, but somehow the header was not
    included.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d6be8a279ad233d998c6df8b2efafa34dd5a9a98
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 28 18:03:56 2021 -0700

    Version 1.9.6.4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit da8d7fde56bfd7db02598d2880653fa71846abf7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 28 18:03:03 2021 -0700

    JavaApplicationStub hacks for Big Sur tabbing mode
    
    Java does not support the 'tabbing' stuff that's in Big Sur, so
    disable it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81a6f20fca5df08f3ac08d83a79439502c209df0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 27 09:37:49 2021 -0700

    Add local hacks to JavaApplicationStub
    
    Fix font rendering.
    Add app directory to java.library.path.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2d45e21175453a69112fde22bf5b662d9e32adb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 22 00:06:14 2021 -0700

    Update JavaApplicationStub to latest release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6ef894263068839782716fece54154effd3d0fe
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 22 00:02:33 2021 -0700

    Add Mac OS X 11 support to JavaApplicationStub

commit 1d29a584c8387798fb1558fd54a09b1d8fbe90b7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 21 23:10:25 2021 -0700

    altosuilib: Show launch sites at all visible locations on map
    
    Take each launch site and draw it at every location on the map it
    occurs (in case the map shows more than the full globe). This also
    automatically handles scrolling the map more than one "rotation".
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07eecc0ff6e1104f911e5f83d67f3e14dc68c59c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 12:51:56 2021 -0800

    Version 1.9.6.2
    
    Fix micropeak Download on Mac OS X
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38b360b0b7080b06998d1cac1d6d09957fa44844
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 13:38:54 2021 -0800

    altosui: open /Library/AltusMetrum on Mac OS X after install
    
    This helps the user find the documentation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 997931d545c977250918a2d608f8c5756de2afcf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 13:23:16 2021 -0800

    micropeak: Stick docs in Doc dir on Mac OS X
    
    Follows altosui and telegps installation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c07b0cd5881ae4e101c41ffa7a1dc6980c3ef357
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 13:22:39 2021 -0800

    altosui: Show dialog box if sudo fails on Mac OS X
    
    If the user types the wrong password three times, sudo will give up
    and return an error.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82bad3d62b91e67f6089e403c4bd4983bf65e449
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 12:51:13 2021 -0800

    micropeak: Use a menu for 'Download' on Mac OS X
    
    Attempts to add buttons to the menu bar fail leaving no access to the
    download command.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c33e88479ce5fe578cec4296d6196356175d40a
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Feb 15 14:27:30 2021 -0700

    doc: add motortest docs to publish targets

commit b8e21caf9602b55e9a042f8f0b3cfed1d8975c15
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Feb 15 14:25:47 2021 -0700

    doc: have motortest documents actually get built by default

commit 6ac9b490efca17b15317965026c56b4a37d6be82
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Feb 15 14:12:46 2021 -0700

    doc: make doc be about motor testing in general, not just EasyMotor

commit afc90f63c6a0c2a511fddc97b72537e0a6f40cfd
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Jan 30 11:48:01 2021 -0700

    doc: add a brief note about TeleBT appearing inert until paired

commit 7f4059bbe74ecf86842134739ec521dcb646f04f
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jan 17 19:29:28 2021 -0700

    doc: first draft of manual for EasyMotor

commit 3af81a45be69b4693396de4a5e2c386be566b933
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 4 14:58:15 2020 -0800

    altoslib: Add all known launch sites and names to map preload
    
    This shows all of the known launch sites and their names in the map
    preload screen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4c40ba682acc3ed1808d5a170ddae4114740a39
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Nov 21 11:22:01 2020 -0700

    doc: add documentation on how to re-flash a TeleMini v3 over USB

commit 6550585af6d80306d037661be66004ccf8d09013
Merge: c992792b 42226344
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Nov 21 11:00:43 2020 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 42226344f0b5443fdd93034dd51e608370717c46
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 5 21:59:27 2020 -0800

    ao-tools/ao-dump-up: Recognize MicroTest data
    
    Spit out a special message when MicroTest data is read to make testing
    µPusb easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9d4856d3f03fae159c120d8d8030c78eaf15253
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 5 21:58:04 2020 -0800

    altos: Add 'microtest' -- micropeak load for testing µPusb
    
    This is custom MicroPeak firmware that just repeatedly generates
    constant flight log data which can be used to validate µPusb boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 898ef1a085f9d4541c3987d8d4f0daac0093ed49
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 29 11:41:55 2020 -0700

    Version 1.9.6.1
    
    Intermediate release containing altoslib fixes for TeleMega v4.0 in
    Antenna Down configuration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6dc5b468f84f04f28ea83757cee0486f654fb234
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 29 11:40:25 2020 -0700

    altoslib: Delay accel cal value adjustment until data all read
    
    Instead of trying to compute these values as soon as the necessary
    data are available, delay until all data are available as which data
    are necessary depends on the target device, and some target devices
    don't have some of the data values at all.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ceca79d6b20cf623e7a7214e400347fc0bc019dd
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 29 11:38:55 2020 -0700

    altoslib: Fix accel inversion for TeleMega v4.0
    
    TeleMega v4.0 uses the adxl375, just like EasyMega v2.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4358d83ba96b072cabd344e287fa77005968690f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 29 11:37:03 2020 -0700

    altoslib: Avoid sending negative accel cal values to flight computer
    
    Pre-1.9.7 firmware does not handle negative values. Instead, send
    large positive values which will wrap around to negative values inside
    the flight computer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1a2932e080041cfe107e00e7b23213026d1fb81
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 28 14:32:16 2020 -0700

    ao-bringup: Delay before testing easymini for 0.25 seconds
    
    EasyMini isn't quite ready to play when the USB is first detected as
    the sensors haven't yet been initialized. Wait for 0.25 seconds to
    give the board time to finish initializing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a1d6499fd7ca2b3a9702e21af2a7584ef2b6480
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 26 21:53:54 2020 -0700

    altos: Don't wait after igniter in manual mode
    
    There's no reason to delay between igniter firings in manual mode, and
    it slows down testing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c992792ba6a76a0bc1d31ccdcffa2d6ca52a9e55
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 16 10:50:49 2020 -0700

    put notes in Releasing about keeping doc/header.inc up to date

commit 427e67f9e8914327243c0fdd1379365fe4e03623
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 16 10:47:53 2020 -0700

    TeleLaunch docs should use telelaunch.txt, update copyright year, lose "draft"

commit 6e001281b01176963836d7b7d0bd6973b788dd63
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 23 17:05:37 2020 -0700

    altoslib, altosui: Don't show apogee/main for EasyTimer Fire Igniter
    
    Don't create igniter lines for a device which doesn't have them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a214f039e8404da7529b6799ab6a907c3744e1bc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 23 16:14:13 2020 -0700

    altos/easytimer-v1: Switch from including adxl375 to bmx160
    
    These aren't really necessary at all as ao_data includes them, but
    it's nice to have them listed for documentation purposes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a3c0805f88c50f27dd4e78b9be2a4c3ef9e46c8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 23 16:13:47 2020 -0700

    altos/easymotor-v2: Increase default flight log size
    
    Switch to 4 flights by default, with 2MB per flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9014be707c4325b55e0f2797796e7c96aea1e03
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 23 16:12:36 2020 -0700

    altosui: Match against basestations when determining remote
    
    These two cases were matching against !altimeters instead, which isn't
    true for EasyMotor or EasyTimer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 40c6aa050654d43f20c6a9c6bd67541e1747ae38
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 23 16:10:43 2020 -0700

    altoslib, altosuilib: Get Idle Monitor working with EasyTimer and EasyMotor
    
    This involve splitting out the gyro and mag sensor handling from the
    3-d accel stuff, displaying only information that is present. The IMU
    support now allows for using the along axis as the primary
    acceleration indicator. The Adxl375 now allows using all three axes as
    the 3d accelerometer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b6c066d7261d398cb7bfe6503518022194431337
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 23 16:02:07 2020 -0700

    altoslib: Set all 3 axes of accel cal data when present
    
    Use the new accel cal function in altos to set all three axes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7c8f0b14cf19804106860a5689cf1f37df20669
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 23 16:00:01 2020 -0700

    altos: Make accel cal take three axes when present
    
    This allows AltosUI to save/restore all of the accel calibration
    values instead of just the primary axis.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ecf782359d3038399049ec5cc0a2b3071e14c78f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 22 20:48:26 2020 -0700

    libaltos: Add windows override for EasyTimer USB ID
    
    Windows doesn't use the product name from the device, instead it uses
    whatever was in the .ini file, which was "TeleTerra" for the EasyTimer ID.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 365bfb9c0720d537c7d65baf871d5dcd7c08de35
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 22 20:52:03 2020 -0700

    Update 1.9.6 release date. Add note to Releasing about date
    
    Need to update the release date as well as the release version; that's
    where all of the dates in the various docs comes from.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcd1feb83e5534ea3135358456b748f242878b46
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Oct 22 16:19:33 2020 -0600

    releaseing 1.9.6

commit 38bcc2b8b2b560271902eb8a3eba467866a38628
Merge: 628da1fe c16cb712
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Oct 22 16:17:33 2020 -0600

    Merge branch 'master' into branch-1.9

commit c16cb712f5dc2ad42a9bccbfc28f6b70704ccd55
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Oct 22 16:17:04 2020 -0600

    update configure.ac for 1.9.6 release

commit 837ef5987a71a51cc42c3410bd440043a34fdd8c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 21 22:11:18 2020 -0700

    doc: Mention BMX-160 self-test fix in 1.9.6 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2f10bf2c85ca7ec0cfb71c75a5bf77512072ba8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 21 22:01:47 2020 -0700

    libaltos: Add pre-built windows dll binaries
    
    Current Debian unstable builds versions that don't run on all Windows
    10 machines.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit edd50c5397764c8c8091e337f4045c806ff513ea
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 21 21:45:53 2020 -0700

    doc: 1.9.6 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ace827de5907ee77ffdfcf54b0822a1e65570ea
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 6 18:54:27 2020 -0700

    altoslib: Don't pass along GPS information when the GPS device is busted
    
    If the telemetry packet indicates that there's no functioning GPS receiver,
    then don't pass along those packets so that the UI displays things more accurately.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29c5336f775eacbfee354000c8b28de1813ede81
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 6 18:53:38 2020 -0700

    altoslib: Add defines for EasyMotor
    
    Just USB ids and product names.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c507e143aac0bc251b02bbe3c812bf81b7026ff7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 17 15:29:11 2020 -0700

    altoslib: Clip accelerometer-based speed to >= 0
    
    Negative vertical speeds computed by axial acceleration aren't
    sensible, so just clip them to zero so that plots are more useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a0a683b06fefbf1b17cba2dc1bbe877a19ce9f4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 16 20:54:32 2020 -0700

    altoslib: Limit .csv file output to valid fields for EasyMotor
    
    EasyMotor doesn't have a baro sensor, gyros, mag sensor or igniters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17ad31dcc24c66a9f4b3f1a1cd3689fbe5f16874
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 16 20:53:56 2020 -0700

    altoslib: Easy Motor v2 x axis is inverted
    
    Provide positive accel values along rocket axis
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02c7bb11a8a4270e40bd1f42abd00ae849ff7539
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 16 20:52:48 2020 -0700

    altoslib: Correct ADXL counts_per_g
    
    When ADXL 375 is used as a 3d accel (as on EasyMotor), need the right
    counts_per_g to do conversions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85e22ee20974792c2376bf11a9f79e17e4008da9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 16 15:30:35 2020 -0700

    altoslib: use motor pressure calibration data for EasyMotor
    
    EasyMotor stores an average sensor value for motor pressure, use that
    to report pressure above that value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f3e0411acffa7ff8b4b92b68abbe05482f9bf65
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 16 15:29:12 2020 -0700

    altoslib: Report metric pressure in kPa instead of Pa
    
    Reduces the magnitude of pressure data when displayed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 42ff9c7c096ad2b8e9a6152292ab12d315985aff
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 12 16:48:42 2020 -0700

    altoslib: Add EasyMotor EEPROM support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 76b595f2daafe10941b380fe74fd12d1467ba029
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 12 16:47:54 2020 -0700

    altosuilib: Graph motor pressure
    
    Use a separate axis from atmospheric pressure as the range will be
    rather different.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ac469fb46e9fabfd473b9a3d8bcd92db00b98b2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 12 16:46:28 2020 -0700

    altoslib: Add 'motor_pressure' data value
    
    This value tracks the internal pressure of a motor in Pa.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41538b1b600eef242d1ede9fe9039d1079f6891a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 12 16:40:41 2020 -0700

    altoslib: Add conversion for motor pressure sensor
    
    This assumes a standard 0.5-4.5 range 1600PSI sensor.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 109e39eb88e5f1fd897d0b818c7654b367ee8522
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 12 16:40:03 2020 -0700

    altoslib: Initialize gyro offset values to MISSING
    
    This lets us detect a device without a gyro sensor.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c5796f686b1bf9e4effd7f9d8dca2ee5d7a38a16
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 16 20:48:55 2020 -0700

    altos: Reset 3d-accel and motor pressure sums each ground interval
    
    We're repeatedly averaging 512 ground samples to get up-to-date values
    for all of the sensors, but we need to clear the sums after each
    sample interval. The 3d accel values were only cleared if there was a
    full IMU, not for devices with only an accelerometer like
    EasyMotor. The motor pressure sum was never cleared.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f10009b07b651f69014ac5608f3ca29bce874c24
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 16 12:59:48 2020 -0700

    altos: Add motor pressure calibration data to easy motor log
    
    Compute an average of ground motor pressure values and store those in
    the log data in the AO_FLIGHT record.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a7f1925b81a429d9f387f7e26433326e37c43d4f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 16 12:57:07 2020 -0700

    altos: Support negative decimal values on command line
    
    Add support for leading unary minus for decimal constants.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e69377ef31ecff5443177b51d7cd2b084e63523
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 12 16:55:23 2020 -0700

    altos/test: Clean up easy motor test jig
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c66f494160bd2e99c01510acdd7e2d6624fc017a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 12 16:54:34 2020 -0700

    altos: Log motor pressure and battery voltage for EasyMotor
    
    These were not logged at all.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4370b7e7bc48d3f3f3ec94665449f1fde4e9567c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 22:00:56 2020 -0700

    altos: De-bias height/speed data while on pad
    
    Save speed/height values from 64 samples ago and subtract them from
    the current value. This reduces the effect of systematic accelerometer
    error causing these values to slowly creep when there's no barometric
    sensor to keep them in check.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a7d8a0f8b26bf62b63f12110d6d66a4f9da76eae
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 22:54:00 2020 -0700

    altos: Change adxl375 self test parameters
    
    Try to make it not fail self test while horizontal
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 01b89c384e80990505a5abea18489360052beb70
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 21:56:38 2020 -0700

    altos/easymotor-v2: Add 'through' axis definition
    
    This is used by the ao_flight_test_code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 32e0a6e3ee51f3c9bc150bb1a6890a82bcdd050f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 21:56:06 2020 -0700

    altos/test: Build ao_flight_test_motor
    
    This tests the flight code in easymotor mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 291eddc6376dc414a32aab51d4ee7c4212e3e69d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 21:55:36 2020 -0700

    altos: Let ao_data.c be used by ao_flight_test
    
    Just skip the ao headers in that case.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e48b6689527f51cc589ccd0ee88e2c7bc05747e0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 23 18:32:41 2020 -0600

    altos/easymotor-v2: Beep out 'pad mode' repeatedly
    
    Easymotor doesn't have igniters, so it would have been silent on the
    pad, which seems bad. Add HAS_PAD_REPORT code which beeps out 'pad'
    once every five seconds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 48c8efaae7ce8de8bb0727009436813cd4b560e7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 23 18:31:25 2020 -0600

    altos/easymotor-v2: ADXL375 is upside-down compared with other boards
    
    Clear AO_ADXL375_INVERT to make it work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f1ea931ca808b120b5f378269aa9a6e38e90b8af
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 23 18:15:14 2020 -0600

    altos/stmf0: Fixup for SPI mode support
    
    The desired SPI mode comes in 'spi_index' and needs
    to be split out before spi_index is used for pin configuration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1ed5c2249abb7bd1bc85091179d5d208e776da6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 23 18:13:42 2020 -0600

    altos/easymotor-v2: Fix beeper config
    
    The beeper changed pins at some point during the design
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4cdef1d311d5cdc18550fb51b31c3becf1dd86fa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 23 18:12:10 2020 -0600

    altos/easymotor-v2: Use same init order as easymini
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2dbbf99e503b9e3cde37af35a8ba33220be187c
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 21 20:40:44 2020 -0600

    recover easymotor-v2/flash-loader/ao_pins.h from backups

commit fa4bb77064a2606e82091e3e533dac897912c627
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 2 13:11:39 2020 -0700

    altos/easymotor-v2: Get easy motor building
    
    Add some missing files and adjust configuration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80a7cdfe3d6256cc86861195a78f422828b4ecc1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 2 13:11:16 2020 -0700

    altos/easymotor-v2: Add .gitignore
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 48e0da4b2d1568f9f29058def12dc32d1cff3586
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 2 13:09:17 2020 -0700

    altos/stmf0: Add spi format configuration options
    
    This lets different SPI devices use different SPI formats
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18e24df0353c78ada8cc1d2439729bc2f2676205
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 2 13:07:01 2020 -0700

    altos: Support accel-only IMU configurations
    
    This doesn't compute orientation, just allows for calibrating and recording
    3-axis acceleration data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4006bf474f4fee1e2d47fdc930b3b08b4fecbe24
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 2 13:06:01 2020 -0700

    altos: Add EasyMotor logging support
    
    Log EasyMotor sensor data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3a3fb807394a534b6d44aa089f3b72a95ff9085d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 2 13:04:27 2020 -0700

    altos: Allow use of ADXL375 as IMU
    
    This lets EasyMotor report all three axes of acceleration and use
    that for idle detection.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ddade934e965e19b760cdde4eb8ecadf6abf70c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 2 12:51:16 2020 -0700

    altos/drivers: Add ao_adxl375_accel_to_sample macro
    
    This converts from acceleration levels to sample counts for use in
    detecting stability of airframe after landing when no other IMU is
    present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e5e240e764d3bf8196a3f5b5fb1a639ad0723138
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Jul 27 14:52:50 2020 -0600

    easymotor: override .gitignore to store Makefiles

commit a0aad75a2a54cd9d478cc44159d7d01b549f806e
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Jul 25 18:07:36 2020 -0600

    first cut at EasyMotor v2 .. not compiling yet

commit a8ced69631415e26329594f7f0ae98dec577d1ae
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 30 15:53:38 2020 -0700

    libaltos: Avoid using strcmp and strchr on windows
    
    At least one of these caused the library to not load on Windows
    10. Work around that by changing the code to use vid/pid instead of
    matching on the name provided back by the OS.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2d44477f5ab4ad82ba658eb327c25c61c8056035
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 30 00:20:24 2020 -0700

    altosui: Include telelco and telefireeight firmware in FAT builds
    
    AltosUI can reflash these devices, so best to include the firmware
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a6c0e80f64e793b68e29a18fafad730b55a06b6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 29 23:58:10 2020 -0700

    altos: Fix flash loader map file names
    
    Make sure these include the product name too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6846db985d77c25b4deb5f8a763eec245a0a3a71
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 29 23:57:26 2020 -0700

    altos: Remove linker map files during 'make clean'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f4448213efbafe2df53ad8d62d5be74473b794a2
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 30 00:49:14 2020 -0600

    Releasing: updated with changes from 1.9.5 release

commit 628da1fe429045c7c687f8bb96ded7da9f437706
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 30 00:18:31 2020 -0600

    releasing 1.9.5

commit f763dfe6a684a16ec40503149adefdc074a63ad0
Merge: bfe338d1 a1779f94
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 30 00:17:03 2020 -0600

    Merge branch 'master' into branch-1.9

commit a1779f9442787dbd5c40edbb476e6b765392196e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 29 20:10:38 2020 -0700

    Version 1.9.5
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 67e8e9b5b51e259eda4a669de527111851bab78f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 29 22:02:56 2020 -0700

    altosui: Work around lack of actual USB product names on Windows
    
    Windows doesn't provide an API to get the USB product name for
    attached devices, it only provides the name listed in the .inf file
    for each vid/pid. This means that you get 'TeleMega', or 'TeleMega
    can't isolate the list to the correct version.
    
    With this fix, at least the '#2' is stripped off, and the matching
    code restricts itself to showing only TeleMega files instead of all
    filenames starting with 'tele'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9bee7d9b6be861909d8c89767f6eabf007f76612
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 29 20:08:31 2020 -0700

    altosdroid: Copy generated .apks to bin directory
    
    This places them in the same location as the previous build system.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1fa1ba86f6e6e4ff469f0680cdbc39bc806474a4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 25 20:06:18 2020 -0700

    doc: Add 1.9.5 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2d239b9bf600fac46717980f45de3ca7a242236f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 1 18:47:23 2020 -0700

    altoslib: Print more helpful debug messages when checking rom version
    
    Make sure success and failure include enough info to debug what
    happened.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5bdc63a2086c1ffd4c34c9a503af638a47a1d98b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 1 18:31:03 2020 -0700

    libaltos: Update to support Mac OS X 10.15 (catalina)
    
    They decided to break device names reported by USB for some reason,
    but at least the real names are still available under a different
    name.
    
    Also updated the Makefile-standalone to work on my current box;
    presumably the next time I build this I'll have to update again...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 583a749724700845d2d3552a0d3a759f16b25cfe
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 31 20:52:43 2020 -0700

    macosx: Update macosx install script
    
    Use dialog engine to monitor progress and get sudo password
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ffbd99545ca0462161c24e0ed86978544f2c28f6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 31 15:08:08 2020 -0700

    altosuilib: Make dialogs mostly scrollable
    
    When screens are too small, some dialogs aren't usable. Fix that by
    wrapping them all with a scrollable pane.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 521dc6dbf9aa5f7aad7829cd98a815031725ac24
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 31 15:07:13 2020 -0700

    windows: Point windows users at adoptopenjdk.net by default
    
    This gives them a free software java which works fine with altosui.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7fc37f145a6ec3f913e908b6500d1e2c6dd405c8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 31 15:05:41 2020 -0700

    macosx: Hack JavaApplicationStub to set freetype properties
    
    Set the FREETYPE_PROPERTIES environment variable to revert to
    non-fuzzy text.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 075999e274dd1815b15c0d717d1af4e7717e5da9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 31 15:03:57 2020 -0700

    altoslib: Set default logging directory to $HOME/AltusMetrum
    
    Change from ~/TeleMetrum
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e07392c65ec512e3309d89c7465c1406a941b66
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 31 15:01:18 2020 -0700

    libaltos: Map generic windows device names to actual names
    
    When we signed the .ini file for our windows 'driver', IDs 28 and 2c
    hadn't been assigned to EasyMega and EasyMotor, so that file has
    generic 'AltusMetrum28' and 'AltusMetrum2c' instead. Updating that
    file is 'hard', so just map the names in the driver instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d298df9e4cf945f3d0dfdb583af07e498c685a0
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Sep 18 11:38:06 2020 -0600

    docs: add explicit admonition about avoiding 'c f' when configuring TeleLaunch

commit 95b31cb200d59917fd3ad03c5c3a0ad99c8a140d
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Sep 18 11:34:56 2020 -0600

    docs: fix horrible typo in TeleLaunch configuration section

commit 23e148bb3379969935bcbbbeb6c8dc66c0474f6d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 23 15:34:26 2020 -0700

    altosuilib: Allow config to be missing in rom config dialog
    
    If the configuration data can't be fetched from the target board, it
    will be missing while building the dialog box. Deal with that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2289fd36f7ba76692fe07d2ebc8d7eda33750180
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 23 15:32:57 2020 -0700

    altoslib: Deal with reflashing EasyMega boards with ancient firmware
    
    Ancient EasyMega firmware included radio calibration data in the
    romconfig bits, which has since been removed. That means the config
    data from those boards will be at a different location than current
    firmware. Deal with that by poking around in firmware looking for
    valid bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 335e40873c238a67cea2c63d62b73fd9d29e94d2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 23 10:55:30 2020 -0700

    doc: Fix spelling error in updating-firmware section.
    
    Thanks to Timothy Dixon for catching this (copy-and-pasted many times)
    typo -- could sequentially -> count sequentially.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1b754c12ac32ed38a561d8b35dcbdf82beea896
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 23 10:53:25 2020 -0700

    altosui: Improve configuration save feedback
    
    Mark window title as (modified) with any unsaved changes. Disable the
    'Save' button while the save is happening. Wait for the re-load of
    configuration values before clearing the '(modified)' state. This lets
    you see when the flight computer has accepted the updated values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 10a10667a28f82c24d895e44617e68c7c1848c45
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 23 10:51:00 2020 -0700

    altoslib: Improve configuration performance over remote link
    
    Avoid re-setting dongle radio parameters when they haven't changed
    during device configuration setting. This avoids flipping back and
    forth from remote to local mode three times during config save.
    
    Wait for remote end to say 'Saved' before dropping radio link. This
    ensures that the remote end actually gets the save command before the
    link is terminated.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3297909e58a2709d340f65181c22ef82341afb9
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 14:38:04 2020 -0600

    fix broken TeleBT turnon script

commit f82e0c5e3a3b3a505e35df23301cdc7dd4b1a869
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 21:51:39 2020 -0700

    altoslib: Flush output when disabling remote
    
    This speeds up sending data to the other end.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 783a541d661f24f2df1dee86bad2e47950bee9da
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 21:50:38 2020 -0700

    altoslib: Don't fetch config data for every idle status
    
    This makes fetching data during idle monitor much faster, especially
    now that fetching the list of stored flights takes so long.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bbd052c0ad5b99673cf583198e50e6ed351fdfb7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 21:49:37 2020 -0700

    altos: Allow multiple manual firing of main/drogue channels
    
    Reset the 'fired' status so that you can trigger these multiple times
    without needing to reboot.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3c8946d992889edabffbab40aead578963de75f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 21:48:09 2020 -0700

    altos: Don't report inhibited pyro channels as fired
    
    Inhibiting channels happens when the channel conditions change during
    the delay period and was done by marking them as already fired. This
    worked, but the log file would then indicate that the channel had
    fired when in fact it was inhibited instead. Separate out the inhibited status
    so that the correct data appears in the log.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38db8202a4d6ab90305768410f1a37106cc95794
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 20:20:59 2020 -0700

    micropeak: Add support for MicroPeak v2.0
    
    MicroPeak v2.0 sends a 'unique id' with the log data; capture that and
    included it in the file name.
    
    MicroPeak v2.0 can be directly connected to the host using the µP I/O
    board. Handle that case by sending the 'l' command which will cause
    the device to dump the log.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0743e7213729df629aea90b3a5dc904fe397b5cb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 20:19:28 2020 -0700

    micropeak: Fix top-level window building
    
    The menu wasn't actually working, and the application would randomly
    start at the wrong size or crash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7dd23ac750226746f340df64107dab84cd7ea113
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 20:18:10 2020 -0700

    micropeak: Check for empty data when fetching log
    
    Don't pop up the graph window and don't save data from an erased
    device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 838d359ed8676f056fe487dad3dfbec34bd65009
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 20:16:55 2020 -0700

    altos/mpusb-v3.0: Make this build again
    
    It's not built by default and the requirements in the Makefile have
    changed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52eaf4a2480ac0fd367978e423e2f252949f978b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 20:15:32 2020 -0700

    altos/micropeak-v2.0: Functionally complete.
    
    Get flight mode working correctly.
    Offer log dumping from serial link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 999b3598019c75d77af6ab40c1942a7d57a2ec3c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 20:13:50 2020 -0700

    altos: Add MicroPeak v2.0 support to ao_log_micro
    
    Support 4-byte sample count (required for stm32l0 flash storage
    limitations).
    
    Mix in log ID on-the-fly so that erased flash parts still report
    device type.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 476fd2f2c23da427b6b2a68f7d285767a924041e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 20:12:22 2020 -0700

    altos/stm32l0: Big update in functionality
    
    Fix baud rate setting in LPUART
    Add code to turn everything off.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b1f4177d42e5e951a7db4289c847d355a785c2a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 6 11:05:03 2020 -0700

    altos: Remove support for !HAS_TASK_QUEUE
    
    This uses a bit more memory, but the amount can be controlled by
    setting the size of the sleep hash table, which makes this fit on even
    the smaller devices like the early EasyMini boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a6baf04bae3fe6a6b3da2f456419732ffeb4d056
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 18:17:07 2020 -0700

    altos: Remove ao_led_toggle API from general code
    
    The generic implementation would need to record LED status as it
    cannot be read back from the device on most hardware. Just get rid of
    it and let attiny keep its implementation (which does work).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0385d7d68c51e05f5b555749ccc20e3c7c202370
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 18:15:47 2020 -0700

    ao-tools: Add TeleGPS log parsing to ao-eeprom
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9df66f7589b663899e2c729b884eed4b64e5d4da
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 6 10:44:49 2020 -0700

    altos: add noreturn attribute to ao_panic
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 33ea5b3658377cea325db285a3e457724f660384
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 5 22:32:14 2020 -0700

    altos/stm32l0: Add LPUART driver
    
    This is a simpler UART which micropeak has connected to the LED and
    we'll use for transmitting the log on power up
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 980d54134bedb64d506c0702f09b4d5277000848
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 5 17:17:47 2020 -0700

    altos/stm32l0: Provide ao_spi_speed inline as per new clocking API
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2cd7ecf437bec322e6a201992d0404f31207bd68
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 16:22:21 2020 -0700

    altos/micropeak-v2.0: Finish hardware bring-up
    
    All of the hardware is working:
    
     * serial
     * SPI
     * ms56067
     * ADC
     * flash
     * clocking
     * timer
    
    Now we just need an application
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 845b51d09a6a6f257aebb6db202b12ee1fa9ed7e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 16:21:57 2020 -0700

    altos/stm32l0: Add adc and flash drivers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2b750a04bbaf428a38fd95891a7ce1cc7d3d2f3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 16:21:26 2020 -0700

    altos/stm32l0: Remove some unused code in ao_timer.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9dea51ca2174d86d5ab4a8a27179519b34869a36
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 16:20:56 2020 -0700

    altos/stm32l0: Remove some unused code in USART driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db7bf095dfa75858eb12328f104051ea1686e1d5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 16:20:26 2020 -0700

    altos/stm32l0: Get exti working
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e58d08a93818b3d60746f0f17b34e96fbf8ba0e3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 16:19:47 2020 -0700

    altos/stm32l0: Get SPI driver working
    
    This isn't using DMA, but it seems to work now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b0c4df25a0c419eeb53e0e241489c0bd6bee04ef
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 16:19:11 2020 -0700

    altos/stm32l0: Some device addrs were wrong
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3df505b02fb7d4ba2d40351e658931b02425b74f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 16:18:27 2020 -0700

    altos/stm32l0: More DMA fixes
    
    This code still doesn't work, but it should be closer'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e1a84e9ea21ef6037a2127098499e294d293fa8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 16:17:03 2020 -0700

    altos: Micropeak v2.0 doesn't have a flash loader anymore
    
    The current version doesn't have USB, so the existing flash loader
    protocol won't work anyways.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0375e9840ea1bcc486b56ccb3aaace57875312a7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 16:16:28 2020 -0700

    altos/ao_storage: Allow apps to #define storage parameters
    
    This avoids placing them in RAM.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 45b00da14ea814cf8f14dcb2cfaccaddd0fbb38d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 16:15:28 2020 -0700

    altos/ao_storage: allow erased byte value to be set by application
    
    External flash is usually 0xff for erased bytes, but other memory may
    use different values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b4da0492c6d9066c8a118fba9b8ffca02fa84ba
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 16:15:14 2020 -0700

    remove ao_delay_until from ao.h

commit 48bc180211f226b0406aae28a85d5e5ee77455a2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 22 17:42:03 2020 -0700

    altos: Add ao_delay_until to ao_notask
    
    Used on micropeak
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4a31f4bba8edee32d4f41780bd62bcfa064f20a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 22 17:41:11 2020 -0700

    altos: Move empty ao_mutex_get/put to ao_notask.h
    
    Make it work on any no-task project.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7cd8e0aca8ea42a5ff077971e439b0816608b324
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 20 15:15:35 2020 -0700

    altos: Declare ao_delay_until API in ao.h
    
    This uses AO_TICK_TYPE which isn't defined until we get to ao.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eea198932b8f12d4729f6138a40489d954d6f93a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 20 15:14:26 2020 -0700

    altos: Switch micropeak v2.0 to stm32l0
    
    The stm32f042 takes too much power for micropeak. Try the stm32l0
    instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d907b0fe40d31995848e5b207009ba230da2e36e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 20 15:13:09 2020 -0700

    altos: Add initial stm32l0 support
    
    A low-power cortex M0 chip for MicroPeak v2.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8a9273162b7016afc29f4c98fc3b66324d4c85b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 20 15:00:28 2020 -0700

    altos: Fix a bunch of time variables to be AO_TICK_TYPE
    
    The default tick type is now 32 bits, so all of these
    variables were mis-typed at 16 bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 304dbcbff72c6fa66c71224ecf98ec55447ffff7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 20:08:34 2020 -0700

    altos/stm: Fix stack validation code
    
    This is not included by default, and broke at some point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff3a2de3223f5cf3fd87f40cd9961e2c2890a867
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 3 12:43:22 2020 -0600

    doc: EasyMotor and EasyTimer have the same mounting geometry as EasyMini

commit 21da942560863ed191953e1af2fbca66bcc29fb8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 2 17:29:44 2020 -0700

    altos/stmf0, stm32f0: Call ao_boot_chain to start application
    
    This used to be done inside ao_boot_check_chain or ao_boot_check_pin,
    but it made more sense to have it done in _start instead. stm and lpc
    were adjusted, but stmf0 and stm32f4 were missed.
    
    This caused boards using this process to wedge in the boot loader.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b5e5899d174466552a34a4d8574f0439776240d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 2 13:31:58 2020 -0700

    altosui: Re-set pad orientation labels after product name is set
    
    We don't know what product is being configured until after we query
    the configuration, which means we need to re-set the orientation label
    once that has been fetched.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 341157c7415fcf879696c9d8167722a0c5ff264c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 29 10:53:39 2020 -0700

    altos: Use new ao_spi_speed inline to set SPI speeds using spec'd frequencies
    
    Instead of hand-adjusting SPI speeds for each driver and product based
    on processor supported rates, create an inline function that takes the
    maximum frequency supported by the device and maps that to a value
    supported by the SoC. This ensures that we don't accidentally drive devices
    faster than they want (as could happen with AO_SPI_SPEED_FAST), but do go
    as fast as possible in every configuration. Using an inline function means
    the value is computed at compile time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 202166275ba5220db54f63dcd9366e9115d09c0d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 28 23:44:33 2020 -0700

    altos: Support flash parts > 8MB
    
    The number of sectors (64kB) units in the connected flash
    part can be larger than 255, so switch from 8-bits to 32-bits for
    holding this value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c56bcc315ac29d001e62859b61ede890a8b7c64f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 28 23:43:04 2020 -0700

    altos: Protect shared storage_data with mutex
    
    As storage_data is shared between all threads, protect it
    with a mutex to avoid collisions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a24d37e40210b1fb5cdab944c3a6d9ae4e144d7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 28 23:40:36 2020 -0700

    altos/stm: Increase MISO DMA priority to very high
    
    We're still losing incoming bytes in full duplex mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3058ecdeafdee959b1103965f3df4ffcd59683e4
Merge: 0a53faa8 8ec51d69
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jul 22 15:23:02 2020 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 0a53faa8173565b1277d1a35c60022de567c2dce
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jul 22 15:22:21 2020 -0600

    ao-bringup: ensure TeleMega turnon scripts are using the right test versions

commit 8ec51d698921d07c394e6e0e48ac5d587f70ece8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 22 09:04:30 2020 -0700

    altos: Add 'booster' mode for dual-deploy igniters
    
    Booster mode triggers the 'main' channel at first motor burnout
    allowing the use of a simple flight computer in the booster while
    providing both a separation charge and an apogee event for recovery.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0c0dec140b8fa847704c9a22a39d254445188b9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 22 08:57:05 2020 -0700

    altos: Use state transitions to directly drive igniters
    
    Instead of a separate igniter API, have the igniter code monitor
    flight state changes to trigger igniter events. This simplifes the
    code while allowing further changes in the igniter code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ff8e55581ca85b9cc892806a2481d57a65e8bae
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 22 08:56:10 2020 -0700

    Releasing: save .map files too
    
    These are useful to debug issues with linker scripts or library problems
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4c5942fb082811f136322ec26de615cdb7e17580
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 16 10:23:34 2020 -0700

    Add support for TLS if needed
    
    Define USE_TLS if you want TLS support from altos.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8066ce73d96f85efe7f5e51b1576b5fd0ff9565e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 16 09:29:52 2020 -0700

    altosui: Spurious ; in altos-windows.nsi.in kept out TM v3.0 ihx
    
    Looks like a semicolon got stuck in this file, which commented out the
    TeleMetrum v3.0 firmware from being included in the windows build
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bfe338d11965d2d1715bdd81d92ef32f1b5ff9fa
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 2 20:21:19 2020 -0600

    releasing 1.9.4

commit 8359fcc23a93a37ee3aee4c5d2ef183f18ea3f27
Merge: b95d6674 9b62f683
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 2 20:20:59 2020 -0600

    Merge branch 'master' into branch-1.9

commit 9b62f683ff770970a87444dc25522fd771079333
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 2 15:26:10 2020 -0700

    Version 1.9.4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f74016150880265b3edb70637a6be3e6499432de
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 2 15:18:56 2020 -0700

    doc: Doc updates for 1.9.4
    
    Add release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b08a793fb6e6167d635bfbd31605a43db1f5ac5d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 2 15:24:01 2020 -0700

    altos: Make AO_STORAGE_TEST use a separate buffer
    
    The storage test code needs a buffer which can hold an entire erase
    block from memory, which means 256 bytes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 651c66ce117f479158fb0eebd9af6d73f0d9875a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 2 15:11:42 2020 -0700

    altos: Reduce flash temp buffer to make space for Em v1.0 ISR stack
    
    EasyMini has limited RAM; small enough that increasing the size of the
    storage buffer from 128 to 256 bytes left too little space at the top
    of memory for the interrupt stack, causing EasyMini v1.0 to crash at
    boot.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35b69569472b00e6937a5d3136d0c400f6b0378f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 22 17:33:08 2020 -0700

    Add telemetrum v3.0 firmware to release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f337aecd0370f81c84c84857e1b6325350d96a81
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jun 16 12:28:39 2020 -0600

    ao-bringup: first cut at turn-on scripts for EasyTimer v1

commit b95d6674d29534363c1d8f46280c028864bdca10
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Jun 15 20:34:50 2020 -0600

    releasing 1.9.3

commit f31d842d0e07a1893441cb89fb287b31b86d28c1
Merge: 0fd503fb f615725c
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Jun 15 20:26:35 2020 -0600

    Merge branch 'master' into branch-1.9

commit f615725cb6f963cf46715e936e1d60ce7866c3bb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 15 19:11:49 2020 -0700

    Version 1.9.3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 765d4c96510c823b4e9410c55ba8466438846029
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 13 22:50:40 2020 -0700

    doc: Update doc for 1.9.3
    
    Add release notes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ab5855abccf704cc4cdbafb0e995de0a0162af5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 13 21:37:44 2020 -0700

    Update 1.9.3 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d304f0ea2bfc48abc8c310828aa10c6d642065d0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 14 00:04:31 2020 -0700

    altos: Leave floating printf enabled on m3 devices
    
    These devices all use floating point computations, so leave the
    floating point printf included in case they print one of those
    values. If we run short on flash space, we can switch back.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91b6d1e56a37a2cfae53c3727feaaa40505f48d9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 13 23:39:00 2020 -0700

    altos: Fix printf format mis-matches
    
    Lots of values passed to printf are 'long' instead of 'int', so
    fix the formats to use the right size indicator.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0adf3f44b4a1b4bfc966dd4841c74157f60d604
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 13 23:36:13 2020 -0700

    altos: Remove newlib-nano defines from Makedefs.in
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4802fe6dcae0e57c2e992dde008e3bcc84ea8d7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 13 23:13:35 2020 -0700

    altos/test: Ignore ao_flight_test_mini binary
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f550b645438e9f41afe0a45ff09caf05cf20003f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 13 23:12:55 2020 -0700

    map-server: Manifest files are generated now
    
    Ignore in .gitignore
    Remove in 'make clean'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52e0efd79e9043cde384089863920986a7331764
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 13 23:11:49 2020 -0700

    Add EasyTimer firmware to packages and Releasing
    
    Make sure we include EasyTimer bits where required
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00646d2700a2f4cf500e716e5a111057e3820475
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 13 23:09:54 2020 -0700

    Check for picolibc when testing arm compilers
    
    Remove configuration checks for newlib as picolibc doesn't need
    separate configuration variables.
    
    Make sure test program actually links as this tests to make sure
    picolibc is working.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b9cc05bd3d417c957f47a64493f4a22caf660c55
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 13 22:40:42 2020 -0700

    doc: Update for EasyTimer
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2eee4b8a3f358e2d649096149f3cedc1a39927e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 13 22:39:35 2020 -0700

    doc: Avoid mis-interpretation of '+' in device wiring tables
    
    Looks like asciidoctor does something magic with '+' characters in
    table contents. Avoid this by using +++. Sigh.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d779d8e5b1106aaec6170761e6f5bd4e8d5ac6e7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 9 11:48:17 2020 -0700

    altos: Fix HAS_FLIGHT_DEBUG for easytimer
    
    Remove baro-specific bits of the debug output when
    there's no barometer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d9c84d834f7fb4f36cee815dec2642737f73edc4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 9 11:47:22 2020 -0700

    altos: Don't include baro-specific config values for easytimer
    
    These settings aren't used on easytimer, so don't include them in the
    configuration system. This makes sure they don't appear in altosui.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97cd271b3febf36d3e9943cea8d74332a128060c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 9 11:46:31 2020 -0700

    altosui: Remove six-axis pad orientation for easy timer
    
    Wait until easytimer actually has six-axis support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2781c187d58955bbac5c9fcf498c3b46a84a13d5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 9 11:45:53 2020 -0700

    altoslib: Fix easytimer voltage conversions
    
    Battery and pyros all use the same circuit (100k/27k).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b00a155bef319984ec2cf11898355edf94348a4a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 8 22:08:28 2020 -0700

    Add some release note notes

commit 869bc258b727d2046835ac52a361d2ef529895ee
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 8 20:55:28 2020 -0700

    altoslib: Add EasyTimer idle monitor support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b07ca2827a498e6dd3c6b62819f71679291f9acc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 5 17:15:10 2020 -0700

    Add EasyTimer configuration support
    
    Needed six-axis pad orientation support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa30825d015d92bdbc95d2684386beef9fe9dc01
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 8 21:26:23 2020 -0700

    altos: Leave accel data in ring raw; swap for orientation on fetch
    
    Instead of re-writing the acceleration data in the ring to adjust for
    pad orientation, just leave it alone and flip it each time it is
    fetched. Much simpler this way.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c246a366a6e0117e70abafc30db71c0545b88f6f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 8 21:05:17 2020 -0700

    altos: Handle flight_log_max not being multiple of ao_storage_block
    
    In this case, flight records start in the middle of an erase block, but
    now end at the erase block before the next flight.
    
    When checking for an empty log slot, the entire erase block containing
    the start of the flight is checked to make sure it's clear, skipping
    it if not.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 89726f5b1adceb243c5e2d5c958fc13c10f9a2d0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 8 21:03:31 2020 -0700

    altos: Round selected log size down to ao_storage_block multiple
    
    There was some (broken) code that complained if the value set wasn't
    correct, that has been replaced by code that accepts any value and
    just rounds it down to a multiple of ao_storage_block. The code also
    stops complaining when set to the current value when storage isn't
    empty.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 936eceded2d08f4eb7318b28bd1be6cd3b06a7b3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 8 21:01:31 2020 -0700

    altos: Move ao_storage_erase to shared code. Add len
    
    This makes ao_storage_erase take an arbitrary length. The new version
    erases each storage block if there's any un-erased data present, and
    then also checks after erasing to make sure the block is clear.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e142c4bd6f2fbab74fb7b7cea7e9a19234ed0123
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 8 20:52:09 2020 -0700

    altosui: Adjust max log setting for storage block size
    
    Need to round log sizes down to a multiple of the block size so that
    erasing works sensibly on the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4c93942bbde7a538d1dca114f20dc827275a8e1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 8 20:49:42 2020 -0700

    altoslib: Remember flight list in AltosConfigData
    
    Do this instead of having to re-fetch and re-parse in AltosEepromList
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00492a0801eb93ad98be496585741a025ffea16b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 16:45:00 2020 -0700

    altos: Initialize pyro code for easytimer-v1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f110d01245762d905ad5b7fd1fc7753e17fb249
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 16:23:44 2020 -0700

    easytimer-v1: Enable pyro commands
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5bfcefc475698dada8be8a2d66afbfcc064d4612
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 16:23:09 2020 -0700

    altos: Fix ao_ignite.c to work without HAS_IGNITE
    
    Need to register commands even if HAS_IGNITE is not set
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0fb9e53a6b62c96d067e2974c5317e3bce638fb2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 15:48:16 2020 -0700

    altos: Build easytimer-v1 by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a901ec5fef409a6675c24518aead2925dcd66cc3
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Apr 8 13:43:22 2020 -0600

    altos: add easytimer-v1 source directory

commit 9416e5d71dc57df6612f62451433a34bf669b2cc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 16:03:23 2020 -0700

    altos: Allow flight support without logging
    
    EasyTimer flies rockets, but doesn't have SPI flash for logging.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4f1dd045465fbb7436a22d82b279319f7449fed
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 16:02:54 2020 -0700

    altos: Allow BMX160 to be used as primary accel
    
    EasyTimer doesn't have a high-g part.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d553e7448fe22f593eb8ab8246e872d856484bab
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 16:01:45 2020 -0700

    altos: Allow igniter status beeping with only 'extra' channels
    
    EasyTimer doesn't have main/apogee charges.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f32a19aedb7d0e33899038e3fb04fe8a773291a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 12 17:00:47 2019 -0700

    altos: Allow accel-only flight code
    
    EasyTimer won't have a baro sensor, so we need some way to track at least
    the ascent part of a flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6363403d6c08310a16769bf49b8acc45a08bd619
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 16:00:04 2020 -0700

    altos: Allow MPU9250 SPI speed to be set by application
    
    Rather than requiring 1MHz
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e5e7edb0aed5a183bbdd7484fec75a11160d01d4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 8 17:20:23 2020 -0700

    ao-tools/ao-usbload: stubs in man page for missing options
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7797000eeaf11027200f12ee7f1eee5ed677f268
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 4 11:58:54 2020 -0700

    Mark stm_interrupt_vector as const so it is READONLY
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2108da105ed9c915fc09d1251dc655bf11203d79
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 15 17:05:17 2019 -0700

    altos: Move from newlib-nano to picolibc
    
    Use picolibc.ld, which involved some .ld file hacking, including:
    
     1) Defining ao_boot RAM address in the .ld file and declaring it 'extern'
     2) Changing how m0 interrupt vector got moved to ram
     3) Using -Taltos.ld instead of -Wl,-Taltos.ld so picolibc.specs wouldn't add picolibc.ld
     4) Placing romconfig vars in '.init.1' and '.init.2' sections instead of '.romconfig'
     5) Place code needing to run out of RAM in section .srodata instead of .ramtext
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 74d5dfd1801da8efbb7693a607fd25e35ad1158d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 4 10:36:41 2020 -0700

    ignore .map files

commit f32488556ce25e439fbab941f8019db639824f98
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 3 20:01:14 2020 -0700

    altos/lpc: Add explicit defines for all register groups
    
    This lets the compiler see the constant address, rather than
    having the linker stick it in later.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0459a4c7239c3017a61926bc8aab59e556b7eb5e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 4 10:35:23 2020 -0700

    Create map file for all programs

commit 3d70ca6bae383878d8a7c13b862031531fa4ff81
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 3 18:31:19 2020 -0700

    altos/stm: Make ao_eeprom_total a #define instead of a const variable
    
    This is unused outside of ao_eeprom_stm.c, and as global const takes
    up space in flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b62e2b4831eb90c65ecdf05c219e8711840ef1e
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 14 12:44:27 2020 -0600

    point turnon_telemetrum_v2 to correct test script for v2.0

commit 918865cca7297dde522e1886edf71b46d6ee2534
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 12:53:47 2020 -0700

    ao-tools: Declare ao_verbose as extern in shared header.
    
    gcc-10 disables 'common' behavior by defaul, so we need to only define
    variables in one location now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2acda26c1e4e0d7ffda9cd985180562f61aa88b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 12:51:13 2020 -0700

    ao-tools: Use array indexing instead of addition to make gcc-10 happy
    
    A struct with a trailing zero-length array (for variable-length data) is
    treated as a zero-sized object when doing pointer arithmetic, but treated
    correctly when treated as an array. This generates a warning from gcc-10
    
            load->data + address - load->address
    
    while this, which is 'the same', does not:
    
            &load->data[address - load->address]
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 769f0e6049ae0440cf32f8cb0b5e504f67f5e911
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 26 10:09:51 2020 -0700

    Start release notes for 1.9.4

commit a6687ce902a3011796aee93f87d08545e5f0cec9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 26 10:01:48 2020 -0700

    altosui: Report baro ground alt for 'Pad Altitude' when GPS missing
    
    The 'Pad Altitude' field in the pad tab of AltosUI was originally one
    of three fields designed to report the GPS position of the pad. When
    TeleMini was added, the code was updated to separate the lat/lon from
    altitude display, but the pad_alt field in AltosState used for that
    was still only computed from GPS data.
    
    This fix gets rid of the confusing 'pad_alt' field in AltosState and
    has the 'Pad Altitude' data select either GPS ground altitude or baro
    ground altitude, depending on whether GPS data is available.
    
    signed-off-by: Keith Packard <keithp@keithp.com>

commit 455a059b9c44332b8dadd87fba31d194f66997b5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 21 21:13:08 2020 -0700

    map-server: Create Manifest.txt at build time
    
    This ensures the libraries have the right names
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9c4c615578c94201140cf904cfd7e3334853973
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 4 18:52:35 2020 -0800

    doc: start release notes for 1.9.3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8716b015cfeb4955c0224c32d3c01e66b092209
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 4 18:51:00 2020 -0800

    doc: Document APRS offset configuration value
    
    Update screen shots including this as well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47f4121ae6596bdf18566295df2fdbe94fe676b8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 4 18:23:14 2020 -0800

    altoslib, altosui, telegps: Add configuration support for APRS offset
    
    Configure the position within each minute that APRS transmissions
    occur
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f4ff561bfaa7c59493eb9d6b99f0347db381a167
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 4 17:26:49 2020 -0800

    altos: add APRS 'offset' value to set APRS transmision time
    
    This value is the offset from the top of the minute for the first APRS
    packet in the minute. Subsequent packets will be transmitted
    'interval' seconds apart for the rest of the minute.
    
    This allows multiple transmitters to be configured to share the same
    frequency and not transmit at the same time.
    
    Note that this offset only works when the device has GPS lock.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0fd503fb65d513f54dade10256545043725d83e3
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Feb 25 23:57:51 2020 -0700

    update ChangeLog for release 1.9.2

commit 28e77f3520095a1e47ab25721b186e42110ffd3e
Merge: c6ea2666 91ab3acc
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Feb 25 23:57:31 2020 -0700

    Merge branch 'master' into branch-1.9

commit 91ab3acc113dc24e1ebce89875def646e590fb12
Merge: 243a6b5e aae87fe9
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Feb 25 23:55:29 2020 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit aae87fe9fa8d596fea6cc19d4701a7583255150f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 17:08:58 2020 -0800

    Bump version to 1.9.2, android 27
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ec46adee44ea08120b1940ca55a5fbdf56874bb1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 17:07:15 2020 -0800

    Bump java lib versions in preparation for 1.9.2
    
    Quite a few changes; let's bump the version so we don't end up with
    the wrong version on some machine.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 45f7b91ea126f8f9e607a8ee53df655d992590f2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 22:51:54 2020 -0800

    libaltos: Create altos_pause_one_second API
    
    This is to wait for the reading thread to stop using the file object
    while cleaning up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 243a6b5ee60989ec4c04b8a7638907d2517d4926
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Feb 25 23:18:11 2020 -0700

    update copyright assertion in TeleLaunch manual

commit c6ea266630b9eef7a80e267a4430d22d50954908
Merge: 12d6b4dc 7d2b2bae
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Feb 25 23:17:22 2020 -0700

    Merge branch 'master' into branch-1.9

commit 7d2b2bae8a7ed2e15040c58819c8e96215e8292b
Merge: af8f0b58 0993f791
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Feb 25 22:56:07 2020 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit cec4dea23b7b3cfe0f0a43c19b3118cc98cb9414
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 21:50:10 2020 -0800

    altoslib: Remove debug printf from AltosIMU.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0993f7913efb3bc217df6ed2b38b5f6ad018b95d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 17:08:58 2020 -0800

    Bump version to 1.9.2, android 27
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 76b288f8d02e0a48f04de9455a2dd0b77e48bd63
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 17:07:15 2020 -0800

    Bump java lib versions in preparation for 1.9.2
    
    Quite a few changes; let's bump the version so we don't end up with
    the wrong version on some machine.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af8f0b5892e01bdcf9fa4ca86a4752a8294992a1
Merge: 25c1ef61 65df207e
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Feb 25 22:44:08 2020 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 8011baae420bb96ec487bfb343a761af70dd980d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 17:24:23 2020 -0800

    Set doc version and date from package version and release date
    
    This is a bit less work than manually updating them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65df207e00545ccd380ff7a80933b2d223c1544b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 17:08:58 2020 -0800

    Bump version to 1.9.2, android 27
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a74e4816b669346fac1c72cfc629d11e2ca5e336
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 21:42:29 2020 -0800

    altoslib: Add TeleMega-v4 adxl375 config to AltosConfigData
    
    Needed for idle monitor to work correctly
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 528fdc4e03466430c8d81fc78c90d3c9e8465ca7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 17:07:15 2020 -0800

    Bump java lib versions in preparation for 1.9.2
    
    Quite a few changes; let's bump the version so we don't end up with
    the wrong version on some machine.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 25c1ef61b9c791b8e55b7d0ebd948ece4ca954c7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 17:08:58 2020 -0800

    Bump version to 1.9.2, android 27
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 61d3064e7c4958036e241381aa4ab791582820f8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 17:24:23 2020 -0800

    Set doc version and date from package version and release date
    
    This is a bit less work than manually updating them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52149fd81df45f37f5097850795f290f463c43ef
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 17:07:15 2020 -0800

    Bump java lib versions in preparation for 1.9.2
    
    Quite a few changes; let's bump the version so we don't end up with
    the wrong version on some machine.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9ad50b83eca7aea8c9e568a661fcdd98598d0c73
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 15:35:33 2020 -0800

    altoslib: BMX160 driver now returns µT values for mag sensor
    
    These are converted on-board using calibration values provided with
    the chip.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff2dc6ea0e62f6534b5fb1b0ec2edd4702cf4a41
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 14:57:35 2020 -0800

    altos/bmx160: Compute µT in bmx160 driver using trim data
    
    Instead of attempting to ship all of the trim data, compute µT
    on-board. This means losing the raw sensor values.
    
    The compensate functions were taken from the bmm150 sample driver
    provided by Bosch under the BSD 3 clause license.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9aedcdcab2c24b804236a5b8f99da634cac7ba05
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 11:58:17 2020 -0800

    altos/telemega-4.0: Fix signs of IMU pitch and mag across
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0ab2332358eb0990cb55074001b675d390eae2ca
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 11:55:36 2020 -0800

    altosuilib, altoslib: Add azimuth and compass to reports
    
    Here, azimuth means change in horizontal plane from launch.
    Compass is reporting mag field strength in X/Y plane
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97cb2a808ad8853cead2d9722b7258b1b62df7a4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 11:54:11 2020 -0800

    altoslib: Remove hard-coded accel scale for mega eeprom
    
    I don't know why this is using a hard-coded value which only matches
    early TeleMega v1 boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4039a60bbe972fd022699d62ab06a8f1bc4af69
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 11:51:57 2020 -0800

    altoslib: Correct sign of telemega v4 pitch
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 88cf92175a4524143349491a817c9037dd8c39ef
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 25 11:57:21 2020 -0800

    libaltos: Delay freeing serial device until not busy
    
    Just spins for a while waiting for reading thread to wake up and
    return.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 017e7ed4d2eea2bbc01972a8dfe11babd42d5993
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 23 16:43:23 2020 -0800

    altoslib: Fix Tmega v4 eeprom parsing
    
    Mangled the source while hacking things somehow; both accel and gyro
    corrupted.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5a8a4d8de49484a2edba62cc9b84377aa5415a6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 21 00:19:25 2020 -0800

    altos/altoslib: BMX160 Y axis gyro direction is opposite from MPU
    
    Just need to flip the sign to make the values go the same direction.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3db6d4698d05c5017565a25b9b5c0f538014bebe
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 20 23:43:01 2020 -0800

    altos: Adjust comment about how the BMX160 is oriented
    
    Bdale promises to make them all the same.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 101d068b92031169e2b11350528be0833ff2f8ea
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 20 23:42:24 2020 -0800

    ao-tools: Handle TeleMega v4.0 telemetry in ao-telem
    
    Same packet format as older telemega, but axes differ
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c68e96ef650b2a149064069e26a4dc3ac741d42
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 20 23:41:27 2020 -0800

    altoslib: Correct IMU axes for telemetry data
    
    The telem data was assuming original TeleMega sensor orientation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 88cb0f4a791e0867ccd279e6d244d94f0b1765e9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 20 22:53:31 2020 -0800

    altos: Init BMX160 more carefully
    
    Check accel and gyro power status after turning them on, waiting
    for a while to see if they actually power up.
    
    Read more registers after configuring accel to try and get things
    reset better.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>
    
    Oops.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0ca9a7c6fc914c4b555c99863828861ec54fa01d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 20 22:44:54 2020 -0800

    ao-tools: Add TeleMega v4.0 to ao-eeprom
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5e8de5a2cef200c1426674859967edc0fdd13663
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 20 22:35:54 2020 -0800

    altoslib: Remove ADXL375 debug noise
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 67356ae163487e57e6d9c83cb2b7f71a69f8aa27
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 20 16:51:15 2020 -0800

    altos: Get BMX160 initialized correctly
    
     1. Don't reboot at startup. This probably takes a lot longer
        than 100ms.
    
     2. Power up acc and gyr before attempting to configure
    
     3. Clear data registers after setting acc range
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee38b3bea20f1e3a73e67aea151f9fc6abdc8483
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 20 16:23:33 2020 -0800

    altos: Copy BMX160 data to data ring
    
    Otherwise you get a lot of zero
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58976653e5d4b8eff1781e69115c4b7e86db045a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 20 16:12:43 2020 -0800

    altos: Log BMX160 data when present
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b824da227f08e45f7a1a59661b8c0fe45068d60
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 19 14:30:50 2020 -0800

    Bump version for new android upload
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95fe82630797bae5a9a7ffacc871bbd00efe2d82
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 19 14:01:15 2020 -0800

    altosuilib: Eliminate a couple java compiler warnings
    
    Were using new Integer(int), when just passing the int would
    'auto-box' as necessary.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 76c5e6bf7ecc30ae77a9744a4af26dca3dc46254
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 13 16:00:43 2020 -0800

    altosui: Add TeleMega v4.0 firmware to altosui packaged bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3055f698e0426d7785843ea1668478375fd02642
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 13 15:59:25 2020 -0800

    doc: updates for 1.9.2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ac11767a1b8d3e2faf6f020f5161ed05b801070
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 13 15:39:08 2020 -0800

    altoslib: Pass all flight records while reading telem file
    
    This makes sure we get complete GPS and setup information before
    the flight starts.
    
    To make this work, have data skipped when building time series
    instead, and have realtime replay fast-forward through the initial
    data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit da499044c9d66e42915e3f6429b6b86999b06c2c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 13 15:38:34 2020 -0800

    altosuilib: Put units on GPS altitude and height in info table
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 305e7852f764e6a06024a9d57b5766d2f8a056ee
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 13 15:36:57 2020 -0800

    altoslib: Report raw baro height instead of kalman filtered value
    
    Report raw sensor values to the user during flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ff0442702ee41179341240b1bbf290be89e1718
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 13 15:06:45 2020 -0800

    altoslib: Re-initialize cal data for eeprom record set
    
    Instead of leaving it uninitialized, restore the initial data from
    the flight log.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58e7fccc24f933fd64e272207f783ca79002b7ba
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 13 15:04:40 2020 -0800

    altoslib: Report whether GPS data contains new location/sat info
    
    Use this to limit time series additions to fresh data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2e45e4b1351ce505b9294d5dc25429ab9721e62
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 13 15:00:55 2020 -0800

    altoslib: Move 'state_name' API to AltosCalData
    
    That's where state lives.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f400b8dd98680e47645d43940bcff5c0c99bb9e9
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Feb 13 12:15:01 2020 -0700

    include TeleMega v4 in list of firmware included in fat build and LLC repo

commit 06cf43cea9149f8c04c80785a613408454eab4f2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 12 20:07:02 2020 -0800

    altoslib: Add support for TeleMega v4
    
    TeleMega v4 has a new IMU chip, which required adding support for
    multiple IMU types, including different scale factors for each mag
    sensor axis.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f51ad734dfccfa2d4b7515a94dc337eb2b2708a2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 12 20:05:31 2020 -0800

    altoslib: Store IMU accel ground data in converted values
    
    For some reason, this value was in sensor units.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b2deef36f135b52ba2eea3042e9d1a1198d4a9ae
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 12 20:00:22 2020 -0800

    altosuilib: Add fourth column to info table
    
    Holds IMU data and igniter voltages
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4435843fc8eb06751dbb1ba00fb2856563963e5e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 12 19:59:19 2020 -0800

    altoslib: Add 'gauss' units for magnetic field strength
    
    Compute in gauss, but display in nT (G * 100000)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea4140a81dc4ec6e541512ed70861691b57c4904
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 12 13:00:18 2020 -0800

    altos: Create new log format for TeleMega v4
    
    Has BMX160 instead of MPU9250
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 440292f53125d7da29b3b4e8caa2c94c557b8325
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 12 13:01:08 2020 -0800

    altos: Add new telemetry packet format for TeleMega v4
    
    Bmx160 instead of MPU9250 changes orientation of IMU data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cff5506e97314bf9b34d80a01cbdfcad22f3ce08
Merge: e220b00d 803e260d
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 12 12:55:04 2020 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit e220b00d5c3af42dd840dbd34fba264e11046fc6
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 12 12:54:38 2020 -0700

    update TeleMega production scripts for v4.0

commit 803e260dcf9beba5684c4dcdda14255d76b2e551
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 12 11:53:25 2020 -0800

    altos: Fix wiring mistakes for TeleMega v4.0
    
    Enable SPI 1 on PB3 PB4 PB5 (just sets output pin config)
    Disable I2C (we're not using)
    Fix Pyro channel C port (port D, not port B)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e64b1bc108bd75bcd6271631e48abde84af4631f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 12 11:37:05 2020 -0800

    altoslib: Reset consecutive GPS count when GPS bad
    
    This makes sure we get back to 'GPS not ready' when GPS goes unlocked.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae38a6b5c6cb6c7d89b3237623a890e5101e282b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 10 14:25:55 2020 -0800

    altosdroid: Change layout of idle mode dialog a bit
    
    Stick 'callsign:' label and callsign on same line. Save a bit of vertical space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ddd0c7b57aca8fe7e68c0b8dae21ba79e163db15
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 10 14:25:26 2020 -0800

    altosdroid: Make frequency changes during idle mode work
    
    Otherwise, we'd end up sending a freq change over the link, which
    would do 'bad things'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9697da4767bceb07c4ec070e1537ff4f91a74a87
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 10 13:55:37 2020 -0800

    altosdroid: Use select tracker dialog when deleting a tracker
    
    Remove custom delete tracker dialog code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b7b31793dc91a25d215c216e8db481d549e66ad
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 23:59:44 2020 -0800

    Bump version to build a new android app (25)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1df1efc7a022597287722dc3a34d3a678fde6d3b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 23:55:58 2020 -0800

    altosdroid: When the user switches frequency, look for something there
    
    Instead of sticking with the original tracker serial, when the user
    selects a new frequency, check to see if some data appears there and
    switch to that tracker.
    
    Only do this once, and stop looking if the user selects a tracker.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a88989faebdc3a4b5198c4150096e6f626d76a96
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 23:09:50 2020 -0800

    altosui: Set idle mode frequency before starting link
    
    This makes sure the link doesn't try to start at the wrong frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96bdc1585d89e09381bd164dfb2ea41e8257df26
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 20:46:19 2020 -0800

    altosdroid: Add helper 'makefile'
    
    This builds the app from deep inside the source tree.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41ad298abe24cfef0a9db0259436b998a66e4208
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 20:45:50 2020 -0800

    altosdroid: Ignore 'build.gradle', which is built from a .in file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 79f2677143f85a2807b8d4e297f3617aafbd34da
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 20:44:10 2020 -0800

    altosdroid: Change tracker selection dialog
    
    Create a table of trackers and allow sorting based on each column.
    When a tracker is selected, the app will not change to another tracker
    automatically.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e3c4493cfa8d92d96808d14d1c12abb35ecb442
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 20:42:11 2020 -0800

    altosdroid: Fix a pile of compile warnings
    
    This deletes code which doesn't do anything in API versions past 21 and
    changes a few bits of code to use the newer supported way.
    
    No functional changes are intended...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4fc7db3bc82d4a2222bcfc0cd33b298bc5d3430
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 7 22:00:53 2020 -0800

    altosdroid: Use custom dialog themes for all dialogs
    
    Instead of a mixture of custom application and standard dialog themes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 953caffcb87f3aae5962ee2540eef9310c84d32d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 7 20:47:33 2020 -0800

    Bump version to build a new android app (23)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d84a777f07c9a876acdcda44ebc9186ef226d896
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 7 18:44:14 2020 -0800

    altosdroid: Add text size selection
    
    Add a setup menu item to change the size of the text everywhere.
    This involved re-doing the layout for most of the tabs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 33be3363985ec4998c1ae09cab7969aebf775b60
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 6 23:32:24 2020 -0800

    Bump version to build a new android app -- 1.9.1c
    
    This will suffice until we ship 1.9.2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0891fbdcc13a61836462525edab776366f86a24
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 6 23:21:02 2020 -0800

    altosdroid: Check if the telem service is running when bluetooth gets enabled
    
    Make sure we aren't trying to send a message when the telem service is
    shut down and the pointer is null.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5186c6f64b374404aeb88b64227a006a58634ab9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 6 23:17:30 2020 -0800

    altosdroid: Request fine location permission if not already granted
    
    This avoids crashing if we don't have access to fine position
    information.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 273bae40dfabc3249acd4427d92abb2ed9fefa6c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 6 17:15:14 2020 -0800

    altosdroid: Switch to NotificationCompat
    
    Instead of Notification, which doesn't appear to work on older android
    releases.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fc73795cd3ad95d8f177a2eb3792d8ed0c7c540f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 5 10:52:05 2020 -0800

    Use 'must' instead of 'should' in reference to switch for pyro battery
    
    Make this consistent with docs for other boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ad947ec3f313bbd1295af5dc64f1af9ec09bfe27
Merge: 5b1bd4f8 d8e9d152
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 5 11:48:13 2020 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 5b1bd4f87f682c1956e173a27414ceb076b20ceb
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 5 11:46:36 2020 -0700

    update info on using separate pyro batteries to encourage including a switch

commit d8e9d1529cb744742cfd7d4f5e9f168d4d6dc498
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 28 12:57:25 2020 -0800

    Bump altosdroid version to 20, always build release apk
    
    Now that altosdroid doesn't need a maps key, we can always build the
    release version. New version is 20 instead of 19 because I messed up
    the upload and google play store is harsh.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65169d0b33ce6651508127a5ca45b6de27616352
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 28 12:56:27 2020 -0800

    Force using opensdk-8 to build altosdroid
    
    Current gradlew doesn't run on newer java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db786c24510d2df8f5a5d3ec0931deaa252469ad
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 28 12:55:47 2020 -0800

    Generate altosdroid/app/build.gradle at configure time
    
    This file includes the release version numbers, which are set in
    configure.ac.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ffbf340c516a7fff7c95b808586f623269fe4338
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 23 17:40:30 2020 -0800

    altos: Always start application if boot pin isn't in use
    
    When there's no 'force boot loader' pin, jump to the application
    instead of stopping in the boot loader.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee009332a17557076f4c9348a31658f5bf605240
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 23 17:31:13 2020 -0800

    altos: Disable ao_btm debug. Avoids breaking 's' command
    
    The 's' command is used by altoslib to get the RSSI value during
    monitor idle operations. Let's avoid breaking that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ced64381edf2478cd080a340a0f88b3d98a1b13d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 23 14:34:14 2020 -0800

    altos: TeleMini beeper is on Tim2 CH4, not Tim3 CH4
    
    This makes the beeper work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 539598ce53744f7d70dad482e8865d427fca2fa2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 23 14:32:10 2020 -0800

    altos: Make debug telemini firmware a bit easier to build
    
    To enable debugging, we need to stop using the SWD GPIO pins, which
    are normally used to trigger boot-time firmware behavior -- SWDIO is
    used to force entry to the boot loader while SWDCLK is used to force
    default frequency and callsign.
    
    This patch makes it easy to edit ao_pins.h to disable the default
    frequency option.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54e98a498db0d7026ce16c3ad53bc60986c68253
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 22 12:41:40 2020 -0800

    altos: Use AO_TICK_TYPE/AO_TICK_SIGNED for lco/pad code
    
    Was using 16-bit types, which 'mostly' worked, except that the pad
    code compared ao_time() with a 16-bit value when determining the radio
    status. After the box was on for 10 minutes (timer wrapped), the RF
    timeout check would always fail, so the red LED would be lit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 366c1422f6d34c8f616dc95c2767d01c4f53f581
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 6 00:18:25 2020 -0800

    altos: Build TeleMega v4.0 bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eae79e1429f1df53577f4ee78e8a0856a8ad5975
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 6 00:16:15 2020 -0800

    altos: Initial bits for TeleMega v4.0
    
    ADXL375 and BMX160 instead of MMA655x and MPU9250
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7031c5abbb56b99b067fb8705c8c32695c70e46
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Dec 10 18:17:42 2019 -0700

    doc: update copyright year in footers, note need to check this doc/RELNOTEs

commit b7ce0474eb30c0fb7e08f26891eb40f208de6a96
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Dec 9 03:51:02 2019 -0700

    Releasing: add TeleMetrum v3.0 firmware to production list

commit 5565bc256ccf1f32474d7080fe0f75ce4fad4dc1
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 5 23:16:34 2019 -0700

    Releasing: capture notes from 1.9.1 release

commit 12d6b4dc6ec0a18bb6b1e3dfddbb9d6f00f76f99
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 5 22:22:32 2019 -0700

    update ChangeLog for 1.9.1 release

commit fdf1dbd3d945f6f34f404ffbcb57781f4df23015
Merge: 5b4da841 bfc4999c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 5 22:21:29 2019 -0700

    Merge branch 'master' into branch-1.9

commit bfc4999c99dc7ba29226a956f3991c2a45a1dd88
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 5 22:18:12 2019 -0700

    update release date in all documents

commit 55af5c3a0df734cedbac98bbe350846add45d5e3
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 5 22:15:21 2019 -0700

    start the process of releasing 1.9.1

commit 2ff2b4962f3241ede9a7718e373a68296c4e308a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 5 21:05:28 2019 -0800

    Release note about self-flashing on windows waiting for devices
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 695dba4e37ccca9a2dc06e1656699a13406002c1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 5 16:59:40 2019 -0800

    altosuilib: Wait for Windows to get ready with new device
    
    Windows appears to report the new device path long before
    the path is actually usable. Stick some long delays trying to
    open the device before giving up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b3c6806a3039ac8c4c1a1e2d6715b0cdc5b9632
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 3 19:34:06 2019 -0800

    altosuilib: Show the recovered product name in the Configure Rom dialog
    
    This lets the user know that things are actually working as expected
    as the correct device name should appear in the dialog.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5bdf8eeb1cdc1a50c9abd0f8962533f6970bd7f0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 3 19:31:34 2019 -0800

    altoslib: Linker script changed -> the USB desc is two bytes off
    
    The USB descriptor used to be at 0x0800110c in previous releases and
    is now at 0x0800110a, presumably because the linker script changed the
    padding requirements of those sections.
    
    Search forward and backwards two bytes to see if we can't find the
    descriptors by checking for the descriptor value and size at each
    location.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 946faa1541f69c6cf2759c13760fa9bc16e2298e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 26 15:47:07 2019 -0800

    doc: Update docs to reference TeleMetrum v3 where appropriate
    
    Mostly just add 'or newer' to various TeleMetrum v2 bits. Also add
    specs for the v3 board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68aa05881239264b95e37c648faa821fd0230402
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 26 15:33:25 2019 -0800

    doc: Mention TeleMetrum v3.0 in release notes for 1.9.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56767df42a2582c9663554f27b354c2b9c180119
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 25 18:38:14 2019 -0800

    ao-telem: Show all 24 bits of GPS altitude data
    
    Need to mix in the upper 8 bits from devices which include them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4a47071b7f23874ca3d889ba18cd218d6445df29
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 25 18:36:16 2019 -0800

    altos: Send "metrum" telemetry packets for TeleMetrum v3.0 boards
    
    This includes the ADC values, which report igniter continuity
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 66b6b2d5fb1313d5e16a3f802c2af8cc6585362b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 25 18:15:16 2019 -0800

    altoslib: Set up adxl375 for TM v3.0 in idle mode
    
    Need to select axis and polarity for each adxl375 product.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9bb091f6d6aec6e5e887eebc93174106b25a7a98
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 25 18:02:06 2019 -0700

    ao-bringup: add production test support for TeleMetrum v3.0

commit f95b359aa1a3ba3982a162bdf398d0b261806d47
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 25 17:57:27 2019 -0700

    altosuilib: TeleMetrum v3, like v2, doesn't use flash for config

commit 8554da3b6c05c1094045f4fb21b43c183029408f
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 25 17:55:10 2019 -0700

    altosui: add TeleMetrum v3 to delivered firmware list

commit 0072e9741719367a1f6748d242cd6195a1a7c6a5
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 25 17:50:41 2019 -0700

    altosui: add monitor idle support for TeleMetrum v3

commit 6d55d03587e9f71a7e8320a6b36fde25edc63b28
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 22 17:18:58 2019 -0800

    altos: TeleMetrum v3.0 has ADXL375 and Max-8Q
    
    Replacce the mma655x driver with the adxl375 driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b215bed45798ea30f8f13128204493e7afdc9af1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 10:24:52 2019 -0700

    altoslib: Fix original telemetry sensor packet parsing
    
    ground_pres is at byte 24, ground_accel at byte 26. These were flipped
    around.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdbc29d6d86c69e70b0f105d273ee8ddd7ae290e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 10:24:10 2019 -0700

    altoslib: Fix setting of CLASSPATH
    
    Need to include bin for local files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3aeb1a310069811a2e043a5df28dc2df17436fc4
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 23 10:43:54 2019 -0600

    doc: add some text about cross-bank drag race safe/arm to TeleLaunch manual

commit 1cb529e0532d0a7430487c856bb9b037ff6cea0f
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 23 10:41:30 2019 -0600

    doc: add some text to TeleLaunch troubleshooting about SAFE/ARM on TeleFire

commit 88e279b15b3d2357f142e58d20d73c24bf2561eb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 23 09:24:18 2019 -0700

    altos: Improve labeling of telefire receive packet information
    
    Avoid the use of 'cmac_recv', which is not exactly descriptive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c31db066e5ba7a6708ebe4bf350963697c611816
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 23 09:20:53 2019 -0700

    altos: Relabel packet receive status line for TeleFire boxes
    
    The status line included return value and RSSI, but neither was
    labeled, which left the user unsure as to what it meant.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b6602d8c4053932a72c2bf4a63e24793634b2ad0
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Oct 22 09:30:25 2019 -0600

    doc: add more text to TeleLaunch manual, be less sloppy with dBm assertions

commit c349eb9d1b90abd7c0492b5d0ba2116ae5ad6ec2
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Oct 13 20:22:37 2019 +1300

    Update app to use Material Design Light theme
    
    The Holo theme does weird things these days
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b8560bd91d603e4697f0cddc095952f923366d30
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 18 01:06:55 2019 -0700

    altoslib: Don't bother adding FREETTS to CLASSPATH
    
    altoslib doesn't use freetts at all
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4696687ef84181e363ac79f43016d347d7e14a23
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 18 01:05:15 2019 -0700

    altosdroid: Make altosdroid code more resilient to weird androidisms
    
    Sometimes altosdroid was crashing when messing with configuration bits
    like selecting different themes. These fixes seem to make that happen
    less.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8be4e3b8faac362665641e98a1df1e1e8a681b7a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 18 01:02:51 2019 -0700

    altos/test: Get test code working again after restructuring
    
    Something changed, the test code wasn't building. Now it does.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d5792e32dc35441ec98339149fb4df3cc16f44b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 17 23:09:47 2019 -0700

    altos/telefire: Don't arm the box if the local arm switch is off
    
    This skips arming the box when the local arming switch is off. This
    keeps the siren and light from going off, and also avoids attempting
    to fire the channels in case something else screwy is going on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75cd8196ee9ba4ed983abdc83f1fe60fb94f2866
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 30 21:15:56 2019 -0600

    TeleFireEight has simple green LEDs for continuity

commit ff68c8855bc6983638db5102ffbc6822b83edb5d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 25 13:10:36 2019 -0700

    telegps: Get --graph mode working after recent changes
    
    Was just exiting due to a null pointer exception caused by mis-ordered
    setup of the map data. Also using stale API.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35351c7db337c4384ef642fbc8b8676f0944686a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 25 13:09:22 2019 -0700

    altoslib: Don't crash when map flight data is missing
    
    Just a couple of null pointer checks to allow the map display to come
    up even when no data are available.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4df77f2ac7f34986b8e7c0584c57d77dc74d9df9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 24 20:49:56 2019 -0700

    doc: Update for 1.9.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51cca3b3405da7408fd8af18f8d1ff7db97fe1bc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 24 20:50:08 2019 -0700

    doc: Describe new 'show nearest values' in map view
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6032ca7f418924e5794a886c06ca752dee0ada83
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 23 12:40:19 2019 -0700

    altos: Rename 'log' in ao_log_fireone to 'ao_fireone_data'
    
    Avoids conflict with global 'log' function
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 77e6bad5e66023e487430ef31244edaeaef7c606
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 23 12:39:42 2019 -0700

    altos: Switch all main() to return 'int'
    
    Makes gcc happy
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3979c88417fd5512447f5d02cc660522dff5d9d6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 18 17:38:44 2019 -0700

    altosdroid: Update Makefile.am to run gradle-based build
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d607cbee5c9b406ef0f4e522c12e56993632cf00
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 18 17:10:14 2019 -0700

    altos: Add missing build files for avr/attiny devices
    
    These were sitting in my src directory but not in git
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 260dd06107c8f8f5c7e606a283d388cb3ba46465
Merge: 28618a72 faa5abe0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 18 16:26:44 2019 -0700

    Merge remote-tracking branch 'mjb/android-build-update'

commit faa5abe0bc9aa071ffa55534a24638bc0972e3c2
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 10:26:40 2019 +1200

    Update Google Maps API usage.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 3af69b00a94b473dbc98fcf6d26fa90b66065e8b
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 10:25:47 2019 +1200

    Update persistent notification in TelemetryService
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit be9ed3ffc9b00c97e8513bbfab23b8e16329bc4b
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 10:25:09 2019 +1200

    Convert to AndroidX from support_v4
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d7ef39ba104a1ac6024af875c730a645f282719f
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 10:24:13 2019 +1200

    Import cleanup
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5c1acdabd211346936423ec8bc147a47f62bb8ae
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 10:19:11 2019 +1200

    Commented out duplicate strings
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ffdac6b48b43dc5610ddb926191a7cff738c97de
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 10:18:48 2019 +1200

    Indentation cleanup
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b6cb79994a58f37f6c743c1f2fafe30337e89d79
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 10:17:52 2019 +1200

    Add FOREGROUND_SERVICE permission which is now required
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit f2c652d5115eb64568d9ae8ed6426a16e6154999
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 10:17:09 2019 +1200

    Remove versioning data from AndroidManifest.xml.in
    
    (now in build.gradle)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 198c868a25b3cbcde9634bbbcce57d71f3659eee
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 10:16:18 2019 +1200

    Clean up duplication in AndroidManifest.xml.in
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 1ba8ffe41defe411390197c56b03762fa51c20bf
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 10:12:59 2019 +1200

    buildinfo data comes from Makedefs now, not Version
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 3c4d4d5cc1a8361a713aba075b29c3f6509f3f90
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 10:12:30 2019 +1200

    Add gradle build files
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 70fb078cac4203e76e04211a0b8f1a6eceb6298b
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 10:09:26 2019 +1200

    Update files that reference new paths
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 8b53f860eb3171cd43e4bd0e440f2889bd810662
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 10:04:58 2019 +1200

    Move java source, and resources to new paths for gradle
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 4a257455b2dc57069c41e1845daf66239c5cbe1d
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 19 09:58:06 2019 +1200

    Remove ant build files
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 28618a728e85b70ecac73983531894a25e90d7f6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 16 13:12:08 2019 -0700

    altos: Add EasyMega v3.0 bits (not setup correctly yet)
    
    This adds a new directory for EasyMega v3.0, replacing the mpu9250
    with a bmx160.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 28add4f616dbaf06a1ca3234b81c68c4a299d056
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 16 13:10:09 2019 -0700

    altos: Integrate BMX160 into data code
    
    Get conversion functions written and fix up a few warnings
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a87698663f8a5ced468755068a0468755d8f2746
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 16 12:39:09 2019 -0700

    altos: Add bmx160 driver
    
    This just adds the driver, it doesn't hook it up yet
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 99525a748e00406424b98a0952f0156437b30b6c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 15 17:09:26 2019 -0700

    altos: Replace ao_xmem functions with direct mem calls
    
    We no longer need to wrap these functions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46d3cbadce6808b4cd29ad1e034efac7b5e4fa42
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 15 17:05:59 2019 -0700

    drivers: Use 'main_value' instead of 'main'
    
    GCC can emit a warning when programs redefine 'main'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2524730217e6972f3d0f04a9954350ba1964a83a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 2 15:20:14 2019 -0500

    altosui: Add speed and gps height to map display data
    
    And generalize the API so that any other GPS data could be added in
    the future.
    
    This feature was proposed by Mike Beattie
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b13893245e8c66b48e23bb2005ef6ce46e69744f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 31 23:20:31 2019 -0500

    altosui: Display data for point nearest cursor in map view
    
    Include time, lat and lon
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 936a5ff21d01db6f0084ee7e4712042c914942a5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:40:21 2019 -0500

    libaltos: gitignore btletest
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 252009db6451f01c9707970d05e69f39e3a047dd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:39:25 2019 -0500

    Add .gitignore files for new projects
    
    EasyMega v2.0
    TeleFireEight v2.0
    TeleFireOne v1.0
    TeleLco v0.2 with cc1200 radio
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 415302a81f7bf0cdfd79999e1fcd5ea41dc39d13
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:34:53 2019 -0500

    icon: Ignore generated LED images
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 025c53a14804385ad96afcc9bf29a8d5c202a93a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:33:35 2019 -0500

    Add new altosdroid icon
    
    Remove drop shadow
    Change size to make Google happier
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcb5d55e94058810fc8b31ad5e8caa99fa61200c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 12 17:30:48 2019 -0700

    altos: Use fast timer for buttons instead of edge-triggered ISR
    
    If the button bounces between the triggering interrupt and the button
    state check, we could lose the final state change of the button and
    send an incorrect event to the application. In the worst case, the button
    would end up in exactly the wrong state, toggling in the wrong direction.
    
    Use the fast timer to poll all buttons instead so that there is only
    one check of each button at each poll interval (instead of the
    interrupt and the state check). This makes buttons reliably debounced.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5e738fd2e3602c6a92f205df99361dbe06c1719e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 4 21:12:29 2019 -0700

    altosui: Make it possible to disable APRS
    
    The menu says "Disabled", but the device wants "0". Translate back and
    forth to avoid an error.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1105cfe0c065483e8a97a800bc870fbdecaab9b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 4 20:33:21 2019 -0700

    altosui: Fix path to easymini-v2.0 ihx file
    
    This gets the bits included in macosx and linux builds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 489b429dbeb8b0fb69881161ff32fdc2fdfcf9f8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 16 11:15:20 2019 -0700

    altosdroid: Hack up build to 'work' for now
    
    Android apps are now build with gradle instead of ant; the ant bits
    are stale and only work with old java. Use old java to run ant while
    using the current java compiler to build things.
    
    This requires a custom version of the google play API library.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93401542ab1bf53c5b7b2a2cad5da97e44d7244e
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 2 14:20:39 2019 -0600

    ao-bringup: add a turnon_telefireeight script

commit 318b81d59e6f34a92a7a78c0896aa331bc14d0a1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 17 11:40:06 2019 -0700

    Use discovered java path for compiler and jni include files
    
    Instead of using the discovered java bits just for jni.h, also use
    javac from that directory. Add JAVA_VERSION param to set language
    version for newer compilers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 784ccd37d051e8b88ef1b150ccb4e89103675b3e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 17 11:38:43 2019 -0700

    altoslib: Stop using deprecated Java functionality
    
    new Double(x) -> Double.valueOf(x)
    c.newInstance() -> c.getDeclaredConstructor().newInstance()
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 25be2785cf34773bdcac5ec7b2a41769e352812a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 16 12:08:33 2019 -0700

    ao-tools/ao-eeprom: Add support for TeleFireTwo
    
    Display converted pressure and thrust data along with raw thermistor
    data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b2e457db8c4536440ecd7dc35d06f827fc008dc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 16 11:12:49 2019 -0700

    altos: Record all failed sensors and report status at power up
    
    Use DATA bits to mark which sensors have failed, then report that in
    beeps at startup time to help diagnose hardware failures while still
    allowing the board to be used over USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c37cd66b7c11f904b528c5ff7e80e18c5e0d26e5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 16 11:10:36 2019 -0700

    altos/micropeak-v2.0: Reduce power usage
    
    This gets power consumption down under 1mA on the pad. Not really low
    enough to sell, but I think this is about as low as the chip will go.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 40624256be70088d7608742b71e1241d95a7fcdf
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 16 11:07:27 2019 -0700

    altos/stmf0: Allow SPI to be powered down when idle if desired
    
    Set SPI_1_POWER_MANAGE and/or SPI_2_POWER_MANAGE to have the spi
    blocks powered down when not in use.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bdcb3653bd9fb97f98773ac3bc1f87a6f52b1121
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 16 11:04:16 2019 -0700

    altos/stmf0: Add 'ao_serial_shutdown'
    
    This powers down the UART logic on request.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 009d56b4f03c1ba3c9a36bdb54c772ad21844057
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 16 11:02:56 2019 -0700

    altos/stmf0: Leave power interface disabled until needed
    
    We only need the power interface when placing the chip in the lowest
    power state, so don't power up the power interface clock at startup,
    instead wait until later.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e879d739c394602043e8ed512ad1a433fbf96c1c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 16 10:23:54 2019 -0700

    icon: Add altosdroid-specific icon
    
    Google style guides have no drop shadows anymore, so create an icon
    for the play store without one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9abacdaacf5ad1211da4fc72f5320ba9c43ff509
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 16 10:22:02 2019 -0700

    altosuilib: Don't crash when flashing an unknown device
    
    An unknown device will not have a config; check for that before
    showing radio calibration dialogs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0a109d8c82e7f362253a0f1e52d14843ddec996
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 16 09:57:24 2019 -0700

    ao-tools/ao-eeprom: Add altitude data for baro values
    
    Displays altitude along with pressure and temp for baro sensor data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a60b7addddc302c66556c0f25ba1e71d14cf53d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 16 09:56:39 2019 -0700

    ao-tools/lib: Add atmosphere model
    
    Converts between pressure and altitude
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa214ca689449af3a241750e6c759dd3f2d52327
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 15 13:28:11 2019 -0700

    ao-tools/ao-telem: Fix man page and usage to match code
    
    ao-telem just parses .telem files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 245a49a85dd7b6a7cb9ec36ad02f6bb66e42f4e2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 15 13:26:30 2019 -0700

    altos: Allow ms5607 driver to either set ao_sensor_errors or panic
    
    Products that want to remain usable (over USB) after a sensor failure
    don't want to panic when the ms5607 fails, but products with limited
    ROM space don't want to have extra code to check for the sensor
    failure and panic. Change the MS5607 driver to allow either option,
    and then make the micropeak based devices use it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98f7c1c116aab672a29db1f81213cabe2d72ae16
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 15 13:22:15 2019 -0700

    ao-tools: Change ao-eeprom into eeprom analysis tool
    
    ao-eeprom used to be a TeleMetrum v0.2 specific tool for fetching
    eeprom contents from that device. ao-dumpflash handles that case now.
    
    ao-eeprom now parses .eeprom files and displays their contents.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e3eb285ff6be17afe592dca4a2fb5526c0626283
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 18 23:18:19 2019 -0700

    altos/micropeak-v2: Update .gitignore
    
    Ignore built stuff
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06be34ea0750743b85823b873041188dac7b06d9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 18 23:17:10 2019 -0700

    altos/micropeak-v2: Correct AO_LOG_ID value
    
    Typo wasn't caught by the compiler (thanks!)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4b8aff07d5366cef2c7209729f6cd22fa67de0c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 18 23:16:12 2019 -0700

    altos/micropeak-v2: Erase log space at end of BOOST_DELAY
    
    We have to erase the log before the flight starts, so this seems like
    the latest possible moment.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 835faccc2c1141f7cd8ff93629d583fcaf785e48
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 18 23:14:54 2019 -0700

    altos: Don't dump MS5607 eeprom in 'B' command
    
    MicroPeak v2 now has config stuff where these values get shown
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bcf609837eefd431415c979942a31abda1227eb9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 18 23:14:05 2019 -0700

    altoslib: Add support for MicroPeak v2 eeprom format
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee7a54b3215ffa1eb38f16a151c0740b14b60857
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 18 14:50:53 2019 -0700

    altos/micropeak-v2.0: expose log and config commands over USB
    
    This lets AltosUI handle the eeprom data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6529fd623f0e4b921aea1110c723d7dc03954def
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 18 14:50:18 2019 -0700

    altosui/telegps: Display error message when attempting to graph unknown files
    
    Instead of presenting an empty graph window.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd351b9e3b1ba21851b2c87f5202ac3bf5c479c0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 18 14:25:09 2019 -0700

    altoslib: Always create an ordered record set for eeprom files
    
    If we can't parse the format, just leave it empty. This makes code
    handling arbitrary records much easier as it doesn't have to check for
    the ordered set existing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d4f018f22a0a9814e675a232b1c4239572bdd9a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 18 13:02:51 2019 -0700

    altos/micropeak-v2.0: Go into standby mode after landing
    
    This is the lowest power state we can reach, and consumes about 15µA
    or less.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ef794e60b4f6a6e9cb5e9a14ef732f7d6d36b3d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 18 13:02:12 2019 -0700

    altos/micropeak-v2.0: Fix LED blinking sequence at power-on
    
    'pips' happens between altitude report and data dump.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ec178bbc3babb072b8d53975632cf6294626e98
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 18 00:11:49 2019 -0700

    altos/micropeak-v2.0: Wait for the power supply to stabilize before measuring
    
    If we don't wait before measuring the battery, it will often read
    under 3.2V right at boot time, which puts MicroPeak in flight mode
    instead of USB mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 77df3f636ef8bf461800f5e08c28c09bfb69c48b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 17 23:44:50 2019 -0700

    altos/micropeak-v2.0: Don't run flight code when plugged in
    
    No sense running the flight code when there's a USB cable attached.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff7fa802f632700f73418246f1be5017ac0a09b4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 17 23:43:02 2019 -0700

    altos: Support ao_ms5607_dump when no ms5607 task
    
    MicroPeak v2.0 has tasking support, but doesn't have a separate ms5607
    task. That means the device isn't getting initialized when not running
    the flight code, so in cmd mode we need to make sure it's initialized,
    and we also need to actually fetch a value to display.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c5ba25e61f98fd4537062dce52ab22d1445fa24
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 17 23:41:51 2019 -0700

    doc: Say 'thousands of feet' instead of '3000-4000 feet'
    
    No reason to try and be precise here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4be194a350987cff5b459ebaa751347b216fde05
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 17 14:49:36 2019 -0700

    altosui: Ship EasyMini v2.0 firwmare
    
    Left this out in the last release...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a466e9869633c6ce7e43ff24ba2afff938461dd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 17 14:47:56 2019 -0700

    doc: Describe what sunlight does to MicroPeak and how to protect it
    
    Show flight data from micropeak in sunlight, a picture of foam
    installed on micropeak and the resulting data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa8e0fb8b75a808e029b090747fb60b35debb44a
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jun 5 10:46:57 2019 -0600

    add an explicit reference to Poron open-cell foam in Appendix A

commit a6e8b739c47c50fa472e3f2a41cf13abb8d82c07
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 3 21:51:28 2019 -0700

    altos: Directly compute radio tuning values from frequency
    
    The 8051 compiler doesn't support 64-bit ints, so the old
    code used an iterative method in 32-bit values. That could take
    a long time when the frequency was mis-entered in Hz or MHz instead of
    kHz.
    
    This direct-computation uses 64-bit ints, but takes a fixed amount of
    time for any inputs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d3a8443d8de832b8e76a005e56ac5ff09b71849
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 23 06:45:54 2019 -0700

    Add TeleStatic-v3.0 makefiles

commit 0800970a4c9c6ed38bb76bfed6374093ca16b459
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 21 18:30:43 2019 -0700

    altos: Add preliminary TeleStatic v3.0 code
    
    This adds the pin definitions and all of the code except for the
    ads131a04 driver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a29b84cffcd31b2a74dd14a18aa4790eb4f14f9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 21 18:19:59 2019 -0700

    altos/telefireone-v2.0: Include MAX6691 data in ring
    
    Define HAS_MAX6691 which tells the data code to pull the MAX6691 data
    into the data ring for logging etc.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83823e4ee901edb893db68e36deb2b92ffec3958
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 21 18:18:55 2019 -0700

    altos: Change MAX6691 driver to run its own thread
    
    This just captures temp data continuously; it takes 100ms to get the
    temp data from the sensor, so the maximum rate is around 10 samples/sec.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 188f9efadd480de872f86a8eb741e8738db84c6b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 21 18:14:05 2019 -0700

    altos: Add MAX6691 and ADS131A0X data to ring if present
    
    Add these two devices as potential data sources to be added into the
    ring if available.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c19d410f9d6ff1075ea2de0c0ad7b6a84e1e378
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 21 16:53:51 2019 -0700

    altos/telefireone-v2.0: Definitions needed for MAX6691 driver
    
    Fix the DMA channel definition (STM starts values at 1 for unknown reasons).
    Add definition of the power enable bit for the timer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d3436ed8551537287dc6cf418f93b0989e1aee8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 21 16:49:19 2019 -0700

    altos: get ao_max6691 driver working
    
    The driver uses a timer connected to a DMA engine to measure pulse
    widths from the chip. We get 11 pulses for 4 channels; the first pulse
    is caused by the timer starting up, the next two are the marker pulse
    and then 8 more indicating the end of the high and low periods for
    each channel.
    
    The driver API returns the 8 pulse widths; the caller is expected to
    know what to do with those values as using them requires knowing the
    value of the configuration resistor and the characteristics of the
    thermistors.
    
    The test code assumes a 1k configuration resistor, using that it computes
    the resistance of the four thermistors.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 49ce3e9a2eb4e1918773b80c355d720a3dadc7e0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 11 23:54:37 2019 -0700

    altos: Work on MAX6691 driver

commit 0e8970c7f4eb7e8dd4ef325e4db4fe7412d0ed78
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 21 12:55:20 2019 -0700

    altos/lambdakey-v1.0: Fix obvious build errors
    
    The code is too large to run on this device at this point, but at least
    it doesn't fail to compile?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d77d5032781c5ef0dbb19de07ea97389b809f08
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 18 19:48:00 2019 -0700

    altoslib: Correct monitor idle IMU data for EasyMega v2
    
    The IMU on EasyMega v2 is rotated from the other devices using this sensor.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6dea82844075348049ce5ff9bb8670ba8efc6668
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 18 19:46:24 2019 -0700

    altoslib: Fetch correct mag along data for EasyMega v2
    
    Was using the wrong axis (y) instead of the correct one (x)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit df08028ff5dd892dafa667fde1fbf9de43f82fea
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 18 14:42:15 2019 -0700

    altos: Use ao_data_accel_invert when changing orientation value
    
    Instead of using AO_ACCEL_INVERT, use the macro which flips the values
    around. This fixes a bug with ADXL375 flight computers (EasyMega v2.0) where the
    accel cal values would be scrambled when changing orientation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 774001a9426493fd5c0d5a237da6cb903b1259a8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 18 14:32:48 2019 -0700

    doc: Make sure all 'code' examples are in DejaVu Sans Mono
    
    We were inheriting the default value for this setting, which was Courier
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4ee716c0026cf997cde36ef00720d63a4c62c0c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 28 22:29:21 2019 -0700

    doc: Document LEDs on TeleGPS devices
    
    V1 has just the battery charger. V2 adds the GPS lock indicator.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 226f422b1fe5ccdf0bb3c07fa4983ec1615ce066
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 18 17:21:57 2019 -0700

    altos/stm32f4-disco: Remove scheme
    
    This demo doesn't need a lisp interpreter
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96c446b4dba6814d61317efb4d2dc99a3ca29e0c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 18 17:20:52 2019 -0700

    altos/stm32f4: Working on USB
    
    Reset now works, still no packets
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e38e1a2f735a1bb4aebf0817cdd99a05567c6340
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 18 17:20:14 2019 -0700

    altos/stm32f4: Wrong value for CK48MSEL_PLL_Q
    
    This meant that the USB clock wasn't actually getting started...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65be5d1e07ff4ae619233f3b541b9599c44490ab
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 18 17:17:21 2019 -0700

    altos/stm32f4: Need to read-back register after clock enable
    
    This was reported as necessary; I have no idea, but it's not
    expensive, so why not...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit efc2c093819b3ec2e5743126efb76d3a9c0ad231
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 18 17:16:16 2019 -0700

    altos/stm32f4: Add -mfloat-abi=hard compile option
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a2df970fca0e719e4b32e1642803590ff7bbd1ee
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 18 17:15:16 2019 -0700

    altos: ARM ABI requires 8-byte aligned stack
    
    This makes doubles on the stack (as for var-args functions) work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b7de266431ee7bf05ba68ccae3e43a0468045860
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 12 12:58:20 2019 +0100

    altos/drivers/ao_led.c: Declare LED port as void * to allow any SoC to use this code
    
    The generic LED code needs a generic type for the GPIO port.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3a01a7e36dd475adf96468f42c95aa352b5fdf11
Merge: 338372b9 6b0754ce
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 5 18:31:37 2019 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 6b0754cee625c6e2c19dc70fb5be6cd2f0125d47
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 5 17:25:44 2019 -0800

    doc: A few minor edits to telelaunch docs
    
    3 → three
    less → fewer
    transreflexive -> reflective
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 338372b97d441c30d2a23df540163a66a7f8d8c0
Merge: 8d0df64b cd920a0e
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Feb 25 18:30:08 2019 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit cd920a0e5321166ef8b1d6afc3d63fc5de998a93
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 25 16:42:25 2019 -0700

    altos: add ao_time_ns API
    
    This provides nano-second resolution times by reading the systick
    value (which runs at 250ns ticks on stm).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0448b9b638f8599633227a639ef9d8572780bbd9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 25 16:41:45 2019 -0700

    altos: Change default time type to 32-bits
    
    Offers additional range for internal use without increasing cost on
    32-bit platforms.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6fec7b5affd223c18bad78377d7655af958dffc2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 25 16:40:16 2019 -0700

    altos: Fix several mis-specified time types
    
    Make sure AO_TICK_TYPE is used "everywhere", instead of uint16_t or other.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d0df64bbc5ed31188b4b4bea0be52a52dbece3b
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 24 15:10:25 2019 -0700

    altos: ads124s0x successfully reading data

commit 14fe18559d2eb7e568f07fcbaec89b6ef55fae24
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 24 11:51:58 2019 -0700

    altos: snapshot - working on ads124x0x driver

commit 2f87e182d9f0b3c2856f62149371ad70b16148cf
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 24 10:49:47 2019 -0700

    altos: ADS124S0X driver compiles now

commit 69bdb309f46a28803e93b08921720805b28b18a2
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 24 10:28:15 2019 -0700

    altos: fix ads124s0x data structure

commit 8cc418ed3b0df0e465f0af27c2255cb97294e6ce
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 24 10:25:31 2019 -0700

    altos: first cut at ADS124S0X driver interrupt handling

commit 654a23168f59d04d7e9cad657bebf8ecfdd8e41e
Merge: d0f66918 655c5d2c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Feb 21 21:57:26 2019 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit d0f6691804ee8de633601483354c93f1c2d75219
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Feb 21 21:57:08 2019 -0700

    doc: actually add the telelaunch files

commit 655c5d2c1124182ba336db368474cf4de0b9ce9d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 21 19:28:14 2019 -0800

    altos: Allow applications to override newlib printf selection
    
    Re-defining NEWLIB_PRINTF_CFLAGS will allow applications to select
    printf with floating point support if desired.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3310b22e28d953a6569cd50e83f91c25577424a5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 21 19:26:41 2019 -0800

    altos: Fix ISR declarations to make them non-weak
    
    In my zeal to eliminate warnings, I added declarations of all ISR
    functions to a shared header file. However, I managed to include the
    'weak' declaration, which meant that the intended ISR functions were
    as weak as the 'default' ISR functions. This left all interrupts
    non-functional, which doesn't make for a happy program.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eaf2ee0f498b519d64e1664a2b8c66c52ac1497c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 16:43:50 2019 -0800

    altos/telefireone-v2.0: Remove build of ao_product.h from Makefile
    
    This is built in common code now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c411c7ec71be0263a958c0803772cd6068e6bdad
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Feb 21 17:14:24 2019 -0700

    doc: new TeleLaunch system manual

commit 5c772d58ba83e147f0a404261a34c39183f2aac3
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Feb 18 17:39:34 2019 -0700

    altos: first cut of code for telefireone-v2.0

commit d31fda73fef37cf6a9e449c99f3197b713b93acb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 16:26:39 2019 -0800

    altos: Build telefireone-v1.0 by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6aeb000899ad7f22e92b487b5891664554bc4d33
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 16:26:08 2019 -0800

    altos/telefireone-v1.0: Track ao_led_init API change
    
    No longer takes a parameter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e468bfbf9f430b6a3970283d818ea4405ccfc5b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 16:25:38 2019 -0800

    altos/telefireone-v1.0: Set various ADC values
    
    Reference voltage and divider resistor values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b41b14ea46ff6954895824a60637c0eb4353b17
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 16:25:06 2019 -0800

    altos/telefireone-v1.0: Set AO_LOG_FORMAT
    
    Use AO_LOG_FORMAT_TELFIRETWO for now; perhaps we'll have a new format
    at some point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58f77ec66f5e40095917905578e36566b7e3401e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 16:24:21 2019 -0800

    altos/telefireone-v1.0: Turn off USE_INTERNAL_FLASH
    
    This is for TeleMini v1.0 which stored log data to the program flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9ea50f00039c812ea6a4a4235d78c140a0252662
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 16:23:13 2019 -0800

    altos/telefireone-v1.0: Clean up Makefile
    
    Follow other projects and remove common bits which are now in
    Makefile.defs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d19f1888d736943e8b51aeb56ec7097e11a505fc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 16:22:07 2019 -0800

    altos/telefireone-v1.0: Doesn't have a beeper
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9f1776f61cf365e3c8862f9f93cd2773391da16
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 16:20:14 2019 -0800

    altos: Remove AO_LOG_STATE from ao_log_telefiretwo
    
    Telefiretwo never changes flight state, so these packets weren't going
    to be written.
    
    Also stop passing &log to ao_log_firetwo -- it always got the global
    anyways, just use it directly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a89aa1ea7e1b02b5cd310986adf4239ec0ce91d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 12:59:05 2019 -0800

    altos: Move common build definitions to src/Makefile.defs
    
    This cleans up the build process for all architectures, providing a
    common place to specify vpath, cflags and build rules for various
    common files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 889518aeee080b0f8bb954db86d08105898d8161
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 11:25:21 2019 -0800

    altos/attiny: Mark 'mode' param to ao_exti_setup_port as used
    
    Retain API.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a12dc56db6d5245ee8ac594337576dd85791a984
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 10:42:23 2019 -0800

    altos: Add -Wshadow to CFLAGS
    
    And fix up the related messages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fda36e57205138f6c180a18b54956ea1682a5293
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 10:41:31 2019 -0800

    altos/stm-demo: Make this build again after various API and CFLAGS changes
    
    Deal with LED API change. Remove unused functions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85104dbe9684af579c9255553b609fd28f8ee276
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 10:40:06 2019 -0800

    ao-tools/ao-dump-up: Document --wait flag
    
    --wait means to poll for a µPusb device instead of bailing when none
    exists at startup. Quite useful for testing a batch of new device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b6021e8dd866d6db54d28c79f0572aadd1861a5f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 10:39:11 2019 -0800

    ao-bringup: chaosread is no longer part of altos
    
    this has been moved to a separate project.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a43bc96ad4a524480a2d47500fb0cfaeeba8ad3d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 18 10:38:21 2019 -0800

    stm: Expose LCD font API in ao_lcd_font.h
    
    That required renaming the existing LCD font defintions from
    ao_lcd_font.h to ao_lcd_font_bits.h.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ebb8ab6a2f5f1245098ad68d0cd007d3f115a24d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 22:39:34 2019 -0800

    altos: Add a pile more compiler warnings
    
    Adds:
            -Wpointer-arith
            -Wstrict-prototypes
            -Wmissing-prototypes
            -Wmissing-declarations
            -Wnested-externs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d6c3c3618a708d2a1a7948454710e6ae21c2a426
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 22:38:23 2019 -0800

    altos: Declare task stack as union of uint8_t and uint32_t
    
    Support -Wcast-align and -Wpointer-arith while still allowing
    architectures to pick whether they want an 8-bit or 32-bit stack.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 63a44b9c169d042fb1a3997620477e7f00bb0918
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 22:34:21 2019 -0800

    altos: Remove unused ao_adc_get from ao_adc_stm.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f26197f0eec650330b476514c47978b4ba087719
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 22:33:32 2019 -0800

    altos: Stop doing pointer arith on void *
    
    Switch to uint8_t * instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54dd2a6e3a05b940d9daebb3d73f6876c182b3e7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 22:32:24 2019 -0800

    altos: Add 'void' to function declarations with no params.
    
    Support -Wstrict-prototypes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 873f511173c637016b5e173813bd03c1725797bb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 22:28:02 2019 -0800

    altos: Declare all public functions in header files
    
    Including interrupt vectors to catch mis-spellings.
    Working toward supporting -Wmissing-prototypes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c11427819ca24bb77523496309b5b6f699d126c5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 22:24:37 2019 -0800

    altos: Mark local functions 'static'
    
    Working towards supporting -Wmissing-prototypes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 119a829e58aff5dd7801fe7ef8cae886bf31fec1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 22:35:02 2019 -0800

    altos/stm: Note that ao_i2c_recv_dma_isr isn't actually used
    
    This function resets the i2c transceiver after DMA completes, but it
    hasn't ever been hooked up. Some testing would be a good idea. For
    now, just add a comment and mark the function as referenced to avoid a
    compiler warning.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit acf032eb39504657e9289ca54844967b9c3bed76
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 22:42:05 2019 -0800

    altos: Fix spelling of stm_dma_ch4_5_6_isr
    
    This spellingn error would have caused all DMA to these channels to fail.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7f8c9262f7979ddcc93cb64b913e392c18ef674
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 17 17:35:25 2019 -0700

    altos: ADS124S0X driver compiles with initialization code maybe completed

commit c29f65a5696df66efb7e84e3ae8a3ea4b1f1494c
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 17 14:38:53 2019 -0700

    altos: add initial support for TeleFireOne v2.0

commit 630f457666b48321be0a5b6fbf391efef1fa3eb4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 3 12:48:45 2019 -0800

    Use strip-nondeterminism to fix JAR timestamps
    
    .jar files are just zip files, and contain dates. These will cause the
    build to be non-reproducible. Use strip-nondeterminism to smash all of
    these back to a fixed value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 145e5a1ac557c4990e74fb64b005fc68d6941bdc
Merge: e2c9ef80 db730875
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Jan 28 13:46:59 2019 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit e2c9ef801abacd2533d9b4321c24a490d4556134
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Jan 28 13:45:31 2019 -0700

    Makefiles, too

commit db7308750b3478ec3d2332e81db9957a9d4f2cfc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 28 11:35:32 2019 -0800

    altos/telefireeight-v2.0: Add flash loader Makefile
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e40407467f28ab44b9f7c7d51a65a51f802410d5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 28 11:33:19 2019 -0800

    altos: Delete unused config bits for telefireeight-v2.0. Add Makefile
    
    Clean up the config and set the copyright year.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38dc7545a98a851af447ad3d69fa5bc85583fed9
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jan 27 19:20:02 2019 -0700

    altos: add telefireeight-v2.0 to src/Makefile and to Releasing

commit f29b55691c9f160898b49bf15f46a88ae00b115f
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jan 27 19:16:41 2019 -0700

    altos: add support for telefireeight-v2.0

commit 37f4a66e47370e0e5ef42b0d70cda060fa2baa64
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 9 15:42:42 2019 -0700

    doc: add force-bootloader instructions for TeleGPS v1 and v2

commit 3703aef1b8b043697e8b99df24b987ba696909bc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 7 17:15:41 2019 -0800

    doc: Fix typo in TeleBT v3 flash-force instructions
    
    taht → that
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38630c65460b5e873a0df0fef937d498a37ea329
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 7 17:12:56 2019 -0800

    Remove ao-chaosread
    
    This program is now provided by the independent chaosread program.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31f9ed231e63b214b405a141cabce3eb758e82e6
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Jan 5 18:02:34 2019 -0700

    doc: add flash-force instructions for TeleBT v3.0

commit 72bcff4c1af10571314e5cbbe29f073de818088e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 11:59:02 2019 -0800

    ao-tools/ao-telem: Print out 'log_max' value. Clean up compiler warnings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14900d539c9d379a39ec157bb7e1914aad8fde3c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 11:57:42 2019 -0800

    ao-tools/ao-cal-accel: Initialize byte count var 'l'
    
    When left uninitialized, the program would randomly segfault at startup.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96be286b3a9daa9bdb7872118be0118872d483f8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 11:55:38 2019 -0800

    ao-tools/ao-load: Return status from 'rewrite'
    
    Was just falling off the end of this function, returning a random value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f729ff46b2f4531db68f0af85e7e9fe0f6d1969
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 11:41:49 2019 -0800

    ao-tools: Fix warnings in ao-tools
    
    None of these appear likely to have caused actual problems.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f14c799ae7ff3be56c28f5694f04c03daff7708e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 11:40:32 2019 -0800

    ao-tools: Add lots of compiler warning flags to ao-tools build
    
    This catches some uninitialized variable errors which cause
    ao-cal-accel to crash (fixes coming next)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit adf4bec88df1822031e1a8b00422de8b8b0c0cd4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 23:51:58 2019 -0800

    doc: Update all docs to 1.9. Note this in doc/RELNOTES
    
    Missed a bunch of 1.8.7 numbers due to a missing step in the release process
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a3177edd807b12a58d684ece60b0f3329e742af6
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jan 3 00:49:22 2019 -0700

    updates to Releasing based on 1.9 release process learnings

commit 5b4da841459a650e641924aab132f566c6259c4d
Merge: 95ffec07 ecf40a3a
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 2 23:03:41 2019 -0700

    Merge branch 'master' into branch-1.9

commit ecf40a3a190fb2f7d7d2654c1e87daddf0362b0c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 22:02:42 2019 -0800

    doc: Skip .pdf generation when asciidoctor-pdf is missing
    
    Not available in debian unstable yet
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95ffec073b0758801df04a77eca0bd2bc6e57e35
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 2 22:19:36 2019 -0700

    changelog for 1.9 release

commit 4e9e0bf99d6b71086110038fa1e3231d00bb2496
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 15:20:57 2018 -0800

    Update to version 1.9
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f62ac01979a403f6a05f119201a62a8ffc217c73
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 15:20:23 2018 -0800

    Change Releasing to reflect asciidoctor switch
    
    Don't need to hack .xml files anymore (yay!)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bed019b64d9e37f276ad5aa2dabb7681aae122ec
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 15:17:01 2018 -0800

    doc: Add 1.9 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9fdbfade5e2d203d2ca5378e4f2a65beae4a19f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 15:17:42 2018 -0800

    doc: Set doc version to 1.9
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ec8df548e3f6fd5d809238e2e60a0844775f551a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 15:17:20 2018 -0800

    doc: Add EasyMega v2.0 specs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58fb7e53989f67fe8d793d7b3ddad8e41682cfbe
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 15:18:08 2018 -0800

    doc: Update doc/RELNOTES to adapt to asciidoctor change
    
    Moving to asciidoctor means changing our doc release process
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb3f961022032390bfac6104ea4136354df67689
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 30 14:28:07 2018 -0800

    Add shipping products to fat_altos target, note that in Releasing
    
    These bits are used to build alpha/beta releases, so they should
    support all existing products.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 60b46436f9f642d43be4e00df08eccadb57214e8
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Dec 31 12:37:45 2018 -0700

    ao-bringup: get turnon_easymega working for v2.0

commit 9791ebb256c2892663c072f7989e4b9bd34818a1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 30 14:15:51 2018 -0800

    altoslib: Remove spurious debug printf in AltosCalData
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d472ab07224a21abfa83da8336439d7844f9aa8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 30 14:11:03 2018 -0800

    altos: Don't validate ADXL375 self test for maximum value
    
    The data sheet says this is unreliable, and that we should be using an
    FFT anyways.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4fb00afc9018c6179c4aff897fcbb330588d02a2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 30 13:42:50 2018 -0800

    altos: Make HAS_ACCEL_DEBUG build again
    
    Need to not use ao_error_h_sq_avg without HAS_ACCEL
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84c04a114898d97a13f61e1006949dc3926eeba1
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Dec 30 15:16:29 2018 -0700

    update easymega turn-on script for v2.0

commit e9a3268285e97b7316c3321892e77814703ff71d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 1 19:40:31 2018 -0700

    doc: Use icons for admonitions
    
    This replaces the text 'WARNING' or 'NOTE' with a suitable icon instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d859a7f65baf6c5c170f14fb2d9401b5c607a254
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 17:01:38 2018 -0700

    doc: Remove asciidoc related files
    
    These all helped asciidoc generate documentation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41fed74c4cf139de6bf8f1879d370977785ad1f8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 16:56:24 2018 -0700

    Remove cc1111 products from 'fat_altos' list, which is used for keithp-fat
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d80b89c0bd82133dd5c93df8604f562ac49c19a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 16:50:17 2018 -0700

    doc: Switch to asciidoctor to format docs
    
    asciidoc and a2x are no longer actively maintained and Debian policy
    encourages people to move away from them to asciidoctor.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf3e524e50a6fae2862efb404c9918b74438e9c9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 23 16:07:09 2018 -0700

    Generate LED icons on the fly. Include SVG versions.
    
    This builds the required LED images from source code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9915aad4fe97cd253b88805646085c64181baef
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 16:48:56 2018 -0700

    Don't force CFLAGS from top level
    
    Let the system defaults control this value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf7b2e065d844d290ee43449ae37162839220158
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 16:48:04 2018 -0700

    ao-tools: Spelling fixes in a couple of man pages
    
    ao-dbg.1 and ao-eeprom.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1812adbd61400af19293bf775e544baf661ec224
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 16:47:20 2018 -0700

    Add keywords to .desktop files
    
    Makes applications easier to find with search
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 48e221cca00c9f925ff57588dd782842705f7a23
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 20 17:29:36 2018 -0700

    altoslib: When flashing hardware, pull USB data from device if needed
    
    If we fail to extract USB vid/pid and product values from the device
    ROM, use the data discovered over USB when the device was originally
    discovered.
    
    Also, use the USB product to select appropriate .ihx files instead of
    only using the USB vid/pid. This will help people avoid using the
    wrong file when reflashing devices.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 345e3c37a1cf619392b54589bb91b4caf7844810
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 20 17:26:53 2018 -0700

    altos/easymega-v2.0: Handle different mpu9250 orientation
    
    The mpu9250 on EasyMega v2.0 is rotated 90° compared with EasyMega v1
    and TeleMega IMU devices.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c92656576aff3ceab5bead3c835d96c36098fe7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 20 17:24:41 2018 -0700

    altoslib: Add support for EasyMega-v2
    
    adxl375 instead of mma6555.
    mpu9250 rotated 90° compared with other megas.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f13e294d4644096b0529383c1d60d5e4b7916d76
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 20 17:22:59 2018 -0700

    altoslib: Add support for TeleGPS v2
    
    The battery voltage ADC values are different from TeleGPS v1 (max 4095
    instead of 32767).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c01514fa1e0a2cea3955c71a833b4a21b3d33f24
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 20 07:34:57 2018 -0700

    altos/adxl375: Clean up initialization, shortening self test period
    
    Set the self test period to that suggested in the documentation.
    Eliminate some debug variables.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0686a7b8aec524d81bda4c572549a3a068ce0eed
Merge: 6aa451ce cc528f1f
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 20 01:18:12 2018 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 6aa451ce81bfdfe679e3f9902043a5f0d235c745
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 20 01:17:39 2018 -0600

    altoslib: fix computation of TeleGPS battery voltage

commit cc528f1ff0271ec6488a1a7b91c731183502101e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 19 13:20:31 2018 -0700

    altosui: Add EasyMega v2.0 firmware to release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e4b8674d874a190eca1a98a397aaf0a9d15bda1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 19 13:19:03 2018 -0700

    altoslib: Add ADXL375 support and EasyMega v2.0 support
    
    EasyMega v2.0 replaces the MMA655X with an ADXL375 part.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3fd320ea38f2945f5611a09a0e48d16db467d105
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 19 08:41:51 2018 -0700

    altos: Add EasyMega v2.0 to default build
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f49763bf4a6cd8b2a47abfbec7ef3d8c8c029b8f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 09:43:25 2018 -0700

    altos/easymega-v2.0: Add adxl375, replace mpu6000 with 9250 [v2]
    
    Should reflect current hardware design now.
    
    v2:
            Use SPI mode 3 for ADXL375
            Invert ADXL375 values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6fdc392ef1b624c06e26e7a053c3579435c455d5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 09:46:01 2018 -0700

    altos/easymega-v2.0: Change binary to easymega-v2.0 instead of easymega-v1.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30e4e286eec31e69ad1e69a44cf00d4549a09f88
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 09:41:31 2018 -0700

    altos: Add ADXL375 driver [v2]
    
    Includes self-test code and multi-byte mode operation for reading
    sample registers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 33bb97b9637bdabe4360269889e20fcc50ef9886
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 15 11:15:31 2018 -0700

    altos/stm: Support SPI modes other than 0
    
    ADXL375 requires SPI mode 3.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dbc52686c6d9808275c35e0c9c987cbbd9f7859d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 13:42:34 2018 -0700

    altos/stm: Make beeper driver support all possible tim234 configs
    
    And update all users to be explicit about the desired config.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80affca535c5c43a5d9963dfafc74f9675c9b155
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 19 08:12:22 2018 -0700

    altos: Create ao_data_fill shared function
    
    This fills a data ring entry with all of the current sensor values
    other than the ADC. It is used in all of the adc completion functions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit facf790f469df374257440ba9482321cbab7cecb
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 13 10:17:47 2018 -0600

    altos: remove usbtrng support (chaoskey prototypes)

commit 59f66e3264a48d8586dcbd12f6f0fa91e2e1ecdc
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 13 10:12:39 2018 -0600

    altos: remove telescience support

commit 758c8c27ba1819b5d90fda9e9ba6d15f5e8598e0
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 13 10:02:13 2018 -0600

    altos: remove teledongle-v1.8 support (what was that, anyway?!?)

commit 3620f09329ccae817fe3ec2f9c2c588ebbfa149b
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 13 09:59:22 2018 -0600

    altos: remove megadongle-v0.1 support, never went beyond prototype

commit 2da09b9f5649786f202aa0f295ead728939eddae
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 13 09:57:44 2018 -0600

    altos: remove telepyro-v0.1 support, which was never completed anyway

commit 41ebb27230de6385a01c111c299bb22b1cb0badf
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 13 09:55:03 2018 -0600

    altos: remove teleterra-v0.1, also an ancient cc1111 project

commit 983c36782527078ce667feb9eccd1ed0b97fbc29
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 08:33:49 2018 -0700

    altos/drivers: Use stdbool in ao_ms5607.c
    
    We don't have TRUE and FALSE anymore (they were pdclib specific).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 346fdfb469f7f3c1f87a39dee5bfb4568631c28b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 08:27:41 2018 -0700

    altos: Remove pdclib bits from Makefile
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf21c87f9f3e1a75dba39ab41dfffb629586935d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 08:27:17 2018 -0700

    Remove .gitmodules
    
    We no longer use submodules (yay!)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 815d537e0fa6503b2a83d92d94c734eaee15987b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 08:26:02 2018 -0700

    Bump version to 1.8.7.1
    
    Tag development versions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 408badbef80d7a3412b5ad92b269be19d0faaa09
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 2 12:48:25 2018 -0700

    altos/stm32f4-disco: Start hooking up stm32f413 USB for the disco board
    
    Non-working as yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 805d218ff50e6c38345c0d4e46f568009132633e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 2 12:46:19 2018 -0700

    altos/stm32f4: Add start of stm32f413 USB support
    
    This code doesn't work yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4a246b4cb5ee8e8894ea3492187a08e1e4f719bb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 2 12:46:01 2018 -0700

    altos/stm32f4: Add stm32f413 USART support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 600689b39d9bc604b0a8b586c8a93a465a42fc3b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 2 12:45:39 2018 -0700

    altos/stm32f4: Add external interrupt bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 015d3055a52532070e96469907683c3aa3eda44e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 2 12:44:58 2018 -0700

    altos/stm32f4: Add more stm32f413 definitions and support code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44ae8b9317fa4aaccabbe9d07b5972f7dfd3baa2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 18:53:15 2018 -0700

    altos: Clean up AO_ROMCONFIG bits
    
    Remove address parameter (doesn't work with gcc), create shared
    ao_romconfig in kernel.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 32463323d888d2b36d4b993d82e2522e1b236299
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 18:51:59 2018 -0700

    altos/stm32f4-disco: Hook up serial console. Add scheme
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb9d3d3bb1ae6223a7b910bc49ea8af5544a64d7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 18:50:45 2018 -0700

    altos/stm32f4: Place ARM.exidx sections after .text
    
    This makes the linker happy about not attempting to merge unordered
    and ordered stuff (whatever that means...)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd151a622537e1436362bd71229c6ce22a3957d0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 18:50:15 2018 -0700

    altos/stm32f4: Use full printf/scanf (including floats)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b5ac831d2e63a091833c702b07b0331fba32e72
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 18:49:22 2018 -0700

    altos/stm32f4: Add usart driver for usart6
    
    This is what the disco board hooks up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 23075d174d2bff8ff3f3deef3c3d90b83da6bd2e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 18:46:52 2018 -0700

    altos/stm32f4: Align stack to 8 bytes
    
    This makes sure that doubles are aligned properly when passed on the stack.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71248c899676e0c2f3a478c63dec0d005b2458e6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 12:03:27 2018 -0700

    altos/stm32f4-disco: Add .gitignore
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2cdb1f30c49ba460b0850d23ba9c85e0336af290
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 11:57:50 2018 -0700

    altos: Add generic LED driver.
    
    This driver uses the generic GPIO functions and allows per-LED port
    and pin configuration. It supports up to 32 LEDs.
    
    Rename SoC-specific LED drivers.
    
    Remove enabled parameter to ao_led_init
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdaa0d7b272505c49017f409b7c0b8e3240608f0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 10:40:24 2018 -0700

    altos: Eliminate 'pin' field from GPIO functions
    
    This was used with the 8051 bit-addressing mode to provide
    single-instruction access to GPIO pins.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7ca88282466c271bad5e25e804729580fe83c47
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 01:28:03 2018 -0700

    altos/stm32f4: Fix clock configuration
    
    Was running the PLL input too slow (it wants 2MHz).
    Was configuring the PLL_P factor wrong (needs magic values, not P
    value)
    
    Set up clock debugging for PA8 and PC9 output. Enable on disco board
    for debugging.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 621d1529d6bc07a3f4bd27fb2d02d5b3161a3a6a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 00:08:17 2018 -0700

    altos/stm32f4: Add STM32F413 disco board support
    
    Discovery development board
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b7a21bf6a086748b4907c0577eaa114445995783
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 00:07:38 2018 -0700

    altos/stm32f4: Start adding support for STM32F413
    
    Enough to get clocks lit up at least.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f037d0091a4b31c631d64e71441953eb9b3b21ce
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 2 12:47:00 2018 -0700

    altos: Remove 8051-ism from ao_usb.h
    
    __at doesn't exist for non-8051
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8e607960f2f399fd6ba92a8c97ab72e19812d3f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 00:05:38 2018 -0700

    altos: Delete random 8051 ISR declarations
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a76829a4a840261e33869c40b3366fff3b691069
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 15 22:44:17 2018 -0700

    altos: Allow application-specific prompts for ao_cmd_readline
    
    Lets other readline users specify alternate prompts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 684741765117611b7d666efbdfafd87c6199752c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 15 19:17:19 2018 -0700

    altos: Use stdbool true/false instead of TRUE/FALSE
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c417ab1de2a083b5fcff2e081e4feb2a65887903
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 15 19:13:45 2018 -0700

    altos: Make cmd number parsing functions return value
    
    Don't use a global variable to hold the result.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6e57291d91f1f6c4de5c54a5cfd3eef66d9f830
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 15 17:47:37 2018 -0700

    altos: Remove 8051 address space specifiers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6023ff81f1bbd240169b9548209133d3b02d475f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 15 17:34:20 2018 -0700

    altos: Remove *_TO_DATA macros
    
    Now that we don't support 8051, we don't need these
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2e2182a6ae6c8a7290fb5f7bbb7f8e0a863ba99
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 15 15:39:34 2018 -0700

    Remove pdclib

commit 7c04888cf9809e0c73f0813c74e8dd972facde3a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 12:23:22 2018 +0800

    altos: Switch to newlib-nano for libc on arm
    
    Stop using pdclib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56629222711ba3ef7853405c9b07ad614fb29b95
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 12:17:19 2018 +0800

    altos: Remove cc1111 products
    
    We're not testing these anyways; building new firmware for them is not helpful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 382b3ef62a09e580834b07faf9ed2d00e5ce1621
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 00:06:44 2018 -0700

    altos: use %lu for APRS altitude in sprintf
    
    It's a long.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 803c68d7933d03aaebda19786b63055d4a6d3d22
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 07:50:59 2018 -0700

    altos/stm: Make flash loader work with either 8MHz or 16MHz xtal
    
    Provide PLL definitions for both values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e830d803d3e289f0f1a6d92ce208682af28d3f52
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 07:44:10 2018 -0700

    altosdroid: Bump version to 18 for 1.8.7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 393a5e929b530d9ee4f78cd01faa4dd90c95fe3a
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Oct 12 23:32:57 2018 -0600

    altos: first cut at easymega v2.0 support .. nothing working yet

commit fe3ff829d4c2fde8d4e80f721204b18e7831bb97
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 10 20:41:40 2018 -0600

    doc: add bootloader force instructions for TeleBT v4.0

commit 34b5144dbfd565ee2b9fb1e0dff388a49253f93b
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Oct 9 11:46:09 2018 -0600

    update turnon_telebt to use new approach for saving cal value on TeleBT

commit ba37db43741fde8a08080fa65f5bcf76b1f745ee
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 8 21:41:30 2018 -0600

    capture changes to Releasing discovered during 1.8.7 release

commit e7136c6b413c8464d32cdc4afc28c93ba1f17a3b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 8 19:42:09 2018 -0700

    altos/lpc: Make sure USB pull-up is held low at boot for 'a while'
    
    Add a delay loop to make sure the host sees the pull-up low for long
    enough.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e785eea7b7a14ec8c1e69cad2c88836a9b1943e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 8 19:40:32 2018 -0700

    ao-bringup: Use new ao-cal-freq options when flashing teledongle v3.0
    
    Use --nosave and --output to get the value needed to reflash the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 88ae4c5ebd64215f05f5efc18f9660560b409ace
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 8 16:27:33 2018 -0600

    doc: correct specs for TeleMega v3.0, which still uses the MMA6555

commit 24db798925e26a4c411afe88f7e4844d6554fe0c
Merge: 6f25d235 03680c55
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 8 16:07:32 2018 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 6f25d2359151fb114e22bf8e3b15c007cfb464b5
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 8 16:06:29 2018 -0600

    add new script that uses openocd to reset an LPC target

commit 03680c55ae8394056ed27839e64356d8df375537
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 23:31:53 2018 -0700

    Set version to 1.8.7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 625981b96e99a5dbec8180016d5e2c291378a21f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 23:31:04 2018 -0700

    doc: Note fixes for Mac OS X
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd75ca767b616900d7df4596907f4f5b00517ad4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 23:25:25 2018 -0700

    Switch to universal JavaApplicationStub for Mac OS X
    
    The binary JavaApplicationStub only supports Mac JRE 6, even if you
    install a later JRE from Oracle it will still run our apps with the
    Mac version.
    
    This replacement JavaApplicationStub is a shell script which comes
    from here:
    
            https://github.com/tofi86/universalJavaApplicationStub
    
    I've tested it with Oracle JRE 10 installed and AltosUI came up fine,
    and has access to our devices and networking.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 746ad2c385046c77831b43291ef4335a11e5bfab
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 16:28:32 2018 -0600

    altos-mapd: Add --max-zoom to limit tile loading. Set default to 15.
    
    This ensures that we won't end up serving huge numbers of high
    resolution images.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f5cdd0aeb68104f474ad1736360df39dd174006
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 14:26:27 2018 -0700

    doc: Note that 1.8.7 fixes map images
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2bcbd39a37cf1fa0002345d5c401869a387dc84f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 14:11:03 2018 -0700

    altosuilib: Leave some map debug code around for the future
    
    Displays lat/lon on each map tile. Commented out for production use.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 444fdd96515cc7163c49942ac2435ace8e7bb5bf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 14:06:51 2018 -0700

    altoslib: Be less chatty about map loading
    
    Only mention when a new tile is being fetched from the server.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 173e72429fb494ea3832e3e38ee90f165fbff4cf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 14:49:48 2018 -0600

    altoslib: NumberFormat can't be shared between parsers
    
    AltosJson uses NumberFormat to ensure locale-independent parsing of
    values. However, NumberFormat appears to have some internal state
    which means that each thread needs to have an independent NumberFormat
    object. Create one for each parser as needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b53a54b032c21b6e8ffb085aa56b9ffdff53d7e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 13:12:56 2018 -0700

    altosui/altosdroid: Change message in forbidden map tiles
    
    These are outside of *known* launch areas.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e7e1e805f1358052b33103a2ffdd4e9c435c8650
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 14:08:30 2018 -0600

    altos-mapd: Check nearest portion of tile to launch site
    
    We limit tile queries to those within 17km of a known launch
    site. Change the check to look at the portion of the tile nearest each
    launch site, instead of only checking the center location of the tile.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 581f700e08ec8a1c3bfc5a09e7186676c54a5460
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 10:32:48 2018 -0700

    altos-map: Switch from json FD ops to json FILE ops
    
    Older versions (in Debian stable) do not have the fd-based operations.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f911b92652de890ebff67b3b28f21a36f300ebf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 10:03:31 2018 -0700

    altos-mapd: Handle clients failing to send valid JSON
    
    Just bail if the data we receive doesn't generate a json value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b631f88b0bf19c6740eb21b65bd4be7c25049773
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 10:02:26 2018 -0700

    altosuilib: InputEvent.getModifiers is deprecated, use getModifiersEx
    
    Some java change; seems like it's a no-op for us.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c957107ee5917d865eb866319f86cf8c109f212
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 10:01:30 2018 -0700

    altosui/altosdroid: Disable offline map type selections
    
    Our server only supports hybrid maps for now. If that changes, we can
    re-add this support easily enough.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4f4183ce206d4cb7bbc89e1065eb34b05cf11c4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 09:39:27 2018 -0700

    altosuilib: Remove GrabNDrag.java
    
    This isn't used anymore.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af678be97e419a1167a0630f28bcaba82d67929b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 09:22:44 2018 -0700

    map-server: Implement altos-map in C
    
    This app is all about startup time, and java starts
    slowly. Re-implement in C to improve server performance.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b248524d4bd2c3ab64899b133230d131258396c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 23:32:24 2018 -0700

    altosdroid: Restore google maps key setting
    
    Only for altosdroid, and use a key restricted to our app
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7eb475a9694327809b7ab5a9f419d00e0819a47d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 23:25:50 2018 -0700

    altosdroid: Set offline map scale to 1
    
    Offline maps only supports scale 1 now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 417ec9c2a42bbe74f3aba4d00b42eb14dd6eb079
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 23:22:26 2018 -0600

    altos-mapd: Install systemd service file and defaults file
    
    This lets the map service 'just work' if enabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 64d6689f97dfbed13533350dcb75a0a6a3d11c78
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 21:32:12 2018 -0700

    altos-map: Support version query from application
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c39a4509b0d4a428fcb83602a8dae1c158faf37
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 21:30:03 2018 -0700

    altosuilib: Fix offline map messages to match new meanings
    
    forbidden means outside of launch area.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a8f4af38d7abbb1da922b5e4d84af218475f1752
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 21:30:58 2018 -0700

    altoslib: Retry map connections 10 times on network failure
    
    This covers a host of problems between the application and google maps.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fab890328d4e1151932621a317226bc291b853da
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 21:30:03 2018 -0700

    altosdroid: Fix offline map messages to match new meanings
    
    forbidden means outside of launch area.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff5faf1cc710b7e9299dcaec719bc2421f4ca5b4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 20:21:07 2018 -0700

    altoslib: Change map loading to lat=&lon= from center=
    
    This is easier to parse.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21c630af7181a03b44cfcfa1cc787212501785ec
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 20:20:33 2018 -0700

    altoslib: Use https for launch-sites.txt
    
    http causes a redirect, which Java doesn't handle
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a203aa6e3ed67337b752f939da956856e208c28b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 22:28:36 2018 -0600

    altos-mapd: Install altosmapd.jar file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b841e14d11b3a9e7a754730b1d87b30d22f3dd4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 22:27:58 2018 -0600

    altos-mapd: Make cache service listen queue longer
    
    Just in case the service gets busy, make the listen queue longer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02adfb13297f7dffcd8edcdd3b8747cf52b2a70b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 22:27:20 2018 -0600

    altos-mapd: Clean up log messages
    
    Generate a single log message per request with remote address,
    parameters and result code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 839e3a413a60c6a61851a94cc299de701ab5c277
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 22:26:46 2018 -0600

    altos-mapd: remove debug printf
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 026c735393f6029d09011dba1d5c780322921921
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 22:25:48 2018 -0600

    altos-map: Retry connection to cache service
    
    Just in case the cache service gets busy, retry the connection instead
    of immediately failing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e7c0bcd945f8365e86e99b9d450f3a3389fa0e66
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 19:33:51 2018 -0700

    altos-mapd: Add geo-fencing for map requests. Add port and key arguments
    
    Map requests are now limited to a region within 17km of any registered
    launch site.
    
    The --port argument allows the listen port to be changed.
    
    The --key argument provides the name of a file containing the Google
    maps API key.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7b1f3c6722ae59d09a888084075664446ff2768
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 19:29:01 2018 -0700

    altoslib: Switch to maps.altusmetrum.org when no google map key is available
    
    The map key is only usable from maps.altusmetrum.org at this point,
    and that service will be proxying for everyone in the near future.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe761eb413430c061b12f6ca8003665e56e20262
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 19:27:43 2018 -0700

    altoslib: Allow launch site URL to be overridden at runtime
    
    Expose a public variable, AltosLaunchSites.launch_sites_url, that will
    be used in place of the environment variable or pre-defined value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 073ebc77bbd813eb97c515ecf3c2d104d6157843
Merge: fb167d9f 9e29ac8e
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 6 18:55:05 2018 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit fb167d9f589d3e42e0f99b9f454a51a31e09050a
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 6 18:54:35 2018 -0600

    altoslib: update launch-sites.txt location to new home at maps.altusmetrum.org

commit 9e29ac8ed9a48fc4ac8e769eeb131dd7c58fedc4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 17:17:20 2018 -0700

    doc: Make use of 'faketime' configurable with configure.ac. Default to 'no'
    
    This ensures that older a2x versions don't simply wedge while building
    the docs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cabfcb078950238cdaee4e6ec4702195feaabc7b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 18:11:48 2018 -0600

    altos-mapd: Use command line to pass map directory in
    
    Don't bother with a default value, just require a command line param.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e405ec771b812f0ff78abbe813c3a793ae129487
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 18:11:13 2018 -0600

    altos-map: Install .jar file for altos-map
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a372152654613fd8479ed4687b987ae2a513adf6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 18:10:57 2018 -0600

    altos-map: Fix altos-map HTTP syntax
    
    Add blank line between header and content.
    Make error pages have actual HTML content.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b817a2b854065af23c9ec8e849150e6930f51e9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 16:04:39 2018 -0700

    map-server: Add maps proxy server
    
    This creates a map proxy server to handle the new Google Maps API requirements
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a95ed9c9419c15352b8dc1d895c9adce30f99f5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 12:00:45 2018 -0700

    Add map-loading documentation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc70746e8efa6cadb23cbfcb11ddb51574c512a9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 5 21:40:13 2018 -0700

    doc: Use RELEASE_DATE to set PDF timestamps using faketime
    
    This ensures that the generated PDF files do not depend on the time of
    the build and only on the date of the release.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e87b2626cdd81c128ac0cb5db03350aff67feac
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 5 19:36:20 2018 -0700

    macosx: Ship install-macosx script with all apps.
    
    This script copies all files to ~/Applications/AltOS, then it deletes
    all xattrs on all files so that OS X will run the java programs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a477dcbafe942af8f53e57802e228d94b526e13e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 5 18:22:59 2018 -0700

    doc: Add check for new hardware in specs.inc
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb740c830b58273ee72255320bcedb3b849c0e2c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 5 18:22:11 2018 -0700

    doc: Update for 1.8.7
    
    Release notes
    Add HW specs for EasyMini v2.0 and TeleMega v3.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aeb07f2b94b0121d4e5a6ce175ce4e013d6557cf
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 4 23:10:59 2018 -0700

    altos: Force telemetry rate to 38400 when ao_force_freq is set
    
    ao_force_freq is used by TeleMini to set the radio to known
    values. As TeleMini v3.0 also has configurable telemetry rates, this
    value also needs to be set back to a known value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 77c3878df78ae356c442999a99f1e1752e2cd06b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 4 23:03:12 2018 -0700

    doc: Describe Packet Link mode in the initial usage section
    
    It's not described in any detail elsewhere...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f05859d9fdef5867df888d9a8b41602e3bff7f7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 4 22:58:38 2018 -0700

    doc: Describe Packet Link usage and selecting RF param defaults for TeleMini
    
    Packet Link mode is the only communication method available for
    TeleMini and deserves some special mention in the docs.
    
    TeleMini allows forcing of RF parameters back to known defaults by
    hooking SWCLK to ground at power on (hole 7 to hole 3 on the debug
    connector). Describe this process so that users will be able to get
    TeleMini back to known values and recover.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b43a0d4a76910c4b512b2299e17ee0d3b661990
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 4 12:12:56 2018 -0700

    altoslib: Add missing AltosUnitInfo files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06b1fc72c8a694b3295262f1e0b50e8c88c53585
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 00:06:05 2018 -0700

    altoslib: Fix gyro headings in CSV files
    
    Use yaw/pitch/roll instead of x/y/z
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3094d1f0ebd734f62d35e5e989d9a2368b713d29
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 2 17:27:31 2018 -0700

    ao-bringup: Add 'fix-telebt' to reflash TeleBT v4.0 with correct rf cal
    
    Fetches RF calibration value from the net and applies that when reflashing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2c7873695ee2dc1b6fd153b67accad9693937aa
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 2 17:03:28 2018 -0700

    altosui: Fetch RF calibration value for TBT v4.0 units from web
    
    We shipped a pile of TBT v4.0 units without programming the RF
    calibration value into flash. This change checks to see if the target
    is in the right serial number range and has the default RF calibration
    value, in which case it fetches the RF calibration value from our web
    site.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d5b9fd5b3dd8c8b3bfb478d366ba07501085c1b3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 2 13:57:58 2018 -0700

    altos: sdcc doesn't have 'false' and 'true'.
    
    Use FALSE and TRUE in ms5607.c driver instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2ea6454ebdf8ac7c3a24a738672c57d3f3f885c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 2 12:57:06 2018 -0700

    ao-tools/ao-cal-freq: Add --nosave and --output options. Check save results.
    
    --nosave means don't attempt to update the on-device configuration
      data in eeprom.
    
    --output means write the calibration value to a file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 523e51d2cd2dfc5c0c4ca5a893b005916c46d46a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 2 12:49:12 2018 -0700

    micropeak: Add MicroUSB 'equals' method
    
    This lets the code which polls for devices work with MicroUSB devices
    too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8dd942b59edbe6909128b88bfbb8d1e15c3857c6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 22 00:59:59 2018 -0700

    doc: Don't accidentally create zero-length PDF files
    
    The PDF files are generated at the same time the HTML files are, so
    the PDF versions depend on the HTML ones. However, touching the PDF
    files is a bad idea.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56dcfd4acf830fcb69c8b994e4b989c9aa7ddef3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 22 00:59:12 2018 -0700

    altos/drivers: Shrink ao_ms5607.c code to fit on micropeak still
    
    Use some code constructs that make the little AVR processor happier
    and save about 16 bytes of memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3c48b0fd504ae97dfaca91d2064b5822ca6e1344
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 22 00:52:21 2018 -0700

    altoslib: Reduce debug printf spamming during flashing operation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac8a9bc2ef301f1f18772af7d871c257a56ae70c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 30 21:36:18 2018 -0600

    altos: don't build fox1ihu by default

commit 87ae17f888b745de71790d071846b96ab96e1529
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 22 17:44:02 2018 -0700

    altosuilib: Provide dialog while waiting for flash target to re-appear
    
    On windows, switching to the boot loader can take a long time. Instead
    of timing out after a second, show a dialog and let the user cancel
    the operation if they get bored of waiting.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba285ecf51e317917858740504a7d691b9839588
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 22 17:43:17 2018 -0700

    altosuilib: Include device path in equals test of AltosUSBDevice
    
    Ensure that multiple AltosFlash devices don't appear the same; they
    all use serial number 1.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 378ebab2e70917b4182cbd840a3fa66e4e42fd92
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 22 17:42:13 2018 -0700

    altoslib: Use common constants for flash action messages
    
    Place messages in AltosFlashListener instead of using the same strings
    in three different places.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 22005da598921ef6fe1a7f1bb5e56e41f44fe12f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 22 00:58:14 2018 -0700

    altosuilib: Don't show radio parameter when reflashing radioless devices
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75420fecbc76ab718661718ada249673e139a29d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 22 00:56:25 2018 -0700

    altosuilib: Show a more useful message when the flash target device is unknown
    
    The flashing code uses the new symbol table to find information in the
    existing device; if they don't match at all, there won't be anything
    about the target device known. Tell the user this, rather than
    displaying mystic information (or crashing).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8017f921649d2176d90239e02275dc5ef793815
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 22 00:54:55 2018 -0700

    altosuilib: Poll for devices while Select Device dialog is displayed
    
    Lets the user plug/unplug devices and have the dialog box show the
    current set of available devices. Particularly useful on Windows where
    it takes a long time after connecting a device for the OS to actually
    make it usable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91bb344a74a413f7dcee379c4d760c34599749bc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 22 00:53:46 2018 -0700

    altosuilib: Add 'equals' method to AltosDevice
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f61ef9a5046c39f4eeaaf741031bb6a9607b8a6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 15 15:31:57 2018 -0700

    altos: Switch global 'log' to 'ao_log_data'
    
    Avoid conflicts with 'log' math function.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbe9cfd5eb5d19b7b9bf4bb75424e7592d708929
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 12:20:56 2018 +0800

    altos/stmf0: Stop using 'stdin' name as local variable
    
    stdio kinda wants to own this name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bbef0879ad86dfc21610a255e6cbca1b94b5d1a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 12:19:59 2018 +0800

    altos/lpc: Fix stdio wakeup on serial IRQ
    
    Should just use USE_SERIAL_0_STDIN directly
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f16d1e3a2f074b96aae6b9053e8e9e03bd282741
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 13 17:43:13 2018 -0700

    altos: Allow timer interrupt without needing tick count
    
    This saves a bit of space in the fox1ihu loader which uses the timer
    interrupt to poke the watchdog.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb9d071d328969fc3c544897f1fc96e55a842198
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 13 17:43:57 2018 -0700

    altos: Remove spurious 'const' from ao_state_names
    
    Current gcc complains about this.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 171d12cb7bb0ea185e9b8b6d90e1c0fb94b19008
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 12:19:19 2018 +0800

    altos: Remove spurious ao_mma655x_spi_index variable
    
    This isn't used; was probably included for debugging at some point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 297eb795b24ec31f6599f48bc8c3769557a7ec6f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 12:32:42 2018 +0800

    Bump java lib versions to 13
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54838e3d523953e3ce4cea2319b2820c21d2c576
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 6 13:15:21 2018 +0800

    Include TeleMega v3.0 firmware with releases
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55302673a3bff29ac8cd4c7656a410ba3c182845
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 12:28:25 2018 +0800

    Bump version to 1.8.6.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 029259feafd63f17fc34b95cc7b1fe55e3f611c3
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Aug 5 14:11:01 2018 +0800

    capture updates to Releasing from 1.8.6 release process

commit 8830fbc99565f753c0ae1f3d9f4b079860c2634a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 11:13:23 2018 +0800

    Update docs for 1.8.6
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d57c78dde3c6e61576a4769b0e0fae7e88c107d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 11:09:34 2018 +0800

    altos: Add separate 'ao_launch_tick'. Use in pyro and lockout.
    
    Prior to this, there was only ao_boost_tick, which got reset at each
    motor burn start. That meant there wasn't any way to measure total
    flight time for pyro channels and 'apogee lockout' was based on time
    since most recent motor start instead of total flight time.
    
    Now pyro channels and apogee lockout both use total flight time, while
    motor burn length still uses time since most recent motor burn start
    (as it should).
    
    Docs and UI updated to use 'launch' instead of 'boost' to try and make
    the change clear.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9dfbf0103a649816e98d5511b1d6bbbfc93f6632
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 09:03:35 2018 +0800

    altos/plottest: Make linewidth bigger
    
    1-pixel lines are harsh in 2018
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50c6d796e0dbb69289f95c826e6b542e538fc5de
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 08:45:30 2018 +0800

    altos/stm-demo: Set up for dumping eeprom
    
    This is used to dump an eeprom wired to the stm demo board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 327b765962d397efd4c45b6209c9225a4d23ba1d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 08:44:04 2018 +0800

    altos: Change 'after motor' pyro check to be >= instead of ==
    
    This makes after motor stay valid even if further motors burn.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a90d205d41cb4f9f8e669473247786a23a678368
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 08:43:06 2018 +0800

    ao-tools/ao-dumplog: Dump entire eeprom contents
    
    This gets the eeprom size from the device and uses that to dump the
    whole thing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08e7fdb9f2db4b54279c0c5b18735aa1d5abc19e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 4 20:25:58 2018 -0700

    altoslib: Make stop_remote delay depend on the data rate
    
    It takes longer to flush commands at 2400 baud, so wait longer when
    disabling remote mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 323a79e6ed3dfdd2afadfc2a464bb0610380b03b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 4 16:08:31 2018 -0700

    altos: Fetch current quadrature status at startup time
    
    This avoids having the state appear to change the first time we look
    at the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ad9d6677231ccbfa09a528387f306f5364f9d608
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 4 12:34:38 2018 -0700

    altos: Make fewer LCO variables public
    
    The lco common code doesn't need to share its internal values with the
    world; make most of them static.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38fb80e5e6af87f8c734448e4aa69b2c39854903
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 4 11:58:40 2018 -0700

    altos: Make LCO search directly drive pad/box displays
    
    Don't use ao_lco_show as that has other logic too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2214ad7c0f268be76c0b027eef9d1dc406f23b28
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 4 11:27:31 2018 -0700

    altos: Fix LCO display while searching
    
    Use lower level functions to control the display more directly
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b53a69e47816ee987a409b05a6b0b47891ca816
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 4 11:18:12 2018 -0700

    altos: Fix telelcotwo build for new ao_lco_bits.c file
    
    Lots of code motion; shouldn't have any functional changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71a51b4857f5bd49c0cba2578fb54b1d5b2c738b
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jul 4 12:13:38 2018 -0600

    add telefireeight-v1.0 to products built by default in src/Makefile

commit 81355cd08a22502d47637f2505b6089d226d0889
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 3 01:06:09 2018 -0700

    altos: A bit more LCO code sharing
    
    Missed drag race pad toggling in ao_lco_v2.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55f817d6ff1a524434fe41ba83e42b8008989cac
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 3 01:01:05 2018 -0700

    altos: Build telelco-v2.0 by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c48d4b60da8b23bf358e6c14d7332d3a360c2d2f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 3 01:00:15 2018 -0700

    altos: Share common LCO functions in ao_lco_bits.c
    
    Move common code out of ao_lco.c and ao_lco_v2.c into a shared file,
    ao_lco_bits.c. Update ao_lco.h to include shared functions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e56e1dc20b3bf18073766da4e26e97d9e1d419fc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 2 14:21:48 2018 -0700

    altos/test: Compute and show height error tracker in ao_flight_test
    
    Enable the computation of ao_error_h_sq_avg in ao_flight_test even
    when an accelerometer is present to allow review of that data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c263fde769da380d55d223cebe3c9b6e8f19cb29
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 2 14:20:39 2018 -0700

    altosuilib: Split cc1111 vs arm telefire/telemini for flashing
    
    Only older telefire and telemini boards had cc1111 processors and need
    pair-programming.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8794920328c8311372f83e4e5656ce14c7f8336b
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jul 1 14:50:26 2018 -0600

    add a turnon script for TeleLCO v2.0

commit 655fd8e1490b70061cd81edf1d019e0469843688
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 18 10:53:35 2018 -0700

    altos/telelco-v2.0: Do all drag race beeping from the beeping thread
    
    Instead of starting the beep from the calling thread, just update some
    state and poke the beeping thread.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9ece56e3ad76af6ae623ad7a6782c0c933839be8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 12:35:23 2018 -0700

    altos/ao_pad: Move LED test to the monitor task
    
    It sets the LEDs, so it's best to not start doing that until we've
    tested them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cef5a5725e3bf2c17965599bd76eb93cb05a0f80
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 12:30:09 2018 -0700

    altos/ao_pad: Turn on all LEDs for a moment at power up
    
    Allow validation of all LED connections.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 731ba39a22719a8c431eb63895cd8ba553975114
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 12:29:36 2018 -0700

    altos/ao_pad: Use AO_LED_TYPE for computing active LEDs.
    
    instead of uint8_t
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 42ee832368f6ff796444823d53935d824acd329a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 12:28:51 2018 -0700

    altos/stm: Let products override AO_LED_TYPE for stm processors
    
    No need requiring it to be uint16_t
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2d9f13a97d45b7dbe2cb47b563aea59ec725bb1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 01:36:00 2018 -0700

    Bump version to 1.8.6
    
    Prepare for release.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 290506129fb6cb664da3a5e3ca450a0dcdff0398
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 01:20:01 2018 -0700

    altos/telelco-v2.0: Fix AO_ADC_DUMP
    
    Was printing p.v_batt instead of (p)->v_batt. I don't know why the
    former even worked.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 291bcd751991960ae3dad8c6523323fdcbafa16d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 16 23:50:11 2018 -0700

    altos/telelco-v0.2-cc1200: Add build for NAR hacked TeleLCO v0.2 board
    
    This has the CC1120 replaced with a CC1200, but with 32MHz xtals
    instead of 40MHz on the radio chip.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16482bf5d63eafc5256f14a218d3a374f6584e0a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 16 23:51:26 2018 -0700

    altos/driver: Improve quadrature debouncing for mechanical encoders
    
    Track state of encoder better and only bump values when the full
    motion is detected (all four states).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abac6c59d6b004d52a7b782865d2d987732cd61e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 00:17:29 2018 -0700

    altos/telelco-v0: Test display, show batt voltage at boot
    
    Just like telelco v2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96835cc841ff7afad0b4d2fe4b63f26b951da122
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 00:19:37 2018 -0700

    ao-bringup: Find dfu-util in $PATH for chaoskey
    
    In case it's not in /usr/bin
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7821e341a7cf55e32b926eb4474220dabb6eeb81
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 16 23:47:42 2018 -0700

    altos/stm: Define ADC channels for TEMP and V_REF
    
    These are fixed at 16 and 17.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c465b0049659246908b15be68806b1390e8ebe5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 16 23:47:15 2018 -0700

    altos/stm: Remove unused ADC names from ao_adc_single_stm.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d9881547706b49cc22b98cc5c94e01e8a7f5181
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 31 22:45:49 2018 -0700

    altos/telelco: Remove STATIC_TEST code from stand-alone LCO boxes
    
    This command conflicts with the 'debug' command in these devices and
    so wasn't usable anyways.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f755181fd3ec82d7644591e2ed4b99a244acfd6e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 31 22:42:13 2018 -0700

    altos/telelco-v2.0: Test displays at power on
    
    At boot, light up all LEDS and LCD segments for a second to let the
    user verify that things are working correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 99642f9c4f89aa5577376a9cd118e7cff26e2762
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 31 22:39:45 2018 -0700

    altos/telefire*: Do voltage tests in decivolts instead of ADC units
    
    This requires that each pad device specify the ADC reference voltage
    and all relevant voltage divider resistor values explicitly so that
    the ADC values can be converted to decivolts and compared with one
    another. This should be easier to understand in the future when
    reading the code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab22c56ca02db87a84b6950c024a90b086f5ce28
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 31 16:24:33 2018 -0700

    altos/telefireeight-v1.0: Fix ADC definitions
    
    Was missing all of the GPIO configuration bits, which probably meant
    the ADCs were returning garbage values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82ed4f5c45b1a9f114577a59fac546c81d69f810
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 30 11:38:24 2018 -0700

    altoslib: Revert field name changes for accel cal values
    
    These names get written in the JSON part of all .eeprom files, so we
    can't change the names or the values won't be read and written correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 484ffebc54048bbe276e0e2c0e2ab52c6a1761c1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 19:19:43 2018 -0700

    altos/telelco-v2.0: Set HAS_ADC_SINGLE to enable HSI timer
    
    The ADC unit requires the HSI timer to run, so make sure it's enabled
    for this device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16971e550d1018fb6acf3fee3c56098f5ba9921e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 19:18:48 2018 -0700

    altos/stm: Enable HSI timer when HAS_ADC_SINGLE is set
    
    The ADC unit always uses the HSI timer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 42a261a56606be69b5fb90fd6017c70a1e5d72dd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 16:10:51 2018 -0700

    altos/telelco-v2.0: Display local batt voltage at startup
    
    Show the battery voltage for a second at startup.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3fb27f0ab7163c96945a60fd406e5423552206a2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 16:09:19 2018 -0700

    altos/stm: Add polling ADC sampler API
    
    This just fetches ADC values on demand instead of loading them
    periodically into a ring buffer from the timer interrupt.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dbeb9b91a48418c5bc9f6edccaef20c3ef77d45d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 15:12:26 2018 -0700

    altos/telelco-v2.0: Change drag race selected/no-continutity pattern
    
    Make it turn on at the same time as the pads with continuity, but turn
    off sooner
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb31a40b3499287e0a52324a9adc3728883ed957
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 15:07:06 2018 -0700

    altos/telelco-v2.0: Add debug output for pad voltage display
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29f9880f7b09bc135d34bf0dcb221bdede7726b3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 14:54:47 2018 -0700

    altos/telelco-v2.0: A bit fancier with the drag-mode LED show
    
    Continutity leds now show whether the pad is included in the drag race
    *and* the continutity using four different patterns:
    
    Drag select & igniter present:          long on, short off
    Drag select & igniter missing:          short on, long off
    Not select & igniter present:           solid on
    Not select & igniter missing:           solid off
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98ea690cc7514f43254f3a6c72668c11820f657c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 14:41:51 2018 -0700

    altos/telelco-v2.0: Fix button names and pin mappings. Add drag LED.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1f1a4513391aa595eb64552f2aa4cfedd0cc0ff
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 14:35:18 2018 -0700

    altos/telelco-v2.0: Mixed up the select_button pin (is E0, was set to E13)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c94ba66d5b4c99b43ab965331bf1faa270a9768
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 14:26:47 2018 -0700

    altos/telelco-v2.0: Only look at drag select presses, not releases
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a26cf26e3416b1982abec249678a32a420bf8809
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 14:26:12 2018 -0700

    altos/telelco-v2.0: Use single-step quadrature code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ccad6e970c5c7416561443f1e6e2fa8f80698957
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 14:15:34 2018 -0700

    altos/driver: Add support for one-step-per-click quadrature encoder
    
    The mechanical encoders go through all four steps per click while the
    optical ones have a single step per click. Support both kinds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f172b139ddc3fcc17cf89b57e5126264c0faa45e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 13:08:33 2018 -0700

    altos/telelco-v2.0: Reduce quadrature debounce time
    
    The optical encoders shouldn't bounce at all; let's try a minimal value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4dbc940cc6c8ff5565e8af21f2dcb4ae090380c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 13:07:06 2018 -0700

    altos/drivers: Make quadrature debounce longer by default. Fix state tracking
    
    This increases the default debounce time for quadrature encoders to
    30ms, which cleans up the mechanical encoders on TeleLCO v0.2. Also
    change state tracking to explicitly check for expected state values to
    avoid mis-triggering.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e2a2849f58e98adc1114bb8f3a6319408d93691
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 12:06:41 2018 -0700

    altos/telelco-v2.0: Only switch encoder mode on push, not release
    
    Was not checking event value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 863a9d523b26a8a5f8fbd5b516bd7dd914ee079e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:23:03 2018 -0700

    altos/ao_button.c: Support up to 16 buttons
    
    TeleLCO v2.0 has more than 4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb70e334ffc77e737bb21ab3fe777a982d80ee3b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:12:36 2018 -0700

    altos/telelco-v2: Change select button to alternate box/pad mode
    
    Instead of a three-way, just make the select button two-way and have
    the arming switch disable it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14fa6cee857918966740d05c4ed13b1a79db3caa
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 21 22:36:35 2018 -0700

    altos: Add TeleFireEight v1.0 product
    
    Eight pyro channel version of the TeleFire boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e272f6a66881b6904037ee7b1afeb9a8a3ec5b2a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 21 22:32:38 2018 -0700

    altos/drivers: Pads with multi-port firing and pad selector DIP switch
    
    TeleFire 8 scrambles GPIOs to make layout cleaner, placing the 8
    firing outputs across two GPIO ports.
    
    We're also adding an 8-unit selector for box number so that boards can
    be re-configured in the field. These override any ROM-configuration
    value; you can select the rom value by setting all switches to 'off'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85a8846a423ce2d15815466564fb589bb553c742
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 16 22:03:25 2018 -0700

    altos/stm: Add per-LED port/pin mode in LED code
    
    If you've got a complicated LED pin arrangement, you can ask for each
    one to be configured separately, instead of using groups in a couple
    of GPIO registers. The code isn't as efficient this way, but at least
    it's easy to read.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96ee5257068a988db10097af8df72b0008bce978
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 16 22:02:11 2018 -0700

    altos: Add TeleLCO v2.0 product
    
    New LCO design with a single rotary knob and lots more buttons.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a26df7db9453bf0596f729a23efb90e5e8a63c7
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 16 22:05:26 2018 -0700

    altos/vidtime: Check for value change in normal code, not irq
    
    This makes sure each value change is reported to the user.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06dac6551418ba817798c187f198b9b00c1dda74
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 11:26:42 2018 -0700

    altos: add 'vidtime', a simple brightness monitor
    
    This is a testing tool for video refresh tracking. It uses the mpusb
    v3.0 hardware and monitors the phototransistor value, sending 0 or 1
    to the USB port when the value changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f56dc30a31e3d5c833f73ec9cd31f548a80e154
Merge: feb881a2 71acc79f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 09:53:52 2018 -0700

    Merge branch 'mpusb'

commit 71acc79f8e828d56296db282c72cf4492a8aa4f4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 09:43:27 2018 -0700

    altos/mpusb-v3.0: Make it compile again
    
    A few things have changed since this code was written.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc70f92966221f941b96177b401744a7aca24814
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 09:42:28 2018 -0700

    altos/stmf0: leave ao_power_gpio names undefined without power management
    
    Should make it more obvious at compile time that you've done something wrong.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ddd4e10bd8ddb4a00a0ccd8982db3311ec5a9e7
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 20 00:00:07 2016 -0800

    altos: Add µPusb v3.0 project
    
    This replaces the ft230 with a stm32f04, saving a bit of BOM
    and giving us control over the firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit feb881a24250bd7e71ec8ccef0099d4b4a0df519
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 08:58:21 2018 -0700

    doc: Update pyro channel info to reflect UI changes
    
    Use the new naming in the UI. Add lots more comments about how things work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b11a34bb031035883bac97952e5ca6db0684e33
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 08:56:32 2018 -0700

    altos/test: Replace state name with 10* state value in test log. Fix raw speed
    
    Using a state value means we can plot state changes along with the
    rest of the graph. Raw speed (simple integrated acceleration) was
    busted; mostly needing to skip the first accel sample.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc83d57454ed07e4828b4413e5af6ae2ecfe2e5a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 08:51:36 2018 -0700

    altos: Eliminate height requirement for coast detect
    
    We had required a minimum altitude of 100m to transition from boost to
    coast. With small motors in a heavy multi-staged rocket, this can fail
    to detect coast in time to light the second motor.
    
    Also, this would fail to deploy recovery systems if the flight failed
    before reaching 100m.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 49aafcbb6c0f3ecda4b668776be74a04a5654377
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 08:50:33 2018 -0700

    Update version to 1.8.5.2
    
    Shipped some bits to Fred Taverni to test eliminating the altitude
    requirement for boost detect as he stages so low.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab65e9f257493da5282d8933d8f0dcb716c1f41f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 21:16:25 2018 -0700

    ao-chaosread: Add support for the new flash endpoint in chaoskey
    
    This adds support for endpoint 0x87, which streams the contents of the
    onboard flash to the host for firmware verification.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bea42e45952df85d61428662caefbb100465a585
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 21:13:02 2018 -0700

    altos/chaoskey-v1.0: Add endpoint for reading flash contents
    
    This creates another IN endpoint which provides the contents of flash
    for validation of the firmware load on the host.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4451f7b6bade66775a197b93c6e70ba15f1826ce
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 21:11:48 2018 -0700

    altos/stmf0: Fix up USB debug code
    
    At least make it compile. In this configuration, it's dumping out IN3
    endpoint register values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a06c283c358455008cd1e5376ccc0b6f72c7ac87
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 21:11:02 2018 -0700

    altos/stmf0: Add IN3 alternate endpoint support
    
    This adds the code necessary to drive another IN endpoint.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b15549d8c5277ba3aa425e232473a17dc136e5a4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 21:09:22 2018 -0700

    altos/stmf0: Toggle IN2 SW_BUF bit when sending data
    
    This tells the hardware we're done writing data to the second input
    buffer and allows it to be switched from NAK to VALID.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8efe0d40deded973f08f63eb650a036f9e24d2fb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 21:17:32 2018 -0700

    altos/kernel: Add USB descriptors for IN3
    
    This adds the necessary descriptor information to support another IN
    endpoint for applications.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f282b802d2f5a0da56bb8245169c46a16b2eed71
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 21:06:31 2018 -0700

    altos/kernel: Define usb IN2/IN3 functions
    
    These are putchar and flush functions that are used when sending data
    to the additional IN2 and IN3 endpoints.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 257350e1a3e4ba2048e80d30a4a0454eb65d4a26
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 1 23:47:27 2018 -0700

    ao-bringup/turnon_telemini: Skip DFU if no DFU device is present
    
    This skips running dfu-util to load the bootloader if there isn't a
    suitable DFU device listed in the system, which allows an
    already-flashed device to be run through the same script.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08e543cd8b761e4cbbfa97404fcd5394f65a0e9e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 1 23:44:00 2018 -0700

    altos/stmf0: Set 0x0 mapping to Main Flash for boot loader
    
    When DFU finishes loading firmware and jumps to the application, it
    leaves the mapping of addresses starting at 0x0 set to System flash,
    which prevents the boot loader from receiving interrupts and requires
    a power cycle during flash & cal.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 980e3dc43ac4712680a370756e5112e9f330aa9a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 1 23:36:57 2018 -0700

    altos/stmf0: whitespace fix
    
    Trailing whitespace.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 772b5f1cb625fba1396a57b47498ef805ae1a9a8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 1 23:36:16 2018 -0700

    altos/stmf0: Change tests for AO_BOOT_CHAIN and AO_BOOT_PIN to #if
    
    Were #ifdef, which meant that #define AO_BOOT_PIN 0 didn't work right.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 312f303be7f2a641020903ed2daccb8a4d67ec42
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 28 12:03:10 2018 -0700

    altoslib: Fix Idle Monitor on TeleMega v3
    
    The new IMU includes a mag sensor, and there's no separate mag sensor.
    
    Add support for reading the mag sensor values from the IMU, separate
    out v3 from previous TeleMega versions so that the code can stop
    trying to read the mag sensor.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0dfaecc25a12da57248541a66dd5118161616cce
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 21 16:16:18 2018 -0700

    altos/fox1ihu: Pull down radio control pin in flash loader
    
    Ensures that the radio is powered down while in the flash loader.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8025b98420f16730e5e6e45114cbdbbf88f7a748
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 7 20:16:41 2015 -0700

    Remove ao_radio_cal from stm products without radios
    
    Products without a radio don't need this value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c408c773793b5a5685d95c11ba6f710200505c25
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue May 6 00:38:33 2014 -0600

    had the sense backwards .. presence of 'attached' should put us in the loader

commit 9003147a89074f8d991d1707f307fd4e41435aa3
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon May 5 17:32:22 2014 -0600

    move signal that forces flash-loader on to PB8, active high

commit ddf70e806f894707613830fd64e21b5bb8f19972
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:36:36 2013 -0700

    altos: Build fox1ihu by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6247e0c81084b59365ceca0ced33d2db92a72444
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 1 00:06:30 2014 -0800

    altos/fox: Enable system timer in flash loader and prod watchdog with it
    
    This makes it possible to reflash the board without needing to disable
    the watchdog.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 04aa1dfa7918dcf4eea9ec4cef5a31ac2a61a00d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 31 22:39:58 2014 -0800

    altos/fox: Update ADC to fox-1 IHU Revision 2
    
    Change ADC pin definitions to match new hardware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54da028c492464802b048cb949d392cd83994e75
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 31 17:44:45 2014 -0800

    altos/fox: Transition to current altos build environment
    
    Fix the library usage, use $(LIBS) instead of $(SAT_CLIB) -lgcc
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca58096665fc1a11ca5683f0e6aafaf3e153af37
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 00:42:31 2013 -0700

    altos/fox: update product name to show v2, enable watchdog by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e79202f95f0e5b4a01da31d3742a775bea62cc92
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 00:05:39 2013 -0700

    altos/fox: Run app when PD6 is low
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 36cf713ead58a52539c87de764b022ba0dcde27d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 16:06:48 2013 -0700

    altos/fox: Add fox1ihu flash loader
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4c37ccc63d37ff0a4382f6812060d3c5fd4b6cfb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 25 21:25:12 2013 -0700

    altos/fox: Add MRAM and SD card drivers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f517aa5e042af8dd7fd36be47e4b196f212e79b0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 21 10:16:35 2013 -0700

    altos/fox: Enable M25 driver for MRAM.
    
    The M25 driver can also talk to the MRAM chip, with a few adjustments
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0c969910a516c018e64eaa73cdbe4bc2f979835
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 21 09:49:15 2013 -0700

    altos/fox: Add watchdog timer
    
    Runs at 25Hz, can be enabled and disabled via the command line
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6adf9d2a17d701ed0ceb742f322fa72723149980
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 23 21:37:24 2013 -0800

    altos/fox: Turn on all of the fox lights
    
    Fox has two red and two green LEDs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 524afb040aa34d93abae7d04afa1df7a626f9877
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 23 21:36:18 2013 -0800

    altos/fox: Provide names for fox ADC channels
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b783887d7f136d3a389316545b74f4755e43eb4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 23 21:05:26 2013 -0800

    altos/fox: Fix up Fox ADC bits
    
    Update to current schematic
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff2330a7fedfa7f6be3502ad0d591ab9e5ddddc6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 23 20:48:04 2013 -0800

    altos/fox: Initialize FOX adc
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fbf01178e560d8a36916e295d7bdb0b0e98d2b02
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 23 21:45:28 2013 -0700

    altos/fox: rename fox product
    
    It's Fox1IHU-v1 now

commit 23ba75c3c2ddde65dc543b52cd87b8a1433c5024
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 23 19:03:26 2013 -0800

    altos/fox: Add fox1ihu bringup firmware
    
    Firmware capable of testing fox1ihu hardware
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8612c1287a1c458a17f33af1d679d30a13dea772
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 26 17:24:51 2018 -0700

    altoslib: Fix data fetching during flashing of cc1111-based devices
    
    We want to get enough information about the target device to verify
    that the new firmware matches, so fetch 512 bytes instead of just
    barely enough to cover the romconfig data.
    
    Also catch out-of-bounds accesses and handle them, in case even this
    large array isn't enough.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eee9f6128da146b0e9c711d49b2a3eb49a95aaf3
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 26 16:30:54 2018 -0700

    altoslib: Keep config data accel cal in antenna up form.
    
    Instead of letting the accel cal data live in whatever form it was
    fetched in, keep it in antenna up form and provide it in whatever
    orientation is necessary.
    
    This fixes bugs in changing pad configuration where the accel cal values
    from the old orientation would get used in the new orientation and
    wreck them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3474fb33a58e78b3b8f36958dd44768e49f3edc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 25 23:07:46 2018 -0700

    altoslib: Flush settings restoration commands after accel cal
    
    To avoid mangling settings when the user doesn't 'save' things,
    restore the original accel cal values and orientation after finishing
    accelerometer calibration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d691170a96545a9e57aad454de87541cea8c292
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 22 20:02:04 2018 -0700

    altoslib: Remove ascending/descending from pyro config
    
    Ascending and descending don't add any functionality and can confuse
    people. Clears pyro configuration value when ascending or descending were
    selected in the configuration so that the user knows to reset the
    channel from scratch.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57218127ee39724e985fefcf203991401f01cc84
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 22 20:01:01 2018 -0700

    altoslib: Clarify terms in Mega pyro config
    
    Suggestions from Bob Brown et al
    
    Speed -> ascent rate
    Height -> height above ground
    Acceleration -> Vertical acceleration
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06ca18ee67f80a9d1e25799930aca59e99e32d7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 21 16:22:16 2018 -0700

    Set version to 1.8.5.1
    
    Firmware has changed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b47796991cb6c2edb85f9201a53515b4dd28b946
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 15 22:52:35 2014 -0700

    altos/flash-loader: On STM, don't include ao_usb_disable
    
    This saves a bit of space, keeping the flash loader under 4k on fox
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b478d3c3569d2f9df50b0030197468d14af67688
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 21 16:17:26 2018 -0700

    altos: Use max of 64 previous orient values when checking pyro limits
    
    Instead of checking just a single measurement to see if the
    orientation is outside of the desired limits, use the maximum of 64
    previous values to that rapidly changing orientation won't
    accidentally enable a pyro channel if sampled at the 'wrong time'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a414a32f86c9d8a2c5f576898c0f0dc75263ff85
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 21 16:14:39 2018 -0700

    altos/stm: Simplify ao_usb_write a bit
    
    Remove unnecessary 'offset' param (was always passed zero). This also
    makes some code conditional on that value no longer necessary.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1569b23b2f139e3840ec145f4eef45f36fc4939a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 16 09:46:22 2018 -0700

    doc: add release check for altusmetrum-docinfo.xml copyright
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d5c038473d56ebbe61b8a71b5eb28d03385f8c48
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 16 09:45:35 2018 -0700

    altosdroid: Attempt to avoid some reported altosdroid crashes
    
    Just looking at stack traces, maybe these changes will avoid some problems?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 110e4818b85781c33d683b7b7e7f2864a1223c5c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 5 16:41:20 2018 -0700

    micropeak: Make reported 'max height' value show filtered max height
    
    MicroPeak tries to filter out bogus pressure data so that the value
    reported on the LED is reasonable. We want to report that same value
    in the UI, which means replacing the normal mechanism for computing
    max height from the time series of height data with the value computed
    from the saved minimum pressure value recorded in the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20dc0e6c8e365c1f4188189d506163d589c3bade
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 22 19:00:03 2018 -0600

    add a warning about Google limiting per-day access until/unless we pay

commit 0b58d3067d994319b73c2bd15817f6922257ece2
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Mar 31 17:44:18 2018 -0600

    another second seems to help on the very slow Acer laptop

commit 865364d2738ae0b79a390eab62a5ddac1e890c71
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 17:35:47 2018 -0600

    altos: Hack up code for TeleMetrum to make it just a tracker
    
    Support for a failed TeleMetrum device that uses just the GPS receiver
    and radio to create a TeleGPS-compatible device called 'tmgps'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58eda1736d8cffa6e3b5afce6f5faabbb179045e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 17:34:23 2018 -0600

    altos/ao_cc1120: Only call ao_packet_slave_stop when HAS_SLAVE
    
    Don't try to disable packet slave mode when the product doesn't
    support packet slave mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 49fd1fe435b116665b41722c7d14878a62bb3311
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 20 18:25:43 2018 -0600

    add a paragraph to the intro pointing to the altusmetrum email list

commit 39023ed6e29103a85bfad505506fa0dbf4dc1112
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Mar 18 15:42:48 2018 -0600

    doc: update copyright year in doc/altusmetrum-docinfo.xml

commit 84146083da782c335ba7f040b238c3f51ba2f484
Merge: ee79a205 78e5ae58
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Mar 18 15:33:44 2018 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 78e5ae58c2ad5ba7246a649c0bd15ff68b5d0e74
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 17 11:26:29 2018 -0700

    Bump version to 1.8.5
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 529c04026dec55d9d0922689e56f1d23b0ff6095
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 17 11:25:00 2018 -0700

    doc: Add release notes for 1.8.5
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd0021d431165a6c896a6022691a447e27fd555e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 14:54:04 2018 -0700

    altos/stmf0: Add some common definitions for flash loaders
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4894d965d73231b5c74810d826c7c97fa1bd7803
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 14:53:14 2018 -0700

    altos: Make panic beeps use fixed frequencies
    
    This ensures that the beeps will work even before the configuration
    has been loaded.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ea6188a9c78ab0642001110cac6c3b35e8ccc88
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 14:52:09 2018 -0700

    ao-usbload: Flip product names in loader error message
    
    I was reversing the 'target' vs 'image' names in the error message,
    leading to a bit of confusion.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 788d02a3caf0f14f3c84ff6ae7e2a2fff302e91b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 14:51:22 2018 -0700

    ao-bringup: Check for Loader USB id before attempting dfu-util
    
    This lets me restart the turnon process after the boot loader has been
    flashed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7068149704e6de67ece670227445e987421cd600
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 14:50:29 2018 -0700

    chaoskey: Create unified ROM image with both loader and app
    
    Flash the whole thing all at once to reduce the number of steps during
    turnon.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46d8197bb80ce3fe4cdc7b36c3be211366093bd5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 14:49:04 2018 -0700

    ao-bringup: Don't wait for user when testing EasyMini igniters
    
    I always have the LEDs ready to go before starting the turnon process.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee79a205e118ea8730a02cc327d8fb79cc5f74ff
Merge: 365eee3e 78a90fc7
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Feb 12 16:38:57 2018 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 78a90fc760b88ab66c5c238289afc38356e29d8a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 12 15:36:12 2018 -0800

    Add TeleGPS v2.0 binaries to distribution
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54e8e033ccf47526e5ff08f93c105ef75334924e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 13 21:29:08 2018 -0800

    libaltos: Use case-insensitive compare when matching BT MACs
    
    We use the BT MAC vendor portion to figure out which port to connect
    to as that is simpler and takes less network traffic than actually
    doing discovery. However, on Windows, we were generating the address
    in lower case and comparing against upper case vendors, which didn't
    work out too well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b95db5819885da89504d5e11decfda98cfac37aa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 12 22:27:41 2018 -0800

    altoslib/altosuilib: Validate rom image is for target device
    
    This should avoid mis-programming devices with incorrect firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f26cc1a677f577da533425a15485fcaa24626b23
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 10 23:11:40 2018 -0800

    altos/scheme: Move ao-scheme to a separate repository
    
    This way it can be incorporated into multiple operating systems more easily.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b52fc6eea9a478cb3dd42dcd32c92838df39734
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 8 13:46:17 2018 -0800

    altos/scheme: Allow unicode in lexer
    
    This just passes any bytes with the high bit set through the system so
    programs can include UTF-8 in strings and symbols. What the heck.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f8a967959b2f5ca3486ab3422f30fe4ad4ba17a8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 23:06:51 2018 -0800

    altos/lambdakey-v1.0: Add LED function back in
    
    We've made things smaller, so there's (barely) space for this now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ae22601bbf018193ac093fb0f745ebe213bfb64
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 23:06:22 2018 -0800

    altos/scheme: remove debug code from vector write
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf37c22c6cdd4a90117bdc809e5c063a079082ad
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 23:05:02 2018 -0800

    altos/scheme: Allow individual lisp keywords to be feature-conditional
    
    This lets us build a smaller lisp that is just missing some aliases
    for existing functionality to save rom space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 283553f0f118cef1dbcfbf5e86a43575a610d27f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 23:04:22 2018 -0800

    altos/scheme: Split tests out from build sources
    
    Run tests on both tiny and full scheme test programs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 48d164e3d4b2ef27fae20fae63b8014803a7b178
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 21:44:39 2018 -0800

    altos/stmf0: Use double buffering for ChaosKey
    
    This improves the USB performance of ChaosKey so that it doesn't NAK
    during data transfers at all.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db7f7c6c7f956058250b8057c6c27284f6f22e53
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 21:43:22 2018 -0800

    ao-chaosread: add --raw and --cooked flags
    
    Allow reading from the cooked endpoint as well as the raw one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8545ed42bd29152f4937fb6457aba5fbd57e7691
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 17:43:42 2018 -0800

    altos/stmf0: use double buffering for USB rx data
    
    This also allows us to stop shadowing USB rx buffers in system ram
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 42072f591690b8258d957ab7a9b2f5d911676b39
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 12:43:13 2018 -0800

    altos/stmf0: Use double buffering for USB tx data
    
    This shouldn't have much of an effect, but shows how double buffering
    works.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eead259673c6594d41cfab796c8674c8bf1863cc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 11:51:07 2018 -0800

    altos/stmf0: Stop shadowing USB tx buffers in system RAM
    
    Use the 16-bit USB memory directly, avoiding the buffer space and the copy
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee62272bec67b5784a4ee4e12d8a59677bf9d112
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 11:49:09 2018 -0800

    altos/stmf0: Remove packet counters from non-debug build
    
    These counters are only useful for helping debug the USB driver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 043c5b56ffc2d8171769f6e988eaad6e457bad89
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 7 11:47:57 2018 -0800

    altos/kernel: Use ao_put_string for syntax error message
    
    Avoid using puts, which can be a large library function.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b446d9657cad0ff45f6f65c774d82cb9f2f65088
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 6 18:11:19 2018 -0800

    altos/lambdakey-v1.0: Switch back to command buffered input
    
    Instead of just reading from stdin with no echo or editing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16061947d4376b41e596d87f97ec53ec29d17644
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 6 17:29:10 2018 -0800

    altos/scheme: Add ports. Split scheme code up.
    
    And lots of other changes, including freeing unreferenced atoms.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 39df849f0717d92a7d5bdf8aa5904bd4db1b467f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 6 17:21:45 2018 -0800

    altos/scheme: add 'install' target to install both test and tiny test
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d9a3e0378f84ffc8447747150066eae33cd3229
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 4 02:28:13 2018 -0800

    altos/scheme: Add vector and string funcs. Test everybody.
    
    Add a bunch of string and vector functions from r7rs. I think most
    everything is here now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d34f01110d8770ac99556901143a54c3d492cde0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 4 02:27:11 2018 -0800

    altos/scheme: Accept more escaped character constants
    
    Allow all those specified in r7rs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 243baa14a62e3efe5ae792c73db75f9c2cb86abb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 4 02:26:21 2018 -0800

    altos/scheme: Allow make-vector value param to be optional
    
    It can default to #f
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a6e01e7aafb1d1fdb15d633ec23d8fe51afd15df
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 4 02:25:45 2018 -0800

    altos/scheme: Add builtin list-tail
    
    This is used enough to warrant a builtin, rather than lisp implementation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e030fba5ab556c88af918d08e1b62e63d6605638
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 4 02:24:15 2018 -0800

    altos/scheme: Fix macro-detection debugging
    
    Just update to use ao_scheme_printf
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 036a5311cbc86dbc5a8f859778d52d588915e4e2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 4 02:23:40 2018 -0800

    altos/scheme: add make-string builtin
    
    Allocate a blank string.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a0327330dcbf5531cd0f8ca8b912fa51ef44f13
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 4 02:22:02 2018 -0800

    altos/scheme: Make constant built pool as large as possible
    
    This allows building with as much constant data as will fit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 637795fcf8ca52af431acec183cc961dae121e57
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 3 14:58:57 2018 -0800

    altos/scheme: Make for-each tail recursive
    
    Provides a native version of for-each that is tail recursive, rather
    than having it just use map and discard the return value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7bfc1eda398e8767e352cd6396ac61c7ea021079
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 3 14:57:39 2018 -0800

    altos/scheme: Add start/end args to vector->list
    
    This is an r7rs extension which allows you to extract a subset of the
    vector.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2bcc178f3cbfd346b134bb3fe700b0512f340fea
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 3 14:56:15 2018 -0800

    altos/scheme: fix parsing of vector followed by list
    
    The 'parsing a vector' state value wasn't getting cleared at the end
    of the vector, so that (#(1 2) (3 4) returned (#(1 2) #(3 4)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b7c34a2e5ecff19d61d337b8c84976cc46005ec4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 3 14:55:24 2018 -0800

    altos/scheme: support %x format for scheme printf
    
    read debugging uses this format.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fccb5105b79d5b9e2ed052ce5459028015c01741
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 3 14:53:48 2018 -0800

    altos/scheme: Add support for hex, octal and binary constants
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 365eee3ebfe73204033089b363687228f97e5d98
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 3 14:43:29 2018 -0600

    need to push telegps-v2.0 loader .bin file to corporate repo, too

commit fc63968f90e3fab12e63d973a4ee7f16d80d765f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 24 14:29:09 2017 -0800

    altos/scheme: Pull out per-frame vals while printing list of frames
    
    Was using the same vals for all frames, which just doesn't work well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b5892f75a75363a656ede8befb419245aa218b5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 24 14:28:29 2017 -0800

    altos/scheme: Add separate floor-quotient builtin
    
    Does what 'quotient' did before, now quotient rounds towards zero
    while floor-quotient rounds down.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d95486be96fe989f6984b3452c5c5d92897c5606
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 21 20:40:28 2017 -0700

    update Releasing with wisdom from 1.8.4 release process

commit 87aab99521dc44d1d29fbb0b7f227f868f074836
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 21 17:37:10 2017 -0800

    Bump for version 1.8.4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4bcdc106df2c5e8572570e57b4d97121df94799a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 21 17:36:24 2017 -0800

    Doc updates for version 1.8.4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46304aa257635d14afc4d8567eedba0f93a5742f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 16:57:33 2017 -0800

    altos/micropeak: Remove all compiler results
    
    Not just the current version.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 99299986e194337b05ee81cfb7c4aa1cb9e9a74e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 16:56:33 2017 -0800

    altos/attiny: Add ADC implementation
    
    It's primitive, but might serve to read ADC values. Untested.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 342132a8869d530b6893bb84becf03cb30490600
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 16:21:23 2017 -0800

    ao-bringup: turnon_easymini was left with dfu_util disabled
    
    This was presumably changed for some test and left in the wrong
    state.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d05747941b8e31afb1f8522ac0b8c1ad12aa90f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 16:19:40 2017 -0800

    altos/easymini-v2.0: Adapt to final hardware pin assignment changes
    
    Beeper moved from PB0 to PB1 (Tim3 CH4)
    Drogue fire moved from PB6 to PB3
    Bootloader moved from PB1 to PB6
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9826845f952abe898f029e31cc0f7080708e2eae
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 13:09:24 2017 -0800

    altos/lambdakey-v1.0: Add back and/or macros
    
    With scheme shrinking a bit, there's now space for these useful macros.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ed1f7b79abc7400a54b35fbf62c9db6855f9129a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 12:39:20 2017 -0800

    altos/scheme: Replace per-type indexed stash with poly stash heap
    
    Instead of having a random set of stash arrays with explicit indices
    used by callers, just have a general heap. Less error prone, and less code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71fb79492cb955af4bd52e79f1fa69d17e084dbc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 12:16:24 2017 -0800

    altos/scheme: Replace memory pool macros with inlines
    
    AO_SCHEME_IS_CONST -> ao_scheme_is_const_addr
    AO_SCHEME_IS_POOL -> ao_scheme_is_pool_addr
    
    Provides better typechecking and avoids confusion with
    ao_scheme_is_const inline (which takes an ao_poly instead of a void *)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 34f998d147d08e966daad1ab76c40906018d3d8d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 11:51:33 2017 -0800

    altos/scheme: AO_SCHEME_IS_CONS -> ao_scheme_is_cons
    
    This inline was already defined; just use it. Also, switch some places
    to use ao_scheme_is_pair instead as appropriate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa6f4b331db9d37da6767005fd375b696485b46b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 11:43:23 2017 -0800

    altos/scheme: ao_scheme__cons -> ao_scheme_cons
    
    Fix the double underscore in this name. Ick.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00390fb09f47654905824af671b966ffca0a38b3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 11:40:08 2017 -0800

    altos/scheme: Don't optimize ao_scheme_make_const
    
    Performance isn't interesting, and it's nice to have a bare system
    ready for debugging.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba472dda57e134fe0f0e4a571a6d0c1e5a1ea6eb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 11:39:39 2017 -0800

    altos/scheme: Clean up test CFLAGS
    
    make it easy to switch between debug and optimized builds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 53b99e0419cb44c7983e41026bf0430deae58940
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 11:37:33 2017 -0800

    altos/scheme: (define (foo . bar)) has a pair, not list as card
    
    When defining a lambda with varargs, the args are not a list as the
    final element is not a pair or nil. Use pair? instead of list? to
    detect this form correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fbe5dc9f215e7014aa8f9d325c1fba939816be03
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 11:35:09 2017 -0800

    altos/scheme: apply also needs to not free value list on lambdas
    
    When apply is invoked on any function, the cons in the argument list
    cannot be immediately freed as they have been passed to the
    function. That applies to both built-ins as well as lambdas; this
    patch removes the special ao_scheme_skip_cons_free global and just
    marks the stack in both cases.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 431165e5fa72ba6dffd477de32960745cdec332c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 19 11:33:36 2017 -0800

    altos/scheme: Rework display/write code
    
    Unify output functions and add bool to switch between write and
    display mode. Make that only affect strings (as per r⁷rs).
    
    Use print recursion detection in frame and stack code, eliminating
    PRINT flags in type field.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5628b983497d9d03e10cccee157419210a49cfa9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 18 02:14:57 2017 -0800

    altos/scheme: Compile scheme test with -O3
    
    This level of optimization caused trouble, so use it all of the time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6593570418e087b9f83ed7f90303d4e1e7d20e83
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 18 02:12:04 2017 -0800

    altos/scheme: Work around gcc 7.2.0 optimization bug in memory manager
    
    After marking a set of memory chunks, it's possible that all of them
    will be packed tight against 'top', in which case none of them will be
    moving. In that case, gcc 7.2.0 appears to generate incorrect code
    causing the loop to be abandoned, meaning that we don't actually
    collect anything at all.
    
    Add a quick short-circuit test just after the mark phase that skips
    the code which wouldn't do anything in this case.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f1849e548e35498f88a0b8adbbc4a57c7a39222
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 18 02:11:07 2017 -0800

    altos/scheme: rearrange debugging defines
    
    Allow applications to redefine these as desired, add more flexibility
    in what the various memory debugging flags can do.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2def6abebb3d14a29fe0e03bac09b9d74d2d1578
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 18 02:08:23 2017 -0800

    altos/scheme: abort when we try to print an invalid value
    
    This can catch a host of interpreter bugs; best to abandon the program
    when it happens.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e1a6b3bf458f311d832aea7eec34935d42f8efed
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 17 22:22:50 2017 -0800

    altos/scheme: Use memory manager mark code to note recursive print
    
    This flags any object being printed and checks before recursing to
    avoid infinite loops.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d1131da911f7220ac8b6cb7ba5a0afd3deef657
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 17 22:19:38 2017 -0800

    altos/scheme: Use AO_SCHEME_IS_CONS in cons memory funcs
    
    More efficient than ao_scheme_poly_type as it doesn't care about
    non-prim types.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b866b3ca249dce61f8ff16c8d28514d1b80386d7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 14 23:10:43 2017 -0800

    ao-bringup/test-chaoskey: Make finding most recent device more reliable
    
    Use dmesg -t to strip off the timestamp, which avoids having a
    variable number of fields for awk to look at.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4c9233aa8a2f1b1dca6580d6d6275b48c40f01f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 14 23:09:02 2017 -0800

    altos/lambdakey-v1.0: shrink scheme code to fit the ROM
    
    scheme has grown a bit; adapt
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 32f6877288ea6b7eb1cae9a42fbe8e2c5dbb2f08
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 14 23:04:39 2017 -0800

    altos/scheme: swap BIGINT and STRING types
    
    This lets BIGINT be a primitive type, allowing it to use all 32 bits
    for storage. This does make strings another byte longer, and also
    slightly harder to deal with. It's a trade off.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e11cae044cd2c053049effd76df9c5adecb84d7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 12 18:07:06 2017 -0800

    altos/scheme: integer? is builtin on all versions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0614c653a8ca8c4ccbf59d34296ca4b3e7d9f3a0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 12 18:02:17 2017 -0800

    altos/lambdakey-v1.0: Make stack larger
    
    scheme doesn't like to run with less than a 1kB stack.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 839a7454686415a52f532d0e4f379061a68d5f1b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 12 18:01:21 2017 -0800

    altos/scheme: inline some mem calls to reduce stack usage.
    
    Also includes some code to display stack usage during collect calls.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c490efdf90befdf048ff7d9cbbe26bcc6f942820
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 12 18:00:12 2017 -0800

    altos/scheme: Use direct calls from frame to frame_vals mem functions
    
    Avoids the extra stack depth of the poly versions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca27d467198c556be483961a6ca3b8f97bbe96a6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 12 17:59:26 2017 -0800

    altos/scheme: More compiler warning cleanups
    
    Make local funcs static. Don't mix decls and code.x
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4bfce37e7567d9c2a09ea4da8113e7639516ed6e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 12 17:54:03 2017 -0800

    altos/scheme: apply const to places taking const strings.
    
    Mostly printf and friends.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 28dbe9a04b16f79db255baecbf0cd486c510ef58
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 12 15:31:27 2017 -0800

    altos/stm: Align 'data' to 8 bytes, just like textram
    
    The textram section must be aligned to 8 bytes to keep the linker
    happy. However, if that section contains no data, the declaration will
    set the __data_start__ value to that alignment, but the data section
    itself would start on a 4-byte alignment, potentially 4 bytes lower
    than the value indicated by __data_start__. This completely scrambles
    initialized memory as the startup code will copy the data segment to
    __data_start__, 4 bytes off of the actual data segment start.
    
    Fix this by forcing the data segment to also be aligned to 8 bytes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db352bd0723e8d640bb034bc14e5ad193f0afe1d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 12 15:30:45 2017 -0800

    altos/kernel: Allow ao_cmd to be built without tasking
    
    Useful for single-threaded applications, like lambdakey
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09ea349f5b37e257e8ca23ead493ba1694395530
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 12 15:27:26 2017 -0800

    altos/lambdakey-v1.0: Get this building again
    
    The lambdakey can't hold a full implementation of the scheme
    interpreter, so use only a subset, removing floats, bigints and
    vectors. Also reduce the pre-loaded lisp code as well.
    
    It's pretty spare at this point; but it does fill the ROM.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8c9024f3829dc3f241b16869f165f3ee01764f3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 12 15:25:51 2017 -0800

    altos/scheme: Support scheme subsetting via feature settings
    
    This provides for the creation of smaller versions of the interpreter,
    leaving out options like floating point numbers and vectors.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a15166c435f65cb36f487ec8e5a4ff558a7e0502
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 12 15:15:41 2017 -0800

    altos/scheme: Add ao_scheme_vector.c
    
    Useful to include the code for implementing vectors
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5cf77306257517a3d1ec8cea85fca34f576a8f22
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 11 22:36:00 2017 -0800

    doc: Don't 'publish' release notes, don't build pdf release notes
    
    All we use the release notes for is to include into the main AltOS
    page. Also remove the docinfo for these files so that information
    isn't duplicated for each set of release notes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 40236913922e0395780cd7d90354546ecaf279f9
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Dec 11 22:15:46 2017 -0700

    update Releasing with changes discovered in 1.8.3 release process

commit 9adf8b23aac8256f230b10adcab9dd323266caaa
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Dec 11 21:33:21 2017 -0700

    TeleMega default is now v3.0

commit b4d78ad85e8f5b1bee78746d63bb4b069e087e5a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 11 16:30:46 2017 -0800

    doc: Update release notes and docinfo for 1.8.3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2efb997865ee46bf0e8d5145c95d051a7656222a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 11 14:42:45 2017 -0800

    altoslib: Keep old GPS values when updating data
    
    This way, updating satellite information doesn't drop all of the
    regular GPS data on the floor.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa3ff3a089e4af88dd0cc9a9e92511a0ba4a8e0f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 11 14:08:32 2017 -0800

    altos: Actually store current MPU9250 data in data ring
    
    The ring is updated when the ADC finishes; all of the other sensor
    data needs to be copied in at that point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 962df1f8c7f7ffbebe9b32d6ac363b333af606b3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 11 13:47:54 2017 -0800

    altos: Remove more software for hardware prototypes
    
    These never saw the light of day.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 05efe58cb13b58292527668ca51639eaebe1112b
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Dec 11 14:44:15 2017 -0700

    take telescience out of the routine builds

commit 713e8ca6b6cfb29555d8d847e0bb2652cfe011ae
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 11 12:23:29 2017 -0800

    Bump to version 1.8.3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 992797db2158b23d46c496e5e223deeca28bf4c9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 11 12:23:00 2017 -0800

    doc: Note TeleMega v3.0 support in 1.8.3 relnotes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d65e7b367712075a42d26c6d4bbff474dc1ae14
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 5 12:22:34 2017 -0800

    altos/drivers: Hook up mag sensor for MPU9250
    
    Set mag sensor to provide data at 100Hz.
    Set i2c master to pull mag data at sample rate (200Hz).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ec638405045d33d48476ab85edf09a2e1756e3e3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 18:35:53 2017 -0800

    altos/scheme: Allow ao_scheme_read_eval_print to be restarted
    
    Reset exceptions at the top so that we can call it more than once.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ebecd364fd328e9c649c11729bddf58731aaafb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 18:34:49 2017 -0800

    altos: Allow building with newlib + avr stdio on ARM
    
    Redefines some stdio bits so that we can build with either pdclib or
    newlib + avr stdio.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b0de72d942eb87c5acd190878dd57ca4f812e8a1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 18:32:18 2017 -0800

    altos: Add scheme for stm discovery board demo
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 655576011e9cc648c7c4bbf51179744a427ff237
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 18:21:01 2017 -0800

    altos/lambdakey-v1.0: Switch to newlib, get things compiling again
    
    scheme is now way too large to fit on this device; some subsetting is
    clearly indicated.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d77071f5b45632937f262600ca95c7b71f4d3da
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 16:55:57 2017 -0800

    altos/scheme: Add Makefile for scheme test app
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd2ed58fcdffaff7b5a9ef898affa3e1ec01ef44
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 16:54:50 2017 -0800

    altos/scheme: Make test scheme app heap maximum size
    
    It's only 32kB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e7a703bb2e70a0568b44159b993386f7ec46e04
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 16:53:25 2017 -0800

    altos/scheme: Make eqv? work for numbers and strings
    
    Large numbers, floats and strings need a value check, not just a
    comparison between ao_polys
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bdafb4dfad89d92efec37ed826d5f22e9167e717
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 16:52:26 2017 -0800

    altos/scheme: Stash cons across value allocation in compare
    
    Large ints, strings and floats can cause allocation, requiring that
    the 'cons' pointer be stashed and retrieved in case it moved.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b72638e60b6636b479b79bbf0047cf7409f58820
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 16:51:25 2017 -0800

    altos/scheme: add list-copy
    
    A lot easier as a built-in; the obvious scheme version is recursive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7517da1646fc30faaa9ee1c969cfa35ae1a17423
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 16:50:06 2017 -0800

    altos/scheme: Use 64-bit ints to track memory allocation stats
    
    These are only collected for debug purposes, but can get quite large
    if the interpreter runs for a while.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e14e243565e814ddd524c8d09454719dc89c6d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 13:13:27 2017 -0800

    altos/scheme: Add a bunch of string and vector builtins
    
    Just make the language closer to r7rs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d14f809b54b99725447a934047167c2e7febe82
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Dec 11 10:17:40 2017 -0700

    TeleMega v3.0 turnon scripts

commit d1d98e408311c5ba18138a18f4c88448e4254626
Merge: 2f8fce1c abb856cd
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Dec 11 10:16:24 2017 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit abb856cd66e00d739e4efb1930b5c168eaf48029
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 00:02:34 2017 -0800

    altos/scheme: Avoid crashing with non-list in length
    
    Use ao_scheme_cons_cdr to fetch the next list element as that returns
    NULL for non-cons elements.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17fe6de833cccb6d43d0ac0ed84a4faaa3463a09
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 00:02:00 2017 -0800

    altos/scheme: Add vectors
    
    Constant time and smaller can be a feature.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d3365e2c04793cd8432c30a66881f53385a2e60
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 10 00:00:23 2017 -0800

    altos/scheme: Fix name of constant scheme file
    
    .lisp -> .scheme
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 111622dbcd56c225a9d5ace9f0ef745e62f8a94c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 9 16:57:35 2017 -0800

    altoslib: Fix 8 to 12 bit conversion for Mega pyro voltage data
    
    The conversion was losing the replicated top four bits by shifting by
    the wrong amount.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1133130986a78628ea297ce1f6a023baf4382d8f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 9 16:56:20 2017 -0800

    altos/scheme: Let readline know if there's a list in progress
    
    This lets the interactive prompt change based on what state the lexer
    is in
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f8fce1cf6ce4bd12a836cc8ee15f4edbc95c95e
Merge: d314a565 185b1136
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Dec 5 13:23:09 2017 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 185b11367cd85948885fceafb5d46303b6f1356d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 5 12:22:34 2017 -0800

    altos/drivers: Start adding defines to get mag data out of MPU9250
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d314a5654fafa5eac86d8293f1197a2f2c2eac72
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Dec 5 13:18:45 2017 -0700

    moving to TeleMega v3.0 by default

commit 1bf219209c8d9e31a9c3726dad169ff5d17ed4b2
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Dec 5 13:17:18 2017 -0700

    handle repeated invocations without failing as often

commit 2aa02234b1ac2b1701b44fcec9e9bd82bea526b7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 5 10:48:04 2017 -0800

    altos/cortexelf-v1: Adapt to lisp->scheme name change
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 038581bd212e66bcf017c7ace28c80a3ae0d0f50
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 5 10:42:02 2017 -0800

    altos/scheme: Add explicit dependency on ao_scheme_builtin.h for ao_scheme_make_const
    
    This ensures that a parallel build will wait for ao_scheme_builtin.h
    to be complete before attempting to compile ao_scheme_make_const
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd7a19a86f6d4fe19c7e72904e9b8ac0f2081ff7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 5 10:38:14 2017 -0800

    altos/scheme: Move scheme test program to scheme sub-directory
    
    Keeps it away from the usual test setup
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 195cbeec19a6a44f309a9040d727d37fe4e2ec97
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 5 10:29:13 2017 -0800

    altos/scheme: Rename to 'scheme', clean up build
    
    Constant block is now built in a subdir to avoid messing up source
    directory.
    
    Renamed to ao_scheme to reflect language target.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9dbc686ad7d3289dc0f9bcf4a973f71100e02ded
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 3 19:54:18 2017 -0800

    altos/lisp: Switch to scheme formal syntax for varargs
    
    Scheme uses bare symbols to indicate a varargs parameter; any bare
    (i.e., not wrapped in a cons cell) parameter will get the 'rest' of
    the parameter list. This works for lambdas, nlambdas and macros. As a
    result, the 'lexpr' form has been removed as it is equivalent to a
    lambda with a varargs formal.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1d013ab8cc508d4e17ae8876bc5465d1a2dfc1e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 3 19:52:11 2017 -0800

    altos/lisp: Fix stash usage across frame allocation
    
    Must un-stash before allocation failure check.
    Use frame_stash instead of poly_stash for frames.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 32ab76c3049b913283caafbaef873754d76dc9d4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 3 19:49:20 2017 -0800

    altos/lisp: Check only cdr base type when moving cons cells
    
    The cdr may have moved, so we can't look at the target object
    type. Fortunately, the base type encoded in the reference itself is
    sufficient to check for a non-cons cdr.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ed6967cef5d82baacafe1c23229f44d58c838326
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 3 19:47:03 2017 -0800

    altos/lisp: Split out read debug, add memory validation
    
    Split read debug into a separate #define to reduce debug noise
    Add some memory validation -- validate stash API, and validate
    cons_free calls.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b9009b3916956db00b7b78bd06fb0df704690eb1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 2 23:21:55 2017 -0600

    altos/lisp: use strtof instead of atof
    
    atof returns double, strtof returns float.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 880c35363a2596202c8a3d980bf4ac41eceead66
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 2 23:21:01 2017 -0600

    altos/lisp: Convert more builtin lisp code to scheme format
    
    Use defines where possible, use (define (name args ...)) form for lambdas
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 577911241db454bc3129fc47566c6a55752c4182
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 2 23:19:44 2017 -0600

    altos/lisp: Overflow int computations to float
    
    When an int computation overflows, switch to float.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b986a12b478a6d4ff550786d24aa8628dc0abe32
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 2 15:59:17 2017 -0600

    altoslib: Add support for TeleMega v3.0 log files
    
    These look much like TeleMega v2.0 log files, except that the mag
    sensor data now comes from the mpu9250 instead of an external
    hmc5883. The gyro and 3-axis accel data from the mpu9250 are the same
    as the mpu6000.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c19778d8b56aafa048ddf9654c40b32bd8c64b0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 2 15:53:05 2017 -0600

    altos: Build TeleMega v3.0 by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ecc075596d6cd2b9c0a3107036d5368ebc3a77bd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 2 15:31:06 2017 -0600

    altos: Add TeleMega v3.0
    
    Adds files to build telemega v3.0 flash loader and firmware
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0068719b17019c5cd7ed318364a0581caf64e1a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 2 15:32:38 2017 -0600

    altos/kernel: MPU9250 support
    
    Use MPU9250 for accel, gyro and mag data in logging, telemetry and
    flight status computations.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c31744299e5a4342bbe26d3735ee2d8f09192ae9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 1 15:40:23 2017 -0600

    altos/lisp: split set/def. Add def support to lambdas
    
    In scheme, set can only re-define existing variables while def cannot
    redefine existing variables in lambda context. Def within lambda
    creates a new variable at the nearest enclosing scope.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98923ae1189f062b8b94120d47a56892db25493f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 1 18:28:16 2017 +0100

    altos/lisp: Split out frame vals from frame struct
    
    This lets the frame be resized without moving the base structure. The
    plan is to allow all frames to be resized, not just the global frame.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 835bf4131f9e20575bfdf2179462ebdf54a14761
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 1 12:06:04 2017 +0100

    altos/lisp: Make let distinct from let*
    
    let is supposed to define the values all at once, evaluating the
    initializers in the enclosing context. let* defines the new names and
    then initializes them one at a time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d0b85f25fa1e5cc816a8256afb38cf9552f6d9d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 1 11:32:27 2017 +0100

    altos/lisp: return from unmatched cond is #f, not nil
    
    Fix the return value when we fall off the end of a cond expression to
    be #f
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 796017262cd433af5d143cc7168c944e1e05f4e2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 1 11:31:29 2017 +0100

    altos/lisp: Fix pairp builtin
    
    Pairs are non-nil cons values; add an explicit check for nil here
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd0bd9791a77868c226d285bf4d57e8c321755d5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 1 10:12:38 2017 +0100

    altos/lisp: Add quasiquote
    
    This adds read support for quasiquote syntax, and then adds a
    quasiquote implementation in lisp
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00bf2ca86b60e6501880011897cea073865c5a03
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 25 17:29:10 2017 -0800

    altos/lisp: Rename progn to begin
    
    Match scheme name.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f9f97cc2d43936d1941da3a9a130c279bc70b99
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 19 21:07:23 2017 -0800

    altos/test: Update to build altos lisp test app
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d2f271a45759bd792d299f04a424d3382ef4798
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 19 21:07:00 2017 -0800

    altos/lisp: Add floats
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 12a1f6ad48f2b924f71239effeb90afca75a090f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 18 22:00:44 2017 -0800

    altos/lisp: Fix some scheme compat issues
    
    flush -> flush-output
    nth -> list-ref (oh, and add list-tail)
    add let* (same as let for now)
    write control chars in octal
    make hanoi example work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f8f0ed5cd5d4b4f793c602ed09f9b4bdb98f7e8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 18 20:38:15 2017 -0800

    altos/lisp: Add 'big' ints -- 24 bits wide
    
    With the default ints being only 14 bits, having a larger type with
    more precision seems useful. This is not exposed to the application.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e745229311366a792110d78d8480a2bf83eef9a0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 17 23:28:08 2017 -0800

    altos/cortexelf-v1: Make lisp compile again
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65fb0ad8693407cc9bd114424c1f51b6aa6befc3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 17 23:27:36 2017 -0800

    altos/test: Add jiffy funcs to lisp test
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf5729a0bae51172f12fc9ec4339d4e975a45fcc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 17 23:23:50 2017 -0800

    altos/lisp: Finish first pass through r7rs
    
    * print -> write, patom -> display
    * Add read-char, write-char
    * Add exit, current-jiffy, current-second, jiffies-per-second
    * Add for-each and string-for-each
    * Avoid duplicate builtins with different atoms
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e1acf5eb12aceda7aa838df031c1da1129d0fa5d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 17 22:14:19 2017 -0800

    altos/lisp: Add apply
    
    And all of the library routines that use it, map, string-map and friends.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4e18a13029cc7b16b2ed9da84d6e606bc725ac3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 17 08:50:50 2017 -0800

    altos/lisp: Character consts. String and assoc builtins.
    
    Also add back escaped characters in strings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5b6f4b5de89a2bb0d63442e2651cf8d2ee0f4b10
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 17 08:04:28 2017 -0800

    altos/lisp: Generate built-in lambda atoms for const creation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd9152973f29f4e775569f5acbbe8fab2d93d170
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 16 22:15:06 2017 -0800

    altos/test: More lisp test Makefile fixes
    
    Depend on ao_lisp_const.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 435a91ae3889cd361b543f4555a78488905e0bbb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 16 22:13:46 2017 -0800

    altos/lisp: Lots more scheme bits
    
    * Arithmetic functions and tests
    * append, reverse and list-tail
    * set-car! and set-cdr!
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc76030d669600051fbb42a8cf85701aaaf5f5b7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 16 18:47:34 2017 -0800

    altos/test: Get lisp test building using Makefile-inc
    
    Instead of re-defining all of the lisp sources and headers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e58b6c380bc6440490c47650fbf11d45b3f2e72
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 16 18:46:03 2017 -0800

    altos/lisp: More schemisms
    
    Add 'if'.
    setq -> set!, but doesn't define new variables
    def -> define
    Add pair? and list?
    Add eq? and eqv? as aliases for =
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0ced351c8f4449f7086b04e42c822d649f040d1f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 16 18:41:18 2017 -0800

    altos/lisp: Add 'else' sematics to cond
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3b4731fcb89cb404433f37a7704a503567c43bd
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 16 17:49:47 2017 -0800

    altos/lisp: Add scheme-style bools (#t and #f)
    
    Cond and while compare against #f, just like scheme says to.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd881a5b85d7cd4fb82127f92f32e089499b50cb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 16 13:02:07 2017 -0800

    altos/lisp: Add non-cons cdr support
    
    The cdr of a cons can be any value; add support for lexing and
    printing them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50a095fbe828b6ec3159d27930712df6b1b519b4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 11 21:29:11 2017 -0800

    doc: Update for 1.8.3
    
    Also added a pile of docinfo files for older release notes files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 23cf8fb4d5745ad76d9517c9702d03d10c58144a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 11 20:52:01 2017 -0800

    altos: Fix new GCC warnings
    
    * Duplicate 'const' in test code.
    * Mis-formatted loop in kf_rem_pio2
    * Unused 'one' in sf_cos
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3b279141cd30ad6a212ce75f5a7c2b8e3d33870
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 11 20:50:45 2017 -0800

    altos: Fix inverted test for corrupt flight log
    
    Was reporting correct flight log as corrupted. Oops.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a7b4f02ad32ca43a45ed9fe446b8db96e60b5e5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 11 20:49:20 2017 -0800

    altoslib: Improve EEprom download
    
    * Catch and report CRC errors
    * Deal with corrupted flight records
    * Add ability to immediately graph new data
    * Check before overwriting existing files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 10834eb60f7a44fee159d9e9ad5ffb2e013fe9cf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 11 20:46:45 2017 -0800

    altoslib: Remove spurious semicolon in AltosReplayReader.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e80005ea63bb9b1eee33a8876ad74ed5d50478ed
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 11 20:44:27 2017 -0800

    altoslib: Don't write KML record when height data is missing
    
    This avoids a crash dealing with corrupted flight data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a2097545dec62cd0970725bf690128dad6baf22e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 11 16:38:40 2017 -0800

    altos/test: Adapt flight test to int16_t flight number type
    
    Flight numbers are now limited to 32767 to allow for negative values
    for corrupted slots.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5b6805d1a6a91a26a1892f414a99f0184871ac1a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 11 16:08:32 2017 -0800

    altosuilib: New line styles and colors for graphs. Selectable line width
    
    Improve the readability of graphs by offering a better selection of
    colors and adding line styles. Let the user configure the line width
    as desired.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82e552d194216b41d27d805bee2947127c2d555b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 2 09:12:18 2017 -0700

    altos/stm: Add AO_EXTI_MODE_PULL_NONE
    
    This is clearer than using '0'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5460d7ff46116901bceacd43282b406c446dded5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 2 09:11:39 2017 -0700

    altos: whitespace cleanup in ao_adc_stm.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83929cd290279963b01b2ccd52c70d61bdeff6b0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 22 15:44:32 2017 -0500

    altos: Share common logging code. Deal with corrupt initial flight records
    
    Move common logging APIs from per-format files into ao_log.c. Then,
    change that code to check the first log record in a slot (containing
    the flight number) to see if it's invalid and deal with it. That
    involves not re-using that slot, and allowing it to be erased.
    
    Corrupted log blocks are reported with a negative flight number.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 256ddea8c430b4b5dcb8bb95c19ad26032129e1b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 22 15:43:07 2017 -0500

    altos: Define AO_LOG_FORMAT in */ao_pins.h. Use in ao_cmd.c
    
    Instead of having a global variable define the log format, use a macro
    instead to save data space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15af16ad21f67019065763a93d52cea6097a69d1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 22 15:39:25 2017 -0500

    altos: Remove cross-block storage I/O on cc1111
    
    We don't ever need to be able to do storage read/write across chunks
    of flash on the old cc1111 products, so remove the loops that support
    it to save space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 749400fd244eba38806c623d2a35722642230698
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 22 14:04:09 2017 -0500

    altoslib: Move temp GPS API from cal_data to data_listener
    
    This makes the API more consistent, and means that the listener is
    responsible for mangaing the temp gps state. In particular, the
    AltosDataListener set_gps API now calls the cal_data function.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e98235e314ac764509af26c93da9e6d1de8184ea
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 14 12:18:26 2017 -0700

    altoslib: Save separate config for local and remote. Use in idle
    
    When using the remote link, there are two separate configuration data
    blocks, that for the local device and for remote. Make the link report
    both versions, depending on whether it is in remote mode or not.
    
    Request config data in remote mode when running idle monitoring so
    that the presented data is for the remote device, not the local one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 964a14568b73296194f84c728cc7e01d6f0e2f64
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 14 12:05:07 2017 -0700

    altoslib: Report un-adjusted ground accel in idle IMU monitor
    
    The ground accel is the basis of the accel adjustment, so it needs to
    be delivered in un-adjusted form.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4431f70044f4e1120d606f0ded1845349295d68e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 12 00:31:26 2017 -0700

    altos: Add MPU9250 support to self test and data
    
    The remaining hooks to make the MPU9250 work in flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 77d1aee917306ad59492c4c8352fe2125b430d0c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 12 00:30:23 2017 -0700

    altoslib: Fix time series filter window computation
    
    Small floating point rounding errors could lead to NaNs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e04679ba52761d5531037117a21ab1f1896358b0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 12 00:29:07 2017 -0700

    altoslib: Don't crash if there's no GPS coord to write KML
    
    Just check for null before writing as a precaution.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a69d5773a63dbe5d6d758cea8eca2bf724e9d672
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 12 00:26:31 2017 -0700

    altoslib: Allow gps time later than requested if it's first
    
    When generating a KML file, we want to position markers near the start
    of the flight section. This is done by looking for a GPS coordinate
    'before' the starting point of the flight, which doesn't work well
    when the first GPS coordinate is later than that. Pick the first point
    after the chosen time if there isn't an earlier one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d7bb706918fd7d6db77eab21931b4fc74cb9105
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 12 00:14:30 2017 -0700

    altos: Add MPU9250 driver (accel/gyro only for now)
    
    This is almost an exact copy of the MPU6000 driver, just a few minor
    register changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c8dbfff65dd61e42d0a02158dcb520e7710ef87e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 8 18:50:59 2017 -0700

    altos: Stop storing pyro fired status in config block
    
    We already have the fired status saved in the ao_pyro_fired variable,
    so just use that to detect whether a channel has already been fired.
    
    Fixes possible cases where the pyro config data gets written back to
    eeprom with the fired bit set, which then inhibits the channel during
    flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d82209122e3b797a7345f6ad5b6710832fcdd4a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 5 16:46:08 2017 -0700

    Set version to 1.8.2.1
    
    Testing KML export changes at TRA
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e971b45f22aa77421061ff2925e0458835014b2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 4 13:44:31 2017 -0700

    altoslib: Missing file for filter additions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f779d318753b73463f7166977453ab5533e5921
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 4 13:43:45 2017 -0700

    altosuilib: Add 'show marker' button to graphs
    
    Provides a marker at each actual data point which can be useful for
    sparse data sets like telemetry with poor reception.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 730ee7bf91f607ece42c010a10c53d0013492b96
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 4 13:42:16 2017 -0700

    altoslib: Adapt KML output to make TRA record people happier
    
    Provide two paths, one using GPS data the other baro. Replace separate
    path segments for each state with markers so that the path is a single
    unit, able to be displayed in the elevation profile widget.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98dc29a7a964f8d653b73989c6751695d168844c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 2 19:33:37 2017 -0700

    altoslib: Add user-selectable filter width for data smoothing
    
    Also switch smoothing window to Kaiser and change default accel filter
    width to 1 second instead of 4 seconds.
    
    Now users can play with the filter and see what it does.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d75e8b9046295051c91696461e8d5f59c8260ccc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 2 17:02:18 2017 -0700

    altosuilib: Show raw tick values in graph and info table
    
    Not terribly useful, but did help validate firmware handling of tick
    wrapping, so we'll keep it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6be13e8ef80e5afc836e04cbfe4cb17631540e4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 2 16:58:53 2017 -0700

    altoslib: Allow early bail-out on bad telemetry CRC
    
    Check the CRC status in the packet before creating a new telemetry
    object.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 770998be2c15dd41a63520d0c8747d7cf32ec447
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 2 16:57:15 2017 -0700

    altos: Allow pyro config name to end with newline, not just space/tab
    
    A pyro config like 'Descending' has no value associated. When it is at
    the end of the line, allow a newline to terminate the name instead of
    just a space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit de2b6ec1cdfd48c948bff7edbfe2540440429b1b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 2 16:55:18 2017 -0700

    altoslib,altosuilib,altosui: log_format/device_type TeleGPS selects stateless
    
    When the device being analyzed has no flight state, we want to use the
    'stateless' state so that the UI can display reasonable
    information. This bit was lost in the recent AltosState shuffle and
    this patch brings it back.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 322c1abead39cb398380dff384cd274c19dd81dd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 2 13:55:57 2017 -0700

    altosuilib: Don't drain voice when terminating display
    
    If the voice thread is wedged (as with PulseAudio and un-patched
    freetts 1.2.2), we'll get stuck here and the UI will freeze up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cfc09e8f1f263595972cbb6af23f22e2d749c744
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 26 18:00:36 2017 -0700

    altoslib: Add tilt and pyro data to CSV export
    
    It's now version 6. Also removed duplicate time values and made radio
    values conditional on having radio data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit df39a30c762d57c7d04110e054f74d50fa8d85de
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Sep 19 11:56:52 2017 -0600

    don't exit on dfu-util errors, it's not reliable about reporting success

commit 8124109e0b455c9d8d583f4d985b93d23d7b1350
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 18 21:24:52 2017 -0600

    tweak Releasing based on 1.8.2 release experience

commit 60666630789b6925d7e16160ebdc88ccd23f51de
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 18 20:43:14 2017 -0600

    be more aggressive about removing and ignoring .mdwn files

commit e87d56b665ca30a3e5920c23cd60c99b84341aa2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 18 18:51:51 2017 -0700

    Update release version and date
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a54b3330574dd130540e482a06a3f8d7ca652b6c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 18 18:43:00 2017 -0700

    Update docs for 1.8.2 release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0c1ebc43a9c5bb0a3503d33978a5e7bc87057fe
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 18 18:51:18 2017 -0700

    Add short section on accelerometer calibration

commit 60cadbc85949adf464be16a5cf8ce2c24d67bedf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 18 14:40:37 2017 -0700

    altos/telegps-v2.0: Enable USB connect monitoring
    
    Disable radios when plugged in to USB to save power and avoid being
    noisy.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e4c104c28952f2010c7b1cbc9ce59e148ab2d8f
Merge: 63eeaada 4f2cbe0c
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 18 16:01:43 2017 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 63eeaada85cb9ddccb0fa9b2d751cc8f46399d9c
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 18 16:01:21 2017 -0600

    production TeleGPS v2.0 use a 16Mhz crystal for the SOC

commit 4f2cbe0c537c9f417aae310cc3b89f84e0915103
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 18 09:57:41 2017 -0700

    altoslib: Avoid crashing when computing stats for empty flight logs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b9a00856aa4cf55ae4a143288058094ef8061134
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 18 09:57:06 2017 -0700

    telegps: Fix up TeleGPS UI bits after accel cal changes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95952059bbb50b5f22460418df003a87c8bd3271
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 12 15:47:43 2017 -0700

    test/ao_flight_test: Show recorded pyro firing
    
    Can compare with computed values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 28a2db68e4806383cfaa7075d454c35cade9633a
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 17 12:41:50 2017 -0600

    publish support for TeleGPS v2.0

commit ad61e277069217d98400e884d3c173357d2343ed
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 14 10:51:18 2017 -0600

    deal with cheap BT dongle that shows multiple copies of unit in lescan output

commit 5666a3c9427324ad8f92e21c5f9017436b36a82a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 12 14:02:11 2017 -0700

    altosuilib: Make steps in accel cal default button
    
    This way you can just hit return through the process.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 441056b01abcf9287f61f425cf29fc4b1603c619
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 12 13:43:06 2017 -0700

    altos/test: Handle new eeprom file format. Give up on telem files.
    
    Parse eeprom config using libjson-c, then read the hex values into a
    giant blob.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be44d33f5e94b8c4180adb275ec83cc70852db48
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 12 13:41:11 2017 -0700

    altos: Fix debug printf in ao_pyro for state >=
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 10d14146ef84fbe4670454bc0996854a4066cfea
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 12 13:40:06 2017 -0700

    chaoskey: Wait for input data to stabilize before using it
    
    The ADC data takes a while to start working after power on; wait for
    the range of input values to look reasonable before using the data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8284ba8bf78aade8f9d8f711cfefe2010ce81066
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 12 13:38:36 2017 -0700

    doc: Add forward reference from 'idle' description to idle entry steps.
    
    This provides a reminder that entering idle mode takes specific steps
    which differ between models.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8960cb525ef43c2262c7854b9a6f08237b3ea05b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 12 13:37:24 2017 -0700

    altosui: Handle missing GPS when graphing mega/metrum data
    
    These have GPS, but if we never get a valid packet, then there won't
    be any final position to display.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4dfaf25954134dbdc7229e2de39d4a4c049f285
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 12 13:37:06 2017 -0700

    altosui: Remove debug printfs in FC config UI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc1cc0db1251e351d862dffbf618d0ce926c389d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 12 13:36:24 2017 -0700

    altosdroid: Display serial, call, freq in tracker list
    
    This makes the list a lot easier to find entries in when it gets long.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4151c30e1294c0dda3aa02e7ac23b9616f25a4d0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 12 13:35:25 2017 -0700

    altoslib: Make receive frequency available in telem data
    
    This lets AltosDroid record which frequency each station was heard on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d84f5e576e83a2b965d0e9752a9bbef100954815
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 12 13:34:23 2017 -0700

    altoslib: Remove debug stack dump from AltosState
    
    An empty AltosState is allocated when parsing JSON data; it's not a
    mistake.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b48966c3121e1b5d4a659bebcad595d6f1ec5ee5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 12 13:33:13 2017 -0700

    altoslib: Correctly parse IMU cal data
    
    Was trying to match 'IMU call along' instead of 'IMU cal along',
    causing the line to not match and losing the IMU accel cal values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f607a882a50aa6cd9e8e3e74cbaa5bcc1b5fa4a4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 6 08:37:12 2017 -0600

    ao-tools/ao-chaosread: Add -Wall -Wextra, clean up results

commit 558a143315f0345b79cc4f22aa4b643fedcded9c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 11 23:42:53 2017 -0400

    altosui: Accel calibration UI
    
    Provides a GUI for re-calibrating accelerometers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9a742db2497d07079f3d4bf383c6246cf80507c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 31 20:32:05 2017 -0700

    Bump to version 1.8.1.1/android 16 for altosdroid
    
    AltosDroid 1.8.1 got released before the latest fix for not storing
    frequency preferences was made. Make a 1.8.1.1 with a new android
    release number for that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e85a8244389bffab0744be8dfa90b706f829083
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 28 15:09:14 2017 -0600

    need to capture .bin file for telebt-v4.0 loader

commit ccf7ad5a31604e98b34bf16e3da6afb264ad1291
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 28 14:01:54 2017 -0600

    a few tweaks to the Releasing document based on experience with 1.8.1

commit b68c0482d4fae8eb54cde1df0e4bcf4c5d272bad
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 27 22:49:09 2017 -0700

    Version 1.8.1
    
    Android version 15
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abe100385cedf2b0734191611d97e794805d0ef4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 27 22:48:46 2017 -0700

    doc: Update for 1.8.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4775b1d9b50a8732d66a0ad3b73ff74901a8cb7f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 28 00:15:43 2017 -0700

    altos: Don't compute filtered average of height error when HAS_ACCEL
    
    We only use this for baro-only devices to avoid firing drogue charges
    at mach transitions; we trust the combination of accel+baro to do the
    right thing when available.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dacd4c70700041a018b1f8ba47f22071b9600eaf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 28 00:10:04 2017 -0700

    altoslib: Fix freq preference loading
    
    Allocate throw-away freq array to get the class pointer.
    Add null-ary AltosFrequency constructor for JSON code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f5f37ac7fb71d3059f639b39315712f90e9bfd6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 27 17:37:10 2017 -0700

    altosui: Make --oneline show drogue deploy speed
    
    Also remove some commented out values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd72c9144b207b12150eb6a7ffb012f217f37374
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 27 17:35:49 2017 -0700

    altoslib: Compute speed at entry to each state
    
    Useful to have drogue/main deployment speeds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9537a21b6ddb73b9f086858dad9a7b9d05279741
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 27 17:34:49 2017 -0700

    altoslib: Fix parsing of old TM log GPS sat data
    
    Attempting to fetch sat data from wrong byte led to array bounds
    exception.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92b689bfd78a96ba56f0e1022ba68b7384a9b9b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 27 17:34:07 2017 -0700

    altoslib: Allow for missing product when checking for mma655x inverted
    
    If there's no product, assume we've got some ancient log file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e244a73d8c2a475416480f83328b7d363693402
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 27 17:33:38 2017 -0700

    altoslib: Remove debug printf for gyro adjust
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f5642db4e03856b1f2ffeae6570fcf35fb7d93fb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 27 17:32:27 2017 -0700

    altos/test: Fake baro data for flight 12 serial 2093
    
    This flight had a baro spike due to an accidental drogue charge firing
    but is otherwise quite useful when testing for various mach delay
    effects, so fake out the data during that spike.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bef7c37d1c986cd477367c0c015be61368a788d2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 27 17:30:15 2017 -0700

    altos/test: Integrate raw accel to provide speed for comparison
    
    This can provide a useful visualization of the 'true' vs 'kalman'
    speed value, as the kalman is necessarily delayed due to the model
    assuming constant acceleration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2dce02efd54ad4051f1ddb94048696e8677dd225
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 27 17:04:27 2017 -0700

    altos/test: telemetrum baro data is inverted before being written to eeprom
    
    No need for the test code to invert it during replay
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea6fe21d78744d7e6225a56c369d54f7cd956767
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 26 19:16:47 2017 -0700

    altos: Don't eliminate baro above mach speed, just trust it less
    
    Instead of completely eliminating the baro sensor above mach speed,
    just derate it a bit so that the accel will dominate for speed
    computation and keep the device from false-triggering across mach
    transitions.
    
    When we completely ignored the baro sensor above mach, and the flight
    spent considerable time in that speed range, then the estimated height
    could be far from the real value. When the estimated speed dropped
    back down and the baro values were brought back into the computation,
    then the resulting rapid shift in estimated speed could trigger
    accidental apogee detection.
    
    By mixing in a bit of baro data even above mach, we keep the estimated
    height closer to the baro value and prevent this error, at least in
    flights measured so far.
    
    The flight known to have this problem is:
    
            2015-09-26-serial-2093-flight-0012.eeprom
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 12ef994a24eb996458092dc35c671d6b824b1576
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 27 16:57:13 2017 -0700

    altos: Eliminate separate height error filter for accelerometer devices
    
    We don't use the error value in flight for those models anyways; it's
    only useful on baro-only hardware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f972000642f9c9835a0b7d14155d4c5695455d94
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 26 19:15:59 2017 -0700

    altosui: Add --oneline mode to briefly summarize flights
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 465bb7242f39f6f8489e5fd52ce88031106c1c76
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 26 19:15:07 2017 -0700

    altosuilib: Add "Huge" font size
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3dde7f4d05414ac4907c91c68c88cc1d06233605
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 26 19:14:10 2017 -0700

    micropeak: Track font changes in raw data display
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf20e213f39fb24f15e0ac94307c2d138fcadecb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 24 16:45:54 2017 -0700

    altos: Perform time comparisons using 16-bit arithmetic to handle wrap
    
    Subtracting two 16-bit unsigned values to perform time comparisons
    yields mystic results unless we carefully cast that to int16_t.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43e2275250d9c91560a770942f3c06a8f74ed501
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 12 01:37:07 2017 -0400

    install: Add 'fat-install' target
    
    This uses the existing --with-fat-dir option and instead of installing
    everything to that directory, creates a normal ikiwiki hierarchy of
    files including .mdwn files, whacked release notes html files and all
    of the appropriate packages.
    
    One stop shopping for adding the release to the web site.
    
    Attempted to update Releasing file to match.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fccfa54bb3b746cecfcdc1fd497cf736bbfe3ef3
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Aug 12 00:23:27 2017 -0400

    releasing 1.8

commit dbcb68f684a96d13efeb9993685f61b27b45e7dc
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Aug 12 00:21:43 2017 -0400

    update docinfo file for 1.8 release

commit dfb9568866ba250a02039cc3429d5ca0603a60d9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 12 00:10:23 2017 -0400

    Note that telebt 4.0 files need to go to altusmetrumllc dir
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b083e90d5b8de215f2f303f18b5c4ac9185622d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 12 00:06:48 2017 -0400

    Bump version to 1.8
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 243c1e519d41b45765d4edf5f608655d6ab01eff
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 12 00:06:26 2017 -0400

    doc: Add 1.8 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b67dcdd90317845261e51a1adb2404dcb0f2507
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 12 00:05:50 2017 -0400

    altosui, telegps: Add TeleBT v4.0 firmware to app packages
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5fdce5b4a70ae59f8ac1ca10d9fadbbbd62412f3
Merge: f1bbf1bd 2a3db289
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 11 23:45:25 2017 -0400

    Merge remote-tracking branch 'origin/master'

commit f1bbf1bd18d52a084af714a022b12bfc3c76374c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 11 23:40:41 2017 -0400

    ao-bringup: Allow dfu_util to "fail" while flashing chaoskey
    
    Sometimes it isn't happy about the exit status, but if the device
    comes up and works OK, we don't care.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fbe87bd18308cab62eda6d5e956a8618095ed33b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 11 23:39:13 2017 -0400

    altoslib: Set time in state for KML output correctly
    
    Use new computed state_time value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7b34e6691b632199bc7802c2e4dea4de992578e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 23 16:49:26 2017 -0700

    libaltos: Test both bluetooth and USB APIs with cjnitest
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52bbfa9cd46ca27a4de937e89d48246a4e94c8a6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 23 16:47:40 2017 -0700

    altos/test: Fix AES key format in test code
    
    Use temp variable instead of stepping on the AES name.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9eaf917707287af57c2dadfc82d6d415b0964329
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 23 16:46:24 2017 -0700

    altos/test: Fix printf format for int64 arithmetic test
    
    Use 'long long' and %lld for 64-bit values when printing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 198a3d4d5f51de5c0f0413299582479cde4e177f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 23 16:37:27 2017 -0700

    altosui: Rename AltosConfig -> AltosConfigFC
    
    Now the class name says that this configures the flight computer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7c2fc2d85414fefda0a7948a6c4e38f65140861
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 23 16:38:09 2017 -0700

    altosui: Adapt to flight stats time value changes
    
    There aren't state time values anymore as those don't work when you
    have multiple motors. Instead, 'boost_time' is when the rocket left
    the pad and 'landed_time' is when it touched down. Use these new
    values in the --summary output.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a3db28953f5cd981c519a917cdcd9f48dcb08e9
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jul 21 17:49:21 2017 -0600

    add TeleBT v4.0 to the list of stuff we build

commit 04560a7cd6a64e742954a2d0fbd7563e2c310402
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jul 21 17:46:55 2017 -0600

    ignore more build products in telebt-v4.0 tree

commit c8dbcaf69cd538a31ab6e2b568237ae7c8656a9a
Merge: 0cbfa444 ea3b5815
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jul 21 17:44:03 2017 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 0cbfa444a9f9159cb509bb47ca5590fc1d709f64
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jul 21 17:43:38 2017 -0600

    clean up telefireone name references

commit 3a1512b605a81ebee23cc6b7980b709a54cb43c9
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jul 21 17:42:54 2017 -0600

    rename existing turnon_telebt script, create a new one for v4.0

commit ea3b5815b27005b2f4c3034715f656d28ea8534e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 21 16:16:55 2017 -0700

    libaltos: Add btle test program
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 545bdc1f8046b08e237307d97d0044ddae9095b8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 21 16:14:31 2017 -0700

    altos/test: Add EasyMini test mode
    
    Use baro-only mode, parse easymini logs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2969f0af52dfbdea7593b208e510c7b17227064c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 21 16:09:55 2017 -0700

    altoslib: fix adjustment of landed time
    
    Push landed time out if we computed silliness.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30b308ad0189b4aa9dd5cc7ee876b55fee355a56
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 21 16:05:45 2017 -0700

    Set version to 1.7.1 for TeleBT firmware build
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b923e25a8a49dda40e62070dd2df6ff9130d4b38
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 27 23:39:16 2017 -0700

    altos/telebt-v4.0: Use HW flow control to BT module
    
    Now that the stmf0 HW flow control works...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e64438271e481ca9f9eeb0ce2b1f9eca071b7ad4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 27 23:37:49 2017 -0700

    altos/stmf0: Initialize UART RTS/CTS before turning it on
    
    If you try this after the UART is running, it won't work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46ff12a88136d3c274610255a918870aff9328cd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 27 23:36:05 2017 -0700

    altoslib: Deal with multiple motors in flight stats
    
    Combine boost/fast/coast sections when computing ascent stats.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 13abb6739ae9be5a8733724c5d9b3f714f32bea4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 27 21:37:50 2017 -0700

    altoslib: Fix comments in AltosQuaternion and AltosRotation
    
    Especially the nested comment which borked the compile
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a174f4a2caae97b5038eb92ab85303e736b7c2e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 27 21:33:36 2017 -0700

    altosdroid: cal_data is no longer public from AltosState
    
    Use cal_data() method instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6dbb362b2d1df4d8c2d301e90624aceef8051ef5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 22 10:10:06 2017 -0700

    altoslib: Clean up quaternion and rotation interfaces
    
    Export euler to quaternion (instead of half_euler).
    Provide angles to rotate rather than rates and time.
    Add comments to quaternion and rotation code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea7e236e75452e27f3af6730a0542850851eb23d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 20 11:19:40 2017 -0700

    altos/rn4678: Add BLE support
    
    This just means ignoring the BLE connect status message.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0da4e201041a4420f273c2e0cda77eea78099518
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 20 11:18:41 2017 -0700

    altoslib: Make cal_data private in AltosDataListener
    
    This way we can create it as needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a61217f0a6d0ef48b6471f632c4600255867e831
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 13 10:58:57 2017 -0700

    altoslib,altosuilib: Bump library version numbers
    
    The API and ABI have changed a bit since 1.7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2fe220efe2ba375ddd925747a630c30c17d3bef
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 13 10:50:37 2017 -0700

    altosuilib: Rename AltosGraphNew to AltosGraph
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3f9b6d23e4e33a58c179f45ffd42211ab327d8c6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 13 10:47:54 2017 -0700

    altosuilib: Rename AltosUIGraphNew to AltosUIGraph
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4f1fa544f1cb21070c9d79c81ebae0fb71d77db
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 13 10:46:03 2017 -0700

    altoslib: Rename AltosEepromNew to AltosEeprom
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e586ab3604bb695c36ae86c95f533197522fc65
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 13 10:38:13 2017 -0700

    altoslib: Remove old AltosEeprom.java code
    
    No longer in use
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 672889659fb2c1a63f5ef199173719a606a9f343
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 13 10:35:39 2017 -0700

    altos/telebt-4.0: Add dependency on RN4678 header
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd8b22bef0a88ed6881036b4c6718a4e33c55d41
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 13 10:34:03 2017 -0700

    altos: Add timeout to RN4678 status message code
    
    If we see the start of an RN4678 status message, but then output
    pauses, assume that this isn't the start of a status message and flush
    the pending data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 172d6cec981b50d4d5ff0f3d3bbd4377d55f57c8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 12 21:47:05 2017 -0700

    altosuilib: Don't display pad, last location in flight stats without gps
    
    Check stats.have_gps before displaying pad and last known location values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5eb91267348b0992414521520eda5c3a65e23ea7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 12 21:46:11 2017 -0700

    altoslib: Set time for TeleMini v1.0 eeprom analysing
    
    Need to take the computed tick time and tell the listener what time
    that cooresponds to.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee221ddf00f631a5f9d5d93468bfc697a26e4cfe
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 23:13:07 2017 -0700

    altosui, telegps, altosdroid: say ground distance, not total range
    
    Ground distance is more useful in predicting recovery than total range.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb1e757d4d486d04af0219b3f36ad17ee8095110
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 23:10:49 2017 -0700

    altoslib: Initialize new imu/mag values. Remove stale imu/mag objects.
    
    AltosState no longer has imu and mag objects, instead it just holds
    the values now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 247fa1c669f987830540e618bf263b08284118df
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 22:52:56 2017 -0700

    altosui: Display current altitude in monitor idle Pad tab
    
    This was attempting to use 'pad' values even though monitor idle
    doesn't have them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 03ec3e4c2247b6520c728b34805ad500be547a25
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 22:50:57 2017 -0700

    altoslib: Remove unused 'ground_rotation' from AltosState
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97b42b7cd676232f13354798726f3087fa7177d5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 22:50:28 2017 -0700

    altoslib: Flush igniter fire command
    
    This makes the igniter fire without a multi-second delay.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c4e473ef5d13da9c2f356702cb8767b55aa2137
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 22:49:46 2017 -0700

    altoslib: Hook up idle monitoring data again
    
    The API for idle monitoring changed, but these modules hadn't been
    fixed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27131ec7abda875595c61be0b151b73eb28afab9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 22:47:53 2017 -0700

    altoslib: Fix labels in AltosIMU to match source data
    
    IMU bits arrive with X/Y/Z labels and are converted to the correct
    axes as they leave this object.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43f8470dc66392dae4770882bfc6ad25b1d75436
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 22:47:02 2017 -0700

    altoslib: Keep time series in AltosFlightSeries array sorted
    
    This makes using the graph way easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3fa1eadb91eea001342d2d357d7aaf661e8a2a5d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 22:46:01 2017 -0700

    altoslib: Handle EasyMini v2.0 ADC values
    
    Different from EasyMini v1.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9454756f54312381927cb9faf1c4a6f5d8271034
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 22:43:57 2017 -0700

    altos: Create separate log format for EasyMini v2.0
    
    The ADC in the STM32F0 is different than the LPC, with a range of
    0-4095 instead of 0-32767.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ffbacb4ba9fc52de18bc54eb0d4b9e4f015ad1a4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 22:42:25 2017 -0700

    altoslib: Missing config values now AltosLib.MISSING, not zero or negative
    
    Also fix AltosConfigData.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8da38e5217f366a7da24a8af4a5ca620fad35df3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 22:39:53 2017 -0700

    altoslib: Adapt to Mag sensor value ordering changes
    
    The HMC5883 sensor data is ordered x, z, y. Relabel everything to
    match that to preserve compatibility with existing firmware. With the
    data correctly ordered, fix the labling of the axes along, across and
    through.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a05849c3bf8c1617409237be48802dd6fc6255b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 22:34:11 2017 -0700

    altos: HMC5883 output order is X Z Y
    
    Re-label everything to have the correct names. This doesn't actually
    change the code at all, so the eeprom and telemetry is all compatible.
    
    Matching changes on the host side will be required to actually process
    the data correctly, of course.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fed48732828c85ae56106cd72c5aeaaad47c552f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 22:31:17 2017 -0700

    altos: Update sensor data atomically
    
    Read data into a temp variable, block interrupts, then update the
    published value.
    
    The bug is easy to see with the HMC5883 which has to byte-swap the
    output of the chip, and hence can occasionally get caught with the
    wrong byte order data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 171adbe7db8520f5ff52a5fe2c54fe165c6f91f8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 11 16:11:09 2017 -0700

    altoslib, altosuilib, altosui, telegps: Missing config values now MISSING
    
    Config values that didn't apply to the current product used to get set
    to -1, but now they're set to AltosLib.MISSING to be consistent with
    the rest of the code. Deal with this in the UI bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af6ce9a142d001f3b9b83cf6527f4dc848e94d48
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 8 20:39:06 2017 -0700

    altoslib: Compute 'vertical acceleration' for eeprom files
    
    This uses the computed orientation to find the portion of the measured
    acceleration which is vertical and then shows that in the post-flight
    analysis graph.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 32de85691f2e4ed1430a259e05a514ad820b32d9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 8 20:37:58 2017 -0700

    altoslib: Compute orientation from eeprom data files
    
    This was lost in the AltosFlightSeries transformation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4c5acb57d7ac1abec7bb4cda9dc88c2a19767a2d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 16:53:43 2017 -0700

    altoslib,altosuilib: Remove stale source files
    
    These aren't built any longer
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3cd7590f35babc346ba245d32d6290f22b2a13f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 16:53:03 2017 -0700

    altoslib: Check for valid pad alt before computing GPS height series
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93ec97cbae5a16d971b9e757c167bef9a5a80629
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 16:52:28 2017 -0700

    altoslib: Add status back to AltosFlightSeries for CSV export
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ec59ee5a6dda114ff55a4af4669842eed5ef79a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 16:15:17 2017 -0700

    altoslib: Don't record radio status values in flight series
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b07adb395f2949dc76275d87b8af10430badb4b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 16:14:53 2017 -0700

    altoslib: When no boost tick is found, just use first tick in file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 78b4bf77fca96bef2cce443ad4c9544ae83f0acc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 15:52:17 2017 -0700

    altoslib: Reset transient AltosCalData values before processing data
    
    Values in cal_data which are used to hold intermediate results need to
    get reset back to their initial values before processing a series of
    flight data again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcf533d5befffa4c9c872f3c3d21d11ffeb61307
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 15:51:56 2017 -0700

    altoslib: Don't record 'pad' state in FlightSeries
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9748d267b80e42ca52f9221900bb58602759a8d2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 15:28:29 2017 -0700

    altosuilib: Set graph title to include product/serial/flight info
    
    Better than "Flight"
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a92ccbd3e5ce640875b614ff14d549cccc2036c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 15:27:45 2017 -0700

    altoslib: Only compute state stats for recorded states
    
    Missing states shouldn't get stats; they 'didn't happen'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4161d9e9e5b4cbd71ec6d982d26ea566a69726c3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 15:26:51 2017 -0700

    altoslib: Clean up gps series logging
    
    Create each gps series only when data are avaiable.
    Compute gps height series shen series is finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d6376c673af4648d494c1be71ad40380667bd25
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 15:26:11 2017 -0700

    altoslib: AltosFlightSeries ignore missing accel/pressure
    
    missing accel often comes from invalid cal data; easier to check here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15e3f2dae15e41a8501e3e1d221536751af15f94
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 15:25:35 2017 -0700

    altoslib: Remove debug printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 355bb4669da05d202054b8265695e9878fd612c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 15:21:53 2017 -0700

    altoslib: Ignore invalid accel cal values
    
    When both are the same, something is wrong.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd7dd6f5adbe25708ba0276444196964f66b3c4a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 14:42:30 2017 -0700

    altoslib: Check for empty gps height series
    
    When the gps height series is present but empty, there won't be a max value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b91ba98395a431385c9af5de77b2892fd6ccc43
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 14:41:42 2017 -0700

    altoslib: Use first pressure value if no ground pressure available
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0f25bcb8c036330e80c1254ab67f0bf323a4a98
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 14:33:28 2017 -0700

    altoslib: Handle eeprom tick wrapping
    
    Need to deal with eeprom files with tick values that cross the 16-bit
    barrier.
    Use 'wide_tick' to order eeprom record.
    Remeber 'prev_tick' to order cal data time sequence.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c075227c3a3c7714fe6f9d48c14dafaf4fed8e5e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 14:03:51 2017 -0700

    altosuilib: Display product/firmware version in stats table
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18f1dd64fe4ad94cbe292fffdc25167ae68c6611
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 14:02:51 2017 -0700

    altoslib: Adjust boost/landed time in flight series for display
    
    Makes the presented values match those used in the stats computation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c2eb1a15e745bb67721a1e3d84fb2fc0ce64eb1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 14:02:11 2017 -0700

    altoslib: Add constants for speed/accel filtering
    
    With an eye towards letting the user pick.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit da914cd72411af8c36af05b13c11b9093c8a378c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 14:00:15 2017 -0700

    altoslib: Create data file open helper in AltosLib
    
    Use InputStream everywhere, instead of Reader.
    Create private string input stream as java one is deprecated.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e1295ff74d03f940fc68e6795bf30687162a440
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 28 13:58:05 2017 -0700

    altoslib: Extract a few more values from config to cal_data
    
    Make it possible to display model/version data in the flight stats table.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4407afb514437ccd8db79ae29c6fa203140fa07
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 27 23:42:52 2017 -0700

    altoslib: Recover from a couple of API changes
    
    Nothing serious.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c0af53c03d7945f7400496216ee259d73fb04843
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 27 23:35:02 2017 -0700

    micropeak: Use altoslib/altosuilib flight analysis bits
    
    Remove custom graph and stats bits and share bits with altosui.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e17d3be199d14473d8a7f9b899c290518b879a6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 27 23:34:18 2017 -0700

    altosuilib: Remove 'cal_data' param from AltosGraphNew constructor
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1d76d5568f8386c52704d69507132de23ea591f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 27 23:33:37 2017 -0700

    altosuilib: Make AltosFlightStatsTable neater
    
    Elide missing data, change titles when data are simpler
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c87ba4b243a9fd838a3c97cc6a95cceb450a6ba5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 27 23:33:07 2017 -0700

    altoslib: Provide consistent cal_data from idle and replay readers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9e82a5929a836bc61b464507badef2df5e9d4d0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 27 23:32:29 2017 -0700

    altoslib: Return AltosTimeValue from min/max funcs
    
    Allowing the user to have both value and time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ce82ea72009f7c9ac09be08aec154aec606d3c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 27 23:31:48 2017 -0700

    altoslib: Publish boost_time and landed_time from AltosFlightStats
    
    Nice to be able to use these when displaying data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3516eeb77048736470de2cc2ca03985efd228d29
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 27 23:30:54 2017 -0700

    altoslib: Allow for other tick sizes
    
    Use 1/100 sec by default, but provide for MicroPeak which uses a
    different step.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9329cb607e36843385e92b677f095c451d50297c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 27 23:30:13 2017 -0700

    altoslib: Change how speed/accel are computed from pressure
    
    Filter *then* differentiate. This works way better that doing things
    in the other order.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 855a7d243a5a85728a7b23fdfe9485d4ecaf71cf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 27 16:12:31 2017 -0700

    telegps: Get telegps application working again
    
    Many minor API tweaks
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b6b5c64f93fa56bcb22ea1c4279e4f754e6e6f1c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 27 00:27:04 2017 -0700

    altosdroid: Deal with AltosState changes
    
    cal data split out from altos state.
    altos state needed to have no-arguments constructor for JSON code.
    Also messed with voice to make it stay quiet during app startup.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b4dcca73c65e87462d5f8d08dbc025aa8cf08a6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 26 19:05:51 2017 -0700

    altoslib: Use cal data temp gps for telemetry data too
    
    This avoids bouncing the location data during flight
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 612756291c7fb68d337c3be2e8197d39e31f3b5c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 26 18:47:18 2017 -0700

    altosui: Remove debug printf.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f32d1a2e2fb5989d124189a7eb1156a00b0ad8f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 26 18:46:46 2017 -0700

    altoslib: Trim stale bits of AltosState
    
    Much of this is now in AltosCalData.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21d864206043d2a6048cd859295623bad4d99365
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 26 18:46:00 2017 -0700

    altoslib: Preserve old GPS data during operation
    
    This avoids having the lat/lon values blank out when the GPS receiver
    looses lock.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d29882f5c70e627b0bbfe42c0a31d6cb5f6b6bf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 26 18:22:02 2017 -0700

    altoslib: Get KML export working again
    
    Even annotate the states with avg speed/accel for fun.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd738d47bbc46d36698350d5450abe1125d990a3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 26 17:14:29 2017 -0700

    altoslib: Make sure AltosFlightSeries is filled in before use
    
    After all of the raw data is captured, the derived data needs to be
    computed by calling the 'finish' function.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af3c7938f24dcf5ffbce024ed596655b26282cf1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 26 17:13:43 2017 -0700

    altosui: Remove --cat mode
    
    Wasn't documented, didn't do much useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa0300f11fe5b7f1d3e548e29dc809b803aa1f7a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 26 00:51:37 2017 -0700

    altoslib: Make AltosReplayReader start synchronously enough to track states
    
    The Altos UI needs to see 'pad' state and then 'boost' state so that
    it will automatically switch tabs during the flight. When reading from
    eeprom files, the only way that is going to happen is if the reader
    thread waits until the UI has definitely seen 'pad' state, which we do
    by simply delaying the reader thread until after that has happened.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e82051a6aaaccf1e8a242f9c8141e4167e652d2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 26 00:20:17 2017 -0700

    altoslib,altosuilib,altosui: Get stats and replay working again.
    
    Stats are really easy with all of the data in memory.
    Replay takes a special thread to run the data and dump it into a
    single state.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 222158581887b5f9e8b9843d14321c313fa023fa
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 25 22:36:05 2017 -0700

    altoslib/altosuilib/altosui: More work towards using AltosFlightSeries for analysis
    
    Graphing and CSV seem complete now; stats still missing lots of stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d497c1be534e2b206edec3c096198c8ea64cebe
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 25 17:29:31 2017 -0700

    altosui: Adapt to AltosFlightSeries for data analysis
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e6eb659b0e984515a33b3ddabfe8325742a952da
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 25 17:26:49 2017 -0700

    altosuilib: Adapt to AltosFlightSeries data processing plan
    
    Replace use of list of AltosState with AltosFlightSeries to improve
    data analysis.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f26cfe417c6977cf1e7e75a4f050e25f64d41859
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 25 17:24:14 2017 -0700

    altoslib: Do data analysis on raw values rather than AltosState
    
    Use AltosFlightSeries instead of a sequence of AltosState records when
    processing saved data. This provides a better way of doing filtering
    and plotting.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7600116a191b3ac252a0f716d200d0e0b3500987
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 23 14:53:55 2017 -0700

    altoslib: Don't store computed telemetry fields
    
    These values are only needed once, so there's no reason to save them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abcedc4b49ce77607ef95abf69479dc1d2c1b76d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 22 14:36:46 2017 -0700

    doc: Add telegps outline
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e8794ab1d512418e312a1a779777119e20dc8c38
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri May 12 12:58:18 2017 -0600

    add thrust as a graphable time series type

commit bbe0c2e0a3216f40f49af34b756330ba28d7c7e1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 12 00:01:14 2017 -0700

    altosui: Hacks to plug into the new graph stuff
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96de483d745ea0ef95326de2847a2534f7057846
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 11 17:16:56 2017 -0700

    altosuilib: Start creating new graph interface that takes time series data
    
    Replace the AltosState interface so the graph can get better data, and
    can be used for more stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 258808d296aeadaf150fa9b07e9c99a6bf1ca7c8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 11 17:14:51 2017 -0700

    altoslib: Create new abstraction underneath AltosState for recording values
    
    Provides a way for the graph API to see raw data values, instead of
    those cooked by AltosState.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9aa2d3558c77eb444223eaa747c75916bc7bac1
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 11 12:14:41 2017 -0600

    altoslib: include TimeSeries code in build

commit 81eaca2eac0b51a0017379187e042729b87e5f4d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 10 15:18:13 2017 -0700

    altosuilib: Add time series subclass with data for generating a plot
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a50c8b40319c5d176d40a816111edd9a8dd48bc9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 10 15:16:34 2017 -0700

    altoslib: Add initial time series functions
    
    Provides the basis for offering a sequence of time/value datasets for
    graphing instead of using AltosState.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e37f9719745b7fba5bfb1b1517ce7b70efa7a3a2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 19 21:36:01 2017 -0700

    altos/telebt-v3.0: Add send_packet command
    
    Useful for doing host-based RF protocols.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e3b7206f9ab2f76089553d7c881a96e0204a4a3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 19 21:35:05 2017 -0700

    altos/telebt-v4.0: Remove HAS_POLLCHAR
    
    This isn't being used anymore.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbec54fc682774f096dc2e43ef9a4796be123341
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 19 21:31:52 2017 -0700

    ao-bringup: turnon_chaoskey: search for ao-usbload in PATH
    
    Don't assume it's in /usr/bin
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2cf4d76745713051c6ee9cf8d4b386c25f822433
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 19 21:30:29 2017 -0700

    altos/telefireone-v1.0: Fix confusing defines about config storage
    
    USE_INTERNAL_FLASH is about storing config data in internal flash, and
    should be on for telefireone.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65fd7b23b1a8861afd74e4e42ce1918c059fbff1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 15 12:13:35 2017 -0700

    altoslib: Set default accel cal for old TeleMetrum v1 files
    
    Before we stashed the config data in the log file, altoslib had to
    "known" what the accelerometer calibration values should be set
    to.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2fd949bb29d94b1a762ff707c98a8498ea508bb2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 15 12:12:57 2017 -0700

    altoslib: Set default log format to FULL until we learn different
    
    Ancient log files don't even have a product name in them, so we'll
    guess TeleMetrum v1.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 404ee357d59ef4732068ec0e56a9c93ac885ea0f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 15 12:11:31 2017 -0700

    altoslib: Mark AltosConfigData fields as MISSING until set
    
    Instead of using -1 or 0 randomly, use MISSING consistently.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0053c5e2cc7b75b642ff4727a1ef874d323db9d
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon May 15 10:16:33 2017 -0600

    re-brand current telefiretwo product as telefireone

commit ab50a1467bac0234062bc8c0a17783f1730aa981
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 15 08:59:52 2017 -0700

    altos/ao_rn4678: Send '$$$' for new devices. Fix name setting code.
    
    New devices won't respond to the cmd pin we have configured, so get
    them to command mode by sending the $$$ string. Somehow I'd botched
    the name setting code and hadn't caught it as I hadn't tried a new
    device...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f132a22995235f3002e4a2bb8771c9b5738efb30
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 15 08:58:21 2017 -0700

    altos/stmf: Fix up serial port flow control configuration bits
    
    Compute whether any sw/hw flow control is in use.
    Compute whether hw flow control is in use as a separate value.
    
    These make the code a bit easier to follow.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2536640b852feff41975d2da50befdda91ee6303
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 13 15:24:20 2017 -0700

    libaltos: Add support for TeleBT-v4.0 bluetooth channel change
    
    The RN4678 in TeleBT v4.0 uses channel 6 instead of channel 1.
    There is code in the linux bits which discovers this value, but that
    crashes when run under java for unknown reasons.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91c2af9ac1387842a5fdc61dbc9e26e04de2cdd0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 13 15:21:40 2017 -0700

    altoslib: Handle TeleBT v4.0 battery voltage
    
    The device reports raw ADC values, which mean AltosLib needs to
    translate them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e0857120b8633c22603a9f59c5519e5a92759e9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 13 15:19:25 2017 -0700

    altos/telebt-v4.0: Hook up RN4678 module
    
    We've switched from the BM70 to this module which offers a virtual
    serial channel over both BT and BTLE.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6442e2ad6af4b337348aa2ce25abc91c05765826
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 13 15:17:41 2017 -0700

    altos: Add RN4678 Bluetooth module driver
    
    This works much like the old BTM module, but supports both bluetooth
    and bluetooth LE. I've poked at it briefly over BTLE to see that it
    appears to have the right name, but haven't attempted to communicate
    over BTLE yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9c6727d39cc1feae3bd0504bcbc910ae832e3651
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 12 01:35:52 2017 -0700

    Use SDP to locate the service channel on Linux
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ad767dd6b6c8d99bbe4b688e8cdbc230e01a7dc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 10 14:47:15 2017 -0700

    altoslib: Another bit of altoslib for the old eeprom stuff
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0080e61e5f2e20ce45041e29dc039d042aa7f76e
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 11 11:27:30 2017 -0600

    have AltosGraph use new AltosPressure to get imperial_units working

commit 9d05af2147c0eb6dc63c4d4dc1d9a3c31f480aef
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 27 15:27:49 2017 -0600

    initial tests made using Terry's stand with a 2500psi sensor

commit f753ad3b9d0f3dc9794e5dd097063aab6cf9bdc4
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 27 12:57:49 2017 -0600

    telefiretwo: don't try to record pre-burn sensor values in FLIGHT record

commit 7e2b92ccb56b713fd18af5769156331ead8dc7ed
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 27 15:21:53 2017 -0600

    have git ignore ao-bringup/cal_values

commit 238e56e0f6ab2f623e0faf25298b38dc3a4aff74
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 10 22:19:38 2017 -0600

    telegps: use new eeprom reading code

commit 0641326842bffbf4b3ae69459ca540131cb64e59
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 9 02:31:04 2017 -0700

    altoslib: Remove older eeprom handling code
    
    The new code appears to work in minor testing; time to try it all the time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17e20a6d2dab1f4bd1375bfd9e1c5230ee2c1119
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 9 02:11:25 2017 -0700

    altoslib: Save eeprom data in new .eeprom format
    
    A chunk of json for the config values followed by hex numbers for the data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e311cefae19d7dc71fb10e9a943daa8e2313c8f8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 9 00:22:35 2017 -0700

    altosui: Use new eeprom reading code
    
    This just means using different file opening functions, which then
    get matched by AltosEepromFile and sent off to the new eeprom code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c00a80f040de85be18c9d5150cb0661e08158c3d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 9 00:20:23 2017 -0700

    altoslib: Hack up AltosEepromFile to support new eeprom code
    
    Redirect when asked to read an eeprom file using the "Reader" type.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e14b0ea82420e769cdf9ffd621b7f8d4944ef44d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 9 00:19:51 2017 -0700

    altoslib: Compile AltosForce and AltosPressure
    
    Useful if you want to actually use these.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e67a5c6ffa7174d66e985483fab4bf52ccaea5ca
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 9 00:19:05 2017 -0700

    altoslib: Add new eeprom management code
    
    Generic .eeprom file parsing, simpler per-type eeprom data extraction.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44c0cecabb3a815dbf7f52e6b2dad364cc72b60c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 9 00:17:40 2017 -0700

    altoslib: Add set_config_data to AltosState
    
    Initialize all config-data related state values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3c1ce741c54c5640b7e1b07d86be1ce0951944b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 9 00:17:11 2017 -0700

    altoslib: Add empty constructor for AltosPyro for JSON
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c17b78e60c340c8a3e3d6f9b875667c66216647a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 9 00:16:36 2017 -0700

    altoslib: Add Ms5607 constructor that just takes config_data
    
    Use for making Ms5607 from eeprom files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d97c4d2f6de2981c2efd7bfbc9f5f9649987b854
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 9 00:14:33 2017 -0700

    altoslib: Add AltosForce and AltosPressure units
    
    Useful for TeleFireTwo.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 975751b604784e86b2ddb944a72b55ca3f14cf63
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 9 00:13:16 2017 -0700

    altoslib: Hide members from json by prefixing with __
    
    This lets some structures which would otherwise recurse (and crash)
    get converted to json, assuming the hidden members aren't relevant.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08da6f2100c0241c70554427e53b7e237dfda16c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 4 22:09:31 2017 -0700

    altos/telemini-v3.0: Use dbg connector pin 5 for force bootloader
    
    This works way better than attempting to use the beeper pin.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 178d7c0aa32267ea71be2ccff146ea6ff990d7dc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 4 22:07:51 2017 -0700

    altos/telemini-v3.0: Add 'recovery mode' on PA14 (pin 6 on dbg header)
    
    Connect this pin to GND (pin 3) and TeleMini will come up with N0CALL
    at 434.550MHz using the original frequency calibration. Helps recover
    from accidental mis-configuration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b4e3189211801c6f8f41c5d08c5a8551f28976c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 4 22:06:16 2017 -0700

    altos: Move 'ao_force_freq' to ao_config.c
    
    Instead of having to add it to each product using this variable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e76d543a203f210683cb77df2b9bbff1a9f4b381
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 4 22:04:57 2017 -0700

    altos: Make CDC ACM 'line coding' public
    
    This allows other systems to see what baud rate the host has requested.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a84bc1bd8dd19d47709614b0c2639958d09fbf7e
Author: Miguel Benavidez <miguelbenavidez1145@gmail.com>
Date:   Thu May 4 11:29:33 2017 -0700

    altoslib: Fix MS5607 raw data to pressure conversion function
    
    The MS5607 sensor provides raw 24-bit ADC outputs to the host along
    with calibration constants necessary to convert those into temperature
    and pressure values. The datasheet has a flow chart indicating how to
    perform this computation. There are two parts of the algorithm which
    adjust the result based on the ambient temperature, temperatures below
    20°C get one compensation factor and temperatures below -15°C get an
    additional factor.
    
    The ground station version of this function mistakenly applied the
    second compensation factor for all temperatures below +15°C. The
    result was that the pressure computed on the ground when the measured
    temperature was between -15°C and +15°C was incorrect, resulting in
    altitudes which were several hundred meters off in some situations.
    
    This can be seen when displaying any .eeprom (or .mpd) data
    files for flights with temperatures in that range. The datafiles
    themselves are not corrupted, only the display operation.
    
    This is not seen for telemetry data, where the pressure and associated
    altitude is computed in the airframe using the correct algorithm.
    
    Thanks much to Miguel and the rest of the Vanguard School TARC team
    for identifying the problem and providing this fix.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 643f7508233f492a86f541b4f4fb20531b306ae0
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 3 11:47:33 2017 -0600

    altos/telebt-v4.0 Set CPU clock to 48Mhz instead of 96Mhz

commit a6e1010f7519c5d1243e8950df6f022576152a87
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 2 11:49:21 2017 -0700

    altos/telegps-v2.0: Disable external serial port to save ROM
    
    We'll have to rewrite some of the serial code to avoid sucking memory here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 475940cb8032c76622c64dd0bd30f31c0b0f6cf4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 2 11:35:18 2017 -0700

    altos/stmf0: Add code to use SoC flash as storage
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit de36a1e1a2e568dd606000f169fef111e8c08b15
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 30 17:42:23 2017 -0700

    altos/telegps-v2.0: Reorder initialization sequence
    
    This tries to be a bit more logical about the board initialization
    sequence, starting with the OS, then the support hardware, internal
    drivers, external drivers and finally services.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a10a209749d1f375d02ce9af68ccbb0b3a91ba2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 30 17:41:21 2017 -0700

    altos/telegps-v2.0: CC1200 CS is PA1, not PA5.
    
    Also remove some unneeded config of an additional pin for MCU wakeup,
    which the CC1120 needs but the CC1200 does not.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 99c5c47d9288721a1fe009698393c67dd36a16fb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 30 17:40:26 2017 -0700

    altos/telegps-v2.0: GPS chip is connected to serial 2, not serial 1
    
    Turn on serial 2 and use it for GPS.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ace97885c4924de049ff20a40fd9ec234b6577b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 30 17:39:54 2017 -0700

    altos/telegps-v2.0: Remove some unneeded defines
    
    HAS_MS5607 and HAS_RADIO_RECV aren't useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f883aa1b1a1db61113489c260f44c09d5216bc7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 30 17:39:03 2017 -0700

    altos/telegps-v2.0: Battery ADC input is on PB1, not PA0
    
    Rewire as needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 979a1b8d80189e56745316da3de9288ee32e102c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 30 17:38:21 2017 -0700

    altos/telegps-v2.0: Set CPU clock to 48MHz instread of 96MHz
    
    Turns out the CPU doesn't run well at that speed. Who would have guessed?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 671e00f9fa75d75b5f15d8cc558a46a9651690fa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 30 17:37:45 2017 -0700

    altos/telegps-v2.0: Adjust LED config
    
    The LED is green, not red. Use it for panic and GPS lock.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ec963d358895ae46af63d2a6e9a32bdfb4d631c0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 30 17:35:28 2017 -0700

    altos/kernel: Allow TeleGPS v2 to scale battery in telem
    
    TeleGPS v2 uses the STMF0 processor instead of the LPC11, which means
    the ADC range is different. As the raw ADC value was getting sent to
    represent battery voltage in the config packet, we need to scale that
    for the different processor. This patch allows that to happen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 34fda7bff76d59bcfbcec6a44275829c45e42189
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 30 17:34:08 2017 -0700

    src/kernel: Add GPS lock blink LED to tracker code
    
    Blinks an LED briefly once every three seconds when GPS is locked.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c02adbdd8f41c1aa1fdf4748c910d23e5485108f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 28 00:08:51 2017 -0700

    altos: Build MicroPeak-v2.0 by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 217d77dadbef4192d2f32e290a5c5f50159f2e0d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 28 00:07:03 2017 -0700

    altos/micropeak-v2.0: Add initial MicroPeak v2 support
    
    stm32f042 processor replaces the attiny85 and adds USB support along
    with more storage.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65bb93f69b2f420281b67d62a9ee3cf30874fb7c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 28 00:05:01 2017 -0700

    altos/stmf0: Add support for HSI clocked applications
    
    And allow application space to be limited to less than available flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d197adf353ec5503c72a4554aca2a463bb685932
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 28 00:04:33 2017 -0700

    altos/stmf0: Fix HSI clock rate.
    
    It's 8MHz, not 16MHz
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b3c79e9d88c9bb0b5aca4bc20fa942ebcfe40fc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 28 00:04:14 2017 -0700

    altos/stmf0: Make sure systick is off before programming
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac3fc7da669f58c7abd25b0ca8cc425238b84217
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 28 00:02:54 2017 -0700

    altos/stmf0: Compute serial baud rate registers at runtime
    
    This allows the system clock to vary at runtime, instead of requiring
    a fixed value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d4f7880b0934c208df65cea8b0f549f32f1c7d2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 28 00:02:02 2017 -0700

    altos/micropeak: Update ao_micropeak.h for MicroPeak v2
    
    Allow different sample times, add constant for MicroPeak v2 log files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4896582922ba5227da031c762221c8c7eafc2415
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 28 00:01:18 2017 -0700

    altos/micropeak: Use existing ao_ms5607_current variable
    
    Instead of defining another.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d4675cbadcb0ab9df8f6d5155797dca400315c0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 28 00:00:11 2017 -0700

    altos: Add header file for ao_report_micro.c
    
    Defines the functions in this file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75c26a26e905e3d4f141badfcb6ec6995ed58213
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 27 23:59:27 2017 -0700

    altos: Add 100ms constants for baro Kalman filter
    
    MicroPeak v2 uses this rate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c755f52db40bb845ab236ff400f35888053e616
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 27 23:52:29 2017 -0700

    altos: Adapt micro log to MicroPeak V3
    
    Allow use of regular serial API for sending data.
    Allow application to specify different storage size.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2245d9e3178404a49a6787656319fa13f0cc1a51
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 27 23:51:21 2017 -0700

    altos/ms5607: Allow applications to not use the normal data ring and thread
    
    MicroPeak V2 has tasks, but doesn't want to use another thread just
    for the MS5607.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6813f48fe02ecc5902f386234535ea76af71a764
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 27 23:50:12 2017 -0700

    micropeak: Add MicroPeak V2 to the download code
    
    Add the MicroPeak V2 sample rate so the timing values are correct.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a59c3afa23e876362dc8c80559015ce361627f05
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 25 23:56:41 2017 -0700

    Fake thrust data as accel for now

commit 07956b102bd4b7e4dd0ec20e0a4fbe3779acfdd9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 25 21:27:40 2017 -0700

    ao-bringup: make turnon_telemini search for ao_usbload on $PATH
    
    I've uninstalled the altos package as it has a version of ao-usbload
    which is too old for telemini.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b014fe9fa64e7aead586bc682251346d000c8cc
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 25 23:06:34 2017 -0600

    telemini-v3.0: make git ignore build products

commit b662ca4edd67a2e1e5712f97fb1ce909f19af625
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 25 23:01:53 2017 -0600

    ao-tools/ao-makebin: have git ignore built object

commit bd489b96b060c8276bd7709ac55c306aad02374c
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 25 23:00:34 2017 -0600

    telebt-v4.0: make git ignore products of build

commit 6ed63dfbf0a0205df17afb2ea54afad441a69604
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 25 22:58:00 2017 -0600

    telegps-v2.0: slow down radio chip spi speed

commit 08d73614c0c0859bc097c1d7d423bac4cf313512
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 25 22:28:28 2017 -0600

    telebt-v4.0: slow down SPI speed to radio chip

commit 16f171350619b9d3da614625e27c092b144c3097
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 25 22:26:12 2017 -0600

    telebt-v4.0: turn off pin remapping in the flash loader, too

commit 514c05c287f0be390cfdf3491169c830cad8bfe7
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 25 22:12:42 2017 -0600

    telebt-v4.0: don't need the USB pin remapping flag

commit 1f723d31312be6dea3ef46e265c17c4d361d7099
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 25 22:10:41 2017 -0600

    telebt-v4.0: add ao_send_packet

commit 30e6e087b639c6d7ec75f21ba8c6fcf6ad50fffe
Merge: b2a5118d 75881968
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 25 22:04:22 2017 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit b2a5118dededd1ed6b1326e82168214cb0b24821
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 25 22:03:56 2017 -0600

    telebt-v4.0: initial creation of firmware for new product, no BT yet

commit 75881968ffb6bfd4e920cac4aa15d8d188eda119
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 17:06:01 2017 -0700

    altos/nucleo-32: Add lisp save/restore
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97cf9df882291b9e494b2f64f84eb37357a6ab31
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 17:01:43 2017 -0700

    altos/telegps-v2.0: git ignore make results
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a324ce39bb7abadc70785a6fdce449c9441f87b2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 17:00:10 2017 -0700

    Ignore ao_lisp_test

commit 7064aa67189108c4ade3d2e7eac9a704b7849626
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 22:26:31 2017 -0700

    Update releasing to add more firmware bits
    
    Also, document what is needed to get a new product into the build
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0f69ab309869e914536d674d49d68a8dd31b080
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 22:25:57 2017 -0700

    altosui: Add TeleMini v3.0 and EasyMini v2.0 firmware to windows package
    
    Sigh. This can't easily be done from Makefile.am
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b9557f7946703888be97633cf3e54216c652f30
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 22:25:14 2017 -0700

    altos/ao-bringup: Switch turnon_easymini to v2.0
    
    Not planning on buildin more v1.0 boards
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d685ac0916229c23a299b11dad48af749eb27ea
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 22:01:04 2017 -0700

    altosui: Ship telemini v3.0 firmware
    
    Even though we don't provide a cable for reflashing yet
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7d1452d03bcfb14990546d57d9d858ae3135008
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 21:59:16 2017 -0700

    altos: Add telemini-v3.0 and easymini-v2.0 to default altos build
    
    Make sure they get built for releases
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41d5bb89973c7a358d08c538f1b52c45b0bbec30
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 21:56:14 2017 -0700

    altos/easymini-v2.0: Add EasyMini v2.0
    
    Like EasyMini v1.0, but with the STM32F0 processor instead of LPC
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43cf1991f042e50fb6ec0b037f6d212436e3d31b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 21:54:25 2017 -0700

    altos/telemini-v3.0: Fix license
    
    Was GPL2, switch to GPL2+
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0be779ac401f063b968aaac9460c972a728d309
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 21:32:02 2017 -0700

    altos/stmf0: Not all timer configurations use AF2
    
    Allow applications to select other configurations.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 202d556241d56ec4a27f202575d6945dc09f9e03
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 24 20:04:37 2017 -0600

    add telemini-v3.0 to list of binaries we stach in LLC repo for production use

commit ef7fbbfa308918ebae5d2499aabccc6562a80dfa
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 24 19:46:05 2017 -0600

    two more places where telemini-outline.pdf filename needs to be updated

commit 9c95bed92a45741e6c1ad0ab4941f13370b77648
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 15:47:08 2017 -0700

    Bump to version 1.7
    
    TeleMini v3.0 support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3544c33c2f386fb292de9e74982717a002f37440
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 17:11:03 2017 -0700

    altoslib: renamed AltosSensorTMini2, but didn't update AltosIdleFetch
    
    Because Java found the old installed version of this library. Thanks!
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5914231bfe8220a92dde17901b952e919a40d568
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 24 17:18:10 2017 -0600

    update copyright year in docs

commit 8e5b4359050701513a807131564ae54f2e6b919b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 16:40:46 2017 -0700

    altos/ao_pad.c: Use #if HAS_LOG instead of #ifdef HAS_LOG
    
    TeleFire v0.1 defines HAS_LOG to 0.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c57a5c018e4bd0a0033c8759132a648977bf45f7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 24 15:59:23 2017 -0700

    doc: Errors in the TeleMini v3.0 updates found by Bdale
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b6b58aa2fbae1e7782b5a0b700544efe319fe34e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 22 22:04:31 2017 -0700

    altos: Move old AO_LAUNCH defines to cc1111/ao_launch.h
    
    These were getting accidentally used by ao_pad.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd291d38b92b31c3612e6de6cdf4e5988fc01c12
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 23 00:02:47 2017 -0600

    allow multiple tests to be logged on telefiretwo without rebooting

commit d75351c5a07241bcbb951758796b4f639ace6b1f
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 22 23:42:23 2017 -0600

    implement static test start and stop protocol for telefiretwo+telebt

commit 6cfd9411026d536b5b75098b8c9ec3ceb3d945aa
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 22 23:02:53 2017 -0600

    eliminate spurious close braces

commit e3b30d4bd6faf68c885791fb87229558cc1157a6
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 22 23:01:44 2017 -0600

    add static test start and stop commands to radio protocol for telefiretwo

commit e5e0ce18b2ae684896a6d7d0a4c10269199d95b5
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 22 23:01:26 2017 -0600

    enable logging support in telefiretwo

commit e05b281e6d1a7a4fa92d52f2491f27266045df96
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 22 17:20:41 2017 -0600

    cobble up a command to toggle logging on/off on TeleFireTwo

commit db12c17e9538bd82f2c2bf21357887ee7d894a1c
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 22 16:59:03 2017 -0600

    a stab at turning on rudimentary logging for telefiretwo

commit 6804ead7f7e54ff34b257e10e381dc52d5a61b06
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 22 15:55:48 2017 -0700

    altoslib: Add TeleFireTwo eeprom support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 359e2d6eca5258f4fabc59772f1320e195a7397c
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 22 16:36:18 2017 -0600

    fleshing out logging for telefiretwo

commit 439a51ed503b74c1739cf150cdc91685653deed0
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 22 15:45:52 2017 -0600

    enable spi flash on telefiretwo

commit ffc90fa3f932aef4dd85147817949aa9474b6d26
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 22 11:38:08 2017 -0600

    fix TeleFireTwo product name in ao-list output

commit 4682323a4bf147b9a908f5f9104bf01ab2cf0533
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 21 23:02:57 2017 -0700

    altos/stmf0: Pull beeper pin low when beeper is off
    
    This avoids having the pin float and pick up noise from any adjacent
    signals, like TeleMini's radio.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb1c2bf5244840049c0a58e0ceecfcd9f5c290dd
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 21 22:24:00 2017 -0700

    doc: Finish updates for v1.7
    
    Scrub all TeleMini references and make sure they're fixed for v3.  No
    'emergency' mode yet.  No reflashing yet.
    
    Add v1.7 release notes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5849ee6c09669e6d2e6940a76bcb5cc23178fc68
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 21 21:32:26 2017 -0700

    altos/lpc: Really fix aes entry in lpc vpath
    
    I added another entry instead of fixing the existing one. Not ideal.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c833c93e812936125cfe9532523ea36b5046e58d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 21 18:16:45 2017 -0700

    Replace turnon_telemini with v3 version. Add test-teleminiv3
    
    Prepare for TeleMini v3.0 release.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8978687dc2ae90e4005a8f7d598940b7df6a4359
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 21 18:08:25 2017 -0700

    doc: Update TeleMini v3 photos to production unit
    
    Replace prototype photos
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 86a54146b58be86c58fb45386c7abcfa0bb11677
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 21 17:15:05 2017 -0700

    alots/stmf0: Fix vpath entry for AES directory
    
    Mis-placed )
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 64ac93f5495db7a8b06f1eb4fe4eb2418125d792
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 21 17:06:23 2017 -0700

    altos/lpc,altos/stmf0: Use -n flag to work around link editor issue
    
    Something changed in the link editor which makes it complain about 'no
    space for program headers' on LPC and STMF0 builds. Somehow, adding
    the '-n' flag to the linking step fixes it. It doesn't appear to break
    the build, so I guess it's ok?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 77c76e429074a53c1c5230a7b5e665d1715b296f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 21 17:04:28 2017 -0700

    altos/telemini-v3.0: Remove vestiges of the pre-USB code
    
    Pre-USB telemini v3 designs had a separate firmware load for radio
    calibration. Now that we've got enough USB to perform flash/cal/test,
    we don't need that other firmware load, so we can remove the remaining
    Makefile remnants of the calibration load.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit adb842b64b04a7d70e543bad7ae59807d549e85a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 21 16:40:58 2017 -0700

    altos/lpc: Add (void *) cast to fix alignment warning
    
    The -Wcast-align warning is generated when this cast is not present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51ce352d179835ca08e4cf9326e9e77d6b972fb7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 21 09:18:48 2017 -0700

    altos/lpc: Fix up Makefile definitions
    
    vpath reference to aes was busted.
    WARN_CFLAGS needs -Wcast-align.
    Wrap AO_CFLAGS.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ec319edd2cda321d7542784b997acd0da040fa3d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 21 09:17:18 2017 -0700

    ao-test-baro: Be more lax about altitude checks
    
    High pressure here today and the altimeter is reading -69m. Allow down
    to -100m when testing baro values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7db49a2052ec905cdc02f626c0933ca6889d64a4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 19 23:08:56 2017 -0700

    altos/telemini-v3.0: Add flash loader
    
    Now that telemini has USB, use the boot loader to make it easy to
    update firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1ba276c6e54564f82920f65bf4c19df85c9ea56
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 19 23:08:06 2017 -0700

    altos/telemini-v3.0: Update to production hardware
    
    Removed LEDs. Added USB. Flipped lots of pins around.
    
    This appears to make telemini work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93983730a6628a2a85b6fc543df236b35d501ee9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 19 16:00:24 2017 -0700

    altos/telebt-v3.0: Add LCO bits for testing
    
    Add the USB commands for LCO testing to TeleBT v3.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 944d8466a31842c34304b77364d632e259238018
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 19 14:19:28 2017 -0700

    altos/telefiretwo-v0.2: Add AO_CC1200_SPI_SPEED
    
    Needed for products with different SPI speed options.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e7143e5d448cd05c355f4a323ae4892b02022ac
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Apr 19 15:08:15 2017 -0600

    add new ADC channels for telefiretwo

commit 6e699fa4971668bbe569d2a0e2ed9f891877d140
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 18 16:47:43 2017 -0600

    need top level Makefile too

commit 9fa46346d576081f99860cad96c91bcf63233649
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 18 16:47:05 2017 -0600

    builds, loads, runs, not very useful yet

commit 207403e53cc80b0649ce3c004f97d8e1dad824c8
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 18 16:33:27 2017 -0600

    copy telefiretwo-v0.2 to start firmware for v1.0

commit f69d85e2b32370ab68e2725e739417cad6d7a590
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 13 21:48:46 2017 -0600

    telegps-v2.0: Remove fec_tx code and ADC logging.
    
    This gets telegps-v2.0 to link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e561ae43a734d870470e36c41232482bd5f398f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 13 21:47:14 2017 -0600

    altos/stmf0: Split up rom load in altos.ld to make linker happy
    
    The linker isn't happy when the .ld file tries to add text, the .exidx
    and .rodata segments in the same block. Split them up for success.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5c8b8c59f99108233d99ceceb6f85315694e4b1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 13 21:18:58 2017 -0600

    cortexelf-v1: Fetch data at TPB rising when MWR or MRD are low
    
    This should get the right value at least.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3390c62b6d0761764ec5249d72bda33b984a8f90
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 13 21:16:52 2017 -0600

    altos/telegps: Inherit LDFLAGS from lpc make specification
    
    Somethings messed up with cortex-M0 linking, and this isn't helping as
    it overrides the LDFLAGS coming from the architecture.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f18793efb1fbfd17963b9146fae084f2b843d7a3
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 13 19:36:49 2017 -0600

    initial cut at telegps-v2.0 firmware

commit eb0b2b4e9f56d1d6fc2b06e39c8372dfcdf3b1f5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 13:03:50 2017 -0700

    cortexelf-v1: Initialize key matrix code
    
    This gets the hex keypad working.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6efa53bafda18313742849a6c4992f09c3e403c3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 12:59:07 2017 -0700

    cortexelf-v1: Bump SPI pin speed to 40MHz to for sdcard. Fix VGA DMA.
    
    Tell the DMA code to leave the DMA engine enabled so the VGA output
    can use it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c97b4c65d66078a4e187b782669e6b36ee92d30c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 12:56:59 2017 -0700

    altos: Use MP switch in cortexelf boot loader for force loader mode
    
    Provide a way to get to the boot loader on the cortexelf board by
    turning the MP switch on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e80b8bd10433ecc6ebe7c295e16b62b3883987d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 12:55:34 2017 -0700

    altos: Escape lisp REP loop with () input
    
    Provide a way to get out of a lisp read-eval-print loop that can be
    easily input from the keyboard.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83c1e4e8ca684f555cba252efd3882f811d8e154
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 12:54:57 2017 -0700

    altos: Document a few more SPI mode bits in VGA driver
    
    Just comment changes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 24cd5dd33ccf65c1b277911c460a89ec2b52e421
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 12:53:34 2017 -0700

    altos: Drive row low instead of high in matrix driver
    
    Driving it high won't work all that well as we're looking for zero bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a68fb412589819980759d49565a084b23eee8b8f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 12:51:49 2017 -0700

    altos: Place AS1107 in 'normal' mode at end of init sequence
    
    This makes sure the device is out of reset mode while initializing,
    and then placed in normal mode to turn on the display.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 04d4b17635fc9395c70aa0840971c00082f509ba
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 9 12:48:54 2017 -0700

    ao-elftohex: Add conditions for skipping ELF sections
    
    Skip sections with size 0, or which are of type SHT_NOBITS or which
    don't have the SHF_ALLOC flag set.
    
    This avoids crashing on sections which don't have any data to copy.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 86d5119f19b5f3131d224982e011fd233b48aa22
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 4 16:05:15 2017 -0700

    cortexelf-v1: More 1802 noodling
    
    Add code to track the address and data displays, change how 1802 pin
    tracking works
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 301b724d2169f4ac46d921f518455c783e1dd894
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 4 16:04:25 2017 -0700

    stm: Add more mask-based GPIO controls
    
    Lets cortexelf do more things with groups of pins, rather than one pin
    at a time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71e430bb39fc97e543778f7bc1f1bef554ba8b75
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 4 16:03:36 2017 -0700

    altos: Allow programs to enable SDCARD debugging if desired
    
    Provides for per-application control over SDCARD debugging
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4eced9224f40e48d7057352b3424c18025f43f25
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 4 16:02:46 2017 -0700

    altos: Disable FAT commands unless requested
    
    This are debugging commands; don't provide them unless requested
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4ff161e89d852c07934704ea2cbea20a48259a7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 4 16:00:56 2017 -0700

    telegps-v0.1: Hack up for SDCARD debugging
    
    Disable everything not SDCARD related for debugging.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 920b70fd5f6b78461c7ebae6b1e6490a0e050bc2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 4 15:59:56 2017 -0700

    altos: Define CC115L spi speed in each product
    
    Different SoCs have different SPI speeds available; have each product
    specify the speed to use instead of trying to use 4Mhz everywhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 280eefc8f86e90e742c536a074d7284cce03af15
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 3 11:41:51 2017 -0700

    cortexelf-v1: Add pin definitions for 1802 connections
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0197157a295d848bac65cf7f4457dd5a99af24e3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 3 11:37:21 2017 -0700

    stm: Add a few more GPIO functions to make dealing with the 1802 easier
    
    ao_gpio_set_mask and ao_gpio_get_all
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 89c8e0299504e66fc416a778055958cff467e008
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 3 11:36:52 2017 -0700

    cortexelf-v1: Make bit flipping array constant
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47004dfe8ee8c8b31085b066d3d0fd5142fd49da
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 3 09:36:00 2017 -0700

    cortexelf-v1: doodling with 1802 bits
    
    Just some random ideas about how to manage the 1802
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5bb9cf38c84663713c178f54b684d40b6c00b11d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 20:33:49 2017 -0700

    cortexelf-v1: Add bit flipping array generator
    
    Someone hooked up the data lines between the systems backwards, so we
    get to swizzle the bits in software.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c1478b55f5dbe9711b31a34d4f5e3563f1f42d2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 19:32:17 2017 -0700

    cortexelf-v1: Hook up hex keypad using matrix input driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 79215de60d3e11b4abd1ecd2fa9575a323b76754
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 19:31:45 2017 -0700

    altos: Allow buttons to be high when pressed rather than low
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09f8710eb320f37f20dda8c635497c2b505d25e2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 19:30:57 2017 -0700

    altos: add button matrix driver
    
    Scans the matrix once per clock tick queuing events for changed keys.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17ec1c510ccc42bbc387940b5805f452697f78d6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 17:39:26 2017 -0700

    cortexelf-v1: Hook up AS1107 in test mode
    
    Provide a 'L' command to display values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc1b56faa88c75c9c86af89c77d7f1349573b7b0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 17:39:05 2017 -0700

    altos: Add AS1107 LED display driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bc48b075f76bfef258f516549573429b24f284c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 16:37:42 2017 -0700

    cortexelf-v1: Add buttons
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8284d3639cd24e2fa0faf1e35e7276ba35a24f8f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 16:22:28 2017 -0700

    cortexelf-v1: Add serialblather command.
    
    This reads from stdin and dumps it to both serial ports until you type ~
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6fb817f218a69b28973b0d059d71809717b1e2d1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 16:17:33 2017 -0700

    lisp: Fix up lisp build so projects can get ao_lisp_const.h built as needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ce663875d69739cc2d43fcd88b22820cd9d6500
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 15:56:17 2017 -0700

    stm: Use common flash wait loop instead of inlining
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f5f0638f283fbb784021873c649109d4ed0257c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 15:53:17 2017 -0700

    cortexelf: Add lisp interpreter
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54c76d48924fecc2aeabbc352c553822a87f9d19
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 15:40:03 2017 -0700

    cortexelf-v1: Use new memory map to access all flash and ram. Add fat.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b031d5a86213364196b67f7e3f92865da8adbf9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 15:28:45 2017 -0700

    cortexelf-v1: Hook up serial consoles for debugging
    
    This will make playing with serial ports easier for now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 62b0228aed5191c8d769f9f34143a13036e210a7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 15:18:34 2017 -0700

    cortexelf-v1: Fix clock to drive VGA at 640/480. Add sdcard, remove others
    
    VGA requires the CPU to run at 24MHz.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 637d522c6a15b47051103ccc3626be3206a7a2df
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 2 15:04:09 2017 -0700

    cortexelf-v1: Add ps/2 and vga with graphics
    
    Start hooking up devices with known drivers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f451db9889cd578c3032356fd2aa4b5ed45878d
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 2 15:47:31 2017 -0600

    capture pnpservo makefiles too

commit bc150497de8539827177805c7f4430c67ca6762f
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 2 15:47:14 2017 -0600

    makefiles too

commit 66b06332dadd83c309bbfe02240b7a071fd57ff2
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 2 15:41:56 2017 -0600

    initial skeleton of CortexELF support

commit d318b5cfc1a0312697739576d35cc1a190d88849
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 1 12:23:24 2017 -0600

    first rough cut at skeleton of code for pnpservo .. altos boots and runs

commit 190cdaa5cb18e78caeeaaaaed6a9d304e939eb6b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 5 22:42:37 2017 -0800

    doc: Rename telemini doc file from telemini-v1.0.inc to telemini.inc
    
    This file now contains information on both TeleMini versions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7bb4dbab45f98dd5fd85d9daf12d27b153c0ef3a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 5 22:33:36 2017 -0800

    ao-tools/ao-flash-stm: Use openocd instead of st-utils
    
    openocd upstream and debian package can both flash stm32l processors,
    so use that in preference to st-flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f004eaa2c26b4c61a8c3de2c0667a4e9865e704d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 2 13:37:12 2017 -0800

    ao-tools/ao-flash-lpc: Adapt to current openocd LPC support
    
    Openocd 0.9.0 has generalized the lpc11xx support for all lpc11xx
    processors, not just the lpc11u14. This replaces the specific
    lpc11u14.cfg with the general lpc11xx.cfg file.
    
    Unlike the build we were using, this doesn't adjust the
    'verify' command to adapt for the checksum which gets added during the
    flashing process. Hence, we disable verification and trust that if the
    flash loader works to load the OS, it's fine.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59aaac44e3e164b326518b324b52d115fbb76fca
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 1 14:01:59 2017 -0800

    telemini outline svg had wrong version number

commit b5a42665d7811707b6bd4a67d7d8e6532daa29e4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 1 13:53:36 2017 -0800

    Add initial TeleMini v3 docs
    
    Uses pictures of the prototype.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1c2a5729da00be9d393015bbaa2d2f58e936d84
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 20 17:34:43 2017 -0800

    altos/nucleo-32: Update lisp files, add beeper support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1956000ba2e6260977aa669475d3ff725578b55
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 20 17:32:09 2017 -0800

    altos/lisp: Not quite ready to start making it look like scheme yet
    
    Lots more code to write before these symbols can be exposed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9603d737e9ea58217ff2c2dd7c350c7a29fba980
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 20 17:29:15 2017 -0800

    altos/stmf0: Support timer 2/3 for the beeper
    
    Tested on timer 2, all four channels.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 003e9479ad4364d9f7acf189b35f32ccdfd43be0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 20 16:51:09 2017 -0800

    altos/stmf0: Support tim1 beeper channel other than 3
    
    ch1 was broken and ch2 didn't have any code at all.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3c3f5e316c0c2464568db883d50881f5b898abac
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 20 17:33:37 2017 -0800

    altos/telemini-v3.0: Add beeper defines needed for more general beeper code
    
    The beeper code now wants to know which timer, port and pin are in use.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc4bee9600be22531fd3c5bec15f712eb2e7ed2d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 20 12:18:58 2017 -0800

    altos: Add stm-vga demo project
    
    Uses the VGA and PS/2 drivers to provide an interactive console.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0eadc2d50417408beebd50e4a0e7e12430ed67ef
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 20 12:16:27 2017 -0800

    altos/stm: Add draw and lisp to make search paths.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c296acd643698d0128e2f58f91a9cfeea63f580a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 20 12:21:39 2017 -0800

    altos: Add console driver using VGA and PS/2
    
    Provides an interactive text console.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1d52178ce63ebdc44c83d1bca5027942e2d778c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 20 12:19:42 2017 -0800

    altos: Add PS/2 keyboard driver
    
    Interrupt driven, includes standard US keymap.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b39d3093c3b87689717bb03988d160473c53c64
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 20 00:04:27 2016 -0800

    altos: Add VGA driver for STM32L processors
    
    Generates vsync/hsync using timers and pixel data using the SPI port.
    320x240 video using 640x480 mode and a 24MHz "pixel" clock.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1301d576d9bface4cc625e4a4187401f93f54444
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 20 12:17:42 2017 -0800

    altos: Add bitmap drawing code
    
    Includes solid fills, text and lines.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a487d2fcba57141f6b083d5612c76bac5ad1ac7c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 20 12:15:45 2017 -0800

    altos/stm: Add nvic priority register fields. Add more TIM234 defines.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80fd7f7bef5320ce86048d74dc4a72e1ec361120
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 20 12:14:10 2017 -0800

    altos/stm: Make i2c code handle PCLK1 of 24MHz
    
    Just adds the necessary defines to the code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72ea90d28817549c4343d2fea03a4c951f849cbe
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 20 12:12:43 2017 -0800

    altos/stm: Allow DMA channels to be hijacked by other code
    
    This lets code which needs finer control over DMA to use the channel
    without interference, and leaves the DMA engine running so that it can.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5dc5e2e238f8c1a8ca35d85ec046124afa9385ad
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 10 14:45:25 2017 -0800

    altos: Allow for console to be used for stdio
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e6fb0f13ba230ad9ce86cfa7f56491a0a3bd4b3d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 10 14:43:07 2017 -0800

    altos/avr: Avoid warning about unused args in stdio_put and stdio_get
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 839eadbc8e5694842eb498c6e47cfbf08ba8fbf4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 20 02:59:40 2016 -0800

    altos/stm: Allow use basepri instead of primask for masking interrupts
    
    This allows for high priority interrupts (priority 0) to run, even
    when other interrupts are blocked. Code executing in such interrupt
    handlers must not attempt to control task execution as that will race
    with the scheduler.
    
    Select this by defining AO_NONMASK_INTERRUPT in ao_pins.h.
    non-maskable interrupt priority is AO_STM_NVIC_NONMASK_PRIORITY
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 088ddbb177efc8be2fc467524dc1668553080d3b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 20 20:54:10 2016 -0800

    altos/stm: Interrupt priority is in the upper bits of the priority mask
    
    Because the STM32L only offers 16 priority levels, the bottom four
    bits of each priority mask are not used. All of the interrupt priority
    settings in the system were using values < 16, making them all
    effectively the same. Fix that by moving them into the upper 4 bits
    and using symbolic constants everywhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 992eee8e0b4c6c774f3355af107fb422019ff4e5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 20 20:56:01 2016 -0800

    altos: Don't wait while idle if trying to minimize interrupt latency
    
    Keeping the scanout running reasonably means keeping interrupt latency
    constant, and that requires leaving the CPU running. Don't wait for
    interrupts when the system is running in this mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0c187dd6479996b83f85b6decf303ec0fc70fe5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 6 09:10:23 2017 -0800

    ao-tools/ao-usbload: Pad image with 0xff instead of random bits
    
    Clear the temporary block to 0xff before copying in the target data so
    that any unused bytes end up being left at 0xff instead of inheriting
    whatever data was in the block before.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 61f729567ff6355ab52c3e83399761103022a41a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 17 20:57:38 2016 -0800

    altos/cc1111: Remove unneeded initialization in ao_timer.c
    
    The timers are all stopped when the chip boots, so no need to stop
    them. This saves some text space, allowing the current code to (just
    barely) fit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1029a6e4a61b20698e00e29fc0c8c3877f1e7b0f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 19 17:36:04 2017 -0800

    altoslib: Add TeleMini v3 support
    
    eeprom, telemetry and monitor idle. This is just like TeleMini v2,
    except the ADC ranges are all difference as the voltage dividers are
    different and the ADC itself has a different range.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c272d8e50d0b23f31a6a9ebdad81fc514936222
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 19 17:40:28 2017 -0800

    altos/telemini-v3.0: Swap main and apogee sense pins.
    
    These were just hooked up wrong in the software.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59ac667c4ae14e0fa699fb0f398d31763a237646
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 19 17:39:21 2017 -0800

    altos: Split out TeleMini v3 log/telem labeling
    
    Allow the ground software to know which TeleMini version is in use,
    even though they are very similar with only ADC values differing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c75736c9cd8f869c257a3024efda843cf0edf2a3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 18 22:56:49 2017 -0800

    altos/telemini-v3.0: Finish initial turn-on
    
    TeleMini v3.0 is nearly working; there are some ADC issues still, and
    lots of altosui work left to decode the new telemetry packet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit efdeb402d04e7f04ad4bd2764f8f1ca7270b3dff
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 3 06:52:57 2017 +0100

    altos/telemini-v3.0: Update to second prototype version
    
    Separate radio xtal means we run the processor at 48MHz.
    Fix the battery monitoring voltage divider resistor values.
    Disable most of the code until we've got the radio working.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97c814bc12893bee40f9dc38fabbaa69e0dc6aed
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 28 15:35:48 2017 -0800

    altos: Initial TeleMini v3.0 code
    
    For first prototype, which attempted to use the SoC clock for the radio.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b94fe9915b33283df6b86bcdc96ceada1fc71ce6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 19 17:42:05 2017 -0800

    altos/stmf0: Add adc and beep support for TeleMini v3.0
    
    Note that the ADC code is running very slowly as required by the high
    impedance dividers on the TeleMini v3.0 pyro circuits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1dc31a46f1d1adfdeab444664e581a780d995bf7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 18 22:49:34 2017 -0800

    altos: Require SPI speed to be declared for cc1200
    
    The cc1200 can't run SPI faster than 10MHz, so make sure every device
    picks a SPI clock slower than that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bf267a6e2d401c8bd6a06d995e3d000777d622a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 18 22:55:41 2017 -0800

    altos: Allow applications to define LEDs for ao_report.c
    
    In case they don't have both a red and green LED.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf10239e5485a101fcd7a12b28be927af94d577a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 18 22:54:35 2017 -0800

    altos/stmf0: Allow projects to not use the USB boot loader
    
    Let applications define HAS_BOOT_LOADER on their own if desired.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3770a5f527cb6d519ce22fe91e0cc4078bf72661
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 18 22:53:03 2017 -0800

    altos/stmf0: Complain if the SPI configuration isn't complete
    
    If the pin usage values SPI_1_PA5_PA6_PA7 or SPI_1_PB3_PB4_PB5 aren't
    defined, then the speed values for the pins aren't going to get set
    correctly, which results in erratic SPI behaviour.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f85997eb53779e637dca697d0d96da7d1235fa80
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 3 06:51:11 2017 +0100

    altos/stmf0: Allow apps to leave interrupt vectors at 0
    
    TeleMini v3.0 doesn't need a boot loader, so we'll have the app run
    its interrupt vector right at the bottom of the address space instead
    of copying it to the bottom of ram and reconfiguring the chip to use that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f43c3ad0c643f714c523e513bdc8585c6d5a4050
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 18 22:46:29 2017 -0800

    ao-bringup: test-chaoskey needs to use the SerialNumber dmesg line
    
    I had a locally hacked kernel which was reporting the serial number
    along with the device name. Instead of depending on that, just look
    for the regular SerialNumber report which is in all kernel versions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a21c7b5156e428a4f8e029fdb652c8ca1c63823b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 3 06:47:32 2017 +0100

    ao-bringup: Allow serial number on turnon_easymega cmdline
    
    This makes it a bit quicker to do a batch of them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51edc29f5ba758ef8ba4fdd5f53fdabc6a31c98a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 28 15:33:53 2017 -0800

    altos: Eliminate printf format warning with long vs int
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d96224c2fdc535d08de23aec30d62d4ada9fb8d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 22 15:29:13 2017 -0800

    altos/chaoskey: use both halves of the CRC
    
    When pulling 16 bits from the 32-bit crc, instead of just using the
    low bits, xor the two halves together. This appears to even out the
    number of zero and one bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc076747f6cc00508aef909a3a5bd3edf8c9bd66
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 18 12:14:59 2017 -0800

    altos/lisp: Start adding scheme symbols
    
    Migrating to something more like scheme
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9c85c9d60334edc2af65a47124873e94e0ff1e9c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 10 14:47:03 2017 -0800

    altos/lisp: Add casts to keep the latest GCC from whinging
    
    Something about alignment issues.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 399ba0a62422f71ff9669ba03b6a058bb2981c27
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 10 14:45:59 2017 -0800

    altos/lisp: Tell compiler that the two lisp memory pools are aligned
    
    Otherwise, it will generate unaligned accesses to things fetched from
    them. Sigh.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30d6b241447cb922b9316e86817f6e31eb973eed
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 20 01:41:59 2016 -0800

    altos/lisp: Clean up hanoi.lisp demo a bit
    
    No serious changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 329f76d5e2732ab1c1b10223842d7816275c7e8b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 18 23:37:44 2016 -0800

    altos/lisp: Move stack recursion check after null check
    
    Don't crash when printing null stack this way.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1999b2c915bd5b7df70cffa7777e411d3032d2d5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 18 22:57:22 2016 -0800

    altos/lisp: Include memory stats for test program
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 129e07ccc9b8a33491a905a91ca6c5b0509aba9c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 18 22:53:36 2016 -0800

    altos/lisp: Cleanup some DBG defines
    
    Get rid of the remaining duplicate defines.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c80fea1936ff956df127b43e65139afec3929a0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 18 22:52:53 2016 -0800

    altos/lisp: Share binary search for memory chunk between mark and move
    
    Save some text space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b1bc92e6781c563e3d3b117b9cda2dddccc44de
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 18 22:52:10 2016 -0800

    altos/lisp: Add builtin 'collect'
    
    Collect memory, return amount free.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c3a4d7721f0f5d082336b8cc9c9d765ad2f7d17e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 18 22:41:46 2016 -0800

    altos/lisp: Sort frames by atom
    
    Fortunately, the collector always retains the relative order between
    addresses, so we can sort based on the atom address itself. This
    reduces the time spent looking for names in larger (e.g. global)
    frames.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f833f31f625526a5f1e9a1bd561733b5bb2bcaa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 18 21:17:54 2016 -0800

    altos/lisp: Build new ao_lisp_stack.c into test and lambdakey
    
    Helpful to include the new source file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35424031747b41b1125e715a975f1679b89fc27a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 18 21:16:11 2016 -0800

    altos/lisp: bounds check in move_map plus binary search
    
    This makes move_map faster by skipping all addresses which aren't
    changing.
    
    Also changed the interface from address to offset to avoid computing
    the offset multiple times.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85db6d68a273859482e036b60fec7e2b84e9c262
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 18 21:15:33 2016 -0800

    altos/lisp: Empty lambda body is not an error
    
    It's not very exciting, but it's still legal
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ecef616599d5ec4fd5d42e67d0dc779a0630079b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 18 21:14:47 2016 -0800

    altos/lisp: Use poly stashes for stacks
    
    Saves some memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4c812b8c903bd7e689572f8800ecc092af9cfe18
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 18 21:12:50 2016 -0800

    altos/lisp: Make DBG settings global
    
    This avoids having different values in different files, which wasn't useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e600fc409c577eec02af612a36431c477a9c875e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 18 19:04:05 2016 -0800

    altos/lisp: Add continuations
    
    This provides call/cc and makes 'stacks' visible to the application.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2cc8ca2b781be0a6e7ce14405eb4611bc00a3a3e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 17 18:45:31 2016 -0800

    altos/lisp: Take advantage of implicit progns in hanoi demo
    
    Remove extra progn wrappers now that cond, lambda and while all
    support implicit ones.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 11c79167cdd56015bbd1645db2d4394dcb4f0fbb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 17 16:52:30 2016 -0800

    altos/lisp: have 'while' return the last body value
    
    Instead of always returning 'nil', let while return the last body
    value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9126ae10b3c5acf0055caa31b1f08215675af784
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 17 16:51:34 2016 -0800

    altos/lisp: Take advantage of implicit progn in ROM code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eaa528e4e62ba1d9765888760d387303487b2e01
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 17 16:08:15 2016 -0800

    altos/lisp: Make lambda, cond and while all have implicit progns
    
    This lets all of these execute more than one sexpr, returning the
    value of the last.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ffaf73407bcdf6bc4120c90212de4a2f52cf7991
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 17 16:07:42 2016 -0800

    altos/lisp: Compile ao_lisp_make_const -no-pie
    
    Makes debugging easier
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51bdee662fdfad1937c576daadd2e5eacac17905
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 17 16:06:55 2016 -0800

    altos/lisp: Fix uninitialized values in ao_lisp_make_const
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84732aebd10c293101727ba567bfc733dc30efca
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 17 16:06:05 2016 -0800

    altos/lisp: Dump globals on error
    
    Useful for debugging
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 05ac336ea954c0f5eefabdefb0c8c5747be3fd32
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 17 16:05:29 2016 -0800

    altos/lisp: Fix error atom name in ao_lisp_length
    
    Cut&paste error.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ce7ab37df07b3c1ea1ca9befc06477e3b6cdeac
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 17 16:04:38 2016 -0800

    altos/lisp: Remove some stale frame debugging checks
    
    No-one sets frame->_num to 0xff to hit these
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d37945f1404043e6bd287ce7ad7a57bc3289609b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 16 14:59:08 2016 -0800

    altos/lisp: Clean up hanoi.lisp comments.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bcf5eb5825b1217d74f117b02d09b4ce4b007beb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 16 14:12:59 2016 -0800

    altos/lisp: Eliminate compiler warning about array bounds at -O3
    
    Using ao_lisp_pool - 4 caused the compiler to whinge about computing
    an address outside the bounds of the array. Sigh. Restructure the code
    to do the adjustment-by-4 in the integer computations instead of the
    pointer ones.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5ef084659205700aab33e81d20fb89833c03249
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 16 14:00:38 2016 -0800

    altos/lisp: binary search for chunk in collect
    
    Speeds up collect a bit
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f19cb10cd12f86b12d0599bab5c2ee351d814ae
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 16 13:59:54 2016 -0800

    altos/test: Disable position independent executables
    
    This makes debugging programs so much harder

commit a7fcf80e22e70516d0b2da314fb17ced20a3f775
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 16 13:47:49 2016 -0800

    altos/lisp: Allow empty defun bodies
    
    This allows for (defun foo())
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit daa06c8dedc6dc1cf21936ee2769d9d25f0567bd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 16 13:19:20 2016 -0800

    altos/lisp: Optimize chunk searching in collect
    
    Note range of existing chunks to exclude objects outside.
    Only look at chunks which have been set to reduce loop cost.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c8f9db184cc929ebde845730a6d4b7864e423a84
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 16 12:34:14 2016 -0800

    altos/lisp: Add incremental collection
    
    Realizing that long-lived objects will eventually float to the bottom
    of the heap, I added a simple hack to the collector that 'remembers'
    the top of the heap the last time a full collect was run and then runs
    incremental collects looking to shift only objects above that
    boundary. That doesn't perfectly capture the bounds of transient
    objects, but does manage to reduce the amount of time spent not moving
    persistent objects each time through the collector.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8406ddf8f0bd5453d6213973daed35991f80972a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 15 20:37:59 2016 -0800

    altos/lisp: Make hanoi example output a bit prettier
    
    Make the towers symmetrical instead of lopsided. Much nicer looking.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 472ecec64213e6c37b588d69ca2e8efd5e9abe36
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 15 20:25:03 2016 -0800

    altos/lisp: remove nth from hanoi.lisp
    
    It's now in ROM.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5161f6d78647591cc7ab8774a04edbc68a09f689
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 15 20:24:33 2016 -0800

    altos/lambdakey: Strip out unused code
    
    Make space for more lisp bits!
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac0f7768659e288338bf452b4248ae3572ea2f7d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 15 20:22:54 2016 -0800

    altos/lisp: Take advantage of multi-arg macros. Add more ROM funcs
    
    Added nth, or and and.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a00bf4ac12a6505d4b23d94e99b4b46bf679020
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 15 20:21:47 2016 -0800

    altos/lisp: Allow macro/nlambda/lexpr to have multiple args
    
    Entries from the params are bound to the formals with whatever
    remaining formals there are bound to the last argument as a list.
    This makes writing functions a bit easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c1fa73f159de9d9839e8619494c26931521d2d4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 15 20:20:14 2016 -0800

    altos/lisp: Do better checking for un-evaluated macros in ROM
    
    Need to look at immediate lambdas as well, and also deal with
    recursive functions by checking for recursion at each atom
    dereference.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 881161fe1c5fb0e2b1220c30572eb2c45bedbafe
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 15 20:18:59 2016 -0800

    altos/lisp: re-use small frames
    
    This saves a pile more use of the allocator by noting when frames have
    not been referenced from another frame and freeing them when they go
    out of scope. Frames with references are left to the allocator to deal
    with.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 994adc7a47cbf3cbf6041eca7430273f8018de08
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 15 10:32:36 2016 -0800

    altos/lisp: remove duplicate 'length' lambda from hanoi example
    
    This function is now a builtin.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41175ff82bc0e35c99c60b49aa62944a12917157
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 15 10:18:12 2016 -0800

    altos/lisp: Get lambdakey and nucleo-32 building again
    
    Remove exti from the build list to make things fit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 974717eb9dad105c9897ee24f953d98d57eaec77
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 15 09:55:22 2016 -0800

    altos/lisp: Evaluate macros once, then smash them into place
    
    This assumes that macros are all pure functions, which should be true
    for syntactic macros.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3b5bd2c14cfcde6c551a87ee6da08a53f1e4bc6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 14 23:04:05 2016 -0800

    altos/lisp: Add license to hanoi demo
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 13a4d451b903d08e52005bcf531efa8de351bf2b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 14 21:27:41 2016 -0800

    altos/lisp: Improve hanoi demo
    
    Repaint in place, without first clearing. This makes the updates a lot
    clealyer looking.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 74ff0c6fd6c41cdaa054dcdb3d05c7d333bc24ff
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 14 21:27:03 2016 -0800

    altos/lisp: Show number of collect calls in ao_lisp_test
    
    This helps tune the allocator
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5557f6b87a9b8bc9716de8191f2062a772a6ae6c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 14 21:25:38 2016 -0800

    altos/lisp: Cache freed cons and stack items
    
    Track freed cons cells and stack items from the eval process where
    possible so that they can be re-used without needing to collect.
    
    This dramatically reduces the number of collect calls.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce549b2c11e6b2571590021e1c0503d8a6e7a702
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 14 19:55:36 2016 -0800

    altos/lisp: Simplify GC a bit by only marking the head of each object
    
    We don't need to mark the whole object now as we're getting
    information about where objects are by walking the tree each time
    around the loop; ao_lisp_busy is only useful for terminating the walk
    now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ddb4b8d90478ae324aa207a7541352c1ac9451ee
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 14 18:45:12 2016 -0800

    altos/lisp: Change GC to do moves in batches of 32
    
    This should make it quite a bit faster than doing one at a time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit affcf6ffc08313151541993ee543bfe390165e81
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 23:38:03 2016 -0800

    altos/stmf0: Add a comment about the requirements for using ao_flash_stm
    
    Need HSI clock and the flashing functions loaded in ram.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30db58ade19ec69272a8c39c2f13d7919ca491a9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 23:36:22 2016 -0800

    altos/lambdakey: Get save/restore working
    
    Need the HSI clock running for the flash hardware to work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 33aeffc123af1f9063969acf585f1caac885ced4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 23:34:54 2016 -0800

    altos/lisp: Append a CRC to the saved image to validate on restore
    
    The CRC is actually of the ROM bits, so we can tell if the restored
    image relates to the currently running code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f2d60b4c029bffaa559bd1f31f5b15230dfa674
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 21:18:50 2016 -0800

    altos/lisp: Add save/restore to ao_lisp_test
    
    Allow testing of the save/restore code under Linux.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dba374516ed396633659dec571b6a44b03da8ad1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 21:16:09 2016 -0800

    altos/lisp: Add save/restore infrastructure. Needs OS support to work.
    
    This sticks a few globals past the end of the heap and then asks the
    OS to save the heap. On restore, the heap is re-populated by the OS
    and then various global variables reset.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29c890b4599b3bbdbd09a5915ea68a63f4e0a9ac
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 21:11:13 2016 -0800

    altos/lisp: Make sure memmove only happens once per object. Other GC fixes
    
    The memmove may be overlapping, so make sure it happens only once by
    just checking whether move_size has been set, rather than looking at
    ao_lisp_moving; that doesn't get set when moving a noted cons as that
    still needs to be walked at a later time.
    
    Fix up the various looping move functions to all use the same
    pattern. Atom was busted.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d46ca67f93e9ecbc4d8c051c3fbdead85490b690
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 21:07:09 2016 -0800

    altos/lisp: Make ao_lisp_ref and ao_lisp_poly non-inline
    
    These functions are pretty large and end up consuming quite a bit of
    space if inlined everywhere they are used.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00827a0ffe30938c26be216369fd2d8f8946d2c4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 00:28:57 2016 -0800

    altos/lisp: Share mark function for mark and move
    
    These two operations both wanted to walk the referenced objects;
    sharing is caring.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f7e2431f5d1f7c1782ed6e774ccfc70fb4c87cf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 00:28:31 2016 -0800

    altos/lisp: add length, pack, unpack and flush
    
    lots more builtins
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f5a36c15f894803f8804bbc3daf105eed53d5ff6
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 10 23:31:10 2016 -0800

    altos/lisp: Add towers of hanoi example
    
    Uses vt100 escape sequences to animate the display even.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7da6bfc195fad97e3afc576c609897c131fd4d8c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 10 23:29:21 2016 -0800

    altos/lisp: Deal with memory compation in the middle of operations
    
    Handle memory compaction in places where we've got pointers into the
    heap across an allocation operation. Either re-compute the values from
    managed global references or add new roots across the allocation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 137898e3431d887e75b09d8c1ce57297a1558e43
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 10 23:28:26 2016 -0800

    altos/lisp: Improve lisp test program UI
    
    Add a prompt for stdin, read from other files on command line before
    stdin.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92cdc0cf0e80c1ff3f31cce20fc2b9bda86e3638
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 10 23:25:56 2016 -0800

    altos/lisp: Make read() return eof atom on end of file
    
    Also make it an exception to hit eof in the middle of an sexpr.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb710f7f4f24f74ac3d45fcc423803384d986bb2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 10 23:24:11 2016 -0800

    altos/lisp: use regular read-eval-print loop for make const
    
    No need to open code this sequence of operations.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7d7cdc2318a97534c4c1f9c6fd2b51644be729d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 10 11:30:55 2016 -0800

    altos/lisp: add progn, while, read and eval
    
    Progn as a builtin will help with tail-recursion.
    while provides for loops until tail-recursion works :-)
    read and eval are kinda useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 417161dbb36323b5a6572859dedad02ca92fc65c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 9 16:22:43 2016 -0800

    altos/lisp: Clean up OS integration bits, add defun
    
    Provide an abstraction for the OS interface so that it
    can build more cleanly on Linux and AltOS. Add defun macro.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0ee44c8e4bf5dabe6a97bf76b366c8b767c387f8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 9 11:13:58 2016 -0800

    altos/lisp: macros appear to work now
    
    Needed an extra stack frame to stash the pre-macro state. This
    simplified macro processing quite a bit; a macro now just evaluates
    the function and then sends that result to be evaluated again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 794718abc62f4610495fe2bd535a2b67bc46573c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 9 09:14:50 2016 -0800

    altos/lisp: working on lexical scoping
    
    Not working yet
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb4cdb115ad83ae0d75eb58e68f561d20279f027
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 21:47:31 2016 -0800

    altos/lambdakey-v1.0: Tweak memory allocations
    
    With non-recursive GC, more memory is available for the heap
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e5c1308ce33a864095eae02e7db18b0e043ab6e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 6 10:53:46 2016 -0800

    altos/lisp: convert GC to non-recursive
    
    Use a boolean array to note cons cells which would otherwise recurse,
    then loop until that array is empty.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8cf97fe22acefab40d7bb321138e46d4483fef7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 5 17:53:15 2016 -0700

    altos/lisp: more GC issues. add patom
    
    Use global ao_lisp_stack instead of local stack so that gc
    moves of that item work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 286d07d83bd7ff361e5a904c151a75e5a9c8b071
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 5 15:12:05 2016 -0700

    altos/lisp: make sure stack->formals_last gets moved during GC
    
    Failing this leads to broken formals chains
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3366efb139653939f053c1fe4aba352ba3b66c94
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 5 14:51:58 2016 -0700

    altos/lisp: Change GC move API
    
    Pass reference to move API so it can change the values in-place, then
    let it return '1' when the underlying object has already been moved to
    shorten GC times.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6fc1ee0f7adc6fcb3e850bcbaabc1db705314234
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 4 16:51:12 2016 -0700

    altos/lisp: get builtin macros working again
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9456362c8bad8cd9be717f591f2d0841f88eb50
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 4 16:31:34 2016 -0700

    altos/lisp: Start rewriting eval as state machine
    
    Ad-hoc code was incomprehensible and I couldn't make 'cond' work, so
    I'm starting over.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c48bda3625fc507134da7b4af87a634e8eb3715b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 3 21:51:26 2016 -0700

    altos: Add lambdakey
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 77db0e8162cd01c2b42737b3d71b38cea942484f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 3 21:49:50 2016 -0700

    altos: Add lambda support to lisp
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 11cb03b1d336ee90c422be27588f57be573a9546
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 2 22:56:01 2016 -0700

    altos/lisp: Separate out values from atoms
    
    This enables changing values of atoms declared as constants, should
    enable lets, and with some work, even lexical scoping.
    
    this required changing the constant computation to run
    ao_lisp_collect() before dumping the block of constant data, and that
    uncovered some minor memory manager bugs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e1a787f8828fb7b750ad3310c89a89536ea5286
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 2 14:18:54 2016 -0700

    altos/lisp: add set/setq and ' in reader
    
    Along with other small fixes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8362393a621ea78a96e7f65f602f4bfc7bbd1158
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 2 14:18:31 2016 -0700

    altos/stmf0: Add lisp to include directories
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit caba623cb013b73e1f0ca369edf98e0376bec41a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 2 14:14:23 2016 -0700

    altos/kernel: Make ao_cmd_readline public. Return char from ao_cmd_lex.
    
    With these two changes, the readline function can be used by other
    code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2408e72d1e0d3459918601712b09860ab17e200
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 1 21:14:45 2016 -0700

    altos/lisp: Change lisp objects to use ao_poly everywhere. Add const
    
    This makes all lisp objects use 16-bit ints for references so we can
    hold more stuff in small amounts of memory. Also adds a separate
    constant pool of lisp objects for builtins, initial atoms and constant
    lisp code.
    
    Now builds (and runs!) on the nucleo-32 boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2f4d25cd6f6f3787d4ee99264732d5b2ce23d4c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 31 18:53:09 2016 -0700

    altos: Add lisp reader

commit 56d46ceaa1413415f25e47e81036426132f99924
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 31 16:43:44 2016 -0700

    Add first lisp bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2cfcc622c94d87cdbee099f457b7d63cb2fcbc71
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 25 12:21:29 2017 -0700

    use elf, not ihx

commit 4ae8eeb426ef60105ec8e53e289739e5a8ae5dae
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 25 12:00:20 2017 -0700

    stop using /usr/share for binaries in remaining turnon scripts

commit f2c7bb5879ba22df05fd1e39f01ea692313306fd
Author: Richard Hughes <richard@hughsie.com>
Date:   Tue Jan 10 17:15:24 2017 +0000

    altos/chaoskey: Add a metainfo for the ChaosKey
    
    This provides the information necessary to reflash chaoskey using
    standard Linux device firmware tooling.

commit 89ecc32b90565ace078c4a84d4406a4d1f86821a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 17 20:58:36 2016 -0800

    altos/arm: Align data so that gcc 5.4 doesn't do byte-accesses. Add -Wcast-align
    
    Gcc 5.4.1 tracks alignment of data through assignments, so that a
    uint32_t pointer which comes from byte-aligned uint8_t data:
    
    extern uint8_t foo[];
    
            uint32_t        *q = (void *) foo;
    
    Fetches and stores through this pointer are done bytewise. This is
    slow (meh), but if q references a device register, things to bad very
    quickly.
    
    This patch works around this bug in the compiler by adding
    __attribute__((aligned(4))) tags to some variables, or changing them
    from uint8_t to uint32_t. Places doing this will now be caught as I've
    added -Wcast-align to the compiler flags. That required adding (void
    *) casts, after the relevant code was checked to make sure the
    compiler could tell that the addresses were aligned.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f650211f9e99e1d3d0ae13ae559dd1c082f71545
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 12 16:44:47 2016 -0800

    altos/stm: Make ao_usb_set_address static. Saves a bunch of text space
    
    I'm sure this makes the function end up in-lined, which saves enough
    text space to fit the flash loader in ROM again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d46698a01ed4903d36635b34867bfc4bb8fbafc6
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 17 22:17:20 2016 -0800

    ao-bringup: Improve EasyMini turnon and test scripts
    
    Wait less time before trying the test script.
    Have the test script wait for the device to appear. And then use
    colors to help make the results clear.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5e24d637a8af09bf64beb7fcf7be4c13eee76a43
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 9 19:42:42 2016 -0700

    altos/test: Fix tests
    
    A couple of fixups for ao_flight_test to dump pyro info only when
    running in debug mode, and to change the aprs testing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e3d8ad6de7d2dfabe45a285b27f465ba68844f05
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 30 19:08:14 2016 -0700

    altos/nucleo-32: Add basic support for STM32F042 Nucleo-32 board
    
    This hooks up the LED, USB and the USART.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 148f6e0a107d9e88509958700351794f2f971312
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 30 19:06:20 2016 -0700

    altos/stmf0: Add USART support
    
    The STM32F0 usart can be operated much like the STM32L usart, but the
    registers are all moved around.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26f2727eac0cca8930dde9d757bc094f73801859
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Oct 2 17:19:14 2016 -0600

    augment TeleDongle turn on script to support serial number on command line

commit 66d4b5ea4031193e3c79ebdabeb381aae46fe93b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 22 03:23:34 2016 +0300

    Update pdclib to version using arm-specific 'ar' program
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c1ab416728c942ddf176f881f025840ada6bf93
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 5 22:25:07 2016 -0600

    Fix release note html to remove xml bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4fdf8ca9ca1cd5a84b03bd7a03c5806af64b413d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 5 20:55:17 2016 -0600

    Remove pyro wizard file from master
    
    This isn't done yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 89b8b2ee98e8d329559f54058c574ba9122ced8e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 5 20:46:05 2016 -0600

    Bump version to 1.6.8
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a37b687670dd1ccb0274e5fe6bf6145c4fc5acc8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 5 20:45:12 2016 -0600

    altosui: Don't ship TeleMetrum v3.0 firmware (yet)
    
    We haven't finished this yet, so don't deliver firmware for it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 45084fd04326b979f349870f09ff9af1b3155cbe
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 3 21:02:35 2016 -0500

    Add 1.6.8 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9279b0cd52333a846b57af890f708ebb364b62b7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 3 01:21:34 2016 -0500

    altos/stm: Set SPI slave DMA priority to HIGH/VERY_HIGH
    
    Set spi slave DMA priority MOSI to HIGH and MISO to VERY_HIGH. Slave
    SPI doesn't have the luxury of slowing down when the system is busy,
    so provide it maximum memory bandwidth to try and keep up with the
    master.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d80995c4535a3655ca1b9ca674d6839cfef84c4e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 3 01:20:20 2016 -0500

    altos/stm: Set i2c recv DMA to HIGH
    
    Make sure receive DMA is higher than any TX dma so that
    it always runs in preference.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af2eefbed43e56885a7321319d69b7be17354cdd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 3 00:55:19 2016 -0500

    altos/stm: Set MISO DMA priority to HIGH to avoid OVR
    
    When the MISO DMA priority is too low, and the processor gets busy,
    it's possible for SPI input to overrun the processor, which causes the
    MISO DMA to get out of sync and never finish. Set the MISO DMA
    priority to HIGH to avoid this.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4fc5cfa2c63c43ab0a9ef7e0cc6832fb1c163bd6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 3 00:53:44 2016 -0500

    altos/stm: Create funcs to set SPI DMA parameters
    
    Instead of having nearly duplicate versions of the SPI DMA
    configuration calls, create helper funcs that do most of the work so
    that the SPI API funcs are shorter and clearer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1710a4921d4f408300c7d5adf0e83d08cc86be20
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 3 00:52:12 2016 -0500

    altos/stm: Make ao_spi_duplex out pointer const
    
    Provides a bit better typechecking opportunities for this function.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d913dde1fa58cbcb5edbc88405180e37ba0dbcd
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 2 23:40:03 2016 -0500

    Bump version to 1.6.7.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30e8f003381c30434058905f53f5a219ac5feb4f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 2 23:36:36 2016 -0500

    ao-tools/ao-cal-freq: Re-open usb device each try
    
    Instead of trying to re-use the same file descriptor, close and
    re-open the device each time around the loop to avoid getting stuck
    when calibrating TeleMega boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ea30c1909b3ae23918ea6d0a53d2c4065b08763
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 2 23:34:47 2016 -0500

    ao-tools/ao-usbload: Fix -f flag, remove debug hacks
    
    The code to validate the usb id and product name had some debug hacks
    left enabled, which caused it to fail. The short -f version of the
    force flag was also not getting parsed correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dfaabc1ca3aaad0d249283308b06d3e0567f0c59
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 2 23:33:27 2016 -0500

    ao-bringup/turnon_telemetrum: serial on cmd line. Loop on accel fail
    
    These make the script easier to use
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8bbef0c7039f4a0c6ac368fd994c2e52d84d293c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 2 16:13:25 2016 -0500

    altosui: Deal with connect failure in AltosConfigTD
    
    When the USB connection times out, abort any pending operations and
    clean up the thread correctly. Also, deal with the serial line being
    closed by checking for null.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b2d013aef5b76ff527e8174dff7f6ffe0dfaefae
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 31 21:27:10 2016 -0600

    ao-tools/ao-cal-freq: --verbose option has no parameter
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08923aa0cf31ae7bd73b66b4d1cd81fae4241ff0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 31 21:25:59 2016 -0600

    ao-bringup: telemega allow serial on command line, loop on accel fail
    
    Allow the serial number on the turnon_telemega command line, instead
    of reading it.
    
    When accel cal fails, loop waiting for it to succeed instead of
    continuing blindly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab75ab10564c4d5d05719c382a3b71585cd70710
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 29 09:27:53 2016 -0700

    altos/cc1120: remove unused status from ao_radio_fifo_write_stop
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 462039c769f2db9328b04759807c30691f2b96c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 14 15:57:39 2016 -0700

    ao-usbload: Check target device name to avoid mis-flashing
    
    Instead of blindly loading firmware, go get the old device's name and
    make sure it matches the new firmware.
    
    Add --force option to allow this to be overridden.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c62816a00b9aa40879a2ea98da2d10667e09b704
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 14 15:55:13 2016 -0700

    ao-chaosread: Parse -i and -b options
    
    Need to pass the single-byte verisons to getopt_long
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af1d41e32fc04d5897fd2dc736391d263af48727
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 22:40:41 2016 -0700

    Bump verison to 1.6.7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46b1234140c04dbfac22be0fdf80be96506b6948
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 22:39:16 2016 -0700

    altos/stmf0: Switch ADC fast to ADC clock
    
    Using this slower clock eliminates sampling problems with the ADC and
    cleans up the chaoskey raw data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 48088d1d6a66c5d5271b52191367f07b09626b29
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 4 09:54:16 2016 -0700

    altos: Flash all LEDS during power on
    
    This tests the LEDS to make sure they all work on the following devices:
    
    easymega-v1.0
    telebt-v3.0
    teledongle-v3.0
    telemega-v1.0
    telemega-v2.0
    telemetrum-v2.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71e3a59e42c284fde8ac2767abd029230ed86e07
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 4 09:52:05 2016 -0700

    ao-bringup: Add colors to chaoskey test result reporting
    
    This makes them show up nice and bright in the terminal window.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc920c80ef447a5bcdf8165b69fb28b8f63609df
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 16:35:36 2016 -0700

    Bump to version 1.6.6
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 165868999f45f4572ff2585fcb3986974a5bbd5c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 16:52:39 2016 -0700

    ao-bringup: Use released files for chaoskey turnon
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4926a69d6e72a035197b3d617c62893a7ea1861
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 16:30:15 2016 -0700

    ao-bringup: Test chaoskey using dieharder
    
    This uses a subset of the dieharder tests which run in reasonable time
    and don't appear to emit false negatives on a regular basis.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d52cb9dac725206ba7b2d26818c84f134d5bf183
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 16:53:17 2016 -0700

    ao-chaosread: Eliminate double-free when serial match fails
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3bdc9028502c766d1c8ddb4f0dedba4bbc22384e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 16:28:17 2016 -0700

    ao-chaosread: Add --infinite and --bytes options
    
    The --infinite option keeps writing data.
    The --bytes options pulls out bits 1-8 which should provide 8 true
    bits of entropy.
    
    This combination allows ao-chaosread to be fed directly into dieharder
    to validate the hardware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 826ad792389150ea8d80e341cb8ea023db83c9a2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 16:26:49 2016 -0700

    altos: Use standard FIPS testing for chaoskey
    
    Check to make sure we aren't repeating a block coming from the
    unwhitened source, which is the standard online FIPS test for RNGs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1934468e96ea9d179abf6e3e728b6b14ce793f46
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 16:53:50 2016 -0700

    altos/stmf0: Clean .bin files from flash-loader dirs
    
    The .bin files are what the DFU utility uses to flash the boot loader
    using USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 782013d0ff2c9f076952c0e172bfcb7016699d5f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 16:32:43 2016 -0700

    altos/stmf0: Hook up clock output support
    
    This was used to try and not have two xtals on telemini, but failed
    because the provided clock has too much noise.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 99753673a4a97423300427e276bf550ae5353842
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 16:31:41 2016 -0700

    altos: Make telelcotwo control two boxes instead of two pads
    
    telefiretwo is now a single pad box, so telelcotwo needs to switch
    between boxes instead of pads on the same box. Do this by re-purposing
    the pad arming switches into a box selector and arming switch.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be84201495fa3cabd699012e57e797355e2bd792
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 27 21:28:34 2016 -0700

    altos: Add 'ao_button_get' to button driver
    
    This returns the current state of the button; useful to check what the
    value is at startup.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a6701283af7ed2b3016a910d6edbe4a5e8304581
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 16:33:52 2016 -0700

    altoslib: Add a 'seconds' method to AltosGPS
    
    This computes the time in seconds since the epoch from GPS time
    information.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 647690dbe084d188ba3973da631871a65f2dc50d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 27 13:29:20 2016 -0700

    altos: Stop building cc1111-based telemini v2.0 firmware
    
    This product never worked, so stop insisting that it actually build.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe13426daff08f2beface2c1906f9a6184f6b987
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 27 13:26:22 2016 -0700

    altos: Don't switch to flight 0 when log fills in flight
    
    If the log is full at startup, we want to transmit flight 0 to let the
    ground station know. However, we don't want to switch to flight 0 in
    flight, so save the initial telemetry flight number (0 or the real
    flight number) at startup and use that throughout the flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71ddb973ff75680e78fbbef7978ab3893c367629
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 27 13:24:57 2016 -0700

    altos: Expose cc1200 radio test functions for telemini bringup
    
    This exposes the cc1200 radio test function so we can load special
    test firmware in telemini to do the radio cal as it has no USB to
    perform that interactively.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59874a062543c61d164089e8b31f55a9b860c0b1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 27 13:23:06 2016 -0700

    fixup for interleave

commit 2507b9f29d25f77de249103805087a704069c625
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 27 13:17:51 2016 -0700

    altos: Don't access cc1120 SPI bus during recv after abort has started
    
    When the receive timeout happens, the radio may still interrupt while
    the SPI bus is getting shut down. If this happens, the interrupt
    handler shouldn't touch the SPI bus at all as it may well be turned
    off, which would cause the receive function to wedge waiting for a spi
    byte transfer to happen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17adfd7939ff697afa96f7207a3fe17b6af789bd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 27 12:24:27 2016 -0700

    altos: Keep telemetry and command output from interleaving
    
    When monitoring telemetry, the frame needs to be sent together on one
    line, not split with the output of a command (like 'a') mixed in.
    
    Use a mutex for products with monitoring to keep command output and
    telemetry output each on separate lines.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1667cb8e8b702b05fc3ec39ee49029885df64a4a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 2 20:00:01 2016 +0200

    altos: Add STM32F0 beep and SPI byte API.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f39bee8875a0595b3d7ec7f5575d1e5eeb7544ec
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 12 21:06:23 2016 -0700

    altosuilib: Show indicator when they switch from invalid back to valid
    
    The 'hide' value wasn't getting reset to 'false' each time the state
    of the indicators was checked, so indicators would get hidden and then
    never shown again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit efd91febfa9bebd2f03508b2240916551450f831
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 12 21:06:05 2016 -0700

    Bump version to 1.6.5.1 after 1.6.5 release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 639d8b3c4353ee25a0536e01653f3a86feb90ad5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 12 15:53:47 2016 -0700

    altos: Add telemetrum v3.0
    
    Like Telemetrum v2.0, but with cc1200 instead of cc1120
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1085ec5d57e0ed5d132f2bbdac1a0b6a32c0ab4a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 18:03:49 2016 +0200

    Switch from GPLv2 to GPLv2+
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd97128e30c47edfcc71f7d872cbdad14867934c
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 5 10:21:29 2016 +0200

    remove debian/ from master branch, it should live only on the debian branch

commit a439ee4ac0398f70209292d015c5b82cd58d1d9f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 5 00:48:07 2016 +0200

    updates made during 1.6.5 release process

commit 65ed2f588ca596fe9aa559bebd590a2a11b9859b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 3 12:00:10 2016 +0200

    doc: Build 1.6.5 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d60133c65b4592f0f8c832135664a8e0c922b4f0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 2 22:52:38 2016 +0200

    Credit Chuck Haskin for helping fix the SPI bug.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14e73d89d7dbb44e9ffab2820aefb693b6e8ef24
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 2 22:08:58 2016 +0200

    Bump to 1.6.5. Add preliminary release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a6a95bb24517af00717fd377bad82ddb2289cf0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 30 20:43:03 2016 -0700

    altos/cc1111: Remove 'show tasks' command
    
    This saves space on cc1111 parts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2e286f66d2b15df128ffe9b40a201242fc4a10a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 29 14:22:32 2016 -0700

    Bump to testing version 1.6.4.2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a04830a636a71808ea8ef5ac5dfa59d6978d9f3b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 29 18:41:24 2016 -0700

    altos: Use FIFO_THR pin for cc1120 transmit buffering
    
    Instead of reading NUM_TXBYTES, set the FIFO_THR pin to indicate when
    64 bytes are available in the buffer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit caf3fc2628c13ff38ffbaabda8aa8d146cda748e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 29 18:33:56 2016 -0700

    altos: Leave USB enabled in flight with -DDEBUG=1
    
    This leaves the command line available for diagnostics when debugging.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6c250711355ae8060e956e786702be250ef4527
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 29 12:55:30 2016 -0700

    altos/stm: clean up ao_exti_enable
    
    Was computing (1 << pin) twice for no good reason.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a35424cd48205af89ba023db979959dc75b06706
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 29 12:54:31 2016 -0700

    altos: Make task list output more useful
    
    Add the timeout value and task id
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c022e094f6f3c551355742a6f9c3deb6e554fe1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 29 16:07:22 2016 -0700

    altos/telemini-v2.0: Remove show tasks command
    
    There's not enough memory for this command, and it isn't necessary.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 349a63aeed6cdeb89bf18c7b2e2c40782c79cc00
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 29 12:52:37 2016 -0700

    altos: Make ao_delay(0) not wait forever
    
    ao_delay() is implemented on top of ao_sleep_for, and ao_sleep_for
    uses the timeout value of 0 to indicate an infinite timeout. Calls to
    ao_delay for 0 ticks would unintentionally hit this case and end up
    waiting forever.x
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b3a24f5f39a1b72cc8947c33b609f454b46aff8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 29 12:49:16 2016 -0700

    altos: cc1200: use FIFO threshold pin output for APRS buffering
    
    Instead of polling the device for fifo space, just use the available
    pin configuration to figure out if there is enough space for a single
    APRS buffer. Then set the APRS buffer size to match the fifo threshold
    setting in the chip so that we know we can write the whole APRS buffer
    once the pin says there's space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 658d8be170f9aea683fe62b68368736a177411a5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 17:03:34 2016 -0700

    altos: Add debug check for irq block when editing task queues
    
    List manipulation operations are not atomic, so interrupts need to be
    blocked while changing them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30eb5d2fa77e036690170e7057fa9df669375ae5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 18:40:46 2016 -0700

    altos/drivers: Use more reliable byte interface for CC1120 reception
    
    This replaces direct register access with function calls to allow that
    code to respect the hardware requirements.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 61ad8e5bf428246ac89cad7cb9a1edf2ef735fd5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 18:39:31 2016 -0700

    altos/stm: Add better byte-level SPI api
    
    This provides inline functions for sending and receiving individual
    bytes, and setup/finish functions to wrap them in. This make the byte
    sending respect the SPI hardware interface requirements.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5866d191cee56949ccab4c154a14604e83163d42
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 18:37:49 2016 -0700

    altos/stm: Clean up spi_enable/disable_index functions
    
    These had an extra level of switch nesting for no good reason.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ab4a8b911e254dc829b61cb0abc9fd0b46b84b3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 27 23:25:01 2016 -0700

    altos/stm: move spi execution to common ao_spi_run
    
    This regularizes SPI hardware use and ensures that the device is
    turned off after it has been used and that the status register is back
    to 'normal' the next time through.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69791ef235161fef404f682fd6955e7eed8dc125
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 27 23:26:20 2016 -0700

    altos: Add STM SPI debugging
    
    This dumps out the SPI hardware state and history of SPI operations
    when compiled with -DDEBUG=1. Without that, this patch does nothing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f418584d4d225827e08f56de86055eb3f074f8d1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 27 17:26:19 2016 -0700

    altos: Add STM DMA debugging
    
    This provides a command that shows current DMA operations when
    compiled with -DDEBUG=1. Without that, this patch has no effect.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e60cd22f6789c94343e6432822cedab028dc1ba
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 18:25:44 2016 -0700

    altos/stm: Change ao_spi_send_sync definition to take const source
    
    Provides for a bit better error checking.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21a29c7452398e0cca0fb90f99fa42a2a0684668
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 17:15:27 2016 -0700

    altos/stm: Add more SPI status register bits
    
    These weren't the original version of the docs that we had.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 785d2697376ebd20531d22441a60c41bd927b42a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 17:12:48 2016 -0700

    altos/stm: use 0xff for dma mutex value for allocated mutexes
    
    DMA channels which are 'allocated' can't be shared. Instead of using
    the value '1' in the related 'mutex', use 0xff which won't match any task.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0dec7d0885970a7d73468dd77220bae78e161b40
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 17:11:38 2016 -0700

    altos/stm: remove ao_dma_abort
    
    This function isn't used anywhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 974aaf73cbb720f1b1183cc239001528b6c7a5b9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 17:09:00 2016 -0700

    altos: Move comment in ao_sleep_for next to related code
    
    The comment got moved to the wrong place
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a7e0bb5eb661cfde31c383d605cb9cb8ca568bc7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 17:04:59 2016 -0700

    altos: Block interrupts while waking tasks sleeping on timers.
    
    Interrupts may not be blocked in the timer ISR, but they need to be
    while walking the pending timer list and moving tasks back to the run
    queue.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 40abb0d1e2f43a60ffa34b055ebb913ee3e20faf
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 00:07:23 2016 -0700

    altosui: Deliver firmware for Tmega 2.0 and TBT 3.0 for Windows too
    
    1.6.4 added Tmega 2.0 and TBT 3.0 firmware to linux and mac, but
    neglected windows.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5b7e81628437389014fdd39e323a6f0176e02ba6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 27 23:28:28 2016 -0700

    Mark testing version 1.6.4.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d15cf1580563aea90e9c47f5b268c9c7bb9ba26
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 24 12:07:36 2016 -0700

    altosdroid: Deal with multiple installed android SDKs
    
    Use the latest SDK's zipalign
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3374a9069618658a33af54472d8670e3086af1e0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 24 12:06:32 2016 -0700

    ao-tools/ao-chaosread: Document length (-l) option
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca59786b5022f592f6516a3ac54708789db14c94
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 20 10:19:32 2016 -0700

    Bump android version to 13
    
    Need to update the maps API key in the package
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 10fa950cb9fee0ba28adfc5ead108657655bb289
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jun 22 15:01:09 2016 -0600

    switch libgtk-3-bin build-dep to gtk-update-icon-cache, closes: #825455

commit ed6eb010614b5b27757619fc629d7330fc8c4122
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 17 10:18:20 2016 -0700

    doc: Add install-html script
    
    This script strips the XML-ish bits from html files so that ikiwiki
    can parse them correctly
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afe74c067a31ce420d0d4cdac2069c1d258a5114
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 17 08:58:06 2016 -0700

    Bump version to 1.6.4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c5a1bea3ffa7c4b6b1503733e33911cbfcb3e80
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 17 08:54:19 2016 -0700

    altoslib: Stop reflective JSON class walk at Object instead of null
    
    Android has classes above Object which are all tied together which
    cause the object walking to fail in pretty spectacular ways. As Object
    has no interesting fields, that serves as a fine barrier to the super
    class walk and works on both android and real java.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 383dec4449f8160c06804fba06290e7a07335934
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 17 08:27:12 2016 -0700

    altosui: Print filename before attempting to parse in --summary mode
    
    Any problems handling the file are easier to debug if the filename is
    visible above the error message.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e8250fcb267a34fbbd8b88c6dcc8eec419bbcc68
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 17 08:26:31 2016 -0700

    altoslib: Add back some JSON exception debugging printfs
    
    These make it possible to figure out where the JSON code went wrong.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a46df4f69984e3ef0064c2b211438c8d8ffaab68
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 17 08:17:57 2016 -0700

    altoslib: Add construction for remaining primitive array types to JSON
    
    AltosCompanion has an array of ints, which was missed until I tried a
    telemetry file with companion data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ed6a3fb6356415c0d57ce2ce556435c6ff06e73
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 17 08:17:15 2016 -0700

    altoslib: Add null constructor for AltosCompanion
    
    This lets it be used by the JSON code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1dce20f7eee56166ac61798ca26eeb323dc8f012
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 17 00:52:38 2016 -0700

    altoslib: Get rid of manual JSON encoding stuff
    
    Now that the reflective JSON stuff is working, we can delete all of
    the manual code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7175774c4f60ed3efd54417f2035b50ea0108c7b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 17 00:02:05 2016 -0700

    altoslib: Improve AltosState save/restore debugging
    
    When save/restore generate different values, write out the two
    versions to one.json and two.json for easy comparison.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8df6afe843e184e98e5d965cee3af562dfa30a3b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 17 00:01:15 2016 -0700

    altoslib: Use reflection JSON code for frequency preferences
    
    This replaces the non-reflective JSON code with reflective code, which
    is much shorter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93de1d7ec841c55f5a1a63d34b422780a6fbe3c3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 17 00:00:09 2016 -0700

    altoslib: Add JSON-based object saving/restoring code
    
    This uses Java reflection to construct JSON strings for
    most Java objects.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a1b7c6c509d4d19de21abf02b63aeacba269d13
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 16 23:59:06 2016 -0700

    altoslib: Add null constructors to AltosQuaternion and AltosRotation
    
    These will be used in the reflection-based JSON code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7e2f7f430e612c682bf55478860054ce94b995f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 15 22:52:08 2016 -0700

    altoslib: Remove AltosHashSet code
    
    Everything has switched to JSON now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b5ea911049a8afae6af475a4a2bf62a6e3aa57b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 15 22:40:27 2016 -0700

    altoslib: Switch preserved state format to JSON
    
    This is much easier to debug than the icky strings with backslashes everywhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1de8b6c340cec0b5a327392686c5a4e00f201e98
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 15 22:39:31 2016 -0700

    doc: Updates to 1.6.4 release notes.
    
    Note USB fixes for host reboot and other changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f28db1102685c87b9f4278268f7e91f5df18374a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 15 22:38:32 2016 -0700

    altosui: Don't open command window when --graph is provided
    
    When the user explicitly asks to open a graph, don't bring up the
    command button window too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a4d741872449b5332f28e018fa3acc53ed7d891
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 15 22:37:39 2016 -0700

    altosuilib: Track open frames, exit when none remain
    
    This will let us not have the altosui window open by causing the
    application to shut down when the last frame closes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 04c6f4c54ac10f6464ffb8cab2186ac2b2eafb00
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 15 22:36:35 2016 -0700

    altosui: Remove missing items from --summary output
    
    Check all values for MISSING before printing them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7fd28830b6f7a20b35d85a92047ccb94c965fe29
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 15 22:33:55 2016 -0700

    altosdroid: Auto save freq changes on 'ok'
    
    Add any pending changes in the edit entries to the frequency set when
    the user selects 'ok'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96eb350d3dfc83f6dfb31bbab1427f9206acde79
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jun 12 09:23:36 2016 -0600

    extend "ok" temp range to 40C, since battery charger on bench can drive temp above
    35C at times in Bdale and Robert's production testing

commit eee7fa303fb0d80ac5d7b9c5a86af60333f61951
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 11 22:17:01 2016 -0700

    altos/stmf0: Remove ao_usb_free
    
    This can't work without a lot more effort.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1704d27248f1845c545ec61cf1bad58bf41189af
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 11 22:16:12 2016 -0700

    altos/stmf0: Rework the sram allocation to save a few text bytes
    
    Boot loaders were going over 4096 bytes of ROM. I suspect we'll need
    more serious work soon.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 36a08dc89ece6e2a2f0f69e3b31da17d66ceb2e2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 10 14:40:26 2016 -0700

    altos/cc1115l: Reduce trace buffer size
    
    A 32-element trace buffer is all the larger we can fit in teledongle.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d21ff641a7bc35318f0f637589eabb5bb6c5152
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 10 14:39:25 2016 -0700

    altos/stm: Handle USB reset in STM32L usb driver
    
    Just like lpc and stmf0, deal with the host resetting the bus while
    rebooting by restoring all usb-related data to the initial values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54f8d53584d0a902676b441cd122c01cd54f2283
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 10 14:33:50 2016 -0700

    altos/lpc: Handle USB reset by resetting internal state
    
    Just like stmf0, this clears internal state at USB reset time so the
    driver can survive host OS reboots.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 36ba97fabbed2f2a4a89da5be221c630ea3ff66f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 9 22:06:30 2016 -0700

    stmf0: Do not send more data than requested for GET_DESCRIPTOR
    
    When Linux boots, it asks for only the first 8 bytes of the device
    descriptor; we must limit the amount of data sent back to that amount
    or USB will get wedged.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2970de9f92243b11d3beef56f3b1df3ef3579b95
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 9 22:05:24 2016 -0700

    stmf0: Clear all USB state when resetting chip. Wakeup all sleepers
    
    When USB is reset, but the board is not power cycled, all of the
    internal USB state needs to be reset, and any tasks blocked on sending
    or receiving packets need to be awoken so they can go wait for USB to
    start running again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55c8e5aff2cc7b941503a04970f7d368261af52a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 9 22:03:45 2016 -0700

    telegps-v1.0: Document how SN 1959 was fixed
    
    SN1959 was fixed by jumpering pin 8 to pin 10 so that the DONE_INT_PIN
    could be switched from PIO 2 to PIO 4 as pin 8 appeared to have failed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d57c8b87f29f23beb0d88f1cef179209b1c5992
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 5 09:17:12 2016 -0700

    altosuilib: Only display map debugging when serial_debug is enabled
    
    This keeps the application quiet for most users.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f982248573c1b646ac53fde980a60ada5404f6aa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 27 20:30:18 2016 -0700

    altosuilib: Fill preload map on site or lat/lon change
    
    This loads the map view with the selected area when the site entry is
    changed or the user hits return in the lat/lon fields. This lets you
    see the target launch site without having to load the whole preload set.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f5944ba4eb3f419f8cad461872d048b5adf7b566
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 26 14:33:44 2016 -0700

    doc: pad/idle indicator table was busted
    
    I stuck a pile of extra '|' characters in the table by mistake.
    
    Reported-by: Stan <stanleyosmith@gmail.com>
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d966b74f756e88e5dffa92400b105f540429262
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 24 23:44:50 2016 -0700

    altosuilib: Rename AltosUIMap*New.java to AltosUIMap*.java
    
    This code isn't really new anymore...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59a9bdd73b580a9c934a574be7bf45c5033e14b5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 24 23:40:47 2016 -0700

    altosuilib: Have map preload respond to units and font size changes
    
    Just add suitable listeners so that the display updates when
    preferences change.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b5521966119fcc290591bf1b397506ef44cedea
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 24 23:40:03 2016 -0700

    altoslib: use miles for distances > 1000ft.
    
    This makes both the map line and the other distance displays use miles
    for distances greater than 1000 feet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ea855f95772a8a394407e0070be1ed9cc0f6650
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 15 13:59:12 2016 -0700

    telegps: Add monitor idle mode
    
    This monitors directly connected devices. No support for doing monitor
    idle using packet mode, as TeleGPS doesn't support that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit df276262900551a5eecd94903eefe9a264b161ec
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 15 13:58:41 2016 -0700

    telegps: Use log_space when flight_log_max is missing
    
    TeleGPS has this, but not flight_log_max
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9287122edc0e2dec6b2542f4cc8cb9cf2900bb33
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 15 13:57:28 2016 -0700

    altoslib: Add AltosIdleReader
    
    This provides an AltosFlightReader interface for monitor idle mode,
    making that easier to provide in TeleGPS
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3c4278a29082a2af5911e22e59f8f52549f549e3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 15 13:56:21 2016 -0700

    altoslib: Add log_space to AltosState
    
    TeleGPS doesn't have flight_log_max value, but does have log_space
    which we can use for the same thing in monitor idle mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f484216e72f81decb2aaa7289d6f69678990b7af
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 15 13:55:12 2016 -0700

    altoslib: Set version and log space from AltosIdleFetch
    
    Just more data for monitor idle mode
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29123a60272777916e5aae08369d0f03c2f135b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 15 13:53:38 2016 -0700

    altoslib: Allow empty values in AltosHashSet representation
    
    Check for value termination before appending the first character.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1a90adac9f6e2a609ce1ccd6749462bb5c9adbe
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 12 23:33:53 2016 -0700

    altoslib: Store saved state in version-independent format
    
    Use AltosHashSet for AltosState so that AltosDroid doesn't lose
    tracker information when the application is upgraded.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b13037fad0905c5933d1ff579122ba1357b02eea
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 12 19:13:05 2016 -0700

    altoslib: Store common frequencies in library version-independent form
    
    Serializable Objects in java are very specific to the class being
    serialized. As we bump the name of the library on a regular basis to
    note API/ABI issues, this mean a saved a Serializable object in
    the preferences database will fail to load across library version
    upgrades.
    
    The saved tracker state and saved common frequencies were the only
    objects saved in this form; this patch adds infrastructure for writing
    objects in a version-independent form, and then adds support for
    saving frequencies in that form.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f4903f903223312d0a3a03dfd413059f24a07f5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 12 19:10:19 2016 -0700

    altosui/telegps/micropeak: Handle both MULTI_LIB and non-MULTI_LIB builds
    
    On x86 systems with -m32 and -m64 compilers, both libaltos32.so and
    libaltos64.so are built. Otherwise, we should use libaltos.so
    
    altosui only dealt with libaltos32.so and libaltos64.so, so it only
    worked on MULTI_LIB systems. telegps and micropeak only used
    libaltos.so, so they wouldn't work correctly on multi-lib systems.
    
    Fix all of them to work either way.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 64ed56fe3132faa8585c9cd7b0261ac85f70a7bd
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 12 18:05:14 2016 -0700

    Automatically run 'git submodule update' if necessary
    
    This makes sure pdclib exists by updating for the all and
    all-recursive targets
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97adfff4cfb67c17a96f3ff46606b4e439422b01
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 12 12:14:03 2016 -0700

    Bump java library versions
    
    Prepare for 1.6.4 release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3450efdf8bd736a33900493eeda348ec2dacf7e8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 12 12:13:45 2016 -0700

    Bump android app version
    
    Prepare for 1.6.4 release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba84b9c908d5909ea5a148c249709b21640f1eac
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 11 23:31:53 2016 -0700

    telegps: Adapt to distance units switching changes
    
    'show_units' is no longer available; use 'parse_units' instead
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ec7e14f0104e3a227ff566fa2fc1f6286ddd9d0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 11 12:48:10 2016 -0700

    altoslib: Get rid of AltosMap from AltosMapLoader
    
    Cleans up the loader API and eliminates a AltosMapTile for every chunk
    of map data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab905d2f7d8929080042cfd16cc418ea5792c3cb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 11 12:43:51 2016 -0700

    altosdroid: make disconnect stick past pause/restart
    
    Clear the active_device preference on disconnect so we don't reconnect
    anytime the service gets activated.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a50669b1fde3e3c1cbc08c4836613b58ead219b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 11 10:47:31 2016 -0700

    altoslib: Clean up map file and url handling
    
    move it all to AltosMapStore.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 471091d0fddf09ed69df75e4f2fdd92e5f57b9c5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 10 23:13:14 2016 -0700

    doc: Start update for 1.6.4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b2710128a715a109745ec40553a3d4149a7f49ab
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 10 23:04:23 2016 -0700

    altosuilib: Don't flicker missing voltages when changing units
    
    For some reason, a value of MISSING -1 was getting used, which caused
    displays to light up briefly with a weird value when switching between
    metric and imperial units.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 895cb58a6cd7424ee63c24d791b5988f41f85d31
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 10 23:03:45 2016 -0700

    altosdroid: Rate limit map loading pacifier
    
    Just like in altosui.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c5f49d0ac254047f13c6c1ecfb5520eff72109ac
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 10 23:02:09 2016 -0700

    altoslib: Allow map preloading to be aborted
    
    Close the map preload dialog and it would be nice to stop loading map
    bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e551e7c5f82a7e35d39e8f73e8e526e5484cd5d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 10 22:50:23 2016 -0700

    altosuilib: Rate limit map loading pacifier updates
    
    Just updating the pacifier was consuming a huge amount of CPU. Update
    no more than once every 100ms.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 42021d9fdc6f7a74cc9b20ebf3cf60b4c5f4ea82
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 10 22:49:04 2016 -0700

    altoslib: Remove some debug printf calls
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 60f4d69592c440ab7bb67a04f4c07fc7279d2c20
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 10 22:46:58 2016 -0700

    altoslib: Switch distance from m/ft to km/miles for large values
    
    This adds lots of infrastructure to deal with making the unit used
    depend on the value itself, and then uses it only for distances.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a6da23335e6e5864387c7a22946f80f51056a4f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 10 12:29:14 2016 -0700

    Add TeleMega to spec list. Add TeleGPS RF output.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d92ca1cd4dfbacebd7aa1bbcfc671daee35dc808
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 10 12:28:51 2016 -0700

    Publish firmware with keithp-fat
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a371253bb5fc25e34d87507dc9b814530f4e28f6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 9 17:57:12 2016 -0700

    altosdroid: Check for closed before writing/reading bluetooth
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c57d86f6c9b56e90c986f460f93663a3e16cdf7a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 9 17:56:28 2016 -0700

    altosui/telegps: Ship firmware for new hardware
    
    TBT v3.0 and Tmega v2.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f078235803a80403014b3e54039fd2d0e0704367
Merge: 04759ddd c457c827
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon May 9 15:52:38 2016 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 04759dddeb29e4de9f7e6b3673dc06c633fa2369
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon May 9 15:52:21 2016 -0600

    process updates made during 1.6.3 release cycle

commit c457c827a7445098ba5effd410de754ff5c65843
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 9 11:48:42 2016 -0700

    Bump version to 1.6.3.1
    
    Post 1.6.3 release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b25785ee0afebaf516b8a1b8d08d36fbdadd74ca
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 9 11:33:48 2016 -0700

    altos/cc1111: Use SW to drive UART RTS pin
    
    Can't get the hw to work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1216c0ccece4ca1492967a341c5d01e9e5068ed8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 17:10:14 2016 -0700

    Ignore some built files for 1.6.3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce4c8a8ad57515e851207b0a82f3af791bb30d3e
Merge: aa9630c3 320e312d
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri May 6 17:49:30 2016 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit aa9630c30ee09bf358e77bf47ed0815a19237fca
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri May 6 17:49:09 2016 -0600

    add beep to TeleMega turnon script

commit 320e312db36fb6519a0bb1530d79595af18cdc86
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 16:46:57 2016 -0700

    windows: Change install to look for browser in a different place
    
    The windows registry is a mystery.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0081f7ba6fc9f1e4484d3e291fd30065ad5b620
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 5 02:25:52 2016 -0700

    altoslib: Fix map preloading callbacks, run in separate thread
    
    The map storage and tile callbacks were muddled together. Create
    clearly separate states for map data and have status updates be
    delivered when registering for new status events so that registration
    is sufficient to track the state without an explicit call to get the
    current state.
    
    Run the map tile creation in a separate thread so that even checking
    status of files on disk runs out of the UI thread.
    
    These fixes serve to make the pacifier update more smoothly, and also
    not over/under count tile loading so that the loading actually
    completes when all of the tiles are loaded.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 13179f614a99cad3016832ac1b365eaa4208c10f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 4 23:56:44 2016 -0700

    micropeak: Change order of windows install so that java detect works
    
    I have no idea why this matters, but if you run the FTDI script before
    trying to detect java, then the javaw.exe program isn't found and java
    detection fails.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85191fe911a5ea4af384bff9b2ed9986679cd9fd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 4 21:13:31 2016 -0700

    doc: 1.6.3 release notes note TeleBT rts/cts and TM 2.0 monitor idle fixes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 541996f95f9e26299618dbb79e723b82a52afd31
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 4 21:12:46 2016 -0700

    doc: Update AltosDroid chapter for 1.6.3
    
    New menu structure, idle mode and frequency configuration
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b540f6f5b034f33b8e1d1c3b91e2403a56479caa
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 2 16:19:39 2016 -0700

    altos: Make sure AO_MMA655X_INVERT is declared where needed
    
    Add #define AO_MMA655X_INVERT 0 to existing products which didn't
    declare it at all. This will make sure the value is set correctly for
    each new board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b0b359cbce6b818257b44b2a6aee0edcbaee40d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 2 16:13:53 2016 -0700

    altoslib: Deal with TeleMetrum v2.0 MMA6555 being inverted
    
    Dumping the MMA655X data with the 'A' command provides the raw sensor
    value. On TM v2.0 boards, the sensor is inverted, and all of the
    firmware uses the inverted value except for the 'dump the raw data'
    command. As a result, MonitorIdle was using the un-inverted value and
    displaying mystic values.
    
    I've fixed this in the ground station code by checking the product
    name and conditionally inverting the value (4095 - value) for
    TeleMetrum v2.0 products. Unknown products will generate a warning
    dialog on AltosUI so we'll catch places where we've failed to add a
    new product name.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a797f5fd5d25ba635fd79ad7604763253caabf2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 30 18:38:42 2016 -0700

    publish AltosDroid in keithp-fat target
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59466c1c2dbf95c427c2bb52304049eaac4d124f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 30 18:37:05 2016 -0700

    altoslib: Flush during set_state. Don't store listener state.
    
    The listener state wasn't used anyways, so don't bother storing
    it. Also, flush the state during set_state, which actually causes the
    state to be written out.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4219fd7720caeec196bf6cb1b4cf78c8fadaf3cd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 30 18:33:25 2016 -0700

    altoslib: Correct stats for flights without a real landing
    
    The landing time was miscomputed when the flight ended without
    entering the landed state, as when the recording terminates at
    apogee.
    
    This led to an uncomputed average boost accel, so that is now checked
    separately from max accel (which is done over the whole flight, not
    just boost).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9734f1198429dc8939eebf48b6e6acc1cef96485
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 30 18:30:16 2016 -0700

    altosdroid: max height is a height, not a speed
    
    Was using the wrong units in the flight tab
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7695da327ff8861a858b6695f4849fa1399548d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 30 08:46:52 2016 -0700

    Revert "altos/stm: Run scheduler code on interrupt stack"
    
    This reverts commit 6a9546413d6a236c010e806b50506d870961d074.
    
    This causes the device to stop reliably handling interrupts.

commit 7db1cba64a2f6c80c5fe6e3073a0ff65be9c04c1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 29 21:49:43 2016 -0700

    doc: Add idle mode info to 1.6.3 release note
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ec20e2f72460010c4f59e6d59775671260e01026
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 28 12:29:16 2016 -0700

    altoslib: Make AltosPreferencesBackend abstract. Add set/put Serializable
    
    This lets us add functionality to this directly, such as the new
    serializable APIs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3c7b68b8a513b611500dfd734182e1a2e7bdd40c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 27 01:40:47 2016 -0400

    altosdroid: Add configurable frequency set
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02f47fa98536eb0ecd58cd8f063600ced60e0a8a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 27 01:39:01 2016 -0400

    Fix key in AndroidManifest.xml.in
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d81f94fd5339d513de9bde5a2e19f8eca526344f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 26 21:01:44 2016 -0400

    altosdroid: Split setup functions to separate dialog
    
    Remove them from the options menu, handle all preferences through
    listeners.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 204ae5142702044eb8ad2697a55028e904067958
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 23:12:34 2016 -0400

    altosdroid: Add idle mode monitoring, reboot. Start igniters
    
    This adds three idle mode operations -- monitor idle, reboot flight
    computer and test igniters. The igniter test isn't quite wired up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 565404599fe9edf9ba16aec348eeb19ea31af743
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 18:50:58 2016 -0400

    altos: Clear packet queue when starting packet master
    
    This avoids overfilling the packet buffer when
    disconnected. Applications using packet mode shouldn't expect that
    output be saved across master sessions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c816bea3536d025568dab313d7c8944a56ba0801
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 18:49:45 2016 -0400

    altos/telebt-v3.0: Flip CTS/RTS pins for BT module
    
    These are wired backwards, so ask that the right pins be used, which
    requires switching to software control of the pins.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27319e4edbc503f193475b437fa5fe2937d47cbe
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 18:48:47 2016 -0400

    altos/stm32l: Add support for software-driven HW flow control
    
    This allows applications to request that the flow control bits be
    driven from software rather than hardware, permitting more flexible
    pin configuration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c9a111ac1c88467ce28e03b4a9d3eabc9d7015b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 19 23:53:27 2016 -0800

    altos: Use TXE instead of TC for serial on STM32l
    
    Using TXE allows for full-speed communication, rather than waiting for
    each byte to be transmitted before inserting the next into the queue.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eee2ca7fa7fd77be8ca5806cad7e250053465048
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 11:47:45 2016 -0400

    Debug bits for telebt

commit a995d73838c8e7ec5126e563baa2e59d5e071b28
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 22 19:15:51 2016 -0400

    altoslib: Don't try to drag lines around until map is loaded
    
    When the transform is null, it's hard to draw lines.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5373e2f9d2f1af211aa98029d448aeb518b45ce
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 22 19:15:05 2016 -0400

    altoslib: Report exceptions caught while opening launch sites URL
    
    This just dumps them to stdout, which helps debug on Linux at least.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6bca0ed8183b85e5825eb0f4093dcd749592faf3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 22 19:00:46 2016 -0400

    altoslib: Use feet per second for imperial speed
    
    This is more useful during descent than miles per hour...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f49fd5d2be68de97ebe65fa4f6484746e91dd677
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 22 18:53:32 2016 -0400

    altosdroid: Run even without Bluetooth
    
    This lets us view old state information on USB-only devices, or when
    the bluetooth device can't be enabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea89feedd4185a5f583fa8ddf33a2ec0906e0dc0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 22 18:52:42 2016 -0400

    altosdroid: Redraw offline map when my location changes
    
    Update the map view even if there isn't any current telemetry data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 39af826ce9032e339929eb7917b1d29c87d03f69
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 22 17:32:10 2016 -0400

    altosdroid: Track device location in app, not telemetry service
    
    This means we get location even if there isn't a telemetry device
    connected, making it possible to walk to old device locations
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3f0c4d5c4ab8288db5fcabb0e848627031c4fd1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 22 17:31:49 2016 -0400

    Bump version to 1.6.3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57c1320962ad08d52e89d39bd5852f8d228dd872
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 21 22:37:35 2016 -0400

    altosdroid: Can only use message once
    
    And here I thought re-using the message was clever. That generates a
    nice exception and crashes the program.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d4a39b569d7982405748b961b93dcd33e59b833
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 21 21:32:50 2016 -0400

    Add preliminary 1.6.3 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 565d8f22c23c7c6c6817d11ef1ca02e70ba5d2ae
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 20 20:27:47 2016 -0400

    libaltos: Fix for Mac OS X El Capitan
    
    USB enumeration for serial devices changed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f10fbff6758dfcfbeeeb224f8ab02fa107aae5f6
Author: Justin Vreeland <vreeland.justin@gmail.com>
Date:   Thu Apr 21 08:30:10 2016 -0400

    Fix java class differing only by case
    
    OSX and Windows cannot handle files with names differing only by
    case.  When these files are present in either there's a constant
    unfixable change viewable in git status and git diff.
    
    Since this code can be run and compiled on both platforms
    names different only by case should be avoided.
    
    Signed-off-by: Justin Vreeland <vreeland.justin@gmail.com>
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c989237366ada094cdc817f50b7f58bbcf5b377a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 21 21:11:29 2016 -0400

    Prepare for new Android release by updating version number
    
    10->11
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18b10ddf0e713431cb3e1065e62b0e6f597ce9d7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 21 21:12:06 2016 -0400

    AltosDroid play store keys have moved, update configure.ac
    
    The actual build files were already updated, but the configure.ac bits
    which detect that they are available were not.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21d176f161b90f18f236ef887cef9676d712eee3
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 21 21:12:40 2016 -0400

    Update java library version numbers
    
    Prepare for 1.6.3 release.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4db6074bb15c66bd23c513e1e41b408e5408cff8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 23:19:59 2016 -0400

    altos: avoid mixed declarations and code in ao_task.c
    
    sdcc can't handle this.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09acb6821ab490d69f679a195e70acb4a71ba342
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 23:18:46 2016 -0400

    altoslib: switch from keySet() to keys() in altos map tiles
    
    Android appears to not have the keySet() API in the same way that
    regular java does, so use the alternate older keys() api instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 49c3e3dffe748d0d155d4876efcaf7d39e1cc8e3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 23:17:50 2016 -0400

    altoslib: Make AltosGPSSat implement Serializable
    
    This is required to save state values in AltosDroid.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 45bcf595d0a6a6001459f7f2055cd15e4839550b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 23:17:01 2016 -0400

    altoslib: Add debugging to AltosPreferences.state() etc
    
    This let me find why AltosDroid was losing the last state information
    for each target.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 90ba010aaa84a7d8b93c63543568a16ab0cb5984
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 23:15:26 2016 -0400

    altosdroid: Don't set target location if lat/lon is MISSING
    
    Otherwise, we get a nice pointer to some random location on the planet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd0ca040a5cccae18145bd29b3e4c09f14df3865
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 13 06:14:33 2016 -0700

    altos/telefiretwo-v0.2: Change alarm names in comment
    
    The PCB is labeled 'A' and 'B'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3abc0fc5e4484d862709501133d35563aa0c25fa
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 13 06:11:44 2016 -0700

    altos/stmf0: Fix external interrupts
    
    Missing a reserved address in the registers broke everything nicely,
    but the priority values were also wrong - stm32f0 exposes 8 bits per
    priority, like the stm32l, but it uses only the top two bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14fecd672807982ce6232fa3b4bdce0aebe132e8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 6 22:32:36 2016 -0700

    Add TeleFireTwo v0.2 project
    
    This is much like TeleFireTwo v0.1, with only one pyro channel and
    added siren and strobe
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 70e46100acf597014ce54cf3b642254ce1cba59b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 5 23:45:52 2016 -0700

    altos/telelcotwo: Add idle timeout
    
    Puts TeleLCOTwo in a low power state (drawing about 80µA) after a
    timeout (default two minutes) to keep from killing the battery if the
    device is left turned on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aef5049cf8311927fada922730f85f31c8ddf177
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 25 20:46:40 2015 -0800

    altos: Use simpler debounce logic for buttons
    
    Instead of waiting for a while after the transition to decide if it
    has stuck, signal the event right away and then ignore other
    transitions for the debounce interval.
    
    This seems to work just as reliably, but has the benefit of
    eliminating button latency at press time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4c2a7503373c0584de77f9b0e5632a58ab8bbd1f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 25 11:26:34 2015 -0800

    altos: Add ao_lco_two.c; alternate LCO interface code
    
    The LCO interface is likely to end up very device specific as the
    interactions depends on the input devices. Here's a version for
    TeleLCOTwo, which has two arming switches and a firing button.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26023cfbf7e117114a4d62b7dbfc0f907efdfb47
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 21 21:52:31 2015 -0800

    altos: Fix telefiretwo .gitignore
    
    Was ignoring the wrong built files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 11f8ab90d2267715010e652d709beec363f74ed5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 21 21:50:43 2015 -0800

    altos: Add TeleLCOTwo firmware
    
    The LCO side of a two-channel launch controller setup.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e6bad553009704af69b08b4a22fb5eb8ac6921f8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 21 21:48:37 2015 -0800

    altos: Support pad/lco boxes with fixed box numbers
    
    This allows for a configuration without adjustable box numbers on
    either end of the link, simplifying the UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93100ae8d4c8bd8fd6bdeff2cdc87b613c5d8058
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 21 21:47:10 2015 -0800

    altos: Allow for pad boxes with different sensor configurations
    
    This allows for a pad box without a resistor from power to each
    FET. That resistor is needed to detect welded relays, but in a
    solid-state system, that's not a possibility.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2038dd2cfed5bbf049144172e3f7436b6cd3a55
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 17 19:54:23 2015 -0800

    altos: telefiretwo-v0.1 bits
    
    Get this board running.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26ce7a9a213bdd35a13937054988e7b8fa749632
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 17 19:30:35 2015 -0800

    altos: Add pad support for new telefire versions
    
    Makes the voltage divider values configurable, and allows for pyro
    channels that don't have the resistors necessary to check for a stuck
    relay.
    
    Also supports STM32L processors with wider GPIO registers, and uses
    the new ao_gpio_set/clr_bits functions to fire igniters rather than
    cc1111-specific code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 553c89f8c64398cb1a815b1fa248980cd3f62ef8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 17 19:29:36 2015 -0800

    altos: Support telefire products in cc1200 driver
    
    Need to disable the pad code while testing the radio.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8a19e83b7b1b8e2a1fcbdd58e41f9f974ae28ff
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 13 06:16:01 2016 -0700

    altos/detherm: Add servo driver
    
    This just provides commands to test the servo with.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cfb91ec7ef6ef485d813af96a0f206bb7a2204dd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 5 22:03:37 2016 -0700

    altos/detherm: Add ms5607 to detherm
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8da29480a2fdf890d553b30eab58fc884210c1a5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 23 23:15:16 2015 -0800

    altos: Add easy mini plotting helper in test code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e3f0c5eb8e5d57cbd8882587477d1381e2a83226
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 17 19:27:42 2015 -0800

    altos: Add ao_gpi_set/clr_bits functions
    
    These set or clear a group of bits in a single GPIO register all together.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 097c156b13ae975c742f294b46429e8ff14c365b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 2 22:41:06 2016 -0700

    altos/stmf0: Add pwm and exti drivers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f227683e29062224a612c4a2ab5c8b2fc166059
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 2 22:40:23 2016 -0700

    altos: Add detherm product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eeceee3520fae66b35a9a9b39c866c1c2e3b0c9a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 2 19:44:06 2016 -0700

    doc: Note that EasyMega and TeleMega report A-D continuity
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f95c781bc16d332ea5442590521074396d6981ae
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 2 19:43:32 2016 -0700

    altos/stmf0: Support HPE clock source
    
    Allows the use of crystals instead of requiring USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f9d77b6d025d8285e362e53a8f728ec47adb234
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 2 19:42:44 2016 -0700

    altos/stmf0: Add SPI driver.
    
    This also changes the DMA interface a bit so we can select for
    interrupts on only the interesting channels.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f5e6caab78f4ca0e5c8a2d96ef53b8752d64f4b3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 2 19:41:21 2016 -0700

    altos: Use mini logging for detherm, just without ADC
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ead4c570a264afdc4e45eed6e87bf541668be6f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 2 19:40:19 2016 -0700

    altos: Add Detherm log format (easymini without ADC)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0ee235e1126f34987522fe852ba6ab3ac92d6cfd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 2 19:39:07 2016 -0700

    altos: Allow for flight hardware without any ADC values
    
    Detherm has no ADC connections, so we don't need to disable the ADC
    when going to landed state.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7348cc4736c9a94f9ad299edd78199b544d0e95a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 24 19:25:33 2016 -0600

    altos: Add one-byte SPI output routine for LPC and STM cores
    
    This allows for SPI output at interrupt time, one byte at a time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b31c6fd153825ae5ad0fcea7189472af1a9cffff
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 24 19:28:16 2016 -0600

    altos/lpc: Add fast timer
    
    This offers a faster timer callback for higher-precision operation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a86d98b708d84c6e0b85cb950e3f1ee16cfc56f5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 26 15:59:26 2016 -0700

    altos/stm: Allow apps to define different stack size
    
    While 512 bytes is a reasonable size, sometimes apps don't have that
    much stack space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4fa71ecf168e275b24534a5a20e3dd4e178c7bbd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 26 15:54:24 2016 -0700

    altos/stm: Validate current task SP in interrupt by looking at PSP
    
    We use a separate stack pointer for task code, which means we can
    verify that it is in range in any interrupt handler. This adds checks
    for the task stack (under #ifdef DEBUG) that run in ao_wakeup as well
    as at every timer interrupt.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a9546413d6a236c010e806b50506d870961d074
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 26 15:49:59 2016 -0700

    altos/stm: Run scheduler code on interrupt stack
    
    This provides a bit more room for tasks on their stack
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55db3b3e8addaa2dc0af50470d3bc8c25cb57df3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 21 22:28:39 2016 -0600

    altosui,telegps: Do not allow radio calibration to be edited
    
    This leads to sorrow for almost everyone. If you want to edit this,
    use a terminal program.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c61014914c80ad0dba72224109d9b147bb343562
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 26 15:57:59 2016 -0700

    altosuilib: Control map debugging output with Serial.debug
    
    This uses the same debug control as the serial output to monitor map downloading
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4f8a325949ed3cece4b646c808ad68677b16d1b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 26 15:57:21 2016 -0700

    altoslib: use env var LAUNCH_SITES to override default URL
    
    This makes it easier to debug new launch site data before uploading.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2fc47e7052a08de464f08d890e222afd7dec75d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 20 23:11:49 2016 -0700

    libaltos: Fix warning in linux libaltos code
    
    Just returned the wrong name of the value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4dddf0a9134690d94217ad12bc7372683276f8ba
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 20 22:01:07 2016 -0700

    altosuilib: Note that Windows now supports Bluetooth
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 054f2896b98a14051e0b818090f2de178bb77283
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 20 21:54:08 2016 -0700

    altosui: Delay between polling for igniter status in Fire Igniters
    
    This gives a remote like time to report the full status instead of
    sending another request before the reply has been processed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1594691ea88ca84634eea237ac8137a5bdc19f5c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 20 21:52:53 2016 -0700

    libaltos: Add Windows BT support. Split into separate source files.
    
    Add Bluetooth support to Windows. Split libaltos into separate files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afba05c41f30c9273668d5ed71e0dc8c1ca53141
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 11:17:46 2016 -0700

    ao-bringup: Use dfu-util to install flash loader on chaoskey
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4635203e9be530f53b697ac0349838916e146983
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 11:16:59 2016 -0700

    altos/stmf0: Construct .bin files for flash loaders
    
    This builds a .bin file which can be used with dfu-util instead of
    using openocd to load the initial flash loader.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f393482ec47e857db654fa071d4df95e98dab381
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 11:15:57 2016 -0700

    ao-tools: Add ao-makebin
    
    This constructs a raw binary or DFU format file for use with dfu-util,
    which can be used with a bare STM processor to load code before the
    boot loader is available.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d7f88bf7521fa6d301da072f95f97fa42d9d247
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 10:52:03 2016 -0700

    ao-tools/lib: Add ao_hex_image_cat function
    
    This takes two images and constructs a third containing the union of
    the contents along with 0xff bytes for any area between them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e738dff6dec4685b8712d3e96742971fa39c8f1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 10:51:20 2016 -0700

    ao-tools/lib: Remove trailing whitespace from ao-elf.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 45d61b79665197ff99f415cda7bd5907830233e9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 10:50:32 2016 -0700

    ao-tools/ao-dump-up: Remove spurious flight state strings
    
    MicroPeak doesn't have flight states like this...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 25cdbf15e7284eb963070b28dd886aa299af6487
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 10:48:49 2016 -0700

    Change how we detect and install java
    
    Detect by finding 'javaw.exe' in the current path and extracting the
    version from the program itself.
    
    Install by simply opening the web browser to java.com and letting the
    user install it themselves.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a7c7e10b3bbfbdf9667d071634cdd6fdf12a1f85
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 10:17:24 2016 -0700

    altos: Expose fast timer API from kernel/
    
    This allows multiple SoCs to provide the same driver interface
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1af180c2d2a2caf1e13f00d83f2b86ba26de27f
Author: Bart Massey <bart@cs.pdx.edu>
Date:   Sat Mar 5 17:38:19 2016 -0800

    altos: Fixed timing of panic display LED to be readable
    
    When we don't have a beeper, there's no way to signal a 'warble' for
    panic. So, elide that bit.
    
    Second, panic can't use the scheduler and timer because those may not
    be running (or may have failed), and so it uses a delay loop. Add a
    configurable scale value to the panic loop so that the LED blinks can
    be read. For stm32f0 devices, scale that by the sysclk value to
    automatically make them of reasonable length.

commit 20d9286402b7da74fef9b7c98e79d13671f6c82b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 15:05:51 2016 -0800

    libaltos: Add unistd.h to get defines for various syscalls
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ad07578d04926cb4b96c40a446c47ad3f9bad7df
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 15:04:23 2016 -0800

    libaltos: jni_md.h moved to linux subdir in Java install
    
    Add the linux subdir to CFLAGS to find it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7cb388a33104fd78c8cb1fa08a6f114e3e1e372d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 5 14:37:40 2016 -0800

    altos/stmf0: Fix build without second USB IN endpoint
    
    The code for the second IN endpoint was using the wrong ifdef.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 99d3248a390379cfabf821ea4a195072799861eb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 2 14:36:31 2016 -0800

    ao-tools: Add ao-chaosread
    
    This reads from the raw descriptor to help validate the hardware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 88ee4ac0c91e12a02cc1954ffad0fd8603e24e55
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 2 14:01:00 2016 -0800

    ao-bringup: Switch to v1.0 for chaoskey
    
    Not going to build any more v0.1 boards. Also, chaoskey now uses the
    unique ID for a serial, so we don't need to provide a serial number.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3a355d5c84e9d975897fa69a103952a1f1558947
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 2 14:00:06 2016 -0800

    altos: Add ChaosKey v1.0 product
    
    Much like ChaosKey v0.1, just different SoC package and a few wiring changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 05fcb717bfc44aba3c1cfd43281e323505a46402
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 2 13:54:58 2016 -0800

    altos/chaoskey: Add another USB endpoint to read raw data
    
    This replaces having the single output switch based on a pin value and
    allows us to box the device and still fetch raw data.
    
    For now, this will use a special libusb2 program, ao-chaosread, to
    pull bits as I haven't figure out how to make linux provide two
    /dev entries for one USB device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 05354b8fee6a9af05d66bb7f4761f597da038fdd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 15 15:26:00 2016 -0800

    altos/chaoskey: Use SoC device ID as serial number
    
    To make manufacturing these devices tractable, we don't want to
    require a custom firmware load for each device, but we still want a
    unique serial number. Fortunately, the SoC provides a 96-bit ID which
    we can use.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5637c1b2fd7232842245af1437e33b5bb1583c7d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 15 15:24:35 2016 -0800

    altos/stmf0: Use device ID as usb serial number if requested
    
    This exposes the hardware device ID (which is unique per-chip) as the
    USB serial number, avoiding the need to create a custom ROM image for
    each device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4006444d3d7b0c499139f58f13353988d38dbb4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 15 15:23:15 2016 -0800

    altos/chaoskey: Encode both hardware and software versions in product ID
    
    We have no other way of reporting the software version, so just encode
    it in the product ID.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afef70bb8f31075de364ddf713f3ccf1d9c6361d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 15 14:04:04 2016 -0800

    altos/stmf0: Fix location of device_id register
    
    Copied from stm32l and never fixed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bae4b25882983cd0b7950b3e80b6d93a72f0847
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 8 19:15:31 2016 -0800

    altos: Another fix for non CDC-ACM devices
    
    Need to set the bInterfaceNumber for the actual interface to zero when
    there isn't an INT interface before it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e36117ccbf7cbe3704c6b44d3ad429e720a1e16c
Author: Bart Massey <bart.massey@gmail.com>
Date:   Mon Feb 8 18:55:28 2016 -0800

    Clean up stmf0 adc init.
    
    This better matches the documented cal sequence.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ce26345784459f5864ef59c96c8aa633d2ddf64
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 7 22:30:27 2016 -0800

    altos/stmf0: Add missing ao_gpio.c
    
    This contains the code for power managing the GPIO pins
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bab082605e3fca6b6d11447c45cd948ddfe74bb9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 7 22:28:34 2016 -0800

    altos: Add simple stats test to TRNG code
    
    This detects broken hardware by making sure the standard deviation in
    the raw values used to compute each buffer is at least 128.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 147f0df6a29b37fbfb0824ecd276482f0eecb397
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 7 15:33:42 2016 -0800

    altos: Delay TRNG ADC long enough for HV supply to stabilize
    
    Looks like it takes about 70ms for the supply to start running right,
    so delay after powering it up for that long.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1473f9234ffd34d8f37bc489dfc9fc4d7f1b3eed
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 7 00:15:47 2016 +1100

    altos/chaoskey-v0.1: Add power management and change USB classes
    
    Enable power management.
    Expose only a single IN endpoint.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 235198b85f1583d2792c7028decace61d1b4229e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 7 00:14:22 2016 +1100

    altos: Add power management to TRNG driver
    
    Support suspend/resume of the TRNG power supply, delaying after resume
    to wait for it to stabilize.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ad756bd1b63a2c8450edd7001628b92279fd1b8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 7 00:10:57 2016 +1100

    altos: Allow USB drivers to skip CDC-ACM -specific descriptors
    
    For devices not providing the standard CDC-ACM interface, let them
    skip the various descriptors and interfaces to provide a more limited
    set of capabilities.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5607aad694c01c01c48229172b289f005a1b6bb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 6 22:51:32 2016 +1100

    altos/stmf0: Add suspend/resume support
    
    Allow USB suspend to suspend USB, GPIOs and master clock.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 36c6d74048283d27c890054814eee2cb39b7cbb7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 6 22:47:23 2016 +1100

    altos: Add power management APIs
    
    This provides sequenced suspend/resume functionality, allowing modules
    to register for power management at configuration time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fbb07cf50ba7fa278d1f8201ef376ec12480e9aa
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 19 23:55:52 2016 -0800

    altos/stmf0: Allow projects to specify non-default stack size
    
    512 may not be suitable for everyone.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d7463befc18f415d8982f04e52729d3bf5b95a9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 19 23:55:32 2016 -0800

    altos: remove blank line in stmf0/ao_timer.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35407e664886bed21dcef7764843aac03be8490c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 28 13:58:43 2016 -0800

    altos/chaoskey: Delay ADC reading for 250ms at startup
    
    This lets the HV supply stabilize before we start sampling values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2d3202de9a5847923f72afe2969eb7ccd7342c7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 28 00:14:36 2016 -0800

    altos/chaoskey: Add support for flipping between raw and cooked bits
    
    Plug the 'force bootloader' thing onto the board while it's running
    and it will generate raw bits instead of running them through the CRC
    to whiten. Useful for validating the raw hardware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02fd767ab60a9957faa2bff29c62ed954abc34e7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 19 18:30:57 2016 -0800

    src/chaoskey-v0.1: Add HV enable support
    
    Turn on the HV supply when the OS starts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e5be0be35f724507d7efff48339a297df73d2641
Author: Robert Garbee <robert@gag.com>
Date:   Sat Jan 16 10:19:47 2016 -0700

    fix argument to ao-cal-freq so devices other than /dev/ttyACM0 work

commit 6a7644a0d179e1eb7d665123157ad76c956e524a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 21:39:38 2016 -0800

    Releasing: Copy TeleMega v2.0 bits to Binaries
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 64adfbbb80c90dfe244179d81beaef8a84ed8bd6
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 16 14:47:10 2015 -0600

    process updates from 1.6.1 release

commit aebdcaf37eafbc13cce695fe65a455e49c6108c3
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jan 10 19:06:19 2016 -0700

    one more time, with feeling .. this time, I've updated pdclib

commit 73ce3f73526edfabccd3b98e6e67de6d82a84b63
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jan 10 18:58:31 2016 -0700

    submodule madness

commit cbec66452ecd01bbd5aebf6f98443d5e0540f5d2
Merge: 4043e070 81b8f4da
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jan 10 18:29:07 2016 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 81b8f4da612b527915f68f632fbd94a46bc1795f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 17:22:35 2016 -0800

    doc: Remove extraneous 'first off' from legal paragraph
    
    Not helpful (bdale)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a00f186a06f22638882f43f49fa0c03ea387eac
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 17:13:56 2016 -0800

    doc: Remove telemini v2.0. Add telemega v2.0
    
    Reflect hardware we've actually shipped.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6cbf93995d90fc4790eb77bcaa233742857fe052
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 17:01:57 2016 -0800

    doc: fix typo in using external active switch circuit section
    
    the -> then (bdale)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3547e65eecbe7bd4e16dc6f2048b7a69f29d05ff
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 16:59:37 2016 -0800

    doc: Update copyright year in altusmetrum doc
    
    And note that this need to be checked for each release in RELNOTES
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4043e0707cdc77158f709c19dd134f92b4604270
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jan 10 17:45:45 2016 -0700

    modify release procedure to reflect Keith setting version in confgure.ac

commit 2f35e0ba52f538ea1061bfff5bbd772b8a241386
Merge: 86ccbac1 3fdaf745
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jan 10 17:44:03 2016 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 86ccbac16f5cd0be4a4c11260816b4799cda46f2
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jan 10 17:43:34 2016 -0700

    modify bringup scripts to handle TeleMega v2.0

commit 3fdaf745f98f42f1ec4ae7cc682f47be8d8568eb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 14:37:05 2016 -0800

    Bump version to 1.6.2, altosdroid to 10
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ebe009b9c7c2f4de3405479f800a33b449fcbb1e
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jan 10 17:41:38 2016 -0700

    now building for m4, too

commit ff9c034dc942ec4bc5cc30cc593ea2165e143d55
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jan 10 17:38:26 2016 -0700

    new build dependency on asciidoc

commit a66e57e0e92cdbd3c6a10b835c50f55647c07351
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 15:56:21 2016 -0800

    altos: Switch PWM constants to end up exposing µsec
    
    This changes the constants so the clock runs at 1MHz, making the step
    1µsec each. Then make the period 20000 steps, or 20ms for a 50Hz
    frequency as before.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e29bcd07819415ebe44e22536305e9c51d9ae4c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 15:44:08 2016 -0800

    altos: Set TeleMega v2.0 PWM to support servos
    
    Typical servos use a 50Hz signal with less than 10% duty cycle. Set
    the divider to 10 and the range to 64000 to provide a reasonable level
    of detail down in the low range.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54c20f1caf7f2e09284a9839cfa854d71f5634a2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 11:44:17 2016 -0800

    Add release notes for 1.6.2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7041c386cdf37716f8daf0bc1a9204db620e3de9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 12:30:34 2016 -0800

    Update java library versions
    
    altoslib is API incompatible with 1.6.1 release due to altos.state updates.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b560b20cc7d4d5ac219613b29707f7cb8a018273
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 12:30:11 2016 -0800

    altoslib: Remove debug message from AltosMap
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 88671454e931ea5e5946438df3c437493e2356c8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 12:21:24 2016 -0800

    Elide flight computer info from APRS section of TeleGPS manual
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit efd6cd5682be3d0cead71ecfa00f37428b64785f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 12:15:50 2016 -0800

    Elide pyro channel information from EasyMini docs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4344bf3de532f54e0185421975c3c8dff1ac8bc2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 21:33:23 2016 -0800

    altos: Insert inter telemetry-packet delay
    
    The receivers take some time to reset the radio between packets, so
    make sure we don't send back-to-back telemetry too quickly by delaying
    after sending each telemetry packet.

commit fe8b7ab9dd1949c53af8f09f08679bdf0280c104
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 16:28:53 2016 -0800

    Switch TeleMega v2.0 to CC1200 radio chip
    
    That's what we're using, after all
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0fd370af8bc8842000415c4d182d84b4bf6f90fa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 25 23:27:45 2015 -0800

    altos: Set AO_PWM_TIMER_SCALE for telemega-v2.0
    
    This is needed to configure the PWM timer correctly
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 742f7c834bb5d651d2bebf2069d4e8facc33390d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 25 23:20:29 2015 -0800

    altos: Get stm32l pwm driver working
    
    Fix the CCMR1_OC1PE and CCMR2_OC3PE values.
    Disable clock when no PWM outputs are running.
    Fix the apb1enr value for the timer.
    Set ARR value to PWM_MAX - 1 -- ARR is off by one.
    Sets the GPIO pins to 40MHz bandwidth for sharper edges.
    
    Tested on EasyMega, but that code is not included as it breaks the
    companion protocol.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8aa0ab9fe9ca41f6d520d388973164bc0c599a06
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 24 00:28:59 2015 -0800

    altos: Add TeleMega v2.0, including PWM driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1b760d0a01e7087bcc214fcd395541fbf268fe8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 23 10:18:24 2015 -0800

    ao-tools/ao-dbg: Stop using sigvec
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f28d59ddf3e1b763ce5757f572e79085963818e9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 14 00:01:05 2015 -0800

    doc: Remove some bogus bits from am.css
    
    Just commented out stuff which had a nested comment and was thus invalid
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 19f700f1c99d2f3dcd8775cc629037312d853ee1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 13 23:36:02 2015 -0800

    doc: Construct html index for documentation
    
    This gets uploaded to keith's machine as an easy way to see what's available.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 688c5ee98565a25e77c8618e1957ed3b8eff5a56
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 13 23:17:11 2015 -0800

    doc: Try a different trick for asciidoc build issues
    
    asciidoc creates temp files in the current directory using basename of
    the source filename. Doing html and pdf builds in parallel causes
    chaos as a result. Fix this by having the pdf target build both
    serially, and then have the html target just depend on the pdf target.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 992c0eab6275cec7d5035b99952537fd7ece2ed4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 13 22:55:35 2015 -0800

    doc: Split out EasyMini into a separate manual
    
    EasyMini uses a tiny fraction of the overall system software;
    splitting the manual out makes it a lot smaller.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b030dfb3df859b3b3cb9c666394f315edcd11f49
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 13 20:59:25 2015 -0800

    doc: Reformat html versions a bit
    
    Color more text black, including toc. Add a bit of space around the
    toc. Make paragraph labels bold.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6260ee1419ba5c122939b28e3e8fc6f8ecf48928
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 13 20:58:58 2015 -0800

    doc: Move pad beeps table to usage chapter
    
    This places all of the sound information in one place.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2133c235af9511a42b65b239c6fcbeafa0e6d272
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 13 20:58:08 2015 -0800

    doc: Provide more actual links instead of just chapter names
    
    Replace 'see chapter "foo"' with 'see <<foo>>' so that a link is
    created to directly go to the relevant text.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 87cb41dfa07153b4dc44f723c65888945b3a11b1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 13 20:56:45 2015 -0800

    doc: Reformat 'Using MicroPeak' section
    
    Use labeled paragraphs to make the steps stand out.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4c1206a47431c7d873228fdd7328e1b9ac93a390
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 13 19:45:02 2015 -0800

    Break out common pieces from TeleGPS and AltusMetrum
    
    This creates shared files for portions of the TeleGPS and AltusMetrum
    manual to avoid duplicating text between the two.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef2ba847ca53a8ddfcddd4e51a0dd43c45161c85
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 1 21:05:20 2015 -0800

    doc: Add product logos to books
    
    This places the product logo on the title verso in pdf form, and above
    the TOC in html form.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8642690da76a86736b97026e2a259d8cbad26262
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 1 06:20:27 2015 -0800

    altosui: telemini outline pdf changed name
    
    It's now telemini-outline.pdf, just like the other outline files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c877ecce7b67272eb6dcba50a58b59cd1cbfa5ab
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 1 05:43:59 2015 -0800

    doc: verbose mode for a2x

commit 13d03ee8ba3a300ef2a3a380b60f08dbe37793b0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 1 05:08:27 2015 -0800

    doc: Make pdf titles less ridiculously large
    
    Instead of having them grow at 20% per nesting level, use 10% instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 553d9041b52cbb88662fcc5e6a277ce43bd151cd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 1 04:23:56 2015 -0800

    doc: Get images and tables all centered and labeled
    
    A bunch of images were using image: instead of image:: and some images
    and tables were missing titles.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit edcb80f25875200a73269045db71c1579b0c2c82
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 1 04:22:27 2015 -0800

    doc: Split revhistory to separate file for html docs
    
    This avoids having the revhistory clutter the top of the document.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c0f2cd7cbd8fa1360d6b18a1bf8ac0707634aa4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 1 04:20:18 2015 -0800

    doc: Place html book contents on left side of page with separate scrollbar
    
    This lets the user see the toc while browsing the document
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2816b305fc9e18a1190e392d43ff489936f10f0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 1 04:18:34 2015 -0800

    doc: Switch to free fonts. Publish fonts with docs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5b782c8f45ed6c34ed0e7f1aff6ac298c9a879ff
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 31 23:54:26 2015 -0700

    doc: Minor makefile cleanups
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 22f399b13fbbc980315a1f6a9f5616586b680d77
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 31 23:36:03 2015 -0700

    doc: Convert telemetry and companion docs to asciidoc
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14ad137fd14707bc7b45a3512a4a6f81915ca1c1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 31 22:40:13 2015 -0700

    doc: Convert AltOS doc to asciidoc
    
    It's still pretty stale, but at least it isn't in docbook?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce297f14ff54d230d01fb6dedaafca571e8b836b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 31 21:34:42 2015 -0700

    doc: Finish converting docs to asciidoc format
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9aed128dc0aab5d49e1b3264c864a6c3e929bffe
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 31 14:54:20 2015 -0700

    doc: Add titles to all figures
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ef958cbb51a04079e2a4833917ccef57ae5a2ee
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 29 20:32:58 2015 -0700

    doc: Add updating firmware and using am products asciidoc bits
    
    This finishes the asciidoc transition
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41aca78e3f7c17433e3c77cd3c596bbf8acab7cb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 29 18:38:46 2015 -0700

    doc: Add asciidoc version of Altos Droid manual
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ddf9525f94f38c20327d1f2b43917e43519b949
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 29 18:14:38 2015 -0700

    doc: Add asciidoc version of altosui chapter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit adfbccfeb551c9d0315116912e7255a173fc3103
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 29 16:49:00 2015 +0900

    doc: Lots more conversion from docbook to asciidoc
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c5fd0eaa786a122580ba9a3ef7bfc0f2cfd8263b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 29 15:50:31 2015 +0900

    doc: Add asciidoc telemini v1.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8cf466d7a767a20387a8d9d6ec81ee00af3fe4a7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 29 12:12:15 2015 +0900

    doc: Start doc transition to asciidoc
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1ca80318102af122cb7b5380331e37795280761
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 13 13:52:32 2015 -0700

    doc: Force FOP to read images from doc directory
    
    Looks like something changed and fop is now reading from the directory
    containing the source file. xmlto places that source in /tmp, making
    all relative URIs fail. Fix this by creating a fop configuration file
    directing it to load relative to the doc directory and then pass that
    through xmlto.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0ae116dd8779fd0594d443a735e7b6834ea9b713
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 14:10:59 2015 -0700

    telelco: Fix pad reset to one on radio signal loss
    
    The pad number was getting reset back to one when signal was lost,
    causing pad one to get fired in this case even when already set to arm mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6659d08c41d89e4aa3d5e849c066a91bb09f2dd7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 21 07:03:30 2015 +0100

    Create directory on keithp.com when uploading devel version
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 926522c6791c2a5529ea24ebd67eea45350e3526
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 21 07:01:19 2015 +0100

    altoslib: Keep downloading when a parse error occurs
    
    Eventually, we'll hit a block with no valid data and give up. Until
    then, keep going in case the flight computer glitched and wrote bad data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 431c713389dc819d2433d893c898ff82c7941722
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 21 06:32:52 2015 +0100

    altoslib: Clean up remaining direct AltosState.state users
    
    This value has been hidden to avoid having it written accidentally;
    there were a few more bits of code using it though.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1dec3bec0789e8934a6e13fd117931ba468b318
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 21 06:27:26 2015 +0100

    Bump release number to 1.6.1.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f8272852b12cf7a349cd9fd07f17c55cdb335a1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 21 06:25:49 2015 +0100

    altoslib: Make sure .eeprom download file is flushed on exception
    
    Flush and close the eeprom file even if an exception occurs to make
    sure that contents of the file aren't lost.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a81d028dc62a0a624051fc3c9debb9687fda931e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 21 06:00:36 2015 +0100

    altosuilib: In display thread, set new state synchronously
    
    When replaying telemetry, received_time gets set by both the
    telemetry reader (when the file is initially read) and by the replay
    reader (as the telemetry is processed). Because these two events are
    separated by the time it takes to play the file, the second time is
    the one we want for figuring out how long since the last telemetry
    packet. However, if we set the global state when pulling the state out
    of the telemetry reader, and then the replay reader pauses for a long
    time, then the voice output thread sees the intermediate time value
    and thinks that it has been a long time since the last packet was
    received and reports that the rocket may have crashed.
    
    Fix this by just holding the read state until it has been passed by
    the replay reader and had the received_time set to current time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f61c2b73f3b63aa9c3f0fbccede89c71580089ba
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 13 22:27:10 2015 -0700

    altosdroid: Add minus sign and decimal point to lat/lon input fields
    
    Some android devices always have change-sign and decimal-point keys
    visible, but some do not. Make sure they're available for lat/lon input.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9dae5f76c5691dc94c02839eb1321426f96f2134
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 13 22:24:47 2015 -0700

    altos/telelco: Adjust drag race UI
    
    Enter/leave drag race is done by rotating the box selector knob
    to a new 'dr' position and then holding down the firing button; this
    avoids a potential accidental firing if you somehow don't realize
    you've armed the box before selecting drag race mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 618f7ac8f31941fcbb3ed91829de69c0f0be8e0b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 12 20:41:37 2015 -0700

    altoslib: Rotation off by factor of two
    
    The rotation computation was off by a factor of two when converting
    the rates to a quaternion (the quaternion needs to be half of the
    actual rotation amount). This ended up presenting a tilt angle of
    twice what it should be.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0afa07d3c1dcb5e301fcb8b4edfecdd961662478
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 12 19:20:49 2015 -0700

    altoslib: Hide 'state' member and use accessor function
    
    Someone was smashing the state to 'landed' when no packets had been
    received for a while. Found that by making it impossible for anyone
    outside of AltosState to change the value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7064bc685aebeef07711e525dea4d5fbe33d235b
Merge: ea1d2415 dda3f459
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Sep 29 00:46:42 2015 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit ea1d24151cf76ae8f2368673317b66958e2508c4
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Sep 29 00:45:27 2015 -0600

    add automatic Bluetooth functionality check to turnon_telebt

commit dda3f459eaff8d4e41cb44584c8ef77b8e2b3b1c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 29 17:29:00 2015 -0700

    altos/telelco: Add drag race UI
    
    With the unit disarmed, press and hold the fire button for five
    seconds to enable drag race mode.
    
    The display will show 'dr' for five seconds and beep five times to
    indicate that drag race mode is enabled. The decimal points in the
    display will all be displayed as an additional visual aid. Once every
    five seconds, it will beep.
    
    With drag race mode enabled, you can select a box/pad pair and press
    the 'fire' button to add it to the drag race group. For the current
    box, all members of the drag race group will have their continuity
    LEDs blink slowly. There will be no indication of continuity in this
    mode; you'll want to check that before enabling drag race mode. If you
    want to de-select a member of the group, just press the fire button
    again. Each time you push the fire button, it will beep out the pad
    number added or removed.
    
    Arm the box and you will not be able to add or remove members from the
    drag race group. Firing will simultaneously fire all members of the
    drag race group.
    
    To disable drag race mode, press and hold the fire button for two
    seconds. It will beep twice and turn off the decimal points in the display.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55c1be449ef7ce389a3d94686051d272c858bee4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 29 13:21:19 2015 -0700

    altos/telelco: Infrastructure changes for drag racing
    
    This makes the lco management code support arming multiple pads and
    firing all of them at once. The UI code does not expose this yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2839796ca5ace5f0c79643afc1a868893246b621
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 29 13:20:16 2015 -0700

    altos: Provide direct segment driving interface for LCD displays
    
    This exposes a simple bit-mask for setting the seven segments instead
    of just allowing hex-decimal values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 368f87918547f89e7eb2a92990621e75e07a3b25
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 29 13:18:46 2015 -0700

    altos/telefire: No reply for ARMED. Ignore time for FIRE.
    
    This will let us do drag races by letting the LCO arm multiple boxes
    and fire them all with a single command.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f491eec1b950e4ad35a535db254a27a3dd2ad430
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 20 23:02:04 2015 -0700

    altos: Add HAS_COMPANION to new boards with companion connectors
    
    Thanks much to Rob Derstadt for discovering this bug!
    
    TeleMetrum v2.0, TeleMega, EasyMega, TeleBalloon v2.0 all have
    companion connectors and yet HAS_COMPANION was not defined. This
    disabled companion telemetry packets on these products, but otherwise
    didn't have any effect.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4064bf63bb95c58d74869f4ff3e440370d64692
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 20 10:51:11 2015 -0700

    ao-telem: Add companion packet telemetry data printing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73dd2e2c73c42f6ce949b4aa7992f63610962c37
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 20 10:50:30 2015 -0700

    altoslib: Add companion telemetry data support
    
    This got lost in the great telemetry rewrite
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eaab49ab1859ebe236a201f93b5352e67aa7ed2b
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Aug 16 17:43:32 2015 +0200

    apply wrap-and-sort to control files

commit 909b048a4797b2477279750a77a82c6f5f2776d0
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 7 20:52:48 2015 -0600

    turnon script for TeleBT v3.0

commit 9e40f97b013256650364a2a7be96d7d2216ed778
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jul 31 10:47:08 2015 -0600

    add a paragraph about TeleBT battery charging to AltosDroid chapter in documentation

commit 773b23c48f67564eec83fc3ee085862c547ad160
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 28 01:34:25 2015 -0600

    move turnon_teledongle to new cal-freq code

commit 87c8bb3956897830da1f7aaca2990a9571767b73
Merge: 643c2fb0 d6445b37
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 16 07:54:35 2015 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit d6445b3739ac2c5dd040efdb97317a6b2a48044a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 15 18:31:05 2015 -0700

    Bump Java library versions
    
    Avoid problems if you have an old version of the library installed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 643c2fb03833d658320f476ef731bbb06fe3cc31
Merge: e41786fb 271f56a4
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jul 15 16:43:50 2015 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 271f56a41c7e785b0fab7e572325df842d104277
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 15 11:41:03 2015 -0700

    Bump configure.ac versions to 1.6.1
    
    And set android version to 9
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3cb5b31a534ab0c987667f37c976a5cd589d42a5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 15 11:40:24 2015 -0700

    doc: Update for 1.6.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7338719414ec2c34235c368a55934be0765661c1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 22:33:07 2015 -0700

    Bump version to 1.6.0.4 (android version 8)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52dc7dc5a791f3e7e307ae11f5c6a20b5bf71ba6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 22:31:47 2015 -0700

    altosdroid: Cleanup Makefile.am
    
    Avoid re-creating library symlinks.
    Make builds depend on resource files too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4af5cb233013b35d6763f5adf8d11b47f847111
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 22:17:16 2015 -0700

    altosdroid: Clean up tab layout
    
    Fuss with weights and gravitys, then add some wrapping layouts to get
    things looking reasonable on small and larger screens.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e41786fb384892961a6547e17812a24314ce9623
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Jul 11 22:59:34 2015 -0600

    add debian branch spec to vcs-git: line in control so Debian tools work right

commit 251263f72a1c189aac709d3d0410eb916a9f66d6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 20:37:16 2015 -0700

    altosdroid: Add 'Auto' to map tracker list
    
    Add an 'auto' menu entry when selecting trackers from the map.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2997c9720f58b2955925e4e99c11a6ec302114a9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 20:36:18 2015 -0700

    altosdroid: Note time at startup to avoid flipping trackers
    
    Need to set the initial 'switch' time in onStart to avoid flipping
    between trackers before we've done any other 'switching' action.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a85f273e33a316bd044c4c8dce17c19633cffe6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 20:21:34 2015 -0700

    Generate Android version info from configure.ac
    
    This avoids having version data in two places.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ed682ca39496849b6c0d6bdf81bee6263864895f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 19:55:43 2015 -0700

    altosdroid: Add other igniter status, various other layout changes
    
    Show the first four igniters (A-D) in the pad tab. Make pad and flight
    layouts look a bit better
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84021b8e0ab9262262345ce47671c3c0c6c43566
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 19:54:36 2015 -0700

    altosdroid: Don't disconnect from bluetooth onStartCommand
    
    If we've already got a bluetooth connection running, don't slam it
    shut when the UI starts up again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bdc953e26ac2dd67021f905807324c6a02e49690
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 19:54:07 2015 -0700

    altosdroid: Remove a debug line in AltosVoice
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51bf46248ca7ee3c817e62274b7366258c9f87cf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 19:53:06 2015 -0700

    altosdroid: Pop up menu of nearby trackers on map click
    
    This lets the user select one of potentially many overlapping
    trackers, and also makes it clear when the current tracker is being
    changed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b64ab2a8a25b0c22443bc77829c7f35b4f1c2455
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 19:17:40 2015 -0700

    altosdroid: Keep speaking even when screen is off
    
    Move the voice and telemetry disabling calls from onStop to onDestroy
    so that a stopped application only leaves off updating the screen, and
    not the voice bits as well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d015cfc1499a263549f52d46e9e5b934fcb94f53
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 19:15:08 2015 -0700

    altoslib: Preload maps based on distance rather than number of tiles
    
    This lets you get the specific area requested at all zoom levels,
    rather than having further detail only at lower resolution zooms.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afa37e4667ace42c1f43b01b613e639772cfeb75
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 19:13:37 2015 -0700

    altoslib: Convert longitude from distance in AltosMapTransform
    
    This computes the longitude cooresponding to a specific distance at a
    specific latitude.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b6f3de0a547fa452d5c40775bcf59c49b229e5e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 19:11:48 2015 -0700

    altoslib: Limit simultanous map tile downloads to 128
    
    Before this change, every tile requested would get downloaded at the
    same time. With moving to distance-based offline map loading radius
    values, the number of tiles at closer zooms was in the thousands,
    overwhelming the network.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b313a5a3d5aba89330c0e20eeac00cc571828953
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 19:10:44 2015 -0700

    altoslib: Make earth size constants public
    
    This lets other code share the values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9bc364ecc69d9085146a39198f0671de164eb2e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 19:09:28 2015 -0700

    altoslib: Make AltosMap floor/ceil static. Check transform in paint
    
    This avoids crashing in paint when no transform has been set yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 002c523fae9369f0261c28f33152289d965d406b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 25 18:40:21 2015 -0700

    telegps: Add receiver battery to Status display
    
    Makes it a bit cramped, but it's useful to have if you're using TeleBT.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d508b66c2a15286bb9af88e4d92209463e0725d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 25 18:35:07 2015 -0700

    altosui: Correctly show/hide receiver battery value
    
    Override the hide() test function which has the listener_state
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f76d5e4fc2ed1e0d79c096cc89793d671ecb78c3
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 25 18:33:46 2015 -0700

    altosuilib: Receiver battery voltage lives in listener_state
    
    The code to detect whether to show or hide this entry was using
    functions that weren't given the listener_state and hence returned
    MISSING all of the time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c0f66bf64f410415afaff1b5c8e1443512b7a57
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 25 18:31:29 2015 -0700

    altoslib: Support TeleBT v3.0 battery voltage conversion
    
    TeleBT v3.0 uses an STM32 instead of a cc1111, so it needs a different
    voltage computation from the raw ADC value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee1b0bd05bedb8a5a631cc79c77fde8fd920ac38
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 25 18:42:29 2015 -0700

    altos/telebt-v3.0: Report battery voltage correctly
    
    There was an extra %d, and an extra ':' in the output, making the UI
    not parse the voltage correctly
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ecd75a7abb5fcee440f7672082013088634680b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 25 12:23:04 2015 -0700

    altoslib: Don't crash if dragging a map view without any tiles
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06908e377b7b932bfe3f6dfc840a0a13340f32ce
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 25 12:22:04 2015 -0700

    altosdroid: Class of offline map view widget changed
    
    Switch around AltosViewPager to match.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71d924288d45b09ae655d06df9780ba286e3f3be
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 24 12:02:22 2015 -0700

    altosdroid: Display direction in map view
    
    Use direction in map view when available, otherwise use bearing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7067f14359d25a8275f2b09e7b30c06c0424dbb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 22:40:11 2015 -0700

    altoslib: Fix replay to run in realtime again
    
    At some point, this got sped up to 10x normal speedx
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e7588e382c70e467b1f328fcfb6bc38a6b79ac7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 22:22:06 2015 -0700

    Bump version to 1.6.0.3
    
    Mark the release of 1.6.0.3 altosdroid
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ce5e24fefaddaa74eadba4722e904354c871387
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 22:21:45 2015 -0700

    altosdroid: Update version numbers in manifest
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d9f96c45d0a3099e9e5fd3c75cc27f9415fcaf55
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 22:21:30 2015 -0700

    altosdroid: Mark tab-dependent voice output as done
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aed8d3ee2561bbec59b9684fb2042186191302ca
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 22:04:47 2015 -0700

    altosdroid: Make sure flight voice output always starts with 'speed'
    
    This resets the flight-mode voice output state back to start again
    each time the flight tab is selected
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1b41e0823a60769e7d2d806f4d97ae043d7dae3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 22:00:33 2015 -0700

    altosdroid: Make sure whole flight state is spoken even when no-one is moving
    
    This eliminates the case where much of the flight state wasn't
    reported if the tracker or receiver weren't moving.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f275e73f42e0aaf1760da99fb93c394320aafb84
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 21:47:06 2015 -0700

    altoslib: Typo slipped into AltosState.java
    
    Oops.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bfa6cd8934b993bd4a67cfc7a4eeecf9b11915ef
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 21:39:09 2015 -0700

    altosdroid: Change voice output around
    
    This makes the voice output depend on the current displayed tab; where
    the 'recovery' and 'map' tabs get the same value.
    
    Pad
    
            Reports igniter and GPS status changes
    
    Flight
    
            Report flight state changes and max height after apogee
            Report current speed, height and bearing/elevation/range once
            every 10 seconds while the rocket is in motion.
    
    Recovery
    
            Report distance and bearing when the location of either the
            tracker or the receiver changes by more than 10m, but not more
            than once every 10 seconds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a761b34ed8fc64435f5a49623f4a5c55e2dda33a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 21:37:25 2015 -0700

    altosdroid: Define strings for the tab names
    
    Use these everywhere instead of replicating the same name; might
    reduce errors.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56146cd379e1319b7adcf8e22cdda55f771e11be
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 21:35:43 2015 -0700

    altosdroid: Show direction to target in recover tab
    
    This takes the bearing to target and current direction of motion (from
    the Android API) and computes a turn amount and displays that so you
    don't have to know which way is north when walking towards the rocket.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 60b8bea12edb954e6140a92c8412364c9581e3c2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 23 21:38:37 2015 -0700

    altoslib: Use a longer filter for descent values
    
    This makes descent speeds almost useful, a huge improvement
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1513693602c2a4cab0783833d1844c066edabb71
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 22 23:21:05 2015 -0700

    altosdroid: Fix line drawing to old tracker location
    
    Selecting an old tracker would often fail to switch the bearing line
    as it was using the map data instead of just using the local data for
    the relavant tracker.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 87d2ab135b493486162d33ff172eba1f44dc0ce5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 22 21:04:01 2015 -0700

    altosdroid: Mark four-tab change done
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb0bd0ec18088ef01549cdb96243d591f618e32b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 22 20:59:17 2015 -0700

    altosdroid: Allow tracker selection from online map widget
    
    Need separate tracker selection code for online maps
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b6768ed32d7be444c49caa40d30b520177bb22a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 22 20:43:23 2015 -0700

    altosdroid: Switch to four tabs (pad/flight/recover/map)
    
    Ascent and descent were almost the same; no reason to have both.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f56903774d9e8bb033dfc0af6945e8ddc1d3065
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 22 20:08:05 2015 -0700

    altosdroid: Select tracker by clicking on map
    
    This lets you pick a  tracker from the map, rather than having to use
    the menu.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a959c1926048d1b96a06aa291131afd7c8e771c7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 22 18:41:01 2015 -0700

    altosdroid: Get rid of on-line only maps tab
    
    The offline tab did both, so delete the online one and replace it with
    the offline one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18fe64cf2648568dd0bde5acd7b627f1ddb6917e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 22 18:26:34 2015 -0700

    altosdroid: Display online/offline maps in same tab
    
    Make the map portion switchable between online and offline maps,
    leaving the rest of the tab alone.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee656c9d41238ab2c56859a03fe6b8ce8ff2df4e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 21 10:34:00 2015 -0700

    altosdroid: Add map source preference
    
    Not hooked up yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9af72a2e629779833ff1787bbfc2ddc8b9d88bba
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 21 09:37:05 2015 -0700

    altosdroid: Show receiver battery voltage in the 'pad' view
    
    Helpful to determine when the receiver battery is getting low
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4fbe9d5a1f56178a737ede6b31e8d01a02a7543f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 21 09:36:20 2015 -0700

    altosdroid: Use AltosMap set_zoom_centre
    
    This keeps the center of the zoom gesture pinned to the screen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08e4e291d32bdb3ac3271a85190d277b1874d277
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 21 09:35:28 2015 -0700

    altosuilib: Use AltosMap set_zoom_centre instead of in-line version
    
    Shares the same function with altosdroid this way.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0c318cdd32b3c3fed5099c754aea3ebc6186a0f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 21 09:34:29 2015 -0700

    altoslib: Add set_zoom_centre to AltosMap
    
    This zooms around a specific point, keeping it at the same place on
    the screen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8bdb432aacc1a273ee484a29a24b3768c274db6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 20 11:58:08 2015 -0700

    altosdroid: Multiple tracker support for google maps
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c72e18fa1713b6e1aa7906210e79dd6354d2390f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 20 11:57:29 2015 -0700

    altosdroid: Stack map markers with newest rocket on top
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f40284c554aaadc71a598de8f1c5fe64ea387e1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 20 11:58:45 2015 -0700

    altosdroid: Support for sorting rockets by age
    
    Now we can just sort rockets so that the top-most shown is the newest
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit de785b409e404a5296a7ff2037f52f3029536f28
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 20 11:57:10 2015 -0700

    altosdroid: Remove debug
    
    Just noise at this point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b2ad3b1ef59fe6e51c8c544f215c33f3b48c3aeb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 20 11:55:44 2015 -0700

    altosdroid: Switch trackers automatically when changing freq or baud
    
    This works by switching trackers when we receive telemetry newer than
    the last time we changed the frequency configuration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4a33336b8f468c5b0f2e14c0ee0242c9a24a8b90
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 20 11:54:20 2015 -0700

    altosuilib: Allow for no transform in map mouse wheel function
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3882e358b6f2970cb1afebcf2a71da34a57002df
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 20 11:53:24 2015 -0700

    altoslib: Clean up map tile removal
    
    Remove them while walking the hash table, rather than creating a list
    to remove.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0cc03210d5d53d12604688f294b6ca39e3a025de
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 20 09:35:26 2015 -0700

    altoslib/altosuilib: Fix equals methods, add hashCode
    
    Whenever we use a class as a HashMap key, that class needs to override
    the equals(Object) and hashCode() methods. Otherwise, the hash table
    won't work right.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5568c30f0a4fe346b8ed58934c23653064427d65
Author: Keith Packard <keithp@aimi.keithp.com>
Date:   Thu Jun 18 17:37:35 2015 -0700

    ao-bringup: Make turnon_easymega run without 'make install'
    
    Use relative paths for all altos tools
    
    Signed-off-by: Keith Packard <keithp@aimi.keithp.com>

commit 6cf27ddd5e84824610d6a0bcbb81ba4626b71409
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 18 17:12:41 2015 -0700

    ao-bringup: Use local versions of tools instead of /usr/bin for turnon_easymega
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e5521070564e9a184f3b781dad9d39cdd963510
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 18 16:56:19 2015 -0700

    ao-bringup: Fail turnon_easymega if accel cal fails
    
    This prevents a failing board from being reported as good
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6683146168216aacdc0842934cec1fb48ea03518
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 17 00:12:06 2015 -0700

    telegps: use new AltosUIFrame constraint helper
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c71abc5c29025eb57fc78968a4ccf8c34cb3a6f2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 16 23:49:45 2015 -0700

    micropeak: Update mac/windows FTDI drivers
    
    Use latest FTDI drivers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1098f7502a603a9cf80ad950f53a2c2abdf7ec93
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 16 23:43:53 2015 -0700

    altosuilib: Create grid-bag helper functions in AltosUIFrame
    
    This eases the burden of creating suitable GridBagConstraints values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdeefaba7d5ef69f28e5dfb152c5f185f8b85f2e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 16 23:42:59 2015 -0700

    altosuilib: Show state.product if state.device_type isn't set
    
    MonitorIdle doesn't get the device type, only the product.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 469be0a57dc9932c26f9c38986d22f6e8b2fd6ed
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 16 23:42:22 2015 -0700

    altoslib: Remove debug output from AltosMap
    
    It's just annoying now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 76532162d63239b00a51dd0ff6b1356b07b62d2d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 16 23:41:51 2015 -0700

    altoslib: Expose public function to set state.product
    
    Just adds a setter function for this value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5cacce8099bfc4fa4019538ac88be00bd2023865
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 16 23:40:34 2015 -0700

    altoslib: Let the application disable the link cancel dialog
    
    This lets the application control whether to pop up the cancel dialog
    when the link isn't working.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75682a5a18f28acf8f4a61a0d45dad461218186e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 16 23:38:07 2015 -0700

    altoslib: Set product for idle monitor
    
    This lets the UI show the product name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c46c2c5767c6e909fa58587e6c864a4fbaa9fa20
Merge: 39f43616 6cb7d76c
Author: Robert Garbee <robert@gag.com>
Date:   Sat Jun 13 17:40:59 2015 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 39f4361675aa13899864f427a33d4aa48be56cd2
Author: Robert Garbee <robert@gag.com>
Date:   Sat Jun 13 17:40:16 2015 -0600

    add beep when test completes

commit 6cb7d76c3fbe32b442713e358654d07b2506897e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 6 20:37:53 2015 -0700

    altosdroid: Resource changes needed for multi-tracker mode
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 78df1d5213c402780fa2ce7e062c64cf5a01c45f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 6 20:37:27 2015 -0700

    altosdroid: Note recent changes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c813c2c8f71017a686128e06b5178fc99ece251c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 6 20:36:18 2015 -0700

    altosdroid: Add multi-tracker support
    
    This lets you view multiple trackers in the offline maps tab (online
    maps not done yet), saves state of each tracker to preferences.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f79d569dfe333621d63a1d4001c85a88f736ad58
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 6 20:35:32 2015 -0700

    altoslib: Add preferences for saving/restoring multiple flight states
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 64ca3d2e7d2b23aedfdf98ef8ebd760bd3291534
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 6 06:00:43 2015 -0700

    ao-tools: Add missing ao-cal-freq man page
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55753ac8b4b73ec58cb6ef874acc8d606193c5e7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 5 22:52:51 2015 -0700

    ao-bringup: Do telegps freq cal before testing GPS
    
    This lets the GPS get some time to see sats while we're messing with
    the radio frequency calibration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 527700623cc369cc58e15c29dc1ee374fa4efeb7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 5 22:52:21 2015 -0700

    ao-bringup: Use new ao-cal-freq program for cal-freq script
    
    Remove shell script bits that were unreliable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b9797aa9b6ca38db79c22e4dcefc6efc8a148599
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 5 22:17:02 2015 -0700

    ao-tools: Create ao-cal-freq
    
    Create C-based frequency calibration program to replace shell script
    which isn't reliable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c75ec6e11a9287b2360bb62ef4ddb4f0e2083c7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 2 12:48:42 2015 -0700

    altosdroid: Highlight age in red when older than 10 seconds
    
    This lets you quickly identify stale data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a533ea525620f194fd89fedad043659bb433d71b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 31 23:09:18 2015 -0700

    altosdroid: Switch from custom title to standard Holo theme
    
    This gives us the menu button, which is awfully useful on devices
    without a hardware version...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0beb02f1848e34892cca6e34ba83d6ca836d6df2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 29 09:49:30 2015 -0700

    altoslib: Require 'debug' hook in AltosMapInterface
    
    This lets the map users redirect debug messages as appropriate
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4f1c4dddbce7b4e8673173f1690f79ba60e72ba2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 29 09:43:58 2015 -0700

    altosdroid: use 'show' to set new tab contents in onResume
    
    Hook onResume so that newly created/recreated tabs get current
    contents. The set_visible hook isn't sufficient for that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 625c496987c2d320a51f3d27f8f00bde17b46a78
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 29 09:42:58 2015 -0700

    altosdroid: Missing call to super.onDetach from TabMapOffline
    
    Causes an exception when you shut down the application.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50e709a4088f3d6846fd66cbe9b8c437b3f9c88b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 22:13:39 2015 -0700

    altosdroid: Split out AltosMapView into separate file
    
    This lets us use the regular layout configuration bits in the .xml
    file instead of needing to patch the map object into the display. That
    was causing problems when re-entering the map tab as the map view
    would somehow end up with a zero width.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e424f8dc2886aa475e6ddb21457eba08f768b16
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 22:12:26 2015 -0700

    altosdroid: Add 'Current Location' as an option when preloading maps
    
    This lets you load maps around your current location, in case your
    favorite launch site isn't in the list.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4315b91d7afc2391e3f7444906ac226500bf1345
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 22:08:51 2015 -0700

    altosdroid: Save selected map type in AltosDroid object
    
    The map tabs may not have been created when the map type was selected,
    so save the desired type in the main application object.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41028472fd2e7e0209125e76b94e551f9d10f89c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 22:06:55 2015 -0700

    altosdroid: Disable debug output on release builds
    
    We generate an awful lot of debug spew to the log; presumably that's
    not helping performance, so lose that for release builds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2d54de24df37baa5ff3837334d97f726934ec25
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 22:05:36 2015 -0700

    altosdroid: Look for zipalign in the new place too
    
    This build tool moved for some reason...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85013045ca505096064aaf45c312b158d0263d2a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 01:05:18 2015 -0700

    altosdroid: Add map types and map preloading UIs
    
    This adds an ugly dialog to select which maps to preload, and also
    adds the ability to display other map types.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba698c2cc48677735046d0881df9c180674e4082
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 01:01:23 2015 -0700

    altoslib: Pass all map loader params to set_load_params
    
    Add zoom and map type to the param list so we don't call set_zoom and
    set_maptype separately, which only causes lots of extra image loads to
    get started unnecessarily.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c63617415553d97f9be2f19b94365b53d4480c68
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 01:00:47 2015 -0700

    altosuilib: Eliminate extra MapCache in AltosUIMapPreloadNew
    
    Use the cache from the map.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff01fb7275973cdbfd976d3b4e638c6235108121
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 01:00:22 2015 -0700

    altosuilib: Get rid of AltosUIMapNew.set_load_params
    
    This isn't needed anywhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b49b74847ad55e14d1dbf2872ebbe313147e9fd3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 27 23:14:09 2015 -0700

    altosuilib: Switch to altoslib map loading code
    
    Remove the map loading code from the UI bits and use the new altoslib
    version instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b4e6da65158a434905dc652e46c69d2c38cea7f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 27 23:12:34 2015 -0700

    altoslib: Add map loading helper class
    
    This adds the AltosMapLoader class, which iterates over a sequence of
    zoom levels and formats to get local copies of a desired launch site.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ccd557c846eed37328d6799f36e61308bcbb678a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 27 23:11:58 2015 -0700

    altoslib: Provide toString method for AltosLatLon
    
    Makes printing them easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 756f501593365b80cfa6f7ca871da3291bbde67a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 27 22:43:53 2015 -0700

    altoslib: Start with map empty
    
    Don't load images from 0,0 for no good reason; wait until someone sets
    a desired lat/lon
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ccba2bb2f193ffd6c3a3d934a46bc06466b4b258
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 27 15:31:25 2015 -0700

    altosuilib: Use altoslib site list loader
    
    Removes the custom version and uses the shared code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 519d477cb752d9cdba78a4daa32b1f547bf889b4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 27 15:30:29 2015 -0700

    altoslib: Add AltosLaunchSite bits
    
    This asynchronously fetches the list of available launch sites from
    the standard location and notifies the caller when finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 103a50db50be55c2293468d273dd94472dd89d94
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 26 23:05:49 2015 -0700

    altosdroid: Place icons on screen instead of drawing path
    
    This makes drawing a bunch faster, and locating stuff on the screen easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2509b664df6a13e6ae9e6753dc9fa0d696a4f6c7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 26 23:05:11 2015 -0700

    altosdroid: Centralize debug printf code
    
    Create AltosDebug to hold the debug code, use it everywhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bca342577740a9d04b8419ecadcff582e77f1e61
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 26 23:02:43 2015 -0700

    altosdroid: Move pause before reopening bluetooth into connec thread
    
    This avoids stalling the UI while waiting for TBT to boot.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7975d088a4ac44c0943134fa41d0e3b88f50b98f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 26 19:47:04 2015 -0700

    altosdroid: Add offline map tab
    
    It's not very fancy yet, but it does zoom and pan, and show the path
    of the rocket with a line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f822b84d8c25159ff113fef6a419b6e18e87a87a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 26 01:04:00 2015 -0700

    altosuilib: Get rid of AltosUIVersion.java
    
    It's been moved to altoslib/AltosVersion.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4895f443e4a748de2677e51869f20c05d265c944
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 26 00:56:17 2015 -0700

    altosuilib: Remove old map bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f41fe2291891b28327c332098bdc601bc75fc4c0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 26 00:46:21 2015 -0700

    altosuilib: Use new map code for map preload UI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd0f4de98ea709e5f070d5f1337658590d2004a1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 26 00:33:02 2015 -0700

    altosuilib: Add AltosUIImage.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 501fa41111b93cc213a1114a33612858e1e93ab5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 26 00:29:53 2015 -0700

    altoslib/altosuilib: Get new Map display code running in altosui and telegps
    
    Looks like the display is all hooked up. Still need to replace the
    preload UIs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb23b992be8ba40c97d8988c134a814a13ccd58c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 25 20:34:05 2015 -0700

    altoslib/altosuilib: Update library version to 7
    
    So many ABI/API changes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68effc6e39f731a2d7bbe2963999c1e785118897
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 25 20:33:28 2015 -0700

    altoslib: More frobbing with new map bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00aca369c4070901e0400f291d5f269b5fb8015c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 25 20:10:37 2015 -0700

    altoslib: Get new abstract mapping code compiling
    
    Not useful yet, but at least it compiles now?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ca2c42061b3c0160bf0137c9cd65989c522b826
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 25 16:35:23 2015 -0700

    altoslib: Build AltosVersion.java in configure.ac
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcbd87bc685924a6587a5f4dae47d34f417601b0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 25 16:26:01 2015 -0700

    altos/telelco: Show box voltage with pad knob instead of firing button
    
    Turn left past '1' and see the firing box battery voltage instead of
    pushing the firing button with the box disarmed. This seems like a
    safer UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91f617d450c187500593d1ae785958187f68ca14
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 25 15:49:21 2015 -0700

    altos/telelco: Display telefire battery voltage
    
    When the firing button is pressed while unarmed, show the telefire
    battery voltage in the display.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a54aac3361b7bd18f111e5ba06fb89015504b8a4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 25 15:47:46 2015 -0700

    altos: Add telelco v0.3 (v0.2 with cc1200 instead of cc1120)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b268351aee44de959dcc4c792189c10a00428fe
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 25 13:23:54 2015 -0700

    telefire: Report telefire battery voltage over telemetry link
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e76cb2a7d5db24b6cecdccb6fb8d5bf5527fadf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 24 17:28:07 2015 -0700

    altos: Only set CMAC RSSI value on valid packet received
    
    This ignores spurious packets for the purpose of showing the RSSI
    value in telelco/telefire, avoiding warning about 'low RSSI' when the
    radio receives noise.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e7c25e3ba04b1e9f8e6fa31e2d464fe96a074dad
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 24 17:25:25 2015 -0700

    telefire: Make 'good' RSSI value configurable
    
    Different radios will have different 'good' RSSI values, so let each
    product configure it, leaving the default set to -90dBm, which is
    a solid signal value for the CC1111.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29edc37a8de56cb6eb028e3bf3f56aa70f109eba
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 21 13:49:28 2015 -0700

    altoslib: Create display-independent map support code
    
    This takes the swing-specific map code and creates a generic version.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59a28811cb19d315b483df296145a2769c445f80
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 19 10:25:05 2015 -0700

    Flip version to 1.6.0.2
    
    Tag a version for development builds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3ddaae82215e365726f2a62a3dc46bfb29eb1b5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 19 10:23:09 2015 -0700

    micropeak: Use fast load mode by default in -load script
    
    Speed up flashing in default config
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eac71f2b871357ff69581c713059a3741a82a932
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 19 10:22:10 2015 -0700

    microsplash: Add 'publish' target to Makefile
    
    This dumps the resulting binary and -load script into the Binaries
    directory of the altusmetrumllc repo
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dba00b3d9102db99592f5822a703e64d98ace8bb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 19 10:17:01 2015 -0700

    altos: Support 32MHz xtal on cc1200
    
    I ended up building some cc1200-based boards with 32MHz xtals, so just
    make this an option when building the driver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcb523cd083503591fa1277648e5deb258bbbaf4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 19 10:16:10 2015 -0700

    doc: Clarify what 'after motor' means
    
    Note that this means after motor burn-out, not after motor start.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b67e6ae8ce34ef119da96b442776bb3d78b4f874
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 19 10:14:43 2015 -0700

    ao-dump-up: Add --wait option to make testing µPusb easier
    
    The --wait option hangs around until a suitable device appears, so
    that you can test a pile of µPusb devices without needing to
    constantly interact with the command line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b57158737f85c7009658b3e923c66794f01bbdf
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 19 10:12:52 2015 -0700

    altosui: Remove un-implemented --fetchmaps argument
    
    This has been stubbed out for a while, so just remove it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e5e9333420ede74d998556c1bbd5888e8ff75ae
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 19 10:09:22 2015 -0700

    altoslib: Expose locale and non-locale floating point parsing functions
    
    UI bits use locale-specific floating point formats, so parsing those
    needs to use the locale. Network-based data, like .kml bits need to
    use non-locale-specific parsing code, so now we've got both APIs
    available, and each used as appropriate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3fbf0a29a1b8a67b90ef965ee3e2e972c0ec33a1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 18 10:52:24 2015 -0700

    altoslib: Use Locale.ROOT for KML export
    
    This avoids locale-specific number formatting, which breaks
    googleearth when importing the resulting file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1cc1900e13d79e0451587439c23bbb062d86cee3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 27 22:29:45 2015 -0700

    altosdroid: Fix tab label height problems
    
    With a newer android API versions, we can set the indicator to a View
    instead of just a string. This lets us wrap the desired string in a
    TextView and show just that for the indicator, making it exactly the
    right size.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7bfa8841b65707d629b425b306ec4cc3acfc156c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 27 21:20:22 2015 -0700

    altosdroid: Add USB support for TeleDongle/TeleBT
    
    This lets AltosDroid use a USB-connected receiver as well as Bluetooth devices.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 356617a3476e237311b8bbcefd6beda8271b120d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 29 12:10:47 2015 -0700

    windows: Use new windows stub to launch applications
    
    This avoids needing to locate javaw on the system while also making
    the registry entries less fragile.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe76229618643f0af7eae965e7a8fc6c70410d27
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 29 12:08:42 2015 -0700

    icon: Convert windows stub into launcher program
    
    Instead of an empty windows stub that exists only to hold icons, add
    useful code that allows it to find and run the related java
    application. This also adds more resources to that application to
    provide more information to Windows too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1b69c8b73cbffb56c688f6a968d144b642cdff2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 20 15:09:20 2015 -0700

    altos/stmf0: Have fast ADC ring buffer code use wrap-around
    
    Instead of requiring that the whole set of returned values fit
    precisely in the ring, allow for wrap-around so that we can fetch an
    odd number of ADC values. The previous version required that the fetch
    amount always be a factor of the ADC buffer size.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43b4044dc71d44cb25be6397b4d66fd792580eed
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 19 01:12:24 2015 -0700

    altos/chaoskey: Set USB VID/PID to 0x1d50/0x60c6
    
    These are allocated from the OpenMoko USB vendor ID page and offer a
    more 'official' number than from using the 0xfffe space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c3321bd9f73c89686fe983a8d99f4e54fa91550e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 19 01:11:33 2015 -0700

    altos: Add the ability to configure a different USB vendor ID
    
    ChaosKey will use an OpenMoko vid/pid, so we need the ability to
    configure a different USB vendor ID for each product.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fce4e6926de7cb5ef6ea64a8db134c442b86153b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 10 09:35:02 2015 -0600

    ao-tools/ao-list: Show devices that have no TTY
    
    chaoskey doesn't advertise itself as a modem, so the kernel doesn't
    allocate a tty device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce99807ef942de54a3f934d321baf3c3d26442bb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 10 09:34:01 2015 -0600

    altos/test: Support old telemega eeprom file formats in ao_flight_test
    
    The old eeprom format used different stoarge for the accel calibration
    data, which doesn't matter to this code, but the change in the format
    value does.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f92be7e22150b2de4c899e687d3bbfc1eb842f9e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 10 09:32:20 2015 -0600

    altos/test: Make aprs test code compile again
    
    Adding the compressed/uncompressed config option broke the APRS test harness.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46f2a759dc21ebf3a7bf7e0566903fc1e7364719
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 10 09:30:53 2015 -0600

    ao-tools/ao-mega: Clean up formatting of pyro status messages
    
    There was an extra newline and missing space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c4ebe9b4b392531cd1a5bbafc4ddc38a9391af5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 10 09:29:52 2015 -0600

    altosui: Add map to MonitorIdle display
    
    Nice to be able to verify that maps are working by using this mode,
    instead of needing to use flight monitoring.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dec8de9c642fea1df924a667a4779a6c6c8c3453
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 16:53:58 2015 -0800

    altos/stmf0: Need ao_exti.h for pin configuration
    
    Flash loader uses pin configuration to set up GPIOs for boot selection
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e53a5da5a8921829a3bb290e7c051950a66ab75
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 16:40:30 2015 -0800

    altos: Add makefile for chaoskey flash loader
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 601f33f5e2f833fed9ab10b24a9df91905d7f766
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 12:38:08 2015 -0800

    altos: Build chaoskey by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3406f38d71d0c9b55c9a3ae2356a778328509a9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 12:36:57 2015 -0800

    altos: Add .gitignore for chaoskey
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4862bec43b29264c361950700f935604f41b840b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 12:33:36 2015 -0800

    doc: Update telemetry docs to include new packet formats
    
    Add TeleMega TeleMetrum v2 and companion data packet formats.
    
    List which radio parts each product uses.
    
    Document modulation parameters for new data rates.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdd7ad469728fde178c69b9c99d70d6e0ab3f12d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 10:18:57 2015 -0800

    altosdroid: Deal with bluetooth connection failures better
    
    Remember when we've closed the bluetooth connection so that we stop
    operations, including reporting connection status messages or even
    starting a connection attempt.
    
    Pass the AltosBluetooth object back in connection status messages so
    that TelemetryService can tell when messages from closed objects get
    delivered. There's a queue between the two, so the above fix catches
    most of these instances, but not all of them.
    
    Stick a delay during reconnect -- if the TeleBT device is getting
    power-cycled, it will need a few seconds to reconfigure the device at
    startup, if AltosDroid manages to connect during that time, the
    configuration commands will be ignored.
    
    Unlock the AltosBluetooth device while we connect so that cancel
    calls will actually work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d446c90dab0aca7e501a0228f24c210758d84a1d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 2 22:23:22 2015 -0800

    altosui/telegps: Change from variable-units snuck into master
    
    show_units_name(double) only exists on the variable-units branch...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bef7c89dac68956a94ae386fa6b87165ab6cb484
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 2 21:16:06 2015 -0800

    altos: Missing pad field in TMv2 data packet
    
    The normal ARM padding would have filled this in correctly, but it's
    best to be explicit about the structure.
    
    This also adds a test to make sure the resulting telemetry declaration
    is exactly 32 bytes,
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b133656df4698ceb7af5902711edf9253a29227
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 2 21:11:33 2015 -0800

    altos: Wait for BT disconnect before sending command
    
    If AltosDroid manages to connect to the BT module before we've
    configured it, we won't be able to talk to it as we can't force the
    module to ignore connection attempts. Wait for AltosDroid to give up
    and let us configure the device. Eventually, we'll manage, if
    AltosDroid's delay interval is longer than the time it takes to
    configure the unit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 112f528755b6c8a2f6eef3bfec21fac981ffb44f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 2 21:08:44 2015 -0800

    ao-tools: Add ao-flash-stm32f0x
    
    This new script uses openocd to flash stm32f0x parts
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff3c27e3b842107680dc48084f71eb8c63f1bcab
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 2 21:06:51 2015 -0800

    altoslib: Round frequency when configuring radio
    
    This makes sure we set the right frequency, instead of being off by
    1kHz on a regular basis...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e637367e8b940e1642a07b3b7c99147561de9cf1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 2 21:06:02 2015 -0800

    altosui/telegps: Add config option for APRS format
    
    Allow configuration of APRS compressed/uncompressed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2614d20b324ab215ef22f178e3635d48e757fa9b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 2 21:02:31 2015 -0800

    altos: Make APRS format (compressed/uncompressed) configurable
    
    This provides a choice of compressed vs uncompressed when sending APRS
    packets to deal with receivers that still do not have support for the
    more useful compressed format.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0724cc334a3bd8d81bbd4641d90a7e4040330efe
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 28 16:06:23 2015 -0800

    altos/usbtrng: Split out random number generating code to separate driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd18bc5a42fcecfb710477371b9f62610a1ea640
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 28 16:04:00 2015 -0800

    altos: Add chaoskey flash loader
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4c436a1c39da971b72d4302623f27af9d56cc38
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 28 16:02:17 2015 -0800

    altos: Create chaoskey product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 476c5b87ea0901f70fe98b581ecca9afaf957607
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 28 16:00:45 2015 -0800

    altos/stmf0: Allocate USB buffers at startup
    
    This lets the extra allocations used from ao_usb_alloc_buffers be
    allocated before the first USB connection happens.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4b415cc8f839ceae48916b5e9d78f78589186cf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 28 16:00:17 2015 -0800

    altos/stmf0: Typo in ao_crc_stm.c
    
    Extra semicolon
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27aef593fb4c037fdb65c9fb397829b42d72d0f2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 28 15:59:30 2015 -0800

    altos/stmf0: Fix fast ADC interface
    
    This was configuring the hardware wrong, and wasn't keeping the output
    ring full.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ec2d758844202108b446e6b12ec1da8812ceb265
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 28 15:07:16 2015 -0800

    altos: Allow software to offer other USB interface classes than CDC
    
    This lets some boards offer non-CDC class USB interfaces so that the
    modem driver doesn't pick them up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4af4e36cda96d053458eeb040e35886890917385
Merge: 91b1a806 106b16b4
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 22 14:55:40 2015 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 91b1a80650a7dcd7c5bf819618a8cea0fceb37d9
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 8 09:29:01 2015 -0700

    swap names so v3.0 is the default TeleDongle version to turn on

commit 106b16b4d5d024543d7ad8c4b4762151e253f3c4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 16 22:22:37 2015 -0800

    altosdroid: Ignore automatic tab changing while activity is saved
    
    When the activity state is saved (after onSaveInstanceState()), we
    can't update the UI until the activity is restarted or restored; that
    means any UI changes we make, like switching tabs, must deal with this
    by allowing those changes to be ignored, using commitAllowingStateLoss
    instead of commit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e6630ac41ca0d8563cf9a0df5d4acba8192e9624
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 16 21:35:34 2015 -0800

    altosdroid: Missing file: DeviceAddress.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f2d82461f3cf5da157b23ea45a2fa60d56b196b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 16 21:32:54 2015 -0800

    altosdroid: Only speak when GUI is running
    
    Create voice in onStart, stop it in onStop. This way, if some other
    application is in use, the voice won't be annoying you.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 877609a60a9f2c61c1efad8285b2a3c22f59be28
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 16 21:19:09 2015 -0800

    altosdroid: Explicitly disconnect BT on termination or 'disconnect'
    
    This adds an explicit message to the telemetry service telling it when
    to stop trying to talk to the bluetooth device. Until this message is
    received, the service will reconnect to the specified BT device.
    
    That message is sent when you 'quit' the application, or when you 'disconnect'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c51d39c7ea1153cd2d0dc02c47824a9f35b22fb9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 16 20:57:11 2015 -0800

    altosdroid: Lots of bluetooth connection changes
    
    Appears to more reliably abort in-progress connection attempts so you
    can switch TBT devices without having the previous device in
    operation.
    
    Shows which device the connection is being attempted for.
    
    Eliminate the 10-second timer and just disable the service when the GUI
    shuts down while no BT connection is running.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b13a78e4f457f67605fc6dafc7f9733746a4f70c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 16 20:49:39 2015 -0800

    ao-bringup: Changes for telebt for keith's hacking
    
    Make the programming device auto-detect by username.
    Load binary from ~/altusmetrumllc
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ebb4dff758058ae9512cf36518416eb69b928f0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 15 08:57:55 2015 -0800

    altos: Remove some accidental debug printfs from ao_packet.c
    
    While fixing the cc1200 configuration, I added some debug printfs to
    this code. They were accidentally committed with the fix...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 135abf0e7c5ceb5738a0b5f68fe2be4b7abdae5e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 14 23:18:38 2015 -0800

    altos/cc1200: Adjust bit-sync configuration
    
    The default bit timing adjustment mechanism allows for only a 0.2%
    deviation from the programmed bit timing. I found one TeleMini device
    which is beyond that tolerance as it was built with an older crystal
    with more error.
    
    Switch to the more expensive synchronization mechanism which allows up
    to 2% timing error, but requires a multi-byte preamble (which we
    have). This fixes packet mode nicely.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9c75faf1ec51eb2f9a8dc9402653490143a784d9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 14 08:35:47 2015 -0800

    altos: embed ao_alarm and ao_clear_alarm in ao_sleep_for
    
    sdcc won't embed these itself, and thus consumes too much flash for
    telemetrum-v1.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc64e0e9d35e01b349680159a5bbd68d059134cd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 14 01:16:42 2015 -0800

    ao-bringup/turnon_telemini: Detect which programmer to use by $USER
    
    Bdale uses TD 100, keithp uses TD 186.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4f9d96bdea192486f0e3f2d80b846c39a05c0ab
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 14 01:13:21 2015 -0800

    altosuilib: Detect pair programming by product name, not USB id
    
    With TeleDongle, TeleBT and TeleMetrum coming in both pair- and self-
    programmable versions, we can't use the USB id to tell them
    apart. Instead, fetch the device name and use that instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e929ee2d0a3d1b1bacd36c2c3723ab860eb40b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 14 01:11:30 2015 -0800

    altosui: Run all igniter status requests from non-GUI thread
    
    Anything run from the UI thread blocks the UI entirely; the Fire
    Igniters startup code to collect the number of pyro channels when
    building the UI was doing that from the UI thread. Switch that around
    so that the UI doesn't get built until that reply comes back, allowing
    the user to see the 'connecting' dialog, and cancel it if required.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f4c812bef76a2cd95f675cb27ea89059561ceec7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 13 23:51:10 2015 -0800

    altos: Replace ao_alarm/ao_clear_alarm with ao_sleep_for
    
    Having arbitrary alarms firing in the middle of complicated device
    logic makes no sense at all. Therefore only correct use of ao_alarm
    and ao_clear_alarm was around a specific ao_sleep call, with correct
    recovery in case the alarm fires.
    
    This patch replaces all uses of ao_alarm/ao_sleep/ao_clear_alarm with
    ao_sleep_for, a new function which takes the alarm timeout directly.
    
    A few cases which weren't simply calling ao_sleep have been reworked
    to pass the timeout value down to the place where sleep *is* being
    called, and having that code deal with the return correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1445725b983134d5a967dee88ef997bf15d4a422
Author: Tom Marble <tmarble@info9.net>
Date:   Wed Feb 11 08:21:27 2015 -0600

    Added continuous output option to ao-usbtrng

commit 65837616a6d073da8e3e2bf9da524a48cffb77c2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 9 07:28:18 2015 -0800

    altos/stmf0: Add ao_crc_stm.c
    
    Tom discovered that this was missing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa813bcb6afc851cf4029b56c19ba46a3ae578f5
Author: Tom Marble <tmarble@info9.net>
Date:   Mon Feb 9 08:35:24 2015 -0600

    Minor typo in man page

commit 26f61380ce6b4df80fa0b5a8a242cef79d5ae339
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Feb 7 22:23:38 2015 -0700

    document addition of TeleDongle to the set of ARM targets to save binaries for

commit 4231d68bae69d9a7d1f52205002db452cd5f986d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 20:42:15 2015 -0800

    Bump java library versions
    
    Lots of minor API/ABI changes; make sure people can install both 1.5
    and 1.6 at the same time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c72d83ccd207b5300a90f2e84de6c5c96642478c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 20:36:10 2015 -0800

    altosuilib: Don't offer to graph some GPS details that TM doesn't log
    
    When using a TM eeprom file, various minor GPS details are logged
    (course, ground speed, climb rate, etc). Make sure these aren't
    offered up for graphing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 426bacbbd6e0573b143e7c48d71db977e53181fc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 20:22:19 2015 -0800

    altosuilib: Get the Eeprom download progress bar working again
    
    The eeprom download code wasn't computing the start of each state
    transition correctly, so the progress bar was snapping to the end of
    the chunk for each state.
    
    Invalid state values would snap the bar to the right side.
    
    Landed state wasn't ever seen, so the bar would not ever fill.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aea188e4227993c508c7045d02f2bc87abd4e428
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 18:10:34 2015 -0800

    doc: update 1.6 release notes with recent bug fixes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0dd733efdbb66535889aafecbba45f49266ed886
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 17:49:39 2015 -0800

    altosuilib: Set the icon and title of the telemetry scanning dialog
    
    Just need to call 'super' to get the window configured correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d5a6914982a29d22103e0202735c9e01ee9e831
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 17:35:15 2015 -0800

    altoslib: Clear saved TelemetryReader state instead of resetting in ScanUI
    
    Instead of attempting to mash the saved state from AltosScanUI, just
    throw it away in AltosTelemetryReader.reset. Much cleaner, and more reliable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbc9ecd960d0dd27a2275b4550c30c5c88ccf5bb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 17:09:40 2015 -0800

    altosuilib: Reset telemetry state after processing it
    
    This avoids re-using stale state after switching telemetry reception
    parameters around, which otherwise generates spurious entries for the
    wrong frequencies in the scan results list.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c0ce45100dd205f59cd84465138c74d9b31df0bb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 17:08:03 2015 -0800

    altoslib: Drop telemetry packets processed while monitoring is disabled
    
    A lag between the thread queuing telemetry packets and one pulling
    them out can result in stale telemetry data being returned to the
    reader. Fix this by dropping telemetry read while monitoring is disabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a2be4d36a3b116d82529805430c5fb665688267
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 15:09:57 2015 -0800

    altosuilib: Wait for product data while scanning
    
    Now that Altos only sends config information once every 5 seconds, we
    want to keep waiting for that if we're receiving packets successfully.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e70f3dca01b15b75b0b8795eb71bd12817af4800
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 14:43:11 2015 -0800

    altoslib: Mark listener as 'not running' on EOF.
    
    This adds a 'running' member to the AltosListenerState class, and when
    the replay reader reaches EOF, marks the listener as no longer
    running.
    
    AltosUI and TeleGPS now display 'done' in the 'Age' field when this
    occurs, to let the user know that the replay is over.
    
    Also make sure that the display timers are stopped when this happens,
    or when the window is closed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08f07d0af123e1c307bc4c0c973da07fae8246b1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 14:40:17 2015 -0800

    altosui: Remove the dregs of AltosDroid load-old-telem code
    
    AltosDroid used to scan the old .telem file to return to the previous
    flight state on restart. Now it just loads the old state object
    instead, a vast improvement in performance.
    
    To do that, there were some changes in the altoslib code
    required. This patch just removes those, fixing replay bugs in TeleGPS
    along the way.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d08c427188f7b748d9ea7651143bc843e9c2691
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 13:09:18 2015 -0800

    altos: ao_packet_getchar needs to return 'int' so AO_READ_AGAIN works
    
    With ao_packet_getchar returning 'char', AO_READ_AGAIN would get
    converted to 0xff instead of -1 on return, making ao_packet_echo
    either produce a bogus character on output, breaking command
    responses, or wedge and never exit when the link was dropped.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4a5c64bef6952f25cadebc3e1f9909a5f513e015
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 02:37:36 2015 -0800

    Update version 1.6 release notes with more bug fixes
    
    A few bugs found during release testing are notable enough to be
    included in the release notes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 211cb482e4da04dc032432abc236ef8b5a5e732f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 01:30:21 2015 -0800

    altos: Separate out ao_tracker force from dbg
    
    Allow enabling telemetry when USB is connected without also enabling
    the motion debugging output.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9f235bce84df3a6c0261e9d256aac544f87f70f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 01:05:57 2015 -0800

    altos/lpc: Give up on interrupt-driven SPI driver
    
    There are just too many limitations in when interrupts are delivered
    to make them useful. Instead, just drive the SPI directly with the
    CPU. At higher spi speeds (6Mhz or more), it's probably faster to do
    it this way anyways.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b52f67abd0f9ed6d8208556007d75e7ee735cf0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 7 01:05:03 2015 -0800

    altos/drivers: Increase SPI speed of CC115L to 6MHz
    
    The datasheet says that the maximum for back-to-back data is 6.5MHz.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba22e2dbf87b139f0349f4dd8a7e6046514f5bad
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 23:50:49 2015 -0800

    altoslib: Initialize GPS data to MISSING for Monitor Idle mode
    
    Make sure any un-set values are flagged correctly for the Monitor Idle
    UI by using the init() method.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31fd32cd75f4f22458f0dc82823934672e16b988
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 21:50:47 2015 -0800

    altoslib: Use 'stateless' for Monitor Idle
    
    This reflects the lack of flight state progression during Monitor Idle
    and ensures that the GPS 'ready' indicator will light after 10 solid
    GPS fixes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 449c6731b1977c7623dd006ec2db56f383f8d85a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 20:45:28 2015 -0800

    altoslib: Support TeleGPS for Monitor Idle
    
    TeleGPS has ADC and GPS values, so build the necessary ADC parser and
    then hook up GPS parsing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58f06706383418ebfa56d88ba51411e6185e09df
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 20:40:05 2015 -0800

    altosuilib: Don't show 'Sats in view' for TeleGPS eeprom graphing
    
    We don't log the visible sats from TeleGPS, only the basic GPS
    info. Have AltosFlightStats track whether sat info is present, then
    use that to elide the Sats In View graph entry as needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35ad1833b10595564de84c88f44a214b1c134ccf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 20:36:44 2015 -0800

    altosuilib: EEProm download from TeleGPS doesn't have states
    
    As TeleGPS doesn't have flight states, the EEProm download progress
    bar shouldn't show 'state invalid', and it should use a different
    scale for each block.
    
    Fix this by having AltosConfigData know which devices have state based
    on their log format, then mark the progress bar state limits as
    'invalid/invalid' instead of 'boost/landed'. Then have the progress
    bar use that to set a more reasonable scale for each block.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 66e7a8081c07d0d96a31ae34963d430f06dccdfb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 04:45:17 2015 -0800

    altoslib: Store MS5607 data in AltosConfigData for use by AltosMs5607
    
    When doing 'Monitor Idle', we fetch new config data each iteration and
    pass that to each of the readers, including ms5607. Instead of
    re-fetching the config data there, just store the ms5607 parameters
    when we fetch it the first time and copy it over.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14d524782af4f06d7f3722dcc852772ec493c2cc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 03:36:10 2015 -0800

    Package TeleDongle-v3.0 firmware with TeleGPS and AltosUI apps
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit df47839824dd4e708c22fbf8f4a3054b9c45b9c3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 03:34:30 2015 -0800

    altosuilib: New teledongle and telebt devices are not pair-programmed
    
    Only list telebt-v1 and teledongle-v0 as pair-programmed devices so
    that newer versions go through the self-programming process
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21ff52befb27decc4b23458315620c47d7a07b21
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 03:33:28 2015 -0800

    micropeak: Install Windows AltusMetrum driver bits
    
    Make AltOS-based µPUSB devices work with MicroPeak
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a3f26f6d0c7574b8cdaecbccd7cfe89aaeb736b0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 03:32:27 2015 -0800

    micropeak: Support both FTDI and Altus Metrum USB IDs
    
    The windows driver only returns FTDI devices when
    altos_ftdi_list_start is invoked, so we need to call both that and the
    regular altos_list_start to get all of the devices.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc707432c6eaedb9587bb63ac570146b356b6bfd
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 03:31:07 2015 -0800

    micropeak: Fix file association registry install on Windows
    
    Need to invoke DisableX64FSRedirection before setting file association
    registry entries or Windows won't find our application.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1fc5c8625f649b43d93f23a5fa1ba16773f2d0db
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 03:03:58 2015 -0800

    windows: Look for current Java version in \SOFTWARE\Wow6432Node
    
    I have no idea what this is, but I found the Java version down in
    there...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83d3d967f576a57285d40e77c4a17303edeef4f1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 03:03:00 2015 -0800

    Add 'keithp-fat' target for uploading temporary builds to keithp's machine
    
    This lets me quickly prepare a new test version for Windows/Mac in a
    single command.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a7d60d72e2e742fbc364489721f356806966c03
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 6 01:29:56 2015 -0800

    libaltos: Use more SetupDi API to get Windows 7 listing devices
    
    My Windows 7 box doesn't include 'SymbolicName' in the registry, but
    SetupDiGetDeviceInstanceId *does* return something that includes
    vid/pid/serial, so use that in preference.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98db372758470cdaf7b517d670a7ce9186c787bc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 5 22:25:35 2015 -0800

    Update docs for 1.6
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9fac8b639d2142c90eb95771cda1f6559e987db2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 16 22:09:26 2015 +1300

    altos/lpc: Double buffer USB data transfers
    
    This allocates twice the space in the USB memory so that transactions
    can be double buffered without using separate CPU memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>
    
    Conflicts:
            src/lpc/ao_usb_lpc.c

commit 0671b3c8c24c9f33be77a10315c4669f33c516d7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 5 16:08:44 2015 -0800

    altos/lpc: Clean up USB endpoint access functions
    
    The USB device endpoints can have two pointers in them, but we use
    only the first. Fix the access functions to take an index as to which
    we want so that we can disable the other address registers with them
    instead of requiring open-coded access.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a01ce949611b0c18df54c3f3877a43d27699c258
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 5 15:34:05 2015 -0800

    altos/easymini-v1.0: Shrink stack to deal with USB changes
    
    Reverting the USB double buffering means using more RAM, need to
    shrink the EasyMini stack to accomodate that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2bde76fe852d7908a968168580be4cd4dc0333d6
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 5 15:01:03 2015 -0800

    altos/teledongle-v3.0: Shrink stacks to 320 bytes to fit in ram
    
    The old USB code had static in/out buffers in ram
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5bf39f674b3d5ee98b55f42562a5ba1a9328ff07
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 5 14:56:13 2015 -0800

    Revert LPC usb performance improvements
    
    There's something screwy going on, sticking garbage in the input
    buffer at boot time
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef69872c824668146a3876f1f3d0d2e51d3e4c8d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 5 14:54:27 2015 -0800

    Revert "altos/lpc: Fix double-buffered USB changes"
    
    This reverts commit 41a0604ad1ea1a03e2db7d41731dbadf466b45db.

commit aeca3b46bc1726a06952cc2ff86f50c6d80ed1e1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 4 22:55:24 2015 -0800

    ao-bringup: Add turnon_teledonglev3
    
    TeleDongle v3 uses the LPC11U14 processor which has no on-chip eeprom,
    so we must reflash the device to set the default radio calibration value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc41ab47b928b837724f8bc6b84d0b5b47c25df3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 4 20:33:04 2015 -0800

    altos: Rename teledongle-v1.9 as teledongle-v3.0
    
    No hardware changes from the 1.9 prototypes to the 3.0 final version.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dbafa16cfa897b2a5c6cf455cf8675e83eb0d7d6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 4 20:30:15 2015 -0800

    altos/telebt-v3.0: Set initial radio cal to a sensible value
    
    CC1200 uses a different xtal than CC1120, so the default calibration
    needs to change. This value hit 434.550 on SN 2407, so it seems like a
    reasonable place to start.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be443d8d50ad8f59a74bf2f4e810a7359ff72132
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 1 16:57:14 2015 +0100

    altos/telebt-v3.0: Add monitor bits
    
    Will be useful to actually be able to receive telemetry
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6eb145d48cfcabf757093433bd2314a80e490a17
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 1 16:46:40 2015 +0100

    altos/usbtrng-v2.0: Select PA11/PA12 mapping config value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f9e192e9d1c6fab9843939ff9117f6bb3725943
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 1 16:44:52 2015 +0100

    altos/stmf0: Support PA11/PA12 remapping
    
    Small pin-count versions of the STMF0 can remap PA11/PA12 on the same
    pins as PA9/PA10. These are used by USB, so have the USB driver deal
    with remapping them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 466d3e977ca279f97944141fcc12c04f4f58212e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 1 16:44:07 2015 +0100

    altos/telebt-v3.0: Turn red LED off after initialization
    
    This lets the user know the device successfully initialized.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 845ae016d700c37948e053ead5f7e2778356fda3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 1 16:43:06 2015 +0100

    altos/telebt-v3.0: Fix stdio setup for BTM
    
    Make sure the BTM module is allowed to be included in stdio, but delay
    adding that until the BT link is running.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a138e05ae6241a6743ca9f64528124f5f6c8e0ee
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 1 16:42:01 2015 +0100

    altos: Always include a check for stdio overflow
    
    For some reason, the check for running out of space to record stdio
    devices was disabled when only one device was expected.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 870428a909025988a8cd834755ea166e2d1e34ca
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 1 16:39:17 2015 +0100

    altos/btm: Add fancier debug. Pull serial reset port low.
    
    Adds an interactive debugging mode to help diagnose BTM issues.
    
    Discovered that the serial reset pin on the BTM needs to be pulled low
    for the device to work correctly.
    
    Leave the bt link interrupt disabled until things are initialized.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44a503a8cf3778cad5469c592e8ccbae58e44b97
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 1 16:36:51 2015 +0100

    altos/stm: Add ability to delay STDIO usage for serial ports
    
    Bluetooth needs to delay adding the serial port to stdio until the
    link is up and running. The cc1111 serial driver had
    DELAY_SERIAL_*_STDIN bits which have been added to the STM serial driver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 252211e9e54a1e6f4efe2df6382ce60c909de70c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 30 14:04:50 2015 +0100

    And, also add the TeleBT v3.0 flash loader Makefile
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bfa5c70a827ac8be23ca48797edc14e13461d6ac
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 30 14:03:55 2015 +0100

    Oops, forgot the TeleBT-v3.0 Makefile
    
    git doesn't warn about files named 'Makefile' because they're supposed
    to be generated...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ca1f234586225caea1040bc229b63491dadc1cb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 27 20:41:15 2015 -0800

    altos/stmf0: Re-implement fast ADC code for stmf0
    
    This creates a ring buffer for ADC data so that ADC fetching can run
    in parallel with other activities.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3749426af1e900a1b3354922fdd7e8b3bfa38084
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 27 17:18:42 2015 -0800

    altos/usbtrng-v2.0: Use stmf042 hardware CRC unit
    
    Switch from software to hardware for CRC computation. I think this
    must be faster, right?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a95d6776dea86cdc4bdc3512505ba7e75365c127
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 27 16:55:27 2015 -0800

    altos/stmf0: Add CRC driver
    
    Sets up the stm32f0 CRC hardware, exposing inline functions to access
    it. DMA access is possible, but usbtrng can't use that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 79f3434013650fe4e3d76e5eb56a10000ee34249
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 27 09:36:19 2015 -0800

    altos/stmf0: Remove remaining stm32l bits from stm32f0 code
    
    These were left over from the stm32f0 initial implementation work; now
    it's more useful to list only the bits which are valid.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf08397202860a73417cd1711012eb3e33f308c3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 26 22:23:19 2015 -0800

    ao-tools: Add ao-usbtrng to dump RNG data for testing
    
    ao-usbtrng reads a specified number of kilobytes of random data from
    a random number generator.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee91e1da606c8a8fade278a3aeae9c1cc9014b84
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 26 22:22:00 2015 -0800

    altos/stm: Fix typo in stm32l.h
    
    This crept in while working on the stmf0 bits. oops.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac1a58af4d281a9bc3572dc503982a94e439a4c1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 26 22:16:18 2015 -0800

    altos/usbtrng-v2.0: Add random output command
    
    Read chunks of random ADC data, do some CRC16 computations to de-bias
    and merge 4 bytes of input data into 2 bytes of output data, then dump
    that out over USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 729bb7a405460db8d44c9ff6ee903b28c7499a02
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 26 22:14:57 2015 -0800

    altos/stmf0: Add ADC and DMA APIs
    
    The ADC api is what USBtrng wants; a way to repeatedly read a single
    ADC input as fast as possible.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a01effc2f64c757c907e0f4937b4d3710b97bde0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 26 22:12:40 2015 -0800

    altos/stmf0: Add faster USB path
    
    This adds a way to allocate private USB buffers for sending data
    without needing to copy it again. It requires ensuring that all
    accesses are 16 bits aligned to 16 bit boundaries.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e1d5bcb1968e280b8ebdf6c8b12e8a87167fd890
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 26 22:10:47 2015 -0800

    altos/stmf0: Fix linker scripts to make ao_boot work
    
    The flash loader ended up assuming ao_boot was at the start of ram,
    while the application stuck it after the interrupt table (where it
    needs to go).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 32c68670af9f8aa690c64d64502e559c0df0c1db
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 25 19:58:38 2015 -0800

    ao-tools: Add --wait option to ao-usbload
    
    This waits forever for USB writes to complete, instead of timing out
    after five seconds. Useful when debugging the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02b07a202839d6e68b3f0db7f8965478661db140
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 25 19:37:05 2015 -0800

    altos: Add flash-loader to usbtrng-v2.0
    
    Uses the new STM32F042 flash loading bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit df881bce8576f091b2d8cb53b8ce8a43aeedecde
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 25 19:35:19 2015 -0800

    altos: Add self-flash support for STM32F042 processor
    
    Also moves the usual address for applications out of the way of the
    flash loader.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02e1058fa52ee7c867ea6c9031ebb9e21d14889c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 25 16:43:48 2015 -0800

    altos: USBtrng v2.0 hardware bringup
    
    Gets the USB connection running and blinks the LEDs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02f03df6d089cafae99f8ce15dcbd87f6e78d749
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 25 16:42:39 2015 -0800

    altos: Initial STMF04x support
    
    Basic clock configuration, OS support, LED and USB drivers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e7d1c89fea98eabca738f10cbfebec631be3bb7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 24 11:18:59 2015 -0800

    altos: Add support for TeleBT v3.0
    
    Add support to the BTM driver for non-CC1111 interrupts
    Add HW flow control to STM serial driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41a0604ad1ea1a03e2db7d41731dbadf466b45db
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 22 21:31:45 2015 -0800

    altos/lpc: Fix double-buffered USB changes
    
    These got merged when we were down in Auckland, but before they'd been
    finished. Transmitting worked fine, but receiving was mis-configuring
    the OUT buffer size in the hardware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 291eec859606b73b43072cd2debfbb92659e0d95
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 22 20:34:43 2015 -0800

    altos: Get rid of some accidental debug code
    
    I was debugging the accelerometer calibration code and left some
    printfs in it, which made TM run out of flash space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e05e0c6b71a1df65f188e00622e9632eb27510fd
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 16 22:09:26 2015 +1300

    Set version to 1.5.9.1

commit 2a053d3d157e00b6a6406f4f78ddb8e298b6c4b7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 22 17:27:09 2014 -0800

    altos/lpc: Switch LPC SPI driver to interrupt-driven
    
    This improves performance for SPI transfers, while allowing other
    tasks to get work done during longer SPI transfers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 213a6604ec225e843f30244e6f94d0ebb3d27e46
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 22 17:11:51 2014 -0800

    altos: Adjust CC1200 RSSI reporting value
    
    On the test setup, we were about 13dB off, so tweak the settings to
    suit. This result wasn't tested; it's just a rough offset until we get
    a production run of TeleDongle boards back to do more systematic
    measurements.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 014dcc1f179237dc247fafa4a2cff91809260681
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 22 17:10:33 2014 -0800

    altos: Document cc115l power measured at RF setting 0x03 as -31.75dBm
    
    We built a custom TeleGPS load for radio sensitivity measurements with
    the lowest documented power level setting (0x03), and measured the
    power out at that value of -31.75dBm on the test board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf09ee2a4b093c56b64260c3db3f5e07143aa888
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 9 21:44:53 2014 -0800

    ao-bringup: Clear pending output before setting frequency.
    
    Maybe this will unwedge things
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5b7ec0c69343db3793c0317939b5eff1f2d04752
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 6 15:08:53 2014 -0800

    micropeak: Support µPUSB with our own USB ids
    
    This matches the new µPUSB id as well as the FTDI USB id.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e52ef59082cb2afdba498233c429321c37a6ac3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 6 15:08:29 2014 -0800

    altoslib: Add usbtrng, usbrelay and mpusb USB ids
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7339d2379713b5b7e4c4fe6bad89ed93f9d39e82
Merge: d1f91215 b6462ca3
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Dec 6 15:39:53 2014 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit d1f9121593fe30b924223e89ef4d596b5bec2b25
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Dec 6 15:39:35 2014 -0700

    improve test procedures for TeleMega

commit b6462ca3a7e99fe390ec97f94c23d36fab8c294d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 23 18:56:40 2014 -0800

    altos/cc1200: With PQT wide open, we can't use PQT_REACHED for start
    
    Because we're allowing even signals only weakly correlated with the
    preamble through to sync detection, we can't use the PQT_REACHED
    symbol to tell when a packet header has been seen. Instead, just look
    for SYNC_FOUND.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e3eeaf59688dac92eb3a27d589923126cb34e00
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 23 18:50:57 2014 -0800

    altos/cc1200: Open up preamble detect to improve sensitivity
    
    Increase soft decision PQT value to max (15) to ensure that we detect
    even weak packets.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eabeb76a2a9acb624ae364c4f0f315bfc3549d98
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 23 18:31:15 2014 -0800

    altos/cc1200: Wait for packet to be placed in FIFO during receive
    
    This changes the receive code to use MCU_STATUS, waiting for
    MARC_STATUS1 to indicate that the packet is in the fifo before reading
    it out.
    
    It also fixes the receive timeout code to keep receiving if the
    preamble or sync have been seen when the timeout fires. This makes
    TeleLCO able to use short timeouts during scanning while still
    successfully receiving packets.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2163f6e6b341b7840f03e89d568699b8ea186435
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 16 16:39:18 2014 -0800

    altos/teledongle-v1.8: Make this the same as teledongle v1.9
    
    Remove RSSI LED blinking, add CRC error LED
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54f7ab842a8cba3003cd5a9deb2515151263ca2e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 16 16:38:12 2014 -0800

    altos: Allow TeleMega to be built without MPU6000
    
    Robert Braibish's board has a dead MPU6000; this fix lets the TeleMega
    firmware build without that driver so the rest of the board could be verified.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f16ea9abfaac9eee3b0935c586e383ae046d6cf5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 16 16:37:15 2014 -0800

    altosui: Remove duplicate AltosUIPreferencesBackend.java
    
    There's a copy in altosuilib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abdf3177293c57e659017b64819c13f11c126011
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 16 13:41:27 2014 -0800

    altos/microsplash: fix .gitignore to ignore resulting binary

commit 97a321692c2e41a1d3f77fb541780ada945eff52
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 16 13:40:15 2014 -0800

    Add AltosDroid release note for version 1.5

commit 47956ac01397c0a7fafc6b0a4840113186924b2e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 16 13:17:55 2014 -0800

    altosdroid: East and West were flipped in all GPS output
    
    East is positive, West is negative
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5aae1446026a08bf8f09c56b960545eff30a8bd1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 15 22:52:42 2014 -0800

    altosdroid: Save AltosState and restore at startup
    
    Instead of re-parsing the old logfile, save the current state in the
    preferences database and restore at restart of the
    TelemetryService. This makes the state get restored even before the BT
    connection is recovered.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52ce23327bd81e2d40a1817442e75bd6b60ffe95
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 15 22:50:31 2014 -0800

    altoslib: add AltosPreferences state save/restore interfaces
    
    This serializes an entire AltosState object and stores it in the
    preferences database for later retrieval. AltosDroid uses this to
    recover the old state data when restarting.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a488da3ca72fe0778b2d79a8cac935621d1d789d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 15 22:49:06 2014 -0800

    altosdroid: TabMap needs to expose () constructor
    
    Otherwise we get an exception at startup time for some reason.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit deda23963586eb07a32f9a3c83a0355178e19340
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 15 22:48:15 2014 -0800

    altoslib: Add getBytes/putBytes interface to AltosPreferencesBackend
    
    This lets us store arbitrary binary data in the preferences database
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e5dd00ef0014364fc059970cc020f209b3b16cf8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 15 22:46:01 2014 -0800

    altosdroid: Don't display MISSING flight number
    
    Just check and clear the entry if we end up seeing that value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 60edcfe410e7fa848813d6c1ed8dc9808887d041
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 15 16:03:32 2014 -0800

    altoslib: Make AltosState serializable
    
    This involved making every class it references serializable as well
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d4fee0b0091a1b6257a06f62b1078778cdb417f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 10 14:41:17 2014 -0800

    altoslib: Missing headers for mag sensor in CSV output
    
    Kelsey Black <nmonic@gmail.com> reported that the TeleMega CSV output
    was missing the header labels for the mag sensor data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 437eba2ff27b2b7dfd0f363819b9a43ab8b28ead
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 6 20:04:47 2014 -0800

    altos: Reset interrupt flags before TX in CC1200 driver
    
    Failing to reset the flags set during interrupt leads to
    short-circuiting transmission and not a lot of packets going out.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f742824673e5e6034defdb09b66d4d56eb8d4fe
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 6 16:05:49 2014 -0800

    altos/teledongle-v1.9: Switch to NXP processor as on prototype boards
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a082d9b5ed169b9d4153885f3535987e5ae5d84
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 6 16:04:56 2014 -0800

    altos/lpc: Disable JTAG when using pins for GPIO
    
    JTAG is enabled by default, making those pins not support GPIO unless
    specifically configured.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58db263cc835be0abb972654c2d7369718c88b37
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 6 16:04:14 2014 -0800

    altos/lpc: Declare SPI send parameters as const
    
    This matches STM
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3dd45b060c996153ff8195bd371e9e1f3b15efb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 6 16:02:47 2014 -0800

    altos: Use other TeleDongle LED for CRC-invalid packet reporting
    
    Instead of blinking out some fake-o RSSI indication, just blink the
    red LED when a packet with a bad CRC is received.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2313cdacefb2139bc68cd98e782c54d706af0704
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 6 16:02:07 2014 -0800

    altosuilib: GPS errors are recorded in floating point, not integers
    
    Fix the format used to present them in the info table.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f0ff9675017655846a8abc617b4dc9a3666d0b9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 6 16:01:24 2014 -0800

    altos: Use AO_SPO_SPEED_FAST for CC1200
    
    This asks for the fastest available SPI speed, instead of fixing it to
    8MHz, which may not be supported on every architecture.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80a0397dde2f787fb20fd2520b274b826c68ed5a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 6 16:00:06 2014 -0800

    altos: Stop attempting to ramp power on CC115L
    
    The PA register on the 115L isn't in any way monotonic, making the old
    code broken. Just rempve it instead of fixing it; we don't ramp
    anywhere else...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2e5ffd839fe5be99359e4c86a96f03148bac698
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 6 15:58:42 2014 -0800

    altos: Declare port register type only in arch header
    
    Instead of defaulting to 8 bits, explicitly require declaration of the
    type of the port register for each architecture.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2060d6ca222a04608e598baf59757f12ea2ec70
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 6 13:27:29 2014 -0800

    Move teledongle 1.9 to 1.8; there's a new 1.9
    
    1.9 is now the lpc11u14-based form-factor prototype board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b67556949aa080fc5e70771e972de880e44eca12
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 5 22:11:44 2014 -0800

    altos: Rename microwater to microsplash
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b0e903a76276e33f531eade42ac721c9490c6758
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 30 21:59:45 2014 -0700

    altosui: Pop up 'Connecting' dialog during Monitor Idle
    
    This was a bit harder than expected as I had to wire up a way to shut
    down the whole monitor idle window when you clicked on the cancel button.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef00182c79bd7a56fbc5d782cb8f4aa0079bb86f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 25 21:14:25 2014 -0700

    altos: Increase CC1200 SPI data rate to 8MHz
    
    This got set to 125kHz to make debugging with a logic analyzer easier
    and never changed back to a reasonable speed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d51570ed8776461d084726149923c5be43d622e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 25 19:56:25 2014 -0700

    altos: Fix up telemetry delay computations
    
    With RDF, APRS and telemetry all being sent at varying rates,
    computing when to send the next radio data is not as simple as sending
    telemetry and then figuring out whether to send RDF and/or APRS.
    
    Fix this by computing times for the next telemetry/rdf/aprs packet,
    and only sending each when that time has passed. Compute the delay
    until the next radio activity as the minimum time to any transmission.
    
    This also adds code to the config bits to reset the radio times
    whenever something changes that might affect which radio data to send
    next.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c831f1ffb378c20b7513d209d60cdd5dee9db85b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 25 17:44:48 2014 -0700

    altos: Perform cc1200 calibration less often. Tweak radio params
    
    This performs calibration after every 4 operations, or when the
    frequency changes. This reduces the time it takes to get to receive
    mode.
    
    This also makes the sync and preamble qualifiers more strict to reject
    bad packets.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3f7263f57b1b697d92ed6c3d62956e5bdfc11f24
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 25 11:20:44 2014 -0700

    altos: Remove old AO_SEND_ALL_BARO bits
    
    This was used for testing the original TeleMini which couldn't log
    data at full speed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae4be19f8ab0899a879a10aec28dc381f44dd2c7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 25 10:21:30 2014 -0700

    altos: Build TeleDongle v1.9 by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51ef3fad6435c0b21945d48fbbaa5a4c092c4960
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 25 10:20:07 2014 -0700

    altos: Increase PQT value for cc1200 improving sensitivity
    
    The PQT value indicates how 'good' the preamble is; higher values
    allow a lower quality of preamble to pass the test, permitting more
    packets to be decoded.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9102183b40f0b32d4fb6d24502b79a6431184310
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 25 10:17:48 2014 -0700

    altos: Sort out ao_gps_print altitude fetching
    
    ao_gps_print is used by both teledongle/telebt and the host-based GPS
    test code. The first instance uses the old internal GPS structure,
    containing just a 16-bit altitude while the second uses an
    ao_telemetry structure, which contains 32 bits split into two
    members.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb83b5432e1320726ad496ded78cced7274618b0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 7 05:36:18 2014 +0200

    altos/teledongle-v1.9: Add remaining code to complete the project
    
    This turns the prototype board into a full teledongle
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4a3fe79266a77f8fc001117f49db1d2f14f9e6b6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 7 05:34:06 2014 +0200

    altos: Complete cc1200 driver
    
    Deal with differences between cc1120 and cc1200, including built-in
    packet support and various register changes.
    
    This now works to send and receive telemetry, as well as send APRS and
    RDF.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7fea8b245cdccc1ec77aa559433952f339676473
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 7 05:35:10 2014 +0200

    altos: Expose telemetry altitude macros even without GPS
    
    This allows for APRS testing in the new teledongle code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 484b530a16a54ca8fde412c3f466bfe7eed978cd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 7 05:32:00 2014 +0200

    altos: Mark STM ao_spi_send as taking const pointer
    
    We don't write to this, so let it be const for type checking
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c17dff05b70d98e3193e8e68cc9599f3a30270b5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 24 19:10:45 2014 -0700

    ao-tools/ao-send-telem: Add verbose, fake and rate options
    
    Verbose dumps some data while sending packets.
    Fake sends constructed packets, once every 500ms.
    Rate sets the transmit bit rate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2562ee43b8558df0836217ea3a187b36e2669b3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 15 16:10:11 2014 -0700

    altosuilib: Try to detect the architecture when loading JNI lib
    
    Look at sun.arch.data.model and os.arch to try and load the right
    libaltos file the first time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 88df7cd314269fa1debe226b49b7e4e9dc238d8e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 24 21:21:19 2014 -0700

    altoslib: synchronize access to serial debug output list
    
    This list is access by both the receiver and the monitor task, so it
    needs to be locked to prevent collisions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 221824b038bf18ca43a38c82d18b0ae9586ba565
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Oct 9 13:11:16 2014 -0600

    document pyro current limits in an appendix

commit ffda6989e856e66a1bea253e82cb70f51ada3e7a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 5 00:07:10 2014 -0700

    altos: Add prototype TeleDongle v1.9 code
    
    Lights up the hardware, sends carrier and RDF tones. A bit more cc1200
    work to be done still.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27a467d802a80a33ea20eb5cda2558d03caa2c00
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 5 00:03:28 2014 -0700

    altos: Copy cc1120 driver to cc1200 driver and hack a bit
    
    The cc1200 is similar to the cc1120, although many registers have
    changed.
    
    This driver can send a bare carrier and an RDF tone, but does not yet
    receive or transmit telemetry data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 62628c8b429d06ee834f0b6511c430cbeaab9303
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 4 00:30:54 2014 -0700

    altos: Fix syntax error with ao_log_mega change.
    
    Missed a semi-colon.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00ae706dab6e8fddef4c5730a17c433a022228b7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 4 00:11:13 2014 -0700

    altoslib: Compute tilt angle from eeprom data
    
    This copies the computation of tilt angle from the firmware so that
    post-flight analysis can also show the data.
    
    This change also renames all of the imu values to make them easier to
    understand:
    
            accel   gyro    axis
    
            along   roll    length of the board
            across  pitch   across the board
            through yaw     through the board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a757fd5af53f5721a949181372548afa4757d6c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 4 00:10:03 2014 -0700

    altosui: Update 'Imperial Units' checkbox when units change
    
    If you have two graphs running, make sure the imperial units
    checkboxes agree.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 656d8fe17532ca6c7d1d43996f187df2f14f5395
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 4 00:07:39 2014 -0700

    altoslib: Deal with new Mega log format that has 32-bit gyro cal
    
    This adds parsing for the new log format type to get all 32 bits of
    the gyro calibration data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9521dc63671b69065d27fc1ccba6d20cc90643cb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 4 00:04:39 2014 -0700

    altos: Record 32-bits for gyro calibration values
    
    The gyro ground calibration values are scaled by 512 to provide a bit
    more precision for the computations. This means they don't fit in 16
    bits, so change the format of the flight log record. Also change the
    reported format so that AltosUI has a chance of figuring it out.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95d9248da78f86240dbe77e2c206420dc509c9cf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 29 12:57:27 2014 -0700

    altosui: Check for map and stats table when changing units/fonts in graph
    
    AltosGraphUI wasn't making sure the map and stats tables were present
    before attempting to adjust font size and units.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 40c5535b65a75374fb1dbbd994c29324db814f5b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 29 12:56:04 2014 -0700

    altos: Handle antenna down in ao_flight_test
    
    Parse the Pad orientation config value and flip the accelerometer
    value back around in antenna down configuration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b97a125a9f8bd9619833647a9b6aa6329103e136
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 26 22:58:13 2014 -0700

    ao-bringup: Auto-select programmer for teledongle turnon
    
    Bdale's programmer is SN 100, Keith's is SN 186. Use the username to
    figure out which one to use.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4eba3f3a58a9c35e3699ff14405b997c1318d91
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 26 22:53:39 2014 -0700

    altos: Make sure we drop the SPI mutex when aborting cc1120 recv
    
    The cc1120 receive code is 'twisty', in that it acquires the SPI mutex
    in the middle of an interrupt handler so that it can quickly start the
    radio when the signal comes in. This means we have to be careful to
    drop that mutex in all paths which leave the receive code, including
    when the packet receive is aborted mid-way through the process.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 22661ba69b8919116092382f1f5aa0dc79d02cc9
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Sep 13 17:56:51 2014 -0600

    store cal value correctly even when we didn't need to change it

commit b0eb63205223e2982d0ded08503c3f128420270f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 13 15:59:18 2014 -0700

    altosdroid: Update notebook to reflect current status
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9dc426756742fb967fdd21e1fcec54edeb4b12ac
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 13 15:52:56 2014 -0700

    altosui: Bring up main window when doing --replay or --graph
    
    This shows the main window when replaying or graphing files so that
    you can interact with that, changing the global configuration or doing
    other stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75d5368cb2a95f3f7385952669a14765460f549d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 13 15:51:50 2014 -0700

    altosui: Fix --replay to run in realtime after boost
    
    I added the ability to rapidly replay files for AltosDroid to recover
    from a crash, but didn't change AltosUI to use realtime mode again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 04b5cc37659b1b3d6b62f1ef17b17c0492434cba
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Sep 13 16:37:42 2014 -0600

    reflect filename changes in LLC repo

commit 93d1cedc94358ebf5c2af537a25a242f6c19954c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 13 15:23:40 2014 -0700

    altosdroid: Automatically sign the released version if the key is available
    
    Look in ~/altusmetrumllc for release.keystore and Passphrase and
    enable building and signing of the release binary.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2731486c12678a7d3bd7ec79e74a2fcaf20845bd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 13 13:38:31 2014 -0700

    altosdroid: Update version code and name for 1.5
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e151c144fcdb1da96e715f29c049dc4869e1d53d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 13 13:00:58 2014 -0700

    Mark master branch as past the 1.5 point
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff7c006e50515040d43399899fac26a3fe26d8a7
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Sep 13 12:31:08 2014 -0600

    updated to reflect changes from 1.5 release

commit 20d640ec504afbfdb69dba1b241d84af1e62abed
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 12 20:58:26 2014 -0700

    ao-bringup: Improve igniter testing. Add TeleMega and TeleMetrum testing.
    
    The script lets you re-try each one when they fail, which is nice if
    you're hand-holding the setup.
    
    The TeleMetrum and TeleMega tests are adapted from the EasyMega tests
    and are hooked up to the turnon scripts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0077866138a1e29ede7181e39f04860b866543a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 12 20:57:05 2014 -0700

    ao-tools/ao-test-igniter: Remove bogus printf
    
    This must have been left over from testing; it prints "device (null)",
    which isn't very useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6681d31929266fec9711b3d89a4f074cd2afcc6e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 12 20:56:29 2014 -0700

    ao-tools/ao-test-gps: Improve output formatting
    
    Add a newline before printing out the flags and sats at exit time
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2d045570d2cda0abde67a68506cb3fc2e119ec3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 12 17:22:37 2014 -0700

    ao-bringup: Use C version of ao-test-gps in test-telegps
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0e597789ac298b108ea04cc1a2c999bcf14bc9c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 12 17:22:03 2014 -0700

    ao-tools: Add ao-test-gps program
    
    This waits for GPS to report lock
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit def036794f1460a5457e6b86350712c336e296d6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 12 16:38:59 2014 -0700

    ao-bringup: Use C version of test-flash for telegps
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1630a8e458f174d6df1aa30ff30e3f02a10bdbf7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 11 19:59:58 2014 -0700

    altosui: Ignore built .desktop file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 807e62ccebc83eb6427a63431d06effa074e5e76
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 11 19:56:13 2014 -0700

    altos: Make sure we don't beep out continuity twice in idle mode
    
    If the battery voltage report takes longer than the initialiation
    sequence, we could get to the state reporting after the state had
    switched from startup to idle. This would result in continuity being
    reported the first time through the loop. Then, as the state had
    already changed, we'd pass through the while test and go back to
    report continuity a second time.
    
    Fixed by using the state remembered before beeping out the voltage to
    decide whether to report the continuity.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7ad490a33900a788b15d1600ebaa2a71e6f35ff
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 11 15:57:21 2014 -0700

    altos: Add smaller altitude table file to .gitignore
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ad8921b164103629b246c25860297454aa7ec6b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 11 15:56:14 2014 -0700

    altos/test: Add TMv2 test program to .gitignore

commit 0cedc27e22a9fbc9ccfe1b403c84d728bb23220d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 11 15:00:25 2014 -0700

    altos: Fix ability to disable telemetry by setting interval to 0
    
    For non-zero telemetry intervals, the radio code limits the value
    based on the data rate. However, a zero interval means that telemetry
    should be entirely disabled, so that value should be left alone when
    checking.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6dafd7bf947d892e430cd565eb92a3366abb3604
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 11 14:23:29 2014 -0700

    telegps: Was mis-configuring the 'Configure Device' dialog
    
    Make sure we show 'rate_label' instead of showing 'radio_enable_label'
    twice.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 368c7d583380b4453f432d5a965a1e4c45a92f92
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 11 14:14:07 2014 -0700

    altoslib: Stop re-loading previous flight when starting telemetry monitoring
    
    This feature is necessary on AltosDroid because there's no other UI
    for reloading an old flight. It's not useful on the desktop where you
    really just want to see new telemetry; old telemetry is availbale
    through the 'graph flight' or 'replay' mechanisms.
    
    AltosDroid uses a different class for reading telemetry data, so we
    can just remove this feature from altoslib at this point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ee937b603b181bb24768eb4d0e2f918a5377fd3
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 10 01:29:56 2014 -0600

    use dh_installmime, which requires telling configure to stay out of the way

commit 22e68da2cb3b0b42708876f1dde52dbfd0ce4bf7
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 10 00:26:10 2014 -0600

    another build dep

commit 615b69b19557a9683eeb0475b30a053a35ca51ac
Merge: a72b7683 03654934
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 10 01:30:37 2014 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 036549343416183f973d00a86d897d4a368c1d6f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 10 00:03:53 2014 -0700

    configure: Add --disable-install-shared-mime-info option
    
    This inhibits the installation of the shared mime info data file and
    updating of the shared mime database. Necessary if you want to use a
    distribution-specific shared mime installation hook, like dh_installmime
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1992a1e3046a5414ce8d394e1cd8e5e6f6338d29
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 9 23:43:10 2014 -0700

    .desktop: Use %F instead of %f in .desktop files
    
    %F is a list of files, %f is a single file. All of our tools can
    handle lists of files, so make the .desktop file reflect that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a72b7683606d3e741043011c929482a0a168a5c9
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Sep 9 23:44:45 2014 -0600

    more build dependencies for processing icons

commit 1fb200d18cc385230b3af574816ec354682cc5c9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 9 23:00:14 2014 -0700

    icons: Use DESTDIR when updating mime/icon caches
    
    This is done in install-data-hook and needs to explicitly use DESTDIR
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a8c799c48a52bf13466536db627b66bfe2a435cd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 9 09:38:03 2014 -0700

    altoslib/altosuilib: clean all versions of the .jar file
    
    When we switch libary versions, we want to remove the old ones; just
    have 'make clean' remove all versions of the libaries.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cef3be371cb3a9e481c2bd6abdf22c51953773f1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 9 09:37:13 2014 -0700

    altoslib/altosuilib: Add EasyMega support
    
    This makes flashing find the right files, and Monitor Idle show all of
    the state data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08a82617c53718055d97df4fa60f3e5051d65383
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 9 09:09:22 2014 -0700

    altos/easymega: Set USB PID for EasyMega to 0x0028
    
    It was using 0x0023, which is for TeleMega. 0x0028 is what's listed in
    usbvidpid.h.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d3ab4c78f79d659ce800def77bc441c95fa15be
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 9 09:02:51 2014 -0700

    altoslib: Fix idle monitor parsing of MMA655x state
    
    There's no ':' after 'MMA655X value' in the output, and the parser
    returns 'true' on success, not false.
    
    With this, 'Monitor Idle' now reports correct accelerometer readings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b7ba0a5be70ae1d661afb2592ce8a6bf660c793
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 9 09:01:42 2014 -0700

    Tag version 1.4.9.3
    
    This should be the final firmware version for 1.5
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 445d61c3810154193aebbf0f08f075ac8e107baf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 6 22:56:25 2014 -0700

    altosui: Include EasyMega firmware in fat release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0d2d34f84980ab45ecedae17546f4d71e020c5e
Merge: 8c212cd5 6c812f10
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Sep 6 23:42:47 2014 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 6c812f10761ec4ebf13e29ccef1d6c2c864f1158
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 6 22:28:13 2014 -0700

    doc: Update for version 1.5 release
    
    Add stuff about EasyMega and telemetry rate configuration. Update
    screen shots as needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d83afa9320c24056469984873af0a3c70bee0962
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 6 20:44:30 2014 -0700

    altos: Scale packet master receive delay by baud rate
    
    Increase the time we wait for return packets based on the remote
    protocol baud rate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e7515e3a88d53c50dd9b962cc8f43ce5376ccd0b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 6 20:43:32 2014 -0700

    altoslib: Increase timeouts when using low baud rate remote protocol
    
    When using 2400 or 9600 baud remote link rates, we need to increase
    the packet timeout from 500ms to much longer values to avoid annoying
    the user with timeout warnings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46f08f8709c538f3fee8e166598f0bb930df6e3c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 6 20:41:58 2014 -0700

    altoslib: Update local callsign/baud rate when using remote protocol
    
    We've had code to synchronously update the local and remote radio
    frequencies when doing configuration over the remote link. This patch
    adds the same code when changing the call sign and baud rate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f395bcaa620490954d4a42de9b4870bc12bedc91
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 6 20:39:37 2014 -0700

    altos: Reduce deviation at 2400/9600 baud
    
    There's no reason to use 20.5kHz deviation at 2400 and 9600 baud, and
    if we get a better receiver, we'll want to use narrower deviation to
    have less bandwidth sucking noise into the radio. The new values are
    (nominally) 5.125kHz deviation for 9600 baud and 1.5kHz deviation for
    2400 baud.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c212cd5bfa03f71a31d84bd0051314e77d88461
Merge: e9714e34 dd26ec2e
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Sep 6 13:41:36 2014 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
    
    Conflicts:
            ao-bringup/turnon_telemega

commit e9714e34091abe657aa1b30aeda9466331aa39c1
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Sep 6 13:40:59 2014 -0600

    tweaking test scripts

commit dd26ec2e706bdd29090759deeb90090a0e3b74f0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 6 00:39:41 2014 -0700

    altosdroid: Mark completed items as 'done'
    
    Frequency display
    Re-load data on restart
    Auto re-connect to TBT at correct freq
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18671803d078aa798b603c67b741c3ba4374f41d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 6 00:14:26 2014 -0700

    altosdroid: Add imperial unit support
    
    Provides a menu entry to switch units, changes all value displays to
    use the AltosLib units conversion code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b2ebd2fee46158abd1ae050cd6d1040ead849a0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 5 23:10:07 2014 -0700

    altosdroid: Update tab contents before switching
    
    Make sure the new tab contents are updated before switching tabs so
    that the user doesn't see old stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08bbb1c3de73c9aaf920b11247eae544df6eac0c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 5 22:06:21 2014 -0700

    altosdroid: Ignore TelemetryService messages after service shutdown
    
    Messages may get delivered after the service has been shut down;
    ignore those.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 101ac21f05a69bdeb07d423aa18017eca04fc47f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 4 11:28:40 2014 -0700

    altosdroid: add new TelemetryState.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b03aca995b0151d7e820775f6a9d4afec462633
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 3 22:59:09 2014 -0700

    altosui: Don't mark altimeter dirty when opening pyro panel
    
    Skip setting the UI dirty when filling in the pyro firing time value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be38fb88d11bda1ba1caca38220773d3abcede19
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 3 22:58:22 2014 -0700

    altos: Allow negative values for pyro configuration data
    
    All of the integer pyro configuration parameters may be negative, so
    parse that correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3842735e303f0bf6f46ed8cb659c92d8bb9bd137
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 3 22:32:49 2014 -0700

    altosdroid: Use single object to pass data to UI
    
    Instead of having separate messages for each piece of telemetry state,
    package the whole mess up in one object and send it for any
    change. This simplifies tracking within the UI by avoiding corner
    cases during reconnect.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit adc46e2f1346d98ef4f6c2351fef95fbc8ddf831
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 3 22:12:15 2014 -0700

    altos/telefire: Add firing length to manual pad command
    
    This adds an optional length of time (in 1/10s of a second) to the
    ao_pad_manual function to enable testing of igniters without needing
    to use TeleLCO.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b838a974d0dad43ff02060d8d913d9369eb20e96
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 1 18:25:00 2014 -0500

    altosui: Fix 'pad' screen for TeleGPS
    
    Don't report pad position for TeleGPS
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7735cee871d02215517cb9d91cd552f003ca6a50
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 1 18:23:42 2014 -0500

    altoslib: Catch a couple null pointers in AltosConfigTD
    
    When messing with TD, I hit a couple of paths that could try to
    dereference null pointers. Check for those.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57f0ae384f3c206ea777dc7c93b594ae3901f354
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 1 18:21:49 2014 -0500

    altoslib: Ignore extra AO_LOG_FLIGHT records from TeleGPS
    
    TeleGPS was inserting a spurious AO_LOG_FLIGHT record each time it
    turned on, which confused altoslib quite a bit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4202b4180e77e2a39ca071d3b8b8256ff0fc7b5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 1 18:12:29 2014 -0500

    altos: Don't add AO_LOG_FLIGHT to existing GPS logs
    
    When appending to a TeleGPS log, don't stick another flight value into
    the log. That just confuses the ground station software.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa7dd289ee72f7a49a08ce0229c4e0e0404499d0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 31 00:28:15 2014 -0500

    altosdroid: reload previous log file at connect time
    
    Use the saved logfile to re-load the previous state at startup time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00a3eace5ea885205270137f190538b010fd679f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 31 00:27:54 2014 -0500

    altosdroid: Add missing preferences backend file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5e348905a510bb2dcf6d7734f5681fb8338cd87
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 31 00:11:28 2014 -0500

    altoslib: create logfiles preference object. check link in existing_data
    
    The logfiles preference hash wasn't getting created, resulting in
    crashes.
    
    When there was no link, don't try to load existing data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc3fbcb35090be3856284ccf4d908ebf39d02bec
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 31 00:08:33 2014 -0500

    altosdroid: Add quit. Restart. Show freq in title.
    
    Add a quit button to menu.
    When restarting, reconnect to previous device.
    When connecting, set the freq/rate to previous values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b70ea04e807c69a987d5976ab217f9f65fb1e09
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 29 22:33:36 2014 -0500

    altosdroid: fixup fetching active device address
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0014addf3356bad1eff76cffc396fb120308646c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 29 22:08:43 2014 -0500

    altoslib: TeleMega telemetry pyro voltages are uint8
    
    Using int8 means that voltages over about 6V are reported incorrectly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 810f9a4f79b0480973d84595140d3f8948ce26d9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 29 15:22:43 2014 -0500

    altosdroid: start restoring from log data on startup
    
    Remember which flight was last being received and reload that file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5872bd10df14b47de0e541bff16d9220af0558aa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 29 15:12:38 2014 -0500

    altos: Make sure pyro remains valid during delay
    
    Keep checking pyro status while waiting for delay to expire to make
    sure nothing changes. Disable pyro channel if something does.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54994d02a5ca5bb91512f31748a48a0140d3a640
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 28 19:52:30 2014 -0700

    ao-bringup: Test EasyMega boards

commit 3c9cb4836edd4811fcdbb6ebbd25eb507a2ef5b1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 18 10:57:26 2014 -0700

    ao-bringup: Use ao-cal-accel instead of cal-accel in turnon scripts
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fac03ae9762f2af95b1ce5d99894173f9d9146f0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 18 10:53:04 2014 -0700

    Add ao-tools/ao-cal-accel
    
    This C version may be more reliable than the nickle version
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b357544dd64f5b0f209c6cc6cb4fa392a2c3e1fa
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 18 11:25:32 2014 -0600

    turn echo back on after accel cal in turnon_telemetrum so rest is easier

commit 44e389c31e5958c1a050fbe0dce5d7971a9d6a86
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 17 21:03:12 2014 -0700

    altos: Add telerepeat-v1.0
    
    This uses TeleBT hardware to provide a telemetry repeater, receiving
    packets on one frequency and re-transmitting them on another.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a51efd7f9b49ffadc91ccaf7a0d69566301c009
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 26 16:29:37 2014 -0700

    altosui: Make Windows java test "smarter"
    
    Or at least have it try more options, and then finally ask the user
    before downloading and installing java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb7522acf040f41740ecd059e3d5d2480b652420
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 17 20:59:45 2014 -0700

    telegps-v1.0: Provide one log and append to it
    
    Instead of creating per-flight logs, create a single log and append
    data to it each time TeleGPS is powered on. This avoids potentially
    running out of log space just because the device is powered off/on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1530c24cc75cdf9ba87c7e153ff28bf7beb4384c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 17 20:57:16 2014 -0700

    cc1111: Wait for internal flash write to complete
    
    This ensures that we don't try to start another write too soon.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80e20b241359452028298567c76b2f644da5ad23
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 17 20:56:22 2014 -0700

    Use -ldl when testing whether -m32 and -m64 builds work
    
    We only need -ldl, and not -lbluetooth now that libaltos uses dlopen
    on the bluetooth library
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 830f31fd6dc280e7a63ba689b7a48beff5c49072
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 17 20:55:34 2014 -0700

    ao-tools/ao-send-telem: Support sending TM v2 and Tm v2 telemetry
    
    Add state tracking so the telemetry sending code works.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 629b29b2718c174be9c811f224d0acf73fba4aff
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 17 20:54:44 2014 -0700

    altoslib: Remove some debug printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef1dd370564b99da033109f2fb5f7bf29711a13f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 17 20:53:31 2014 -0700

    altoslib: Improve performance of AltosLib.hexbytes
    
    On an android device, this function was spending quite a bit of time
    calling hexbyte. Open code the conversion to improve performance.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee9f68ec877e3e5a67179f8c8abafbccc80eb804
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 17 20:51:36 2014 -0700

    altoslib: Close serial port when AltosFlash fails to detect a target
    
    AltosDebug.check_connection raises an exception when the link fails,
    but the AltosFlash constructor didn't close the serial port in this
    case, causing the serial port to appear to be busy.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 76fd424e4624cb376ac2cf84b01b77599756680a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 17 20:50:38 2014 -0700

    altoslib: Handle link timeout in AltosDebug.read_memory
    
    link.get_reply returns null on a link error; don't crash in
    read_memory when this happens.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 935f769fee351545622e223a283fca64608ca410
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 17 20:49:27 2014 -0700

    altoslib: Parse 'Log fixed:' configuration value
    
    TeleGPS holds a single flight record and constantly appends data to it
    instead of having separate flight records on the board. It reports
    'Log fixed: 1' to let AltosLib know that the size of the per-flight
    log is not configurable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59dfe661fcb504f390d9726378c676f2b5b005f3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 17 20:48:23 2014 -0700

    altosdroid: Skip updating hidden UI elements
    
    Instead of updating everything in the UI, only update the visible UI
    elements to save a bunch of computation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1f1844aa514893228080704da3b3ccf855bda1e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 17 20:46:48 2014 -0700

    altosdroid: Add telemetry rate support
    
    Provides a menu to select the receiver telemetry bit rate
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e935ebe55705cb0506aac0859583d54fd8e5ca46
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 14 19:03:29 2014 -0700

    altos: Report additional pyro channels via beeper
    
    Send a beep for each additional pyro channel, low for no igniter, mid
    for igniter. Does not change the reporting for the apogee/main channels.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4dd29fcbbb93e991993a0aa444748dba4ee7dde
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 22 14:18:06 2014 -0700

    altos: Document which TeleFire alarm pins are which
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8e2b661e895fc59ded002a02191dcccce75f548
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 19 22:35:30 2014 -0700

    altos: Have MicroKite just start recording at startup
    
    This avoids having MicroKite try to detect boost and has it just start
    recording data immediately.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59976c44d1b6ee6505cfa4efd9a26ec4302f6c33
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 14 18:16:14 2014 -0600

    change easymega from v0.1 to v1.0, tweak to build on master, add to Makefile

commit 4828be0ca5252ac9cd6061209385dcd6c4c57965
Merge: 17e894d1 165b7dcf
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 14 17:08:36 2014 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 165b7dcf6fba90b15ff32b891cba4b9111c1965b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 16 17:13:25 2014 -0700

    altoslib: Handle TeleGPS files for KML export
    
    TeleGPS files had state values that couldn't be converted to colors,
    which resulted in a truncated file that wasn't much use for anything.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17e894d1b65231d07df009bc4e8ca92864ccf790
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 15 23:15:50 2014 -0600

    update turnon tools

commit ec7ceb607f5ba7e1ed5cfd32b7a452a5f364b095
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 15 00:44:14 2014 -0700

    linux-fat: Fix up fat linux install icons, mime types and .desktop files
    
    use the standard xdg utilities to install mime type and .desktop
    files. The standard xdg icon installer doesn't handle svg icons, so we
    have to do those manually.
    
    With this patch, xfce, gnome3 and kde4 all place the applications in
    user-visible menus, display correct file icons and launch correct
    applications for our file types.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb914d37018a585a879161483609d3c0be556d1e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 14 02:32:03 2014 -0700

    altosuilib: Fix minor scan UI nits
    
    Wasn't computing geometry correctly and overlapped the 2400 baud entry
    with the list of scan results.
    
    Was not saving the telemetry rate/telemetry style when switching to
    monitor mode, which caused the new monitor to come up with the wrong values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54b58e925e27e87bf2903678f87b7544ee2e8167
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 14 00:46:41 2014 -0700

    Set version to 1.4.9.2

commit 9e9151c3b4bb9ce329e1b44440a7aceb9f39b9a0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 14 00:45:13 2014 -0700

    altoslib: Parse eeprom 'altitude-32' fields
    
    This lets us tell if the altimeter supports 32-bit GPS altitudes in
    the eeprom log.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0fd867f504dd7df62e95da98ded511bb7b9e4c66
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 13 20:44:39 2014 -0700

    altos/test: Build TeleMetrumV2 flight test variant
    
    Parses TeleMetrumV2 eeprom files and runs the TeleMetrumV2 flight code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50aec54bdc35962145eff9b465f9cd7b3d9fea0b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 13 20:43:27 2014 -0700

    altos: Make ao_gps_print deal with telem containing 32-bit altitude values
    
    ao_gps_print is used with new telem packets from a few places; use
    AO_TELEMETRY_LOCATION_ALTITUDE when necessary.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c3d09bf40f2af6e8722f33a70b41e5d94ceaf9f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 13 20:42:41 2014 -0700

    altos: Interrupt radio receive when changing data rate
    
    This aborts any pending radio receive when changing the data rate so
    that the radio can be reprogrammed to receive at the correct rate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d1adc6775a66633661af747bc4176e06f97630f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 13 20:41:36 2014 -0700

    ao-tools: Add a few GPS telem/eeprom constants
    
    These make it possible to encode/decode GPS data from telemetry and
    eeprom files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c9daa4f471ac90ffce3bfe8876c9008f79a5b7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 13 20:40:40 2014 -0700

    ao-tools: Provide altitude to temperature conversion function
    
    This takes altitude and computes the 'normal' temperature for
    that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e447e1e5c90d3fc1be9c5a1c966c7c688a87ba18
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 13 11:06:29 2014 -0700

    ao-tools: Add TMv2 and Tgps log formats to cc.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a60ba449ec237ad3b8dade9dcea603b349dbccb1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 12 23:52:05 2014 -0700

    altos/telefire,telelco: Add HAS_RADIO_RATE to launch system software
    
    This lets us set the rate to a lower value to improve range. 9600 baud
    works great; 2400 baud makes the initial search take a long time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa155693282746861b227afd6cbccc83dfd1bbed
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 21:27:30 2014 -0700

    telegps: Missing function in TeleGPSConfigUI
    
    set_altitude_32 was added to the abstract class but not here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 405626971b47d4d4031312232bf13ad3d4bace7f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 21:13:49 2014 -0700

    libaltos: typo in libaltos broke the build
    
    When converting this to use dlopen, I mis-typed the name hci_read_remote_name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f5b03879d9daa68a56498b45ae87a804cb1926b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 18:43:31 2014 -0700

    altosui: Don't show bluetooth UI bits on mac/windows
    
    This just confuses people into thinking that bluetooth is supported on
    those machines.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aac3fdce54233993c91d326df3732a7c448ac54a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 18:42:37 2014 -0700

    libaltos: Bind to libbluetooth at runtime on demand
    
    This lets us reliably start and run without libbluetooth present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59702e5ff8d0522b0aa9dcca863309eaafbcda09
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 17:27:43 2014 -0700

    altoslib: Extend telemetry heights from 16 to 32 bits
    
    Uses the GPS data and/or previous kalman data to compute the upper 16
    bits of the truncated telemetry altitude value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6dc58c63d202e918f16d5fbe9b188d422edcdd9c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 17:26:19 2014 -0700

    altosui: Fix the 'Graph' button on the landed tab
    
    It hasn't been getting enabled since the state tabs were rewritten.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 013e9ccfbe76dc46e8c69ea314950bed83d9a39f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 17:18:38 2014 -0700

    altos: Use 32-bits for flight state data (alt/speed/accel)
    
    Stores 32-bits for all of the flight parameters. Uses 64-bit
    intermediates for kalman computation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31ae24b5da3e198e7555ea3768d3cbdec3a28a5f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 17:15:09 2014 -0700

    altos: Record pdop value in TeleMetrumV2 log
    
    There's only one byte free, so we'll record the pdop value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47e62bb26984f6c84660c1d0451f77c2d6ad7e5a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 17:13:09 2014 -0700

    altos: Scale DOP values by 10 in GPS drivers
    
    sky traq was scaling by 5, ublox was scaling by 100.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ed2a08c50d6b8ebcc8c1d2f15e73c1f2a1e25041
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 17:10:49 2014 -0700

    altoslib: Handle wide GPS altitude values in eeprom and telemetry
    
    Detect when the wider data is present and handle it correctly
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 34d5be68ca23e8beb05db9a480faef63ecc911d0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 17:07:48 2014 -0700

    altos: Extend GPS altitudes to at least 24 bits everywhere
    
    Telemetry gets a special 'mode' flag indicating that 24-bit data is
    present; log files get new data and log readers are expected to detect
    that via the firmware version number.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d044af0c5025a63026d05adcab68f265f179668
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 16:19:52 2014 -0700

    altosuilib: Allow for unitless axes in graphs
    
    DOP values have no units.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a2f44fa867b17a0f1c1ee9aa9b99ecaa102a361b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 16:19:34 2014 -0700

    altosuilib: Add GPS DOP values to info table
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 61cbad00b68d9f4f2fed7b76132433e263966952
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 16:19:17 2014 -0700

    altosuilib: Add GPS DOP values to graph
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9dafabd77676e08da4067cd405b6f03bf8d8ff85
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 16:17:56 2014 -0700

    altoslib: Ensure CSV output is consistent
    
    Scan entire flight to figure out which columns to include before
    outputing header or data. Limit data output to values which are valid.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8fa4e9a077e8e04b922d0c434c139ad0a57ee66
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 16:15:52 2014 -0700

    altoslib: Clean up GPS DOP support in AltosState
    
    Parse out hdop/pdop/vdop from telem and eeprom. Deal with legacy
    eeprom files that have dop/100 instead of dop/10 values.
    
    Clear state DOP values to MISSING at startup
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f2a4c610dfacbf500650db0eeeca6623bb49c5c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 10 00:26:55 2014 -0700

    micropeak/altosui/telegps: Fix icon file names
    
    The icon file names are now structured to have an organization name
    and application name component. This should avoid collisions with
    other packages when the icon files are installed in a shared
    directory, as on Linux. Within the Java .jar file, the new names need
    to be correctly referenced or we won't find them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1684291ba9a4f3bc2828e7b079ac27efcba6a163
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 8 23:47:09 2014 -0700

    altos/telemini-v2.0: Enable beep config and radio rate config
    
    use the smaller pa to altitude table to make room for the new code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d926ccfbd4596eb3f981d2fcf8f6fc6ccc427db6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 8 23:46:24 2014 -0700

    altos: Add smaller pa to altitude table for TeleMini
    
    TeleMini doesn't have space for the larger table, and the smaller one
    isn't that much less accurate at lower altitudes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a55cbe1923280f7009c13d5eb5b2ccac89219c2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 8 23:45:10 2014 -0700

    altos/telemini-v2.0: Add memory decorations to new telemetry variables
    
    This lets TeleMini-v2.0 compile.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95f3a2825377bdb6737446df051c069d58f42d08
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 8 23:43:31 2014 -0700

    altosui: Hide inactive altimeter configuration entries
    
    Instead of disabling them, just hide them so that entries that do not
    apply to a particular device won't get shown at all.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 78db9e350db104da87e0fe4b72aa41bf6cf45e1d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 6 20:10:21 2014 -0700

    Bump version to 1.4.9.1 -- on the way to 1.5

commit d1527a5457210eb914312cf8857bfb88982a8462
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 6 12:35:13 2014 -0700

    Add support for the "kite" micropeak variant
    
    This uses a 100m 'launch detect' altitude and logs data every 19.2s
    instead of every .192s.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f02cc3eec53e9d703837dad55ec2e6625b192588
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 5 00:16:57 2014 -0700

    telegps: Support variable telemetry rate
    
    Add combo box to monitoring window and device configuration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit efb86669b5a74f244e2218f3385db633c36208af
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 4 23:41:16 2014 -0700

    altosui: Support telemetry data rates
    
    Add combo box to flight UI and flight hardware configuration UIs
    Add telemetry rate to the TD/TBT config dialog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9557a24b02911a93d74ee29ce359e40266cb4fed
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 4 23:57:42 2014 -0700

    altosuilib: Add telemetry rate to Scan UI
    
    Let the user scan for multiple data rates as well as telemetry formats
    and frequencies
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55e6558fa7cb23fb1363a86c83fbd6abf67ea324
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 2 22:48:13 2014 -0700

    altoslib: Support multiple telemetry rates
    
    Altos now supports 2400 and 9600 baud in addition to the classic 38400
    baud rate. Add support to altoslib for these as well
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 292cb8380b478542555b5f370e8252eafa2f74ac
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 5 00:04:06 2014 -0700

    altos: Rework packet receive for cc1120
    
    Instead of blocking on PQT, just set up the receiver to start going
    and when the first bit interrupt comes in, grab the SPI bus if
    possible and configure it for reception. This improves sensitivity in
    the radio by a significant amount while making the code conceptually a
    bit nicer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0ee2ac6bc68b73e13bf34fac3ffd4a3b79dce98
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 2 22:34:48 2014 -0700

    altos: Add telemetry rate support to CC1120 driver
    
    This supports the new 2400 and 9600 baud rates
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91461251f3aa8e1b37a3456f8fb94ab16bc0bec2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 4 23:42:30 2014 -0700

    altos: Packet reception tuning for cc1120 driver
    
    This adjusts the cc1120 receive parameters to increase sensitivity at
    the expense of reporting many more invalid packets to the UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8935e29e5aa9c01cd00b275a35dd7b99c00980c3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 2 22:41:20 2014 -0700

    altos: Add 2400 and 9600 baud telemetry support to cc115l driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aba1703a1cff3da001d64bf2d15a591816e3350e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 2 22:31:59 2014 -0700

    altos/cc1111: Add 2400 and 9600 baud telemetry rate support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c20ddde2f9eb0ad8dbb982e9d0cbe91639160a34
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 2 22:30:23 2014 -0700

    altos/cc1111: Adjust receive parameters to improve sensitivity
    
    This removes the packet quality test and carrier sense tests when
    deciding whether to start decoding a packet. This lets more bad
    packets through, but the CRC check catches those and now we're
    regularly receiving packets down to -110 or even -112 dBm. Before this
    change, we'd rarely see packets as low as -105dBm
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea5887027e7a39da2b7d84a142d74950b7a24703
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 5 00:09:25 2014 -0700

    altos: Call ao_telemetry_reset_interval when telemetry rate changes
    
    This lets the radio code adjust the telemetry packet sending pattern
    when the data rate changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 214a38eb2b084baec526aa42016eddb954038639
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 2 22:44:07 2014 -0700

    altos: Add config support for 2400 and 9600 baud telemetry rates
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0605b5a1cdff5cfd71fc9ef3161a62d74a1124b4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 2 22:42:10 2014 -0700

    altos: Add defines for 2400 and 9600 baud telemetry rates
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f8567a7be7ccd5dcc57ab65e63efe45e62008127
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 4 23:26:57 2014 -0700

    altos: Reduce configuration data telemetry to once per 5 seconds
    
    This data is constant, so we don't need to send it very often. Once
    every five seconds should be plenty.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 657d455a2fad36193e6b3a7037d9ba7f09ae1168
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 2 22:46:07 2014 -0700

    altos: Use TeleMetrum v1.9 board for MegaDongle experiments
    
    This configures the MegaDongle v0.1 directory to use the pin
    assignments in TeleMetrum v1.9 boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 48508479b0f6f8d6e73db1cae8ee8acdaba022d8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 2 22:45:01 2014 -0700

    altos: Stop sticking cc1111 firmware in src directory
    
    This just clutters src.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 500353ec83af0da7fce3d67f2707f4725b1f50ba
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 2 22:42:43 2014 -0700

    altos: ao_rssi subsystem needs to use AO_LED_TYPE instead of uint8_t
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb15cb8db5ef570b57f89d4e58734554542f99ff
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 4 23:22:20 2014 -0700

    altosuilib: Remove debug printfs from map cache
    
    Just annoying
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e99ff2c99f5d4a2fa196507e794c690665ab39e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 4 23:20:51 2014 -0700

    altoslib: Preserve receiver_serial across state reset for new transmitter
    
    When the transmitter serial or flight number changes, we re-init the
    state information, but we want to preserve the receiver serial number
    so that the log file has that in the name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d6e64790287d684cb9b70c67fa270825932cc020
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 25 13:50:54 2014 -0700

    altoslib: Disable telemetry while getting config data
    
    We're seeing some log files created without a suitable -via- number
    included. My hypothesis is that incoming telemetry is getting
    interleaved with the configuration data containing the serial
    number. This change simply disables telemetry while retrieving the
    configuration data to try and keep that from happening.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98c3c3f7edd58358939f7dacf5b8f4c336712f5b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 4 23:38:53 2014 -0700

    altosui/telegps: Undo the frequency/telemetry menu changes
    
    Using menus for these items isn't what we want; we want to show the
    current value on the screen, which is what a combo box is for. Switch
    back to those and remove the frequency and telemetry config from the
    TeleGPS menu bar so that Mac OS X is happy.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 505c6a1f8b8d68fe6f74dcb4428c860157fae3de
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jun 25 13:37:56 2014 -0600

    note need to push the updated repo with production binaries during release

commit 75db560e2c9fbb2889db507acc93e889bf15bc2a
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jun 24 22:43:04 2014 -0600

    Windows sucks, hard .. make sure filenames are legal in .mdwn files

commit 61ca8493566d5ea0da379970ab94f80a462dd368
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jun 24 22:35:43 2014 -0600

    update Releasing file based on learnings from 1.4.1 release

commit 424112349d54bb6360403683f8012b83f49220be
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 24 20:57:29 2014 -0700

    telegps: Disable tracker config when not available
    
    Tracker motion and interval were both left enabled even when the
    device being configured didn't support them. Disable them like other
    elements.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7427f8bac7b3743ce0ab990612bf7168b95e22f9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 24 20:52:34 2014 -0700

    altosui: Don't show the tracker motion value when switching units
    
    The tracker value was left enabled when hidden; the logic for deciding
    whether to update it with new information used only the enabled state,
    not the visible state. Set both states when hiding it to keep things
    more consistent
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6cb5955ab5aa3b42a507c4a02812cb5569b8562b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 20 11:56:58 2014 -0700

    Add note about including Google maps API key
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f95b0e03c75d09e8ff4dbf9083cd3c8a30fdc4e6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 20 11:51:11 2014 -0700

    Add 1.4.1 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b2c5f7d10265794a5778546f2e3eca7d763eab56
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 24 20:31:50 2014 -0700

    Clean all .desktop files, ignore them too
    
    All .desktop files are built from .desktop.in files, so just remove
    all of them in make clean, and ignore all of them in .gitignore.
    This makes the rename less painful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1065424d144b8dab949db7e57140ffdf244bd48
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jun 24 21:22:26 2014 -0600

    need the api key in Bdale's root too

commit bd440afc2a6e37b74fffcf1b977e149485095316
Merge: 5d4f912b a0ccab8e
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jun 24 21:17:53 2014 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit a0ccab8e4235934538a03f8be3b37aa1bbd6b144
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 24 20:15:38 2014 -0700

    altosuilib: Mark 'Configure AltosUI' window with maps key status
    
    This lets us check a build to make sure it has a maps key
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d4f912bcc6784f975c82f7b0ed8dc360e60aae8
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jun 24 21:12:59 2014 -0600

    make sure to use Google Maps API key for official builds

commit 048ce00ea0d1d2744552942559aa1da2431ab954
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 24 18:26:04 2014 -0700

    icon: Generate altusmetrum.xpm and install it
    
    This is for the debian menu, still a required part of a debian package.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dbff6dd42f8b6fb90c8d3f07bde48a6be0bfddf0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 24 18:25:31 2014 -0700

    altosuilib: Outline map lines and distance value with white
    
    This makes the value and line visible on dark backgrounds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ade2cc9abb8ca403a9ae5d1f9c145ab72ce94919
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 24 18:24:02 2014 -0700

    altosuilib: Make map cache size configurable
    
    Systems with sufficient memory can get smoother map scrolling by
    making the cache larger. Would be nice to do this automatically?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97269bb90c1602a1f8c54fc7b6c34383a0370621
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 24 15:58:35 2014 -0700

    Bump version to 1.4.1.1

commit 309d91d25099bebda21e165165efa9ce86cb0a47
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 24 15:57:13 2014 -0700

    altos/ao_flight_test: Get the Tmega version compiling again
    
    A few changes broke this recently.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 443bbb09468df7c1a10f2c76996c92380d8b8c23
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 24 15:56:11 2014 -0700

    altos: Add optional debugging to print out pyro firing status
    
    This dumps pyro check failures for ao_flight_test so you can see why
    pyro charges aren't firing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a19073649570016db28d5e2a4a225273732adb5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 22 21:13:54 2014 -0700

    ao-bringup: Use the C tools to test EasyMini
    
    I think my USB driver in the kernel is broken; the nickle versions of
    these  tools did very strange things and never worked.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fc3364de2b6cdfff53f5c38b3ae52ae5601ff3b7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 22 21:12:37 2014 -0700

    ao-tools: Add ao-test-baro, ao-test-igniter and ao-test-flash
    
    C versions of the test programs used to validate hardware prior to ship
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6cc2d671c0e335fbedb0e97699f8f273502c6807
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 22 21:06:24 2014 -0700

    altosui/telegps: Expose configurable APRS SSID
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3f3382126bf1122b1a78abe8458af5ec112a1f95
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 22 21:05:05 2014 -0700

    altos: Make APRS SSID configurable
    
    This uses the low-digit from the serial number by default, but lets
    the user change it if desired.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca1c62ca3ea016a1a5baa4520e484c102280c3e3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 21 18:27:42 2014 -0700

    altosui: Add Ignitor tab to Monitor Idle mode
    
    Oops; missed adding this when I included it in the Monitor Flight window.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 602d6a2424a5c16e22febf6b4e6b3816022261c7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 20 00:41:17 2014 -0700

    altos/aprs: Encode last serial number in SSID. Transmit serial in comment
    
    This makes it a lot easier to tell which device is sending
    information, and to receive data from multiple devices on the same
    receiver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3016ee5f21ec66bf9230b90ab1420b8fad628f8d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 20 00:40:10 2014 -0700

    altosuilib: Wrap radio frequency menu in JMenuBar when used in config
    
    The device config dialogs place the radio frequency menu inside a
    dialog box; it needs to be inside a MenuBar to work properly, so
    create one to hold it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b0f56ddb2b85b68232c22a7a8b8744cb9ad76f9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 19 14:33:27 2014 -0700

    Rename icon files to fit XDG specifications. Add file icons. Add mime types
    
    Our SVG icons now follow XDG standards by including a vendor
    prefix. The new file type icons include application-vnd.altusmetrum as
    a prefix so that they match the mime types declared.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 37856672c57f2fd91184c2391a201bbbdc48545e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 19 10:25:07 2014 -0700

    linux: .desktop files must begin with organization name
    
    The spec requires that .desktop files start with the organization
    name, so I've renamed all of them to altusmetrum-<application>.desktop
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d773cb8921848c99f12b8cd9840cb0267b66e1f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 18 20:35:12 2014 -0700

    windows: Missed adding 'refresh-sh.nsh'
    
    This script forces windows explorer to reload icons.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7767a045d446ea2bc5fe1ec98d89274155f956c4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 18 16:18:05 2014 -0700

    macosx: Respond to apple messages in all apps
    
    This connects the callbacks in AltosUIFrame to actually do something
    useful with them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d5bdb1c5974788b9569897435808fd01b04b0c4d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 18 16:14:44 2014 -0700

    altosuilib: Hook up apple messages to callbacks
    
    This supports open, quit and preferences. I'm leaving 'about' to the
    existing stuff until I decide it's worth the effort to create a fancy
    about dialog.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e3eab18682e77c5394918448409d383a28ba23ad
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 18 14:16:36 2014 -0700

    altosui: Ship TeleMetrum v2.0 firmware with AltosUI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fac94c593285eacda57de257fa2be0548341b567
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 18 14:15:27 2014 -0700

    macosx: Define icons for our file types on OS X
    
    Adds definitions to the Info.plist files shipped to specify which
    icons to show for .telem, .eeprom and .mpd files. Note that the
    applications don't respond to open apple events, so double clicking on
    a file only starts the application.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5871225a0c442cf5afa41a444ff8bfb8f4002721
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 18 02:16:51 2014 -0700

    windows installer: Create file associations for Windows.
    
    This makes icons appear for the files in the file manager, and lets
    you double-click on the files to open the appropriate application.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c93c4efefee0dbf6d193466efd6761d9a1849ae9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 18 02:15:04 2014 -0700

    icon: Construct .exe files to hold windows icons for file associations
    
    It appears that creating an executable with an icon resource is the
    only way to display icons for files. Fortunately, that's not all that
    hard.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3f4e765c05ddbae83ca0c0176572cd698f285d08
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 17 20:46:33 2014 -0700

    Fix java version detection and downloading
    
    Move java stuff to a common include file, java.nsh
    
    Let any version no older than 1.6 serve by using ${VersionCompare}
    
    Use version 6 downloads as those don't require a click-through agreement.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 495e84540943cccb6d1cb965a772021f7dc5f639
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 17 00:08:03 2014 -0700

    Sign our .inf file with the comodo key. Update signing-driver
    
    I've tested this on Windows 7 and it appears to work. No idea if it
    works on Windows 8 yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b397e4ff45f054acb1347ffa5468950febc431f7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 16 23:03:49 2014 -0700

    altos/micropeak: Add load script template
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c8078d352a7f54a4a97d25af080155d3f875536a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 16 22:49:34 2014 -0700

    java: Bump java library versions for next release
    
    Prepare for future release by bumping java versions now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75766b0e7ee30fb3bfbf90ecb68f7758bac6eeba
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 16 22:48:25 2014 -0700

    altosui: Fix ground station configure frequency list
    
    Fix the API to match the switch to a menu, wrap in a menu bar to make
    it work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ed38b1b596062b2232fa78a3181f6eaf5818b651
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 16 21:58:13 2014 -0700

    altosuilib: Move menu bars into the Mac OS X top bar
    
    Setting these properties causes the top menu bar to get placed into
    the Mac OS X window system menu bar
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e612693e33ef3b0e22db0656792992fa6e961ff2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 16 21:57:35 2014 -0700

    altosui/telegps: Use menus for frequency list and telemetry formats
    
    This will let us move them into the Mac OS X menu bar, as well as
    making them look a bit nicer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6579e4cae8fea65780f1c4677f29c1fc17ca41e2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 16 15:59:09 2014 -0700

    altos/micropeak: Create a script to load firmware.
    
    The micropeak-load script flashes micropeak with firmware from
    whatever directory it is sitting in. A 'publish' target in the source
    directory copies the script and hex to ~/altusmetrumllc/Binaries
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31beeb0882d27cbc05e28118611feec4ae43d9da
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 16 11:02:49 2014 -0700

    doc: Add instructions for flash recovery technique
    
    The flash recovery section explained which pins to connect, but lacked
    explicit instructions on how to make it work.

commit f167d348b147e89d269ad35806e39f28cf104afb
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jun 15 18:41:25 2014 -0600

    notes updated for TeleGPS and 1.4 release learnings

commit 9ab3a1de95b705783c31a7e16447f52c10b6b480
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jun 15 17:44:42 2014 -0600

    turn-on support for TeleGPS

commit b40351d5cb9802133f443d4f5150958b03b9e8f0
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jun 15 17:43:50 2014 -0600

    tagging 1.4 release

commit 97a7cbaee806965ca7c696fb02f6e1d24b026b9b
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jun 15 17:43:06 2014 -0600

    add release to revision history

commit 79c3dc334d79eacd63bbbbec046fc2c31266560c
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jun 15 17:40:27 2014 -0600

    tweaks

commit a6c61fb993d3fd15183f8755d9058f05c606c9c0
Merge: 0634119d 43848991
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 15 16:31:01 2014 -0700

    Merge remote-tracking branch 'origin/master'

commit 0634119df45bf8d8a040b47bdfc6d9801b5e069a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 15 16:24:28 2014 -0700

    micropeak: Deal with 64-bit windows
    
    Install 64-bit version of java. Install our bits in the 64-bit app directory
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b6eb1ac1b777b6c11e8f24c5ab5915b224101d40
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 15 16:16:59 2014 -0700

    Add notes about windows driver signing in the 'signing-driver' file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6277827520df4df5ecda58898e5f99035f90282c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 15 16:11:49 2014 -0700

    altosui: Ship telegps firmware
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b5651d311d4268a130996e71afc11b508e59637
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 15 16:10:15 2014 -0700

    windows: Sign altusmetrum.inf with altusmetrum.cat
    
    This .cat file will need to be updated when we get our 'real'
    signature.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef6998c2d052bf639f257b71baefacf3a652506f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 15 16:06:42 2014 -0700

    icon: Add drop-shadows to the SVG files; stop generating in the png versions
    
    Now everyone gets drop shadows.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43848991defaeb7fae994101675b0056f9d9a2ed
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jun 15 17:29:49 2014 -0600

    update Releasing document to include TeleGPS firmware files in those copied

commit 90e03dfc8534fc4fc25f6a5ee9ec109b98baa238
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jun 15 17:28:02 2014 -0600

    document mounting hole size for TeleGPS

commit 44fc36b3f74386f0055eac4d9b9d201e6fff0847
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 15 16:08:27 2014 -0700

    altosui: Deal with 64-bit windows
    
    Get a 64-bit java version installed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a563026409ccff5dea6f89e567accb09bc4b5f6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 15 14:09:09 2014 -0700

    telegps: Deal with 64-bit windows differently on install
    
    Download a 64-bit version of java as needed, install in 64-bit paths
    instead of 32-bit paths.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abf731b3d79b66d9da62496cebf157f2888a4c93
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 15 12:39:49 2014 -0700

    windows: Rename telemetrum.inf to altusmetrum.inf
    
    Use the corporate name for this file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8073007292875169a6304824ae52039ce6564813
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 22:29:01 2014 -0700

    telegps: Include telegps firmware in windows package
    
    This was disabled when the firmware wasn't ready yet
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6cad0b783f654864f0d6d8726c74605f108db3e0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 22:23:10 2014 -0700

    altosuilib: Remove some debugging printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 823ef386f9dc5c5df197936f4254921f2e0282b0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 20:08:40 2014 -0700

    altoslib: AltosFlightStatsTable: another editable text field that shouldn't be
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5392ee3c5328f8384ed30a2d147e4be96075e064
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 18:51:25 2014 -0700

    altosuilib: Serialize access to async tile notify function in preload
    
    This ensures that we see each tile getting downloaded and don't
    mis-count, which would result in wedging the process
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 23708b4760250f55e8e3b1a0141df9a9ee17a936
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 18:34:09 2014 -0700

    icon: Make the icon shadows a bit less harsh
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e3318645d08dda483aced97450b344629902c4d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 18:11:28 2014 -0700

    debian: Build requires /usr/bin/convert now
    
    This is provided by either graphicsmagick or imagemagick
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 382e27de3472489f8f26c8c0868732d67754ecf5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 18:09:31 2014 -0700

    telegps/micropeak: Ship built Mac OSX icons
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 33da986161c38936cff82fe43046f0bcd5e24d8e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 18:07:39 2014 -0700

    icon: Build resolutions needed for Java bits too
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 66c4a091bb6a294f9d406e75f3634492c886d139
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 18:06:36 2014 -0700

    altosui: Build MacOSX icon from svg
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b825ea71ebcc4a8da3e339ab3e21b0ad47f2e48f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 18:02:51 2014 -0700

    icon: Build windows ico files, clean built files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ec960b705b87b15d015abb2a9a3e23eee414f1d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 17:51:46 2014 -0700

    icon: Create all icons from .svg files
    
    Remove images from repository, leaving only the svg files and build
    instructions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 951fda701ed31f4d8390c130215597e8f63e837e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 16:26:22 2014 -0700

    altosuilib: Make graph enable buttons be CheckBoxes instead of RadioButtons
    
    aj noticed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e00f59be582de86cef28b33ce5523f39d3dc933
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 16:05:51 2014 -0700

    telegps: Fix Mac icon file name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92943bf4536d4167edd097e61de5e6b4f29130f8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 15:44:20 2014 -0700

    micropeak: Make statistics entries un-editable
    
    Otherwise you can actually type in the various fields.x
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1fc3032d688cbb7c09c1dffde30cc815f3594e29
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 15:20:07 2014 -0700

    alotsuilib: Remove old "mega" and "mini" file extensions from data chooser
    
    We never shipped AltosUI which stored mega/mini files in different extensions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c11b2f5caa3fbe2bc977e716ec1c3ccee9e75884
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 14:41:13 2014 -0700

    altosui/telegps: Switch to AltosUIIndicator and AltosUIFlightTab
    
    Removes replicated code across all flight tabs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f5887a3e7cf993e23dbb1e0f6b9ebece78c34413
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 14:40:24 2014 -0700

    altosuilib: Add AltosUIFlightTab class
    
    This covers most of the common functions for all flight status display tabs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8250777e6e869bcee9781691caa1f2a7cfb33b43
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 14:39:26 2014 -0700

    altosuilib: Add more options to AltosUIIndicator to suit AltosUI
    
    This makes AltosUIIndicator capable of displaying most stuff in AltosUI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 19273a4a341342ca6b5d65cfc490d92cbf23356f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 14:38:00 2014 -0700

    altosuilib: Make sure only one thread is closing serial device
    
    Multiple closers can cause a crash by freeing the libaltos device twice
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2903f0911e79e381c6125022bb84096321c258eb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 14:37:35 2014 -0700

    altosuilib: provide getName() for AltosInfoTable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 242e968a6982f2ceaa79780cbeec8c4e21321b44
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 14:36:49 2014 -0700

    altosuilib: In graph, show zero sats in view as 0 instead of MISSING
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7553c54765dcc9ac532fe52aae9594b2ad5e560
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 14:36:11 2014 -0700

    altosuilib: Require all flight display classes to provide a name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14f0faae48849ff6f1e326a294b54c504c730bb9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 14:34:59 2014 -0700

    altoslib: When GPS disappears, set range and elevation to MISSING
    
    Use MISSING instead of bogus values so that displayers can tell what
    to do.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 451950bba9ee3b25b5d0c6e5f0b55f08a5b29f73
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 14 14:33:58 2014 -0700

    altoslib: Add units converters for latitude and longitude
    
    Makes display of these values consistent across all instances
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae7084f5199318dc6582e212492a50cfda1cebb8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 22:36:00 2014 -0700

    doc: TeleGPS docs are complete
    
    All TeleGPS features should now be documented to some degree
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bfbabfa60f3cedd994f693867bce56aad05be02a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 22:04:57 2014 -0700

    telegps: Allow TeleGPS preferences to have a custom title and label
    
    Don't just inherit the AltosUI ones
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 536db8d03aedb45698c42418c50a46d609fc98ad
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 22:04:35 2014 -0700

    doc: Add a bunch more stuff to the telegps docs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a6a3c34293eac6442f766e13ce148f595e891eb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 21:26:33 2014 -0700

    altosuilib: Make map-cache per-window instead of global
    
    This consumes more memory, but avoids cache conflicts between windows
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92895c87bc3d97bf4990f1feda0bd8b07da4c405
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 21:25:41 2014 -0700

    telegps: Shuffle menu entries around
    
    I think this makes them a bit more logical
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb2d0c1ef98d9df3f64fb756d78392ce63a73435
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 15:54:08 2014 -0700

    altosdroid: Improve voice for TeleGPS
    
    This avoids making lots of useless voice announcements for TeleGPS
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 191ea4a7bbcb22d70c648a9ba746f1061e6f74cb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 15:53:30 2014 -0700

    altosdroid: Don't crash when the map is touched
    
    The map 'canScroll' method was crashing when dereferencing a null
    value somewhere. Just check all of them and bail instead of crashing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3f7e885055f8a97f334e0cd3163b760b174114b6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 15:23:30 2014 -0700

    telegps: Add status tab
    
    This includes pad-relative information, battery voltage and version information
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 876acbdc22ff93c22836f789e0b6394eb19e0da3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 15:22:25 2014 -0700

    altoslib: Correctly save firmware version in AltosState
    
    It wasn't getting cloned
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3bfba8f9dbc1627a317804713f83b9d06566d008
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 15:21:28 2014 -0700

    altoslib: Add conversion class for voltages
    
    Provide a common presentation for voltage values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ed63b6c3d5878a59f52f4114b5b01942735805f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 15:20:20 2014 -0700

    altosuilib: Build some common classes for displaying values in flight window
    
    Right now, all of the flight displays have piles of custom code for
    displaying values. These new widgets should be able to replace most of
    that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a21dbb05fad2625d17bc2302faa96dc295e6ed7c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 00:28:38 2014 -0700

    telegps: Show flight number in monitor window
    
    This lets the user find the flight by number
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8cb41ce9a64029b611b3595c86a4a8e74b952ff4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 00:28:09 2014 -0700

    telegps: Disconnect telemetry device when closing monitor window
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd9ae83492648c5d39f60bdcff15481efb365701
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 00:27:19 2014 -0700

    altoslib: Remove telem monitoring when closing log file
    
    If we don't remove the telemetry monitor, the telemetry device will
    still be sending telemetry, which isn't good.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07baa7596b36cf808cd1ee26ff158b1cf8585294
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 13 00:01:46 2014 -0700

    altoslib: Call state.set_serial first for telemetry parsing
    
    If we ever get around to supporting multiple simultaneous remote
    devices, we'll need to notice that the serial changed right away
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f49540acd48292bd9f68ded647561d0e800c619d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 12 23:59:37 2014 -0700

    altos/telegps: Create new flight if current flight is erased
    
    telegps is unique in that USB may be connected while a flight is
    active and sensible things should happen. If a flight is being
    recorded and gets erased, then a new flight should be started.
    
    This is done by hooking in the flight erase code and calling out to
    the tracker code to figure out whether to switch to a new flight or not.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8117ba3553789a2bae9beb92fbe9e14e3cc79389
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 12 23:56:07 2014 -0700

    altos: Define ao_log_mutex in ao_log.c rather than every log product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcaaf51245b44a440ee8590512f71195c30c16ae
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 12 21:54:13 2014 -0700

    altos/telegps: Keep ring of recent GPS positions to detect motion quickly
    
    Instead of comparing only against the last logged value, keep a ring
    and start logging as soon as we move away from the furthest one in the ring.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 740d964ab82da8695c04650926afee4a0905011c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 12 21:53:07 2014 -0700

    altos/telegps: Set default log to 496kB for 4 logs
    
    This leaves space for four flight logs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 77b5c0cc7f085aa3c0fada5d4a943eeaf16cf6e0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 12 21:52:13 2014 -0700

    altos: Show current flight number for TeleGPS
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bfdaa95cb72c833896076d4e1a4bfe61d9549fed
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 12 15:59:20 2014 -0700

    debian: Fix build depends icotool -> icoutils
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e911c2afff78db2e385c6346c90bfcd72a8f3fb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 12 14:34:02 2014 -0700

    altos/telegps: Don't log data when plugged in to USB
    
    We don't want to accidentally log stuff when you're just trying to
    charge the battery.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d77d83685cbfce5323767bbfae3bd18be175ffc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 12 14:32:15 2014 -0700

    telegps: Don't re-add frequency menu when already present.
    
    If the receiver disappears, we'll stop tracking, but won't pull the
    frequency menu down. Doing that would take a bit of work, and it
    doesn't seem worth the effort. As a kludge-around, avoid re-creating
    the frequency menu if it's already displayed when we connect to
    another device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8044eb8e23366e91c741060939baff5137f841c7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 12 14:12:08 2014 -0700

    altosui/telegps: Reduce CPU time needed for flight displays
    
    Don't update displays which aren't shown; track hierarchy changes to
    trigger display from most recent state data.
    
    Don't update values which haven't changed; remember previous values
    and compare with new before updating widget contents.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e00ffe6ab6197ab48ba8ce3cf71a197f7215649f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 23:28:55 2014 -0700

    doc: Add TeleGPS screenshots
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7774114f7bc62e2100c7575b1dcf3536ed56343
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 23:28:36 2014 -0700

    doc: Update altusmetrum docs and screen shots for 1.4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ed591c7bdf19fe54bbde1827d0717f0ae51e003
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 23:27:16 2014 -0700

    telegps: Remove 'Flight' from titles
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0495f1b5282d8f7449cbbc1dbf99d63818d7c03c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 23:26:36 2014 -0700

    altos/telegps: Build .ihx versions for TeleGPS
    
    Needed to load with java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f306b267f63d0f59fb77b1ce41c678042dd6802
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 23:04:46 2014 -0700

    altosuilib: Repaint map when starting line draw
    
    Starting line draw will remove any existing line, so repaint to get
    rid of it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit efb6a3d5ed12f8061a48a66efcfe066e68eaf792
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 23:04:11 2014 -0700

    altoslib: Report GPS height when baro height is not available
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57272609b0d2890029fdeceeca14da93cebdb471
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 21:37:23 2014 -0700

    altosui: Don't list tracker parameters when configuring altimeter
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bfc0c65c9f9ec9547d71016fc897ba35bdb414f8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 20:36:49 2014 -0700

    altosuilib: Handle font and units changes in maps and stats table
    
    Add AltosFontListener and AltosUnitsListener bits as needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2182c49298e0862a60dea104450d5f74dbeaeeb2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 19:57:24 2014 -0700

    doc: Update 1.4 release notes to include a few more changes
    
    pyro firing time.
    flight erase on TeleMega/TeleMetrum v2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d744e588b7504f314e39b1407152d11c031673c9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 19:51:37 2014 -0700

    altosui: Add pyro firing time configuration
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcbfb3aea20e564045fc6a86f978cacabfc73226
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 18:58:09 2014 -0700

    altosdroid: Altosdroid build doesn't work in parallel, so stop trying
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c661d5de7d9c8e430211e0f97ab0bf3f09a1a543
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 18:53:42 2014 -0700

    altos: Re-enable telemini v2.0 builds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18b0f0966dfc4d1a716d4faea6f661bd3594bd94
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 18:53:10 2014 -0700

    altos/telemini-v2.0: Disable beep frequency config on TeleMini v2.0
    
    Not enough flash otherwise.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac5b15692874ea3f7b3814250ab49c68786aa982
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 18:51:19 2014 -0700

    altosuilib: Remove old widget-based map UI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a70e6fe3a11382d7f6653d19afac9ceb563db3b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 18:50:07 2014 -0700

    altos: Disable TeleMini v2.0 build for now

commit a8325483adb8d9ffda62d3f4900cf52bde70ff62
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 18:48:11 2014 -0700

    altoslib: Use GPS seconds as an additional sort key for TeleGPS eeprom
    
    Long idle periods with TeleGPS can easily overflow 16 bits of tick
    count. Using the GPS seconds provides an additional sort which will
    span the tick wrap-around.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db2443fdbf65b65703217174303027c439124a83
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 11 18:46:47 2014 -0700

    altosuilib: Rewrite map GUI bits
    
    Use a single large Canvas and draw images on top by hand.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac33ca137551e32235cd2a0304da4b5e7af51a44
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 11:36:03 2014 -0700

    telegps: Add statistics tab to graph UI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73249dbf16382c91c2a220ff852a4f099fe0de3d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 11:35:30 2014 -0700

    altosuilib: Move AltosFlightStatsTable to altosuilib
    
    So that TeleGPS can share it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9ef32b103c5c312aaa90b6546e504f2edeb1f99a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 11:34:21 2014 -0700

    altosuilib: Skip voice announcements for invalid values
    
    When height and speed values aren't available, don't say anything
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 90686853e46b7f0df9bdaf671f859819eef926e0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 11:32:57 2014 -0700

    altosui: Show "Missing" instead of huge numbers in descent/landed tabs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7bdd0deabaae38ddfecd1ea2ea8deaf9af40b2ac
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 11:31:53 2014 -0700

    altoslib: Use GPS speed/height values when other sensors are missing
    
    This lets TeleGPS report height/speed values without needing to
    customize every AltosState user to pull out GPS values when the other
    sensors aren't present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6fc58142d2a108c91d257eb0175098bf082834f9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 11:30:36 2014 -0700

    altosuilib: Split battery graph enable out from other adc enables
    
    This lets TeleGPS just show the battery voltage values without also
    adding enable lines for the other flight computer ADC values like
    ignitor voltages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d39bbd22e6cde1bbb39e7b5450f297d47365769
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 10:19:43 2014 -0700

    altoslib: Check for time going backwards when replaying from file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff13cf1359e1f4ae33b16a5867fd364993566b65
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 10:18:44 2014 -0700

    altoslib: Add new 'stateless' flight state for TeleGPS
    
    TeleGPS has no flight state, so add a new 'stateless' state for code
    to handle this case differently than any of the existing states
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 871fb4753a3b54cc2e22309e80e24dfe9cc54511
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 10:15:47 2014 -0700

    altoslib: TeleGPS no longer logs satellite information
    
    This doubles the amount of space available to log position information
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f2029bd4e31289fb03e6af39abdbc16f8b8fa78
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 10:14:07 2014 -0700

    altoslib/altosui/telegps: Switch TeleGPS config to motion/interval
    
    TeleGPS had configurable boost-detect values; those have been replaced
    with a configurable stop-tracking motion limit and logging/telemetry
    interval value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae1174317fc476e39077f7dc257ec08709c6b301
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 10:11:03 2014 -0700

    altoslib/altosui/telegps: Change log size configuration
    
    * Use new log-space value provided by firmware when available.
    
    * Divide that up into 1-8 flights and offer those sizes as options to
      the user instead of a fixed set of sizes.
    
    * Show how many flights each selection will store
    
    * This also checks values provided by the user
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44ca50a2c9404c92cc887a23dfa25b335ebe6198
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 09:55:04 2014 -0700

    altos: Set TeleGPS default log size to half of avaiable memory
    
    LPC11U14 doesn't have on-chip config space, so we're consuming a block
    of external flash. As a result, only 1984kB are available for
    logging. Set the default log size to half of that to store two flights.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d7f4fb6af0fee843191766858e39a481aeda347
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 09:52:15 2014 -0700

    altos: Simplify tracker logic, removing boost detect
    
    This removes the ao_flight_state value from the tracker code and makes
    it simply log position information when the device has moved within
    the last 10 log intervals. This also changes the configuration
    parameters to define what 'motionless' means, and what interval to
    configure the GPS receiver for, log data and send telemetry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c5a7889a8da3da64deb0f118656784e0ee3fd511
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 09:47:04 2014 -0700

    Revert adding state to GPS location packets
    
    TeleGPS no longer has ao_flight_state
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6d633d73a8f826cf2a3128e3e234bd11af49718
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 09:44:57 2014 -0700

    Revert "ao-tools: Parse TeleGPS state value from gps location packet"
    
    This reverts commit 428d09294ba0395fedd71346ad00fd90a4cdde97.

commit da9575fce5ff4dfe83522e290973a01c43e4661f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 09:42:43 2014 -0700

    altos: Make extra pyro channel firing time configurable
    
    This adds a 'I' parameter to set the extra pyro channel firing time
    (in ticks). This has no effect on the main/drogue channels.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75df97b5f6ade3310618a477b685d39b7fd4666e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 09:37:43 2014 -0700

    altos: Report total available log space in version command
    
    This provides a more accurate means of determining available log space
    than guessing whether some portion of the flash chip holds
    configuration data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 998eae61ecf56dd6ead4ec6ad82c952ae84170df
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 10 09:36:59 2014 -0700

    Revert "altos: Write current flight state to GPS data from GPS drivers"
    
    This reverts commit db6003d34595fbd103d5b131912b6a797254f1c5.

commit d696b34b4823647e2e91093ba9d5a351d3a52f8a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 8 16:08:30 2014 -0700

    Revert "altoslib: Parse TeleGPS state value from GPS telemetry packet"
    
    This reverts commit d69547796caf74405f8304d23d4ae318315bbd7b.

commit 5c117621444bc13aebbc7dc618b4a56f620931ac
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 22:37:30 2014 -0700

    Bump to version 1.3.2.4

commit b33de8ba1e48d8ad0cb78f1c5692bb81da916080
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 22:25:17 2014 -0700

    altoslib: Recover battery voltage from TeleGPS configuration packet
    
    TeleGPS stuffs battery voltage in the apogee_delay slot of the
    configuration packet. Pull it out from there and stick it into the
    current state.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6950506beacb1bcd5b8e54c3935174cf800e9aed
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 22:24:08 2014 -0700

    altoslib: TeleMega uses 5.6k/10k divider for v_batt
    
    I suspect the 15 and 27 values are a 'close approximation' for integer
    work on the cc1111 devices
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee2216af17f23781ea912caba29fbd7e4d9ff480
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 22:23:19 2014 -0700

    altos: Enable ADC for TeleGPS v1.0 battery voltage measuring
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef85b3bc5300904ebfb878b1c7313a82b5b7aebf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 21:57:43 2014 -0700

    altos: Encode TeleGPS battery voltage in configuration packet
    
    TeleGPS doesn't need apogee delay, so re-purpose it for the battery voltage
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d69547796caf74405f8304d23d4ae318315bbd7b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 21:13:40 2014 -0700

    altoslib: Parse TeleGPS state value from GPS telemetry packet
    
    TeleGPS adds 0x80 to the state value to signify that this otherwise
    unused byte contains the current state value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 428d09294ba0395fedd71346ad00fd90a4cdde97
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 21:12:44 2014 -0700

    ao-tools: Parse TeleGPS state value from gps location packet
    
    TeleGPS encodes state in a spare gps location packet byte, masking in
    0x80 to signify that the state value is valid
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 23d9d37fd2a8f4b867f34e71a2b0f7cb090717c1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 21:12:09 2014 -0700

    altos: Make telegps builds depend on ao_tracker.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d165079b9275c69e727a1dac996ad1788c58ed40
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 21:11:33 2014 -0700

    altos: Reduce tracker GPS buffer to 4 samples
    
    We just don't have enough RAM for 8 samples.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd9e4f30b2a491b030246943767960ab053ac94c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 21:05:01 2014 -0700

    altos: Define lat/lon sum variables as 64-bit instead of 16
    
    Oops. 16 bits won't hold position information...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08550425fca3da73d8f16de567a2c956b85d676e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 21:02:26 2014 -0700

    altos: Use 0x80 to indicate valid state value in the GPS location packet
    
    And only set this for tracker products; other products place state in
    separate state packets
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8b271502bfd1301b2244e3be5e8c9917a9c624a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 12:17:46 2014 -0700

    Set version to 1.3.2.3
    
    Mayhem 2014 Saturday 2014-6-7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d550c3b3eccbb0283c588b5df69edb2e9b44b4cc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 11:52:28 2014 -0700

    telegps: Track graph windows as one of the TeleGPS windows
    
    TeleGPS exits when the number of windows goes to zero; track graphing
    windows in addition to the usual flight monitoring windows.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f2189e0b99aa32b788ecb4576dcb9bcc926f4e2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 11:50:42 2014 -0700

    altosuilib: Fix crash when initializing site map cache
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 611dc26ab4a3ee303c0253698b1e12931aa3644f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 11:50:04 2014 -0700

    altosuilib: Add GPS altitude as a possible graph value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5617919091d4c4a1e627470ddab0b45cf649f7a1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 11:49:14 2014 -0700

    altosuilib: Show GPS instead of (missing) flight data for TeleGPS graphs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0dfa934ba76d6f913af37999e05c20e614bd3e9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 11:47:11 2014 -0700

    altoslib: Record whether flight data includes sensor values in AltosFlightStats
    
    Provide a way to elide the usual flight data from a graph for TeleGPS
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcea12ac416b1eab11e9e8aae801358574308f73
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 11:46:32 2014 -0700

    altoslib:  Add TeleGPS log parsing code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 537db628c0223f0c1f797705a353857c696f8051
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 11:44:55 2014 -0700

    altoslib: All products with logging have the 'l' command
    
    Instead of listing products with the 'l' command, just exclude
    products that don't have logging from using the 'l' command to collect
    the number of stored flights.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d562a5d3a6dfea334a66ee74893b400bdca09315
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 11:44:07 2014 -0700

    altos: Switch TeleGPS to GPS logging format
    
    It's customized for TeleGPS uses
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d71e6a5fc68d5b9bc1d12bbfc3fd5a4d86fb12f2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 11:41:59 2014 -0700

    altos: Update other CONFIG_EEPROM users to set LOG_ERASE_MARK
    
    All products placing config and erase marks in on-CPU EEPROM needs to
    configure the erase code correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 394ab536257ab58de0190b3828dd3bb897ad4474
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 11:40:41 2014 -0700

    altos: Write tracker logging from tracker thread directly
    
    Also, logs 8 pre-launch GPS packets so we can get the ground position.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db6003d34595fbd103d5b131912b6a797254f1c5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 11:39:10 2014 -0700

    altos: Write current flight state to GPS data from GPS drivers
    
    This will be useful with TeleGPS which has no other packet containing
    flight state.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 302842ccda46a0a3d58b60d5c7fc82e05f614b0b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 11:34:29 2014 -0700

    altos: Add TeleGPS logging format
    
    This is mostly like the mega format, but places the flight state in a
    spare byte of the GPS data and writes the gps starting location to the
    flight packet.
    
    Log data is written by the main tracker thread; there's no reason for
    a separate thread given the GPS update rate and the lack of flight
    controls. This means ao_log_gps has an API to be called from there,
    rather than a thread to run.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 62aa51f0b785bea146d1e9331e6253de2d547c94
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 11:01:14 2014 -0700

    altos/telemega-v1.0: Adjust config params to make flight erase work
    
    Flight erase records are supposed to be written after the ao_config to
    eeprom in telemega. They were getting written in the middle of one of
    the pyro channel config blocks. Put a bunch of space between the two
    by making the config max 1024 bytes instead of 128 bytes.
    
    Set the log erase marker to 0x55 -- eeprom comes from the factory as
    0x00, so we use any value other than 0x55 to indicate 'unused' erase
    slots.
    
    Save space for more flight erase blocks; we've  got plenty.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d973570ef2324b21a64477eecb0a292652ff467
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 10:54:14 2014 -0700

    altos: Clear out eeprom erase records when writing entry 0
    
    When writing config/erase to eeprom, there's no 'erase' operation as
    on-chip eeprom is writable at a byte level. As such, we can't tell
    when the erase blocks get reset when the config gets written. When
    this happens, erase block 0 gets written explicitly, so just use that
    call to trigger explicit erasing of the data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d6ca536c688d35b3cba0a829b04b93c5124b328
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 10:09:51 2014 -0700

    altos: Allow value other than 0 for marking erased flights
    
    on-chip eeprom doesn't erase to 0xff, so let TeleMega use a different
    value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8a29d65ec605a995de1d1ec8b110d620d2f7a87
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 10:05:21 2014 -0700

    altos: Allow AO_CONFIG_MAX_SIZE to be configured. Validate it.
    
    TeleMega config is 200 bytes. AO_CONFIG_MAX_SIZE was 128. That didn't
    work out well when logging erased flight information. Allow TeleMega
    to use a larger value (1k), and then do a compiler hack to make sure
    the defined value is at least as large as the ao_config structure.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1873d539a8f1a0e1e8ad539af5d49a77a129b928
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 7 07:41:11 2014 -0700

    altos: Move ao_tracker.c to kernel
    
    Doesn't make sense to be in product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a79fe8144dcab10294caa4b0eac967eeb0d8e7e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 21:42:10 2014 -0700

    altos: Add telegps-v1.0 code and loader
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e867c67c8e2c40058ae36723e06b2ce00bd0419
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 21:40:39 2014 -0700

    altos/telegps-v0.3: Remove ao_flight_number from main program
    
    We've got logging enabled now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f830d4e9202d2a138fc9aaacb2388f94390399db
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 21:39:50 2014 -0700

    altos/telegps-v0.3: Disable APRS by default. Set log max to 1M
    
    And adjust default radio cal to be a bit closer
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cab6d80f11e07dd26b865727eb7ce4fd45be5c7c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 21:37:38 2014 -0700

    altos: Force telemetry on by default for v0.3 TeleGPS boards
    
    These don't have a USB connect indicator, so just turn on telemetry by
    default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 102b1977c138b30c2d2592ab310f7be072130a3b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 21:36:16 2014 -0700

    altos/lpc: HAS_USB_CONNECT has been changed to mean a custom pin
    
    The LPC stuff isn't actually very useful and TeleGPS uses a custom pin
    instead, and was using HAS_USB_CONNECT to mean the same thing. That
    wasn't good.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ec3de3ac461f2380d23c5c5d948333a9a210c400
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 21:35:41 2014 -0700

    altos: Fix config to set default log size for all devices with log
    
    Not just devices with flight
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8f84ba82bab653c041eb85f93b9dcb1083bd849
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 18:55:26 2014 -0700

    altos: Add AO_LOG_FLIGHT packet to TeleGPS logs
    
    This encodes the flight number for tracking of data files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe0aaf4413035f9de2c805c612c71188ec8c6f4d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 18:49:59 2014 -0700

    altos/telegps-v0.3: Add tracker task
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6160ddadeae324b4a68db800c98c339156b63076
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 18:49:01 2014 -0700

    altos: Add debug to tracker to force launch
    
    This lets us test the move from pad to drogue state
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4a29df3f9f6c4969eb01598f6917ce78c9ce37a6
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 18:47:27 2014 -0700

    altos: tracker distance computation flipped arguments around
    
    ao_distance takes (lat, lon, lat, lon) not (lat, lat, lon, lon)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b619199345256cdc456f8a0b99c0ad9335e877c7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 18:45:18 2014 -0700

    altos: Fix tracker start state
    
    Make sure log can start by scanning existing logs
    Enable RDF by default
    Turn off telemetry until we decide whether to turn it on in the loop
    Allow TeleGPS v0.3 to run without ADC
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97dac0f66bc938940e6b49409d950a1736c92655
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 18:44:26 2014 -0700

    altos: Stick flight state in GPS location packets
    
    Useful for TeleGPS
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eebcf07950e909e4516b08c32e289a870f772793
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 18:35:45 2014 -0700

    altos: Have tracker average 5 GPS samples before moving to pad mode
    
    Avoids early GPS noise right after lock
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e063701310c1ab5b766c27f24088699aad142fbd
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 18:33:33 2014 -0700

    altos: Change tracker not-moving speed to 2m/s and document
    
    Just adjust to avoid sensing motion from GPS noise
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7df6e8c47df35c0d27f1a2559ecc305ef28d271
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 18:31:06 2014 -0700

    altos: ao_distance was overflowing when checking for longitude wrap
    
    Need to shift everyone right one bit to fit in 32 bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2db2b75f8847ca0066bb19771653a65c9098ae52
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 17:24:57 2014 -0700

    altos: Allow cc115l driver to be built without radio power control
    
    TeleGPS just wants full power, so remove the configuration option
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8201bc9ba4a5f5f0522b68493cd5e7f013fd4bb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 17:14:28 2014 -0700

    altos: Include sensor logging task only on flight boards
    
    This lets TeleGPS use the logging infrastructure without wasting a
    task to log sensor data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e28d8a242955d65d8cd50dbba4cad4609e2e1ae
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 17:12:06 2014 -0700

    altos: Add tracker task for TeleGPS
    
    This replaces the flight code to monitor GPS state and switch flight
    states between startup/pad/drogue
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e152dd5c0786a650aed8f0c09babdc93895bff1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 17:10:28 2014 -0700

    altos: Add ao_distance.c to compute cartesian distances on the globe
    
    This is not a great circle distance, but should be good enough for
    points reasonably close together
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e7b8b0533e03e89425296d464b7a1a26fb63686
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 16:52:36 2014 -0700

    telegps: Update icon and icon building
    
    Switch to satellite icon, build the osx and windows icons.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bcafc452f50e518c4d86cbd6b9057c4bf7e676f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 5 16:50:29 2014 -0700

    altosuilib: Let the user hand-edit the preload map radius
    
    In case they want more than 5
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f59d69064763cfad2b4b15fd9660fd5fa21dba5e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 2 23:43:54 2014 -0700

    doc: Create release notes for version 1.4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd2179cb0d71749f3637cc3ee03ccc6adfd74aae
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 2 22:59:23 2014 -0700

    telegps: Trap AltosConfigDataException in telegps config
    
    This was added for pyro configuration errors in AltosUI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5e4087cd2fbb3ac67f90cd82edaa73c1eedbf67c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 2 22:23:31 2014 -0700

    altoslib: Add missing AltosConfigDataException file

commit ace5f42b5567cff07a61b622171ac364ea8c165d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 2 22:07:39 2014 -0700

    altosui: Display error message when parsing pyro channel values fails
    
    Build an exception handling chain to get numeric parse errors
    propagated all the way back to the original 'save' command and up into
    a dialog window, including the pyro channel, field and value that were
    in error.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 206fbb99d28961ce159e3affdd5c96f5e379a603
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 2 22:06:22 2014 -0700

    altosui: Fix pyro channel value formatting
    
    Was using %6.1f for 1 and 2 fraction digit values as the
    conditional structure for figuring out which format to use was
    broken.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d20c608ce833fb8949dce527f92887775d216823
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 2 22:05:11 2014 -0700

    altos: Fetch/store only 8 bits for pyro state values
    
    These fields are uint8_t, not int16_t. Fetching and storing 16 bits is
    a bad idea.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b7abc063fb27da29cd7a717bbea15f92882bd205
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 2 22:04:11 2014 -0700

    altos: Maximum pyro configuration parameter has 4 bytes in the name
    
    "f>=" needs four bytes, not just three to store the whole string. If
    we only store three, then we never manage to compare correctly as the
    null terminating byte is missing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7385c76af46ff400b9e79a8540199be289cb57c0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 2 22:03:26 2014 -0700

    altos: Configuring pyro channels can use more than 48 characters
    
    Increase the command buffer from 48 to 128 bytes to hold the longest
    pyro configuration commands
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 177d3c0333fd4218f01e05c78cbc5f186c8e32c0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 30 17:27:10 2014 -0700

    altos: Allow sparse GPS data logging for TeleGPS
    
    When the device hasn't moved for a while, stop logging data. Start as
    soon as it moves again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 12c408c5aa1d234fe9c946078d8a343b4fda7ebb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 30 17:30:08 2014 -0700

    altos: Test APRS altitude encoding
    
    Verify fixed point version against naïve implementation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a7b0a5613c8e59b4c672b21f8d0890fd5cffd4dc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 30 17:24:51 2014 -0700

    altos: Switch APRS altitude encoding computation to fixed point
    
    APRS altitude is logarithmically encoded, so this implementation
    includes a fixed point log-base-2 function along with a bit of other
    fixed point stuff. This eliminates all floating point from TeleGPS,
    saving around 4kB of code space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2d9842ee011139f5783a102ceb2b7f4c88b1a10f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 30 17:17:42 2014 -0700

    telegps: Add config for tracker starting distances
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29d325f418b401f61580288b5947b0df8ac5b717
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 29 22:03:48 2014 -0700

    telegps: Fixup windows fat build harder

commit b74dfc9c2cbe14593738eb994e9163d466155326
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 29 21:48:11 2014 -0700

    TeleGPS firmware isn't quite ready, don't include in windows fat build yet

commit e60d0456f59c76ad786bc8f8065fbe84e6cae922
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 29 21:37:53 2014 -0700

    Capture windows build error messages

commit 48074131ad05b4646e5d2dcf30ba4a1d17e249f8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 29 16:39:26 2014 -0700

    telegps: Add missing TeleGPSGraphUI.java file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca7e64a09823977e1af028e9482424e643beee68
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 29 14:40:39 2014 -0700

    Build telegps distribution bits with 'make fat'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf684a4c290573a3aa627fd8ddf6f6ebbe5fa057
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 29 14:36:14 2014 -0700

    telegps: Add graph display
    
    Moved the altosui graph files to altosuilib and fixed things up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f80075be4ebb9c5fe00c24b8c7638fad23267424
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 29 14:03:58 2014 -0700

    java: Refactor AltosFlightDisplay units and font update handling
    
    Make AltosFlightDisplay explicitly implement AltosFontListener and
    AltosUnitsListener interfaces to make everyone use the same API. Then,
    actually go implement units listeners so that changing units updates
    all of the active displays immediately
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71715337eb532a1fbe1a753240e7417d5223489f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 29 10:16:15 2014 -0700

    telegps: Add info table
    
    Move a couple of files from altosui to altosuilib, hook up the info
    table after changing it to implement the AltosFlightDisplay interface
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 13f84be8d1568a3fc2ed5eef5dcc2093c149285e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 22:53:06 2014 -0700

    telegps: Add flash device functionality
    
    Move bits from altosui to altosuilib and use those.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ba523cd793f2263bb1acd7a5a10f8964075bdc5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 22:45:23 2014 -0700

    telegps: Auto-connect to any base stations plugged in at startup
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c30130d0bdc18ee351eb3d02e51f70f8a05905b1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 22:06:43 2014 -0700

    telegps: Don't try to ship TeleGPS firmware yet
    
    It's not quite ready. Instead, ship TBT and TD firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3871b9ac036e3adfa1da089245fc7973b268c921
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 21:56:52 2014 -0700

    telegps: Add 'Info' tab
    
    This contains a summary of the tracking info, including position,
    speed and course.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4cec35564324f909dcddeb7c0d83a2daa8223042
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 20:58:01 2014 -0700

    telegps: Hook up data download dialog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a4c2c7fc6af922d052e23a1b99bf847fbf9b0e9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 20:48:59 2014 -0700

    telegps: Add scan UI
    
    Move scan UI bits into altosuilib, allow telegps to not show telemetry
    format options.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82a69777c67128192b50bbf77ace0a6525f49cac
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 20:24:04 2014 -0700

    telegps: Add preferences dialog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a7fd31842a602a8ac803d0e09efb4ffabf7a289b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 20:19:44 2014 -0700

    telegps: Add device configuration dialogs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d6c5904e2a05c8ae023a8cd954cf16c19c477d7d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 20:00:10 2014 -0700

    telegps: Use altosui's Instdrv NSIS plugin for telegps
    
    Instead of copying it, just point at it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe14315d4cfccf8b53d9c4b7fa79302fd36b2c9a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 19:50:52 2014 -0700

    telegps: Working towards building fat versions of telegps application
    
    Lots more of the bits necessary for windows/macosx
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47ff6f7528e3984012e874f91ea4f5c1d68cb465
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 19:45:01 2014 -0700

    doc: Add outline of TeleGPS doc
    
    No actual content, mostly a place holder to make the build work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e19121d5e7368ef723d4642d26c24252a386a790
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 19:44:21 2014 -0700

    Mark version 1.3.2.2
    
    Preliminary 1.3.3 version (1.4?)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2fa7785f9efdefaf0fc2fa8e0b03c85047613b84
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 16:08:30 2014 -0700

    telegps: Add first version of telegps
    
    Not much implemented yet, but a shell of the UI and the map
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b3516419981967a1c6ab956269139977ac368ca
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 16:06:14 2014 -0700

    altosui/altosuilib: Shuffle lots more code from altosui into
    altosuilib
    
    All of the bluetooth management stuff, and AltosSerial.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02e657e45e217dc483a81f28020cfe65a826e9be
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 10:43:09 2014 -0700

    Document the need for ~/altusmetrumllc/google-maps-api-key
    
    Stick this in Releasing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b9e4bf1b51c45553879141811748e65debfc251
Author: Tom Marble <tmarble@info9.net>
Date:   Wed May 28 14:08:02 2014 -0500

    jenkins.sh: make -j 4 can fail, fix for altosui-test

commit 96ffe5bbd2a1b44ddda6cb25d37d2b0a672045f5
Author: Tom Marble <tmarble@info9.net>
Date:   Wed May 28 12:50:42 2014 -0500

    fix for jenkins.sh

commit 5eaef0c98488fa3fbd3a6494dc15e1b793eb6f94
Author: Tom Marble <tmarble@info9.net>
Date:   Wed May 28 12:38:36 2014 -0500

    add jenkins.sh

commit 324380dcf86be338c6d556b901d6889ddde97f7e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 10:31:47 2014 -0700

    altosuilib: Don't try to draw to destroyed map windows
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e5807ef428c9a0eb88ed8a3aef40098ab347d80
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 10:27:52 2014 -0700

    altosuilib: Publish AltosSiteMap.centre. Add prefetchMaps with old API
    
    This gets altosui working again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52ce41952c5a3c31532fa4f0d1b3155a162b76f4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 10:16:38 2014 -0700

    altosuilib: Update map preloading UI to include zoom and maptypes
    
    This lets you specify precisely which maps to load.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c3991768d3cb17fc99ad32b2d6d8d11f0e37dfa
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 02:18:41 2014 -0700

    altosuilib: Remove debug printf in AltosSiteMapCache
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4a5ef9eaa8b809c56813625133120e7e91fc8e65
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 02:06:18 2014 -0700

    altoslib: When log-format is missing, use product
    
    log-format was added for 1.0; earlier log files don't include that,
    but do say which product they're from.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3773e89c47d356c4df58edc5725c33bca89b9605
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 28 00:42:24 2014 -0700

    altosuilib: Add google maps API key, configured with -with-google-key
    
    This places the actual key outside of the repository, allowing the
    user to configure the name of the file containing the key. By default,
    this pulls the key from $HOME/altusmetrumllc/google-maps-api-key.
    
    With the key present, there are no longer any rate limits to loading
    map data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e6cfa25702b3dc1d492c5f1a4d0b4ba4831d30bd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 27 20:34:29 2014 -0700

    altosuilib: Decompress map images asynchronously and in parallel
    
    This speeds up loading map images from disk quite a bit, and keeps the
    UI responsive while that happens as well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e44580cbe978f1570d4d2ac13d3dd7cd470ecf7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 27 15:39:13 2014 -0700

    altosuilib: Add distance measuring line to site map.
    
    Use any modifier or button other than the left one to draw a line on
    the map. The length of the line is shown at the start of the line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c674a20432c2cb97e5bc2a3de891f78b9e172fe9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 27 11:05:02 2014 -0700

    altos: Fake flight code changes in kernel and stm
    
    Redirects data input from local sensors to USB sourced data, leaving
    USB enabled when the computer goes into pad mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db08e99361d82de63058d3388823f486e5fc9839
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 27 10:58:53 2014 -0700

    altosuilib: Add multiple zoom levels and content types to map
    
    Also changes the file format for hybrid, satellite and terrain maps to
    jpg to save disk space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 535271f7312f1a88af11d4f1dbf3d405b660f26c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 25 21:14:42 2014 -0700

    altos/test: Fix ADC structure for mega, use ao_config.h
    
    This switches from hand-coding the ao_config structure to using
    ao_config.h and also updates the ADC structure for ao_flight_test_mega
    to using the same one as telemega does natively
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1894b51daceaf9fb6b49a0625e09a366985d15b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 25 21:12:29 2014 -0700

    altos: Move ao_config declarations to ao_config.h
    
    No sense leaving these in ao.h, and it's nice to make that file smaller
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d5db24708b37d86eac187169e2553a408dfeb83
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 25 21:11:23 2014 -0700

    altos: Make MS5607 PROM a public variable
    
    This will let the fake flight code update it as necessary, without
    creating a new interface in ao_ms5607.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4df84dd5d007120f54cbda380789306608f2fc46
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 25 21:08:44 2014 -0700

    micropeak: Add -Xlint:unchecked to javac line
    
    This shows missing parametric type errors
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0216d721ed13f4d3dc608bb6ad8f83732b27c0a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 25 21:01:38 2014 -0700

    altoslib/altosuilib: Change versions to altoslib:4, altosuilib:2
    
    API has changed for these libraries, time to bump the file versions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d63319f6f29ef714bb1d5c359c2448f63e7a4534
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 25 20:58:24 2014 -0700

    ao-tools: Add cc_usb_write function
    
    This writes raw bytes to the USB port; useful for sending binary data
    for flashing or the upcoming flight test stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a6c76fc0525d6588a1d88127f0085f13a02f1af
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 25 20:55:11 2014 -0700

    altosui/altosuilib/altoslib: Move more stuff out of autosui. Reduce site map memory
    
    Prepare to share with TeleGPS application.
    
    This also has the changes to the site map tile which cache only a few
    images and regenerate the flight path on the fly, saving piles of memory
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ac7797d3efb9cc2d9fae88519f55e40b1050224
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 25 20:47:49 2014 -0700

    altosui/altosuilib: Cleanup -Xlint:unchecked warnings
    
    Add parametric types to avoid unchecked warnings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b60a3689910731d9bdb8a431a3dcc9e99f961b35
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 22 18:46:58 2014 -0700

    altoslib: Move CSV/KML output code to altoslib
    
    It's sharable, so share it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2625a464417c8475c66101757ca2c30cd6c74e0c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 21 14:02:35 2014 -0700

    altos: Add config values for tracker start motion limits
    
    TeleGPS switches from 'pad' to 'drogue' states after the device moves
    a specified distance from the initial starting point. These values can
    be configured, and this is the configuration for them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 161ae96f9ec11e2586df07c0f6d724ddc4dad76c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 21 14:00:05 2014 -0700

    altos/test: Parse mega ground data. Fix pyro parsing
    
    This gets ao_flight_test_mega working with eeprom files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43be26603827b5930bf3e8082610cfa19b45534d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 21 13:58:54 2014 -0700

    altos/test: Get APRS generation test working again
    
    APRS now includes sat info, so we have to fake that up to generate an
    APRS test file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a3846df381a5eeac8ec3327c770af502aaf4e76
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 21 01:37:57 2014 -0700

    altos: Don't define ao_ignite_decivolt without igniters
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af782e92c6a0c0a6b0fc2fa52519749a88ca8fb8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 21 01:36:40 2014 -0700

    altos: Expose ao_gps_set_rate from u-blox driver
    
    This lets applications set the desired GPS update rate to reduce power usage
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b488bdd0f5c91be7e5aae1c8f0193e713734b14
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 21 01:35:33 2014 -0700

    altos: Fix cc115l debug build
    
    New compiler warning flags and moving to the nxp require a few minor
    changes in the code to make it work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb228304d8df3063914ab505a530d4ea79ca027d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 21 01:34:27 2014 -0700

    altos: Allow APRS to send just battery voltage
    
    Don't require apogee and main voltages as well
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca338a897ba3237652a3ae092e660f26c9e35074
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 21 01:39:46 2014 -0700

    altos/lpc: whitespace
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a3312e725d914bbba6355e07d2f1d2833d2d6c2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 21 01:39:01 2014 -0700

    altos/lpc: adc code computes number of active ADC channels
    
    Don't require the application to provide AO_NUM_ADC when AO_ADC_NUM is
    computed automatically.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b278a73cb54ba2f107bf91089f87c11528f017ab
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 21 01:41:38 2014 -0700

    altos/stm: Make stm applications depend on ao_boot.h
    
    This should make sure they get recompiled when boot stuff changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3544daf08f38aa8e28ca214a19ab7fd47c0c802
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 16 00:00:12 2014 -0600

    altosui: Remove another beep config debug printf
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eeacc001ba089b4bf5552b8ef36e61a0a96efabe
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 15 23:57:50 2014 -0600

    altosui: Remove debug printf about beep config
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6833e466d7d77765199bf4d21437c34a4eceb044
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 15 23:46:41 2014 -0600

    altos: stm and lpc ao_boot.h were identical. move to kernel.
    
    These two files were absolutely identical, so share them by moving
    under kernel instead.x
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 211d9af507daf9a8611ed1813415bee27e3839eb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 15 23:34:17 2014 -0600

    altos: Use explicit boot loader signal in ao_boot_reboot
    
    Instead of just "knowing" that ao_boot_loader will be passed zero when
    the application wants to get back to the boot loader, explicitly
    define the values so that both sides always agree.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bf1c74e83fe49a11916b52596363f4dd56c522c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 15 23:10:54 2014 -0600

    doc: Document the Apogee Lockout setting
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dbb0fcf6d161a9d49fe699c37a18e4c33c409b59
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 15 17:20:39 2014 -0600

    include EasyMega Makefiles

commit 0948f5d96456b2e7f57ad75dfc9ef455ba197163
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 15 17:19:08 2014 -0600

    working?

commit 0fd608868aa03f81b2d902e1da13ee0b1ab20b78
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 15 16:23:17 2014 -0600

    lose the (old) easymega-v1.0 directory in favor of my fresher 0.1

commit 819f73698f57e76dca50fe4fadccebd23ffb776d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 15 09:31:24 2014 -0600

    altos: Make quadrature debounce per-pin rather than per-device
    
    Debouncing per-pin means we don't lose transitions, which makes
    counting a lot more precise.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit da13064382e9673e69cdfae6abbac253c9fc42fc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 15 09:30:32 2014 -0600

    altos/telemini-v2.0: Enable beep frequency configuration
    
    Now that there's space for this, add it in.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 36002fc724702d34302f3cc0df593019ca8db4e0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 15 09:29:52 2014 -0600

    altos/telemini-v2.0: Remove old baro->alt conversion table
    
    TeleMini doesn't have two baro sensors...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0d29cc233b0d444782530fea15d957b2b4c45d7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 15 09:28:30 2014 -0600

    altos/cc1111: Switch P1_0 from a green LED to USB pullup
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3225fb54ec1beaf6dc8553ab4f5b86bea6bdf1f3
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 15 09:27:34 2014 -0600

    altos/cc1111: Add support for CPU-driven USB pullup
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 940ec6a2d5b054f68da39945a00f4d1b36d1b318
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 13 22:46:19 2014 -0700

    altos/cc1111: Errata fix isn't needed for discontinued products
    
    And, doesn't fit in memory for some of them, so don't compile it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit feb0b5f8b28767197f87e5818812d6640c1f40e6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 13 17:30:47 2014 -0700

    altos/cc1111: Wait for xtal to be stable
    
    Errata http://www.ti.com/lit/er/swrz022c/swrz022c.pdf says that the
    xtal is stable bit is bogus and that you need to just delay for a while.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8124af8c27b2b9e446aa3a4f1da83d4db7c1ea87
Merge: 6dd7eae5 3bcf4bdd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 12 23:21:55 2014 -0700

    Merge remote-tracking branch 'origin/master'

commit 6dd7eae5e4752d2098797e96953db8923e26835b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 12 23:20:08 2014 -0700

    ao-tools/ao-usbload: Check image flash usage against device flash availability
    
    For devices which report the range of valid flash addresses from their
    boot loader, check the loaded image to make sure it fits within that range.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a114bac1145359f3953ce70f049a6be71df5300
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 12 23:18:41 2014 -0700

    altos/flash-loader: Check memory addresses against flash space
    
    This validates memory read/write requests to make sure they are within
    the available flash memory space.
    
    This also reports the flash base and bounds addresses in the 'version'
    command so that the loader can validate the image before attempting to
    write it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a25c34ef0a92beaa0695e0d0020eda5e26b309e2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 12 22:56:38 2014 -0700

    altos/stm: Use #define'd constants for GPIO register addresses
    
    This lets the compiler short-circuit the tests in ao_enable_gpio and
    ao_disable_gpio to save a bit of code space and time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 530894f508874f4cb3db644ca9ca679ed704f964
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 12 22:55:38 2014 -0700

    altos/stm: Figure out available flash space based on chip id registers
    
    Look at the flash size and the device id registers to figure out how
    much flash is available.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c543be5548ccda6bd29a2a7659fcc287f7a9f07
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 12 22:54:35 2014 -0700

    altos/stm: White space fix in ao_boot_pin.c

commit 2f196323a2829f9537f3b339f19478127ffde623
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 12 22:53:07 2014 -0700

    altos/stm: Use flash address of boot loader instead of 0x0
    
    Flash is at 0x08000000, but when the chip boots, it can be at 0x0 as
    well. Use the 0x08000000 address when rebooting to flash
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a6053dfed6fc1a7f50be0c62782d0050758cd0b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 12 22:51:50 2014 -0700

    altos: Assume all LPC products will have 32KB of flash
    
    If we ever use something smaller than this, we'll need to figure out
    how to tell how much memory the device has.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1908101241b1002fbc582b0a2c27045065a6615
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 12 22:51:16 2014 -0700

    altos: Report amount of program space available in the version command
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3af4e824938fe07fe75c6d24d9906aebfbe578f3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 12 22:50:41 2014 -0700

    altos: Add LED test command to pca9922 driver
    
    This lets you control the LEDs from the command line to test things.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47750e236c45ab03f28fc3393996edb2bd4312e3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 12 22:49:39 2014 -0700

    ao-bringup: Use official binaries for EasyMini turnon
    
    Don't use locally built ones, use the official ones found in
    ~/altusmetrumllc/Binaries to ensure that all devices are shipped with
    known firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f4a1b3e553276a4d6727c111fe290fa3690fa1e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 12 22:48:45 2014 -0700

    ao-bringup: test-baro should accept altitudes a bit below sea level
    
    Testing baro sensors on a particularly high pressure day at Keith's
    house yields altitudes down to -20m or so.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 238ddde1ffdb8521d06519306cfb76271ae552b9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 12 22:47:55 2014 -0700

    atosui: Hide Callsign and RSSI tabs for devices without a radio
    
    When doing Monitor Idle with EasyMini, it's nice to not put fields on
    the screen which won't ever have useful data in them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3bcf4bdd3e3f3751ad9d517696b5573dd4593846
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon May 12 17:31:14 2014 -0600

    update TeleMega turn-on script and Releasing for new stable firmware home

commit cbb6f7a3abbde39163f2905badba0ae88744b104
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri May 9 12:30:25 2014 -0600

    fix copyright year

commit 8d9c79f5c162e07d57d42c6ba5825a3327a911d5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 9 00:05:39 2014 -0700

    altos: Simplify quadrature tracking
    
    Set the timer to 200Hz for a 5ms debounce interval. Then, simply look
    for transitions ending in both bits in the encoder being off, which
    indicates the the encoder is resting in a detent. If bit '2' is
    turning off, the encoder was rotated clockwise, otherwise the encoder
    was rotated counter clockwise.
    
    This is a lot more reliable, although still not perfect.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef48e1bb73c791d731b0d2c0e5beef1539103049
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 5 23:46:34 2014 -0700

    altos: Clean up trailing whitespace in ao_pad.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c8ad50495e2d81209a4882dd4f82c19d9ae2ac34
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 5 23:45:30 2014 -0700

    altos: Fix byte offsets in the mega AO_LOG_FLIGHT packets
    
    Just comments, but even those should be correct
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b22dff94778b1f15a6ad1989d526b936f0fa09ea
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 5 23:43:44 2014 -0700

    altos: ublox driver always offers course data when it has a fix
    
    Set the AO_GPS_COURSE_VALID bit to signal that this part of the GPS
    data is valid.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9d6a1fbb3148f03864df6d1ed5f6b6dccd7b383
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 5 23:41:43 2014 -0700

    altosui: Add GPS course, ground speed and climb rate to graphs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 39fbc4cb1d4c92522c90aa5e36fd62a4827d8306
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 5 23:38:44 2014 -0700

    altoslib: Parse remaining mega AO_LOG_FLIGNT and AO_LOG_GPS_TIME fields
    
    GPS fields past 'day' were not getting parsed. Ground values for the
    IMU were not getting parsed, but a false 'temperature' value was being read.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2e6efa810b7fccc5af937386a40ae5af064bf26
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 5 23:38:05 2014 -0700

    altoslib: Add a comment to remind us to fix the IMU code to deal with calibration
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d59d6787bfe26c3b18491ece602ad6cc5cf26c42
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 3 10:58:31 2014 -0700

    altos: 8051 64 * 16 multiply function was broken for negative 64-bit
    
    It was jumping around the actual multiply when the 64-bit argument was negative.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c49e13a7807a74bb66c83cd4a2e10eb601f59e62
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 8 16:24:26 2014 -0600

    relay control implemented, this project is now complete

commit acaad70e3db8f0b6ae45ca8309833db57bdf5ca2
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 8 16:09:11 2014 -0600

    first cut of usbrelay-v0.1 support .. LEDs wiggle, not switching relay yet

commit 2dfc4bc92b11252f17103f28198a702a3fdc2b2d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 2 13:53:08 2014 -0700

    altosui: Add configuration UI for beeper tone
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 027b1470c7a2d007eaab5c8d49f772b0c7559b80
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 2 12:26:07 2014 -0700

    altos: Add configurable beep tone
    
    This lets you directly set the mid-range beep tone; the high and low
    tones remain set off of that in the same ratio as before.
    
    Note that none of the cc1111 products get this feature as they don't
    have enough flash space anymore...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e3842660274ac4bcd7b5a78f5db215222b1c4de
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 30 22:14:37 2014 -0700

    altos: For telelco discovery packets, retry 5 times with shorter timeout
    
    A timeout of 10ms is more than enough to receive a query packet, but
    if we miss it during device discovery, it's a pain, so retry 5 times
    to make sure we find everyone.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0223fced2c6d2b9f63ede6258afae46c3f55c200
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 30 22:13:44 2014 -0700

    ao-tools: Clean up ao-sym structure an initializers
    
    Remove unused 'default_addr' field. Use named initializers when
    setting up the struct.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35efd4e51ece706234f80c076eb7f4f70c66098d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 30 22:12:30 2014 -0700

    ao-load: Make ao_sym static to avoid collision with ao-editaltos
    
    ao-load doesn't use ao-editaltos at this point, but does share the
    same name for the symbol table. To make the linker happier, make the
    ao-load version static.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd406000659a11862e05c22dbb20cdb738f56b01
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 30 22:11:39 2014 -0700

    ao-telem: Dump orientation field from TeleMega sensor telemetry packet
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2cf65d60e1c73dbff0badbe1ee6cb43d75bf803c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 30 22:10:29 2014 -0700

    altosui: Mark TeleMega additional pyro ignitor fired points in graphs
    
    Add markers to indicate when each additional pyro channel fires
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ecebb3902868d1d7485d2bc99ba4140c6b90567e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 30 21:30:46 2014 -0700

    altoslib: Track pyro firing state when reading mega eeprom files
    
    TeleMega records whether each pyro has been fired in the eeprom file;
    track that in the AltosState record.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5fb246fb50e262aa81ef7eb430be9782cfcf8848
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 29 19:04:30 2014 -0700

    altosui: Add extra ignitors to graphable objects
    
    List all of the available extra ignitors as possible things to graph.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f8429152e438eb72618edaf5983ae1cd5d3d4dab
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 13 08:58:36 2014 -0600

    ugly hack (just make sleep longer) to work around ttyACM* discovery issue

commit 3b5c4d88671e6c511fbfb1ce6b046f558dd6c2bf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 12 17:46:34 2014 -0700

    altos: Switch beeping to farnsworth spacing
    
    Use 17wpm/12wpm farnsworth spacing for the state reports. Leave the
    numeric reports running slowly as those require counting.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8628f7e02834a476d5cb3afa4cbf8d46a4b3c513
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 12 17:45:38 2014 -0700

    altosuilib: Make lines in graphs 2 units wide
    
    This makes the graphs a lot easier to read.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e18c524fa2d1f648f265b3c3105f5ceacf06c10
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 11 16:40:06 2014 -0700

    altoslib/altosui/altosuilib/libaltos: Remove trailing whitespace
    
    Just cleaning up the source code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b275ddfe20f54857d7d1abb98607c406b678090
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 11 16:31:32 2014 -0700

    altos: Add 'microwater' product
    
    This is a custom firmware spin for micropeak designed for use with
    water rockets that sets the boost detect altitude to 10m instead of 30m.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 99c729495a8cc589718607ee35d22454c6af2994
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 6 23:46:48 2014 -0700

    altosui: Disable flight log configuration while flights are stored
    
    The log code won't let you resize the maximum flight log while there
    is still data on the flight computer; the code to figure that out in
    the UI was busted, leaving users confused about why it wasn't working.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4211c59e585545817b3cac02b41bb73106d6403e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 6 22:27:37 2014 -0700

    altos: Fix nanopeak compile
    
    Nanopeak uses port B bit 3 for the LED instead of bit 4. Fix the async
    code to support arbitrary bits for the serial LED.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 350d941a825d0271933de0bfdea82d3af5744c21
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 6 20:14:49 2014 -0700

    altos: Provide stable binaries for MicroPeak
    
    Publish MicroPeak .hex file to LLC repo and install it from there,
    rather than rebuilding it locally. This ensures that the installed
    bits don't depend on local configuration of any kind.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2427eae5f3b429d302fbe14f708dcbc68c851954
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 6 19:48:07 2014 -0700

    altos: Replace C code attiny async output with inline asm
    
    Using inline asm instead of C ensures that compiler changes will not
    affect the timing of the serial data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d943d4cade0a40723143626abf6e67f8eca9dcb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 5 18:17:17 2014 -0700

    altos: Build TeleBalloon v2.0 by default
    
    We're supporting this now, we might as well build it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c14cfb1436c988eb0a0d26d7c4d83aeccecbc8a3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 5 18:16:21 2014 -0700

    ao-bringup: Split out easymini test into separate script
    
    This lets you run the easy mini testing code without also flashing the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9cb10d73fee0e3f36c778fd2a9c9992b87669fe2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 5 18:14:35 2014 -0700

    altosui: Add ignitor tab for TeleMega extra ignitors
    
    Show the current state of the additional ignitors in another tab;
    there's not really room in the 'Pad' tab.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca66a035edecd7feffcd22257d3413ce0e189c07
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 5 00:28:13 2014 -0700

    doc: Document new voltage beeping at startup time

commit 18148c33540cda8cb6658724a048ffd426c1a6bb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 5 00:20:22 2014 -0700

    Bump version to 1.3.3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d367fc24bfd0377db6f3b00a888a18245616767
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 5 00:18:57 2014 -0700

    altos: Report battery voltage instead of S at startup
    
    This works on everything with a beeper except TeleMetrum v1.0 which
    just doesn't have enough flash space for the code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8bd732ac9cb816630f46dd269448ff8422620df8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 4 23:40:22 2014 -0700

    doc: Outline files are now generated, so don't put them in git
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca4b20f9781b1dc6974d26952973dfe0d607478c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 4 23:38:40 2014 -0700

    ao-tools: Wait for device to become ready instead of failing
    
    For some reason, USB devices take 'a while' to become usable; instead
    of bailing immediately, sit around waiting to see if the device
    becomes usable if we get an EBUSY or EACCES error.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2424c0e6fe53789dc83d1e96439dcdc13e847b07
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 4 23:37:15 2014 -0700

    ao-tools: Use 'program' command in ao-flash-lpc instead of 'flash'
    
    The program meta-command is supposed to do the whole thing, and seems
    more reliable in actually getting what we want flashed to the board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4800497fa1fc449807ef0097cc3fed367641ae29
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 4 23:36:34 2014 -0700

    ao-bringup: Get turnon_telemini working
    
    This script now does complete testing of the board
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 24167015705ae831692b95735968b04a876f935e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 4 23:34:48 2014 -0700

    altos: Rename 'core' to 'kernel'
    
    core remains a bad name to use -- dirvish skips files (and
    directories, it seems) with that name.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb9fdef607728cc326a82aa632e59724f272e53b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 3 00:10:19 2014 -0700

    altoslib: Missed a couple of easy mini voltage API changes
    
    Oh, and Tm was using Em conversions (which is almost right, except Tm
    doesn't have the history)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 834cd051af1b80a98678de221d3c45cb30f8bb0d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 2 23:35:36 2014 -0700

    Add easymini turnon script and helpers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21d584b9bf93b96a05ab374105493c0e17df320f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 2 22:04:18 2014 -0700

    altoslib: Fix EasyMini voltage computations
    
    Early Em prototypes had a 3.0V regulator.
    Early v1.0 boards measured power past the blocking diode.
    
    Deal with both conditions to try and report more accurate voltages for
    EasyMini data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit adddad0dd45f67d01487c8dd75b040ca3ab50fe2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 2 20:36:26 2014 -0700

    altoslib: Ignore speed/accel after boost when finding maxima
    
    Large spikes in acceleration often occur with ejection charges, which
    can cause bogus acceleration and speed data to be seen. Ignore those
    for the purpose of computing the maximum values of each.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff4deb417a460d96645fb6934890c2c195142be3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 28 23:33:25 2014 -0700

    altos: HAS_LED is useless; remove it
    
    ao_flight was trying to decide whether to turn off the red LED by
    checking whether HAS_LED was defined. And yet, none of the flight
    firmware defines that anymore, except for easymini which defines it to
    zero.
    
    Remove all uses and defines of this value, substituting AO_LED_RED in
    ao_flight.c, which has to be defined for the ao_led_off call to work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca0bf9fb2d6323d7a454e5ce04b48d11366eee67
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 16 18:12:33 2014 -0700

    Add easymega firmware
    
    A trimmed down TeleMega build with no radio or GPS, along with pin
    changes necessary for the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e0b549b9b30d0a1290d28b2b94025a98af6a4de
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 10 22:55:45 2014 -0700

    altosui: Hide Tilt Angle values when not available
    
    In the Ascent table, make sure the tilt angle fields are hidden when
    they are set to MISSING.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b50e50fb814a572f7b4ea9e268a1ae150fe678c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 9 21:10:10 2014 -0700

    altos: Another missing usbtrng file

commit b5ac64bc0a6fd0fc23f39283e469c9820bdc88fe
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 9 21:08:25 2014 -0700

    altos: Missing ao_pins files for usbtrng
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 469bd376d84bf8d76faa3b726d96061d4d98b998
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 9 20:59:43 2014 -0700

    altos: Fix LPC LED driver
    
    Was using wrong types
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a4a074d690fb34af49704ac3cc4826eaf06dd9d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 9 20:58:36 2014 -0700

    altos: fix building LPC serial support for STDIO
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9671ca6c42544463fd551f81113c221265a2296e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 9 20:57:31 2014 -0700

    altos: Don't require projects to define PACKET_HAS_SLAVE
    
    Really, most don't need it, and whinging about not having it defined
    isn't useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e1e00a4b67fbdbae339219b35aefd44a1bcf9486
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 8 21:39:33 2014 -0800

    Add USB True Random Number Generator product
    
    Just basic device support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6dad9ca543fbed3f849b01300224b1b21ef2eb08
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 8 16:25:33 2014 -0800

    Re-add LCD bits to stm-demo

commit 32f0f39a953dabe19ec92611570e4a82da8f8dce
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 8 16:25:10 2014 -0800

    Add flash loader for stm-demo board

commit 4c7da6d0ad568448c37761cd0c0108b9161a9345
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 7 21:27:26 2014 -0800

    doc: Add separate outline pdf generation
    
    This generates one-page pdf files that contain just the outline of
    each product.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f2a85027b496451c5934eb36fcdffbd5e5da177
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 28 23:04:54 2014 -0800

    Install .desktopfile as _SCRIPTS so they are left executable
    
    .desktop files should be marked executable so that the desktop
    environment knows they are correct.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a072cbb137126e677d3ebbf0245ec4ea5aa481ad
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 28 21:16:57 2014 -0800

    altosui: Retry device enumeration after rebooting for self flash
    
    Windows takes 'a while' to include the rebooted device in the list of
    available devices, so try a few times with a 100ms delay so that we
    can avoid asking the user to select from an empty list.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac2cfb03158b4902466a72edad5dc471ee6bdb91
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 28 21:16:36 2014 -0800

    Mark development sequence to 1.3.3 by bumping version to 1.3.2.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57e5d13c0577e1b0a6e8117e2d04eeda6cf0b045
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 23 17:42:08 2014 -0800

    libaltos: Link so with -znoexecstack flag
    
    This marks the library as not requiring an executable stack, which
    openjdk prefers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 104b8bfc9b37fda175f2cb2a1e33601fbf6f48f6
Merge: 403b95ee 1edf7ef8
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Feb 20 13:23:52 2014 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 403b95ee27782309b564855b85285c9f5f5c7068
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Feb 20 13:23:32 2014 -0700

    update turnon scripts to store cal values

commit 3ef0cc28758c68e6076afa809e157a84ce3661fb
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Feb 20 13:23:20 2014 -0700

    typo fixes from Matt Kraai

commit 1edf7ef8026ac4ab698a7f99671e9348d18ffd0a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 18 09:47:51 2014 -0800

    altos: Create balloon-specific load for TMv2 hardware
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff4ae350c24b3d6ef71e29191bb719b07ab9c5bb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 18 09:46:17 2014 -0800

    altos: Make balloon code run again
    
    This fixes the balloon code so that it works with recent altos bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b6f051663dd17492bece9efb9e898ef113ab414
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 18 09:45:41 2014 -0800

    altos: Set reasonable accel values when !HAS_ACCEL
    
    This lets us use telemetrum log and telemetry formats for balloons
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f6983e3d61fa5231f3d0ce33dbc5aadf946b597
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 18 09:44:52 2014 -0800

    altos: Expose ao_usb_running globally
    
    This lets other bits of the code know when USB has been connected.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b9d5b273a410e315739c5c6eaa4105523056b9a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Feb 18 09:43:43 2014 -0800

    altos: Move balloon flight code to core
    
    This lets us create more than one balloon product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43b1797189095c402e1c35bdc317c4196e180e66
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 17 21:30:28 2014 -0800

    doc: Need to publish .svg files as well
    
    The drill templates are all .svg files that are referenced by the
    generated html.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 874d0065ecb066ee746a016876edebc7cc6e3d96
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 17 21:27:57 2014 -0800

    Re-create drill templates
    
    Using inkscape, the drill templates weren't getting printed
    correctly. Switching to hand-generated svg fixes that.
    
    The .xsl file is also fixed to really encourage the images to be
    printed at exactly 100%.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e713f0a53d608a8855884b7a48e4e3423d8a3d2
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Feb 17 00:15:58 2014 -0700

    deliver images used in MicroPeak manual to web server, too

commit 1d421a43494cf2003ac23fb8cd21d6ae05edfac8
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Feb 17 00:10:05 2014 -0700

    update copyright year assertion in MicroPeak manual, remember during releases

commit a3ddb5906167e445f937b16fafb7f5c537852f0a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 16 18:01:10 2014 -0800

    Mark .desktop files as executable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c860d837a0c97a091c5f47fce91bdb8beb4602d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 16 15:53:50 2014 -0800

    micropeak: Construct linux install script
    
    Uses the same script as altosui, just edits the final path name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 948a614a62754fd4fffd9b84ad83fd444e4f0437
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 16 15:17:40 2014 -0800

    Move .desktop and icon management out of debian dir
    
    This constructs a .desktop file from a template and installs it, along
    with suitable .svg icons, during the normal build process
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 066a01ad0b4e73fdb47b43a42c1d0b7fae81a180
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 16 14:57:38 2014 -0800

    Put altusmetrum.svg and micropeak.svg in icon directory
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95f5a6ef52947088993d395874cf6aa502fd2503
Merge: 135b6d40 de2a6199
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 16 15:53:35 2014 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 135b6d4019f584c050b3d70c11fb5bcf2c7396c4
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 16 15:53:22 2014 -0700

    use svg in the .desktop file

commit 13dccd1869cdf00d4aa0df55a3ece33936cd520a
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Feb 16 15:51:32 2014 -0700

    have the cal-freq script save cal values to a file

commit de2a619900ee23911c866d5aaff63a0f9388bfc7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 16 13:01:29 2014 -0800

    Add linux installer script
    
    Create a linux installer shell script that unpacks the archive in a
    sensible place and adds a .desktop file to the environment
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf268354535a3a7b2e093235e5347ed2a6d809ff
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Feb 13 21:53:13 2014 -0700

    updating changelog for release

commit e53be56179f4cd93227b6bdc28c2ae60b81db57d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 9 23:47:47 2014 -0800

    doc: Update the 1.3.2 release notes to include APRS and Fire Igniter changes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d24ef4aa9429f4884548e5c9fd48d57e640f0d9d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 9 23:46:39 2014 -0800

    doc: Add remaining configurable parameters to the System Operation chapter
    
    Yes, this duplicates the section in the AltosUI chapter, but I'm not
    sure how to describe the device without talking about it in two
    places, so we might as well make both of them complete.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e76948d382cf6980c3a5b6c48405d71c8811780b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 9 22:54:31 2014 -0800

    altos: Put locked/unlocked GPS status in APRS comments
    
    Replace the 'S' (which marks the field showing sats in view) with
    either 'L' or 'U' to tell the user whether the GPS receiver is locked
    or unlocked.
    
    This also removes the colons in the comment field to shorten it. This
    makes it fit on one line of my FT1D display.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5001a0f882af53dde33fc531215944c9d727baf4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 9 22:53:05 2014 -0800

    altos: Re-send previous GPS position in APRS if lock is lost
    
    APRS radios often show only the last received APRS packet, which means
    that erasing the last known GPS position when we lose lock by sending
    0/0/0 is unhelpful. Instead, just send the last known position, and
    make sure that we send 0/0/0 before we're locked the first time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 864d1e2282ac1d241478cf663ee24112c9d3dc37
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 22:02:02 2014 -0800

    altos: Fixup named ADC printing
    
    Print all ADC values on one line when using named ADC values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f750ef6f9745b15af45bb80f5b46b9e6f51796d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 20:05:02 2014 -0800

    altos: Add needed math sources to TeleGPS v0.1 build
    
    APRS requires the logf function to report altitude.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6367ab2dec718c512073f70dfab86dbd1656b1fe
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 20:02:54 2014 -0800

    altos: Report nsat in view in APRS packet
    
    This adds the number of sats in view (as opposed to the number of sats
    in solution) to the APRS packet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ddbbdcdc498a19ebf4a440bbf5d73b6538e0a57
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 20:00:56 2014 -0800

    altos: Don't write more than 12 sat infos in ublox driver
    
    This was overwriting memory past the end of the ao_gps_tracking_data
    array, which isn't a good idea.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 324073d14ed8215b74d9df51f2229827cd4401d0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 1 00:32:43 2014 -0800

    altos/stm: Block interrupts while reprogramming flash
    
    Wouldn't work well to get interrupted...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d6d56c20465455b759f60a03fc96aa228ab9102e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 1 00:06:30 2014 -0800

    altos: Enable system timer in flash loader and prod watchdog with it
    
    This makes it possible to reflash the board without needing to disable
    the watchdog.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d3420e51db4d1a46237e97aeb189d2a8eba7f5e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 31 17:44:45 2014 -0800

    altos: Eliminate warnings in FAT code
    
    The FAT file system code wasn't cleaned up when the warning fixes were
    done recently.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a8adfed8fbbcaac71da9c6d54bbd3091f4d7511
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 21 10:16:35 2013 -0700

    altos: Add watchdog timer task
    
    This new task frobs a pin periodically to inform the hardware that the
    operating system is running.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 63683f91f5fe9588c1d905a572509cb674aaad68
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 23 21:36:18 2013 -0800

    altos: Add names when reporting STM ADC values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7fdf6a6cc252c7813a857714f6088b7fd5bfab40
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 14:31:06 2014 -0800

    doc: Add title page image to altusmetrum.pdf
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c70a7a49cc0e92df90ea17a870d661ca857c145
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 14:30:52 2014 -0800

    doc: Ignore generate template XSL file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2320b788c47757032b2874e64479ef382456c2d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 14:24:48 2014 -0800

    doc: Document GPS max height addition
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8363326cd87fb1e53ad78146c0503aa476d2da89
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 14:24:13 2014 -0800

    doc: Update micropeak docs to include lots of pictures
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 306028b33ebed45bcf379740cc3c01c2360c51f4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 8 10:25:33 2014 -0800

    doc: Micropeak doc updates for 1.3.2
    
    New 'download' button.
    Update download instructions for new USB adapter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 28d5239bff234cc1158a270a29c0e39067f613c3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 7 22:45:26 2014 -0800

    micropeak: Missing a couple of new exceptions when loading files
    
    The change to keep reading on invalid chars from the serial port
    exposed a couple of new exceptions from the MicroData code which the
    file loading code needs to cope with.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d0d59c51138dc1b1bbf6933354fe9faf4d67986
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 7 22:32:17 2014 -0800

    micropeak: Keep reading until we get valid data
    
    Don't stop just because we saw something invalid on the serial line;
    let the user try again, or cancel when they get bored.
    
    However, if the serial line disappears or some other fatal error
    occurs, then do stop and put up an error dialog.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4a5b3837b460d1b6fcea99312728114c4734495a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 6 17:08:34 2014 -0800

    altos: report 0/0/0 for APRS position when GPS is not locked
    
    We were reporting whatever the GPS device sent, even if it wasn't
    reporting a valid status. That's not terribly useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e0bda088c097ac6bcc677d7b6d00683e73a68fb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 3 00:24:38 2014 -0800

    micropeak: Watch serial data during download
    
    This adds a text area to monitor the incoming serial data in case some
    problem occurs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c2f28cbc1cb312d3bcc8951176d79f234a1af04
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 3 00:26:42 2014 -0800

    altoslib: Use existing unicode Charset in AltosLink
    
    Instead of making AltosLink look up the unicode charset, just provide
    it directly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7df221c42948cb42cf777b899263c8ec9067bd55
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 31 18:09:26 2014 -0800

    doc: Mention that an APRS interval of 0 disables it entirely
    
    And mention that the value is a time in seconds between APRS packets.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 230af613d372afe540c6a8860199d717eedecf57
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 30 20:54:24 2014 -0800

    doc: Replace screen captures with 'active' window ones
    
    These are the same as the previous captures, just with the titlebar
    highlighted instead of grey so that they're all consistent. These were
    also done with the gimp which makes the areas outside of the window
    (like outside the rounded corners) have zero alpha so that the white
    background shows through.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e3088ece81ef85f3dbd4df51954bc90681d6b6e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 30 18:42:08 2014 -0800

    doc: Update screen capture of pyro config with correct names
    
    With the UI now using letters as TeleMega does, update the screen shot
    used in the manual to match
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb9262901aff4f69fa3d2357693634cbee9bca46
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 30 18:38:01 2014 -0800

    altosui: Use letter names for pyro channels in pyro config UI
    
    TeleMega has the extra pyro channels labeled A, B, C, D instead of 0,
    1, 2, 3. Use those names in the UI to avoid confusion.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e94d785d9a1cce4eb5b3063d55e825719afb58e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 28 21:52:57 2014 -0800

    doc: Add explicit paragraph about using one battery with Tmega
    
    Just in case the factory-supplied jumper gets lost.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f4f31590518875eda40473dd2178d6976a4f86a3
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 28 18:21:10 2014 -0700

    use firmware in /usr/share/altos for teledongle, update telemetrum for v2.0

commit 6b70b8b6bb4e8eae8159ec966847092d0b1deab3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 24 22:43:25 2014 -0800

    altoslib: Don't lose gps_height value between GPS samples
    
    gps_height is now reliably updated whenever GPS altitude data is
    received, so don't try to reset it between samples.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea8c9ca9dd24a026ea5bfe5a1ac70857181a88c8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 24 22:40:49 2014 -0800

    altosui: Show GPS max height in flight stats window of graph
    
    Uses the new state.max_gps_height() function.#
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4616233f3942d2796ba6633477670a83669957b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 24 22:39:10 2014 -0800

    altoslib: Track GPS altitude values to be able to report max gps height
    
    This adds separate GPS altitude and GPS ground altitude values so that
    the AltosState object can report GPS max height.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa2edc97ac0c880e569baca453ff6302ad6da65f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 24 21:34:39 2014 -0800

    doc: Fix spelling of decelerate

commit eb3ffd06575ddd0be061aa2717c7075c823ed54e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 24 21:31:17 2014 -0800

    doc: Document flight computer wiring connections
    
    This details all of the wiring connections for each flight computer
    and explains how to wire batteries, switches and how to use external
    pyro batteries and active switches with each one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee480d180cbdd712ab13d39716c38aabd4678d95
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 24 10:10:00 2014 -0800

    Set version to 1.3.2 in preparation for release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9c4674d90f9b111e1b47abb7aee714ed12fa3aa5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 24 09:35:55 2014 -0800

    doc: Add 1.3.2 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 94be1e3eb9f94a59522743374d02a1f229266931
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 24 09:21:46 2014 -0800

    altos: Tmega Don't try to log info about more than 12 GPS sats
    
    The mega log format has a single packet for GPS info which holds a
    maximum of 12 satellites. Bdale managed to get 14 sats in view, which
    ended up crashing the ground station software, and also overflowed the
    gps_tracking_data structure.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd28429405498fca0788ce9c19093898c84b10e5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 23 22:16:36 2014 -0800

    altoslib: Validate TeleMega GPS_SAT log packet nsat
    
    Make sure nsat is not more than the size of the array
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afbae4c6b7a658f690cb827acfef015e9e2da318
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 22 21:31:03 2014 -0700

    update notes on how to release

commit 0ef0c50536e5eb6ad3455b5828983307edbab828
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 22 20:53:03 2014 -0700

    freshen ChangeLog for release

commit 200137060651f48c99276c8feb0e15980a9b46be
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 22 20:52:09 2014 -0700

    update copyright date on main documentation file

commit 63171339c03cf9bf3d691511889223bf43024124
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 23:02:27 2014 -0800

    doc: Update for 1.3.1
    
    Add 1.3.1 release notes. Update screen shots. Document new functionality
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e6a73d6cbe149a930f8c4e2dac655bc3f6270013
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 23:01:28 2014 -0800

    doc: Fix image widths to make them all scale the same amount
    
    Hand-compute scale factors so that all images are presented at the
    same relative size as they would be on the screen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e61c02b51e069aa58b36f59b9ca8e7c8284bc93a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 22:13:01 2014 -0800

    altosui: Handle serial-port startup errors in idle-monitor
    
    Trap exceptions during idle monitor startup and report them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 42922b40fc695bdaa92e3fb0b41a248f7df918d0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 22:01:39 2014 -0800

    altosui: Handle already-opened link in IgniteUI
    
    Must run the link open from the UI thread so that we can put up the
    in-use dialog immdiately; otherwise the UI thread is blocked which
    means the dialog never appears and the app appears to hang.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f118e33416e45ea9a2b5ede4157bd8b58ddb6ebb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 21:37:18 2014 -0800

    altosuilib: Remove some spurious debug printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 677fcafd3816b6d8d86b2dc41b840d97b5ccbf07
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 21:34:58 2014 -0800

    altoslib: Fetch target device config for Fire Igniter npyro value
    
    The code was using the AltosLink config_data, which is always the
    locally connected device's configuration. When using the packet link,
    that's not terribly useful when asking how many extra pyro channels
    are available.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 13cf4000bd53ac4af66231d56e24c9eb11178a5f
Merge: 7a8551fe 99fedbf0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 20:59:06 2014 -0800

    Merge remote-tracking branch 'origin/master'

commit 99fedbf0ed42a5d4fa80f094576ca0260040ef5e
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 21 21:31:25 2014 -0700

    set version to 1.3.1 for release

commit 7a8551fe8e5f0a90cbc494842715a96f08c11900
Author: Anthony Towns <aj@erisian.com.au>
Date:   Mon Jan 20 19:38:21 2014 +1000

    altosui: rate limit map downloads

commit 0faa098f05d43eefc1fa54462401171fca5034cb
Author: Anthony Towns <aj@erisian.com.au>
Date:   Mon Jan 20 05:10:58 2014 +1000

    altosui: --fetchmaps gets same number of maps as GUI

commit aab5873c87d6ecfe0854751746f80d4bc7ebeffa
Author: Anthony Towns <aj@erisian.com.au>
Date:   Mon Jan 20 04:52:43 2014 +1000

    AltosSiteMapPreload: only load 49 maps
    
    Google Static Maps API limits queries to 50 maps per IP per minute,
    so querying a 7x7 array instead of a 9x9 array seems more likely to
    work well.

commit 7f9cda0e2531a7bba7f1b4e3b7212a62b5bec1ed
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 19 00:17:06 2014 -0800

    altosui: Make romconfig serial and radio cal fields 8 digits wide
    
    This ensure that they are wide enough to show a cc1120 calibration
    value, which is 7 digits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b891115c95453d9002d8ef307a27e14eda145a5
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 17 20:55:45 2014 -0700

    set version to 1.3.0.2 for test flights this weekend

commit c33ec8207c0e5d4c855e87b2746371b19d437f7d
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 17 20:47:16 2014 -0700

    use firmware in /usr/share/altos for production flashing

commit cfcb127b248b62231049b6b50cf9b7edc2731f0a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 15 13:28:16 2014 -0800

    altos: Add missing ADC divider values for Tmega v1.0
    
    Somehow I left these out of the previous commit
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9001d5780a41986017bd3bbc7f8c5556b116c351
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 15 12:42:59 2014 -0800

    Ignore 32 and 64 bit cjnitest apps

commit c743eaa060080a7bd236466b93cff3abc96f405b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 15 12:40:26 2014 -0800

    altos: Report battery, apogee and main voltages over APRS
    
    This makes APRS more usable when you mute the RF audio on the HT.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc06242e882cba462791962c199b7c89e79adc65
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 14 23:29:59 2014 -0800

    altos: Use factory calibration for all acceleration computations
    
    The ground acceleration value will vary depending on the tilt angle of
    the airframe, which will result in incorrect acceleration computations
    during flight. This also avoids accidental boost detect when moving
    the airframe around in pad mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d812b3db418fd9816731b761a0853eb38f5a265
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 14 23:21:40 2014 -0800

    altos: Switch APRS to compressed position format
    
    This provides lat/lon/alt in fewer bytes while improving precision.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f560d5063b1339dbfb3e6723cfadb7b4c5eace25
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 14 23:18:40 2014 -0800

    doc: Ship telemini outline as pdf file too
    
    Build telemini.pdf from telemini.svg and include it in all of the
    released packages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06ffd8022ff5ac74274c9839d42c0c47274cb8b9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 1 22:08:13 2014 -0800

    altosui: Require both libaltos32 and libaltos64 for fat Linux tarball
    
    No sense shipping a broken tarball ever
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8bff2822c242d2878b408b9c0d8a7647108ea4b1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 1 22:02:56 2014 -0800

    libaltos: Build -m64 and -m32 for fat tarball when possible
    
    Check to see if we can compile libaltos for both 32 bit and 64 bit
    systems, and then use those when generating the linux tarball.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95d77eaff708397d8b1e29904dc47d8ea09e8754
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 1 22:02:04 2014 -0800

    Bump version to 1.3.9.1
    
    Lots of new features; let's not release with 1.3 set
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b15bd24bbe48e338497c6257f5fe2c7fd1cbffbb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 1 22:00:24 2014 -0800

    altosui: Handle a missing libaltos when starting up
    
    Skip a null list of devices when figuring out what to open monitor
    windows for during startup.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c35ea586b9e792c45b287924fd256928308d9a36
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 1 21:12:20 2014 -0800

    altos: Flip acceleration data consistently for orientation changes
    
    Must flip the acceleration calibration data using the same function as
    flipping the actual acceleration data or the calibration will no
    longer be valid after changing orientation. For the MMA655x, this
    means using 4095 in both places, rather than using 0x7fff for the
    calibration data changes and 4095 for the data value changes. For the
    MPU6000, this means using 0 in both places.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afc16e805145c3e9ab4ba948f9ab1d9aa2b27afb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 28 10:18:53 2013 -0800

    altos: Add 'O' command for TeleMega orient testing
    
    Only present when HAS_FLIGHT_DEBUG is enabled, this command lets the
    user check the orientation tracking code by showing the current
    orientation and when the calibration values are reset.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9877f6b880a0e89fbfbf1a39ded94bdc1891f3d9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 28 10:17:37 2013 -0800

    altosui: Switch Graph to AltosOrient type
    
    The graph was using a private class for orient type, use the altoslib one
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa01f06acfbf029958a55f68175b6868817b333f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 28 10:16:24 2013 -0800

    altosui: Adjust info table column width
    
    Make sure the info table can show a full longitude value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bbc4940730e6b431f1b9ccd9bbaf9faa0ffb2b1f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 28 10:15:26 2013 -0800

    altosui: Add orient to ascent and info table views
    
    This adds 'tilt angle' to both ascent and info table views
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 053d092b3dca4ebb98e97ec0fe24f5f5e1c31f88
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 28 10:13:05 2013 -0800

    altoslib: Add AltosOrient class and max_orient()
    
    This adds the class necessary to put orient into a UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 081455dcba860f3e4df8cd66f3fe686b204034ad
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 21 08:56:00 2013 -0800

    altosui: Extend Fire Igniter to additional channels
    
    This lets the UI test fire other pyro channels on TeleMega
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9cf9a67f937185c0c0bb5b2bae4f420755965799
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 21 06:46:46 2013 -0800

    altosui: Switch from radio buttons to check boxes in pyro config. Add close
    
    First of (we hope) many review comments from Troj.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9289200ccb661b10ff892760ecbc752c7745de6b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 23:04:43 2013 -0800

    altos: Turn on -Werror for STM and LPC builds
    
    Now that the build completes with no warnings, make future warnings
    into errors.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16b37b49985daf21ebb93b3d6ae64af67533be22
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 23:02:51 2013 -0800

    altos: Turn on warnings for LPC products too
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f578d9455eec9ea0eccd2d5e21349e274ea4281a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 23:02:21 2013 -0800

    altos/lpc: Missing */ in definition of PIO0_4
    
    Would maek using these values pretty hard.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14790172e02d4e1624c35797f87ffd94345d54ff
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 23:00:43 2013 -0800

    altos: lpc exti setup was incorrectly testing mode
    
    Check for NOCONFIGURE bit was missing parens
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 48f996a9d65631238b4de446530f31f83acb99f5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:59:42 2013 -0800

    altos: cc115l driver tone_run wasn't recording number of tones
    
    This would prevent the cc115l driver from ever sending tones.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e11fcc299f4a1a0461a3442ca13f8984d76c30ff
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:58:10 2013 -0800

    altos: Clean up warnings for LPC products
    
    Unused varibles, functions and parameters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ed108fb86676daea17264d7159c2cff9ea7a6e4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:45:56 2013 -0800

    altos/stm: Turn on -Wextra
    
    All of the warnings for STM projects are cleaned up now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1406a5b0721a135913a9801e9eea9e91f0a536b4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:45:01 2013 -0800

    altos: Add default button return value from ao_button_get
    
    This "can't" happen, but it's not unreasonable to have a default
    return value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 316d898715746a379068ac8511692bdb9da14b39
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:44:20 2013 -0800

    altos: unsigned value in ao_pyro_set checked for negative value
    
    No sense checking unsigned values for less than zero.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c9172ba5681ff93d63c9c263a453d0025170045
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:43:18 2013 -0800

    altos: Clean up -Wextra warnings
    
    Unused variables, mismatching signed/unsigned and a few other misc
    warnings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db8f3426ac1cf756a2e4974ca61a5ae9048c80ce
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:21:23 2013 -0800

    altos: Turn on -Wall for stm compiles
    
    The warnings are all cleaned up now, leave this on by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b31b4622d5bd92c0cc0851818f5b595dbdb60ead
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:15:25 2013 -0800

    altos: Clean up some minor warnings from -Wall
    
    Unused variables, functions and labels, missing enums in switch.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 755082d36231c1b247bc0e1f13919dd9b5c362a8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:13:32 2013 -0800

    altos: mma655x also needs ao_sensor_errors
    
    TeleMetrum has an MMA655X but no IMU, so it needs an explicit addition
    for sensor errors.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 758acb92cccbe4b64a35a1883b42713738c90630
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:08:11 2013 -0800

    altos: Complain about sensor self-test errors only in idle mode
    
    When the accelerometer says to go into pad mode, don't look for other
    sensor self test errors. Only look for sensor self test errors to
    choose between idle and invalid mode. This will prevent minor sensor
    self test errors from letting the rocket fly safely.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c8b27410e45cc3d80ad4b896bffe70e9aec5e3aa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:06:52 2013 -0800

    altos: 3-axis accel calibration was invalid in explicit accel cal mode
    
    When explicit Z-axis accel calibration values were provided to the 'c
    a' command, the 3-axis accelerometer calibration values would get set
    to uninitialized values. Not so helpful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a912dcde191e2f750845c464611641a5abdc28a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:04:53 2013 -0800

    altos: Execute self-test on MMA655X part
    
    This doesn't check for fine calibration, just makes sure the part is
    within the broad tolerances specified by the manufacturer. The subtle fix
    here was actually getting reset working -- there was a typo in the
    bitpattern definition which caused the reset to fail, making it hard
    to self-test the part, as self-test is only valid before the part is running.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b89fb51a963635e2effe3a31f803bfc29c2c46b7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 19:44:38 2013 -0800

    altoslib: Bump library version
    
    Prepare for next release by making sure we notice that the API/ABI for
    this library has changed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e5f3b922100f9de54b9650df14749e81b1a6562
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 19:40:31 2013 -0800

    altosui: Add imu and mag sensor values to plots
    
    Makes for a lot of potential graph elements.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f65880cf5bfcba5005c32db2b300448e585f3e45
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 19:39:40 2013 -0800

    altosuilib: Rearrange graph enable buttons
    
    Eliminate separate 'enable' radio button, provide for multiple columns
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 796cb90e3241103f79ae12565cf6f0dad21cb57c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 19:38:29 2013 -0800

    altoslib: Fetch 'orient' value from Mega Sensor packet
    
    The mega sensor packet had a spare byte to hold the current
    orientation value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91bcfae2e64ecb2e7de1292b264910382b635aea
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 19:37:08 2013 -0800

    altoslib: Convert IMU and Mag sensor values to useful units
    
    Convert from raw sensor values to metric units
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ad31bad20b20615e9d8b29088e2488fddc81ac9
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Dec 20 15:06:37 2013 +1300

    altosdroid: improve build system dependencies
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 0e3b3ce66035e8a90fd708d9a4bc01370174c9eb
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Dec 20 15:06:07 2013 +1300

    altosdroid: update to latest google play services
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 96f2ae5fc0d3bf88704d2ae1b4df5dc6aefc523b
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Dec 20 15:05:42 2013 +1300

    altosdroid: force older jarsigner signing algorithm for java 1.7
    
    (increment versionCode, re-upload to Play Store)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ac12e77e3dffc9e9ddb1578a38b32783ad64e940
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 19 03:22:21 2013 -0700

    updated notes from 1.3 release

commit 27528961457865acc3a38b822268df6d7cb86cfd
Merge: 4006effc a31629df
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 19 02:00:10 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 4006effc538289c36a1563c1b717231991292c0c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 19 01:58:24 2013 -0700

    fix missing newline at end of src/test/Makefile

commit a31629dfceb5e9cf1d5c654b8bd87d575f73c34b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 19 00:58:50 2013 -0800

    altosui: Ship EasyMini firmware too
    
    Missing the FIRMWARE_EMINI define left all easy mini firmware out of
    the distribution
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc3610d8cecbfed40c62d4dcb93fc9a4d2a7c9e3
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 19 01:29:55 2013 -0700

    update ChangeLog from git

commit 701c26ed85c28ac59e338975f2a6ba6bd25f6493
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 19 00:16:16 2013 -0800

    altosdroid: bump versionName to 1.3 and versionCode to 4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f95ffbad918a73cfd5460d6ce037d680465c35d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 19 00:12:21 2013 -0800

    altosui: When device has no valid romconfig, set RF cal to 0
    
    This is intended to signal to the user that no valid value was found
    and that they'd best pick something sensible.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a04c1dd5df76c9127615bc797a9d9f764eec1234
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 19 00:08:50 2013 -0800

    altos/lpc: Stop sending SETUP IN when the requested size is reached
    
    The host won't keep asking for SETUP IN packets once it has received
    the amount of data requested, so check to see if we've sent that much
    and flip back to IDLE state if so.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ab12861c3e70d7c22b27d988546a925616a0adc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 23:27:34 2013 -0800

    altos/lpc: Reset less of the device on USB reset.
    
    This leaves most of the device configured across USB reset, which
    appears to help when sending a IN reply to the first SETUP packet;
    without this change, the IN reply would always get a length of 0,
    which is fine for SET_ADDRESS, but not for GET_DESCRIPTOR_DEVICE,
    which OS X appears to send before setting the address (go figure).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b13cc2ca035b13582cd2e59ba7286f872f43c6e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 22:00:13 2013 -0800

    altoslib: Remove some old debug printfs for self flashing
    
    These aren't necessary anymore and just slow down flashing boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 408b0dea338147382e94717dab85b4a204e7bdf5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 21:08:33 2013 -0800

    micropeak: Add micropeak man page
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b2ba87d5f68b9e052dddd49d69341f36d777122
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 21:02:15 2013 -0800

    ao-tools: Add man pages for ao-flash utilities
    
    These aren't very wordy, but these tools are pretty simple scripts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 39cb8c2896317b7538353be979ac99baffc14489
Merge: 2a6016cf ee427961
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 21:53:52 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 2a6016cfabc8cd56f5219871e3b3df316a639289
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 21:53:36 2013 -0700

    update Debian standards version we claim compliance with

commit ee4279613b4757453d0d8f8afc06037c61eeb520
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 20:32:05 2013 -0800

    altos: Try IMU self-test 10 times before giving up
    
    This should keep the device from failing to boot unless the IMU is
    actually broken. Oh, and if self test does fail, this places the
    flight computer in 'Invalid' state rather than panic.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bf84ec28a41f7bd1b11ba45b4639856266227bc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 20:30:58 2013 -0800

    doc: Add tables describing AltOS beeps and flashes
    
    Provide a convenient place to reference when listening to the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0673344289772ed89483948184d6608c272c7c26
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 18:20:55 2013 -0800

    altos/stm: Semantic error in STM usb disable caused it to not work
    
    The USB enable register wasn't actually getting rewritten with the
    enable bit turned off, so the USB device was still powered on in flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 122f491e459b6ff417932370b3f1aa2091c71aca
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 18:30:54 2013 -0700

    update release docs to include option for submodules

commit d9982c257463f23be940eea66bd4dc3aadff0043
Merge: 1b97ed2b b63fc054
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 18:25:35 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 1b97ed2b64bcbcd969124964f1e49837899f1c70
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 18:25:03 2013 -0700

    we're using packaged and local-to-our-tree ARM toolchain now

commit b63fc05481bf6d57e6385704ce53c1c19afa9c2e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 14:34:31 2013 -0800

    doc: typo in micropeak doc hole->hold

commit 6827961c002757f8e74de44f6eb9c9029d099ebc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 14:25:41 2013 -0800

    doc: Update micropeak quick start guide to note new boost detect
    
    Now waits for one minute and 30m of altitude change to avoid false detections.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c0966cd40f05f3a65b0c977b4b92586a58192f4b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 14:22:51 2013 -0800

    micropeak: Compile for java 6
    
    Don't a require later version as not all target OSes support it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eea036650e62bc0f8652155974b512686754fd13
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 14:08:41 2013 -0800

    Move pdclib build results to pdclib-root
    
    This makes pdclib easier to manage as a submodule
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1bfe09b6d3eb28d0c7cfe07a248843cf81bcd25
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 13:36:04 2013 -0800

    altosui: Remove some debug printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58ceb9c845d51547244538fe6beec27e9a232af8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 13:25:31 2013 -0800

    altosdroid: Use altoslib standard voltages to control lights
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dbcf3264f950c4e1d450828c9f161b4c418bee97
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 13:22:45 2013 -0800

    altoslib: Define 3.8 as a good battery and 3.5 as a good igniter
    
    Use defined values everywhere instead of copying. Adjust battery up to
    3.8 to ensure there's enough voltage to not trip the comparators
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b19a648b667c298d2d9d5ed4ee9db661be058d1a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 13:09:48 2013 -0800

    altoslib: create eeprom download thread before telling monitor about it
    
    Telling the monitor too early resulted in passing a null thread
    handle, which meant that 'cancel' wouldn't ever work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 216405bc49ef2fc0e9941989f054e41f2fef9cfe
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 12:40:22 2013 -0800

    altoslib: Don't close telemetry reader at startup unless something fails
    
    Was always closing the file, which led to very little telemetry being received.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2e589c59ed0a4c586c5accca8772df15010c46a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 12:16:55 2013 -0800

    libaltos: Import newly build libaltos.dylib

commit 0484ca97828da0d56be7bf395fa4a4b09c591e02
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 12:15:54 2013 -0800

    libaltos: remove usb id filtering from darwin code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 36197a388a9ba1d1ee4acd96ac0079ad3af9d3d0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 12:15:22 2013 -0800

    libaltos: fix test harness main type
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 119dd56512404e0c39dd5001ba4da9373515c02c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 11:25:05 2013 -0800

    altosui: Add docs to Mac OS X dmg distribution
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6df58bb0115a8da13d35ab38861f6231bea7f2a7
Merge: 4383bafc 02195f29
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 12:19:31 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 4383bafc6ccdde10f06882ba3e96126c61d5e988
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 12:18:30 2013 -0700

    a fresher changelog entry for test builds

commit 7db8e8190bc8b9a17a7b5107954e2362a0e9c7a2
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 11:08:55 2013 -0700

    need to include the Cortex toolchain

commit 02195f2970fb7243fd9a9992abb6ada6709db4e1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 11:14:40 2013 -0800

    fix git: path for pdclib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fbca372edd5609bc253b622b55b7faffd19ae6cd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 11:12:44 2013 -0800

    Use git: path for pdclib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2635d07d0f0a91dd7d59f2c94765a40907d2732
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 11:08:11 2013 -0800

    Ignore .dll files in libaltos
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8fdbdebdbb4d1579fd2af47430807d0d2a78105b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 11:07:55 2013 -0800

    ao-tools: complain if st-flash is not available
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f529633cd4be8a0edb1b067bbf5d7cc055dcc1b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 10:55:06 2013 -0800

    altos: get stm-bringup building again
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 262ee65885d55902df96f4aec6a114f5ac6f2c61
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 10:53:09 2013 -0800

    Remove stale stm test apps from regular build

commit 90386115204bd3bfa55deb5ebe1972bacdba725a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 10:50:45 2013 -0800

    altos/stm: Update pdclib paths for flash-loader builds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb659fb0ee80c25312be36b3d8adb686813db125
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 10:43:16 2013 -0800

    altos: create target pdclib directories before building

commit 9c200c3bc742b4dd1a7e28bfce9d5b27e833aae5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 10:01:29 2013 -0800

    altos: Build pdclib locally if necessary
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fbde0c3e4bdb419d6bd4dbcc96b0e01c59e9fa13
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 09:59:33 2013 -0800

    include pdclib in wrong place

commit 77b04d662a6704f5db10522a2f9b169d31df5bea
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 02:03:15 2013 -0800

    altosui: Hide non-applicable altimeter config values
    
    This makes configuring EasyMini a lot easier...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 012abeda6ae846d74729e96e7ed7c8af2edca572
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 02:02:12 2013 -0800

    altos/lpc: Be a bit more resistant to toolchain section name changes
    
    Just add some wild cards on the ends of each section name in case the
    toolchain changes names in the future.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e26306c9350ef1d107d4257ef1c09d15165c9154
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 01:14:11 2013 -0800

    altoslib: Pass InterruptedException up the stack instead of hiding it
    
    When interrupting a thread that is talking to a serial device, it's
    important not to have that thread discard the InterruptedException so
    that it will actually terminate. This patch removes a bunch of places
    that were discarding InterruptedExceptions and lets higher level code
    see them so that they can exit cleanly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18852efa108ba6e6e69dfd5076d4f4c01f62b4ef
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 01:12:11 2013 -0800

    altos: Make TeleMega v0.1 work more like TeleMega v1.0
    
    I've still got one working v0.1 board which is useful for testing
    stuff, so make it work more like the released TeleMega:
    
     * Use E for drogue, F for main
     * Use on-chip eeprom for config
     * Fix ADC report printf to match
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f035ac2df1cfa6964ae904aba0aedde279ca921
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 23:50:54 2013 -0800

    altos: Use all 16 bits of setup packet len when limiting reply len
    
    We were only using the low 8 bits of the setup packet reply max len,
    which meant that if the other side sent a weird max len (as Windows 7
    does), then we'd truncate our setup reply to whatever was in the low 8
    bits of that value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1280ba2e51b36f417f3adb6d101405ee75e7e509
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 22:53:45 2013 -0800

    altosui: Add EasyMini bits to fat distribution images. Update telemetrum.inf
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 212a1b66ae04317b7b42ba57573b910fde09ca6c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 20:24:19 2013 -0800

    doc: Publish images with HTML bits
    
    Otherwise the html won't render right.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ecb6a8276b2ce40d2a4da586dbc17581cfda26d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 20:23:00 2013 -0800

    altos: Broke TeleMetrum GPS reporting by holding the GPS mutex too much
    
    We can't hold the GPS mutex while waiting for the GPS receiver to load
    data as it protects the GPS data with the GPS mutex.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e44ce127ece149e7b07be49142bc0f9d50bbe97d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 20:05:12 2013 -0800

    doc: Add screen shots everywhere
    
    This has screen shots of every dialog in altosui
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4b223df372348718b74d2ecad4957f3e30f8d79
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 17:37:39 2013 -0800

    Add altosui image and attempt to add launch photo to title

commit 1d093383fe58fc8c8c11e1c7cd1cd929ae1bd9e4
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Dec 17 14:53:59 2013 -0700

    further documentation tweaks

commit 90c88bab305c43eb62f964fd3ff350b8b0b5320d
Merge: d5d6d10c dffbdd93
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Dec 17 14:09:30 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
    
    Conflicts:
            doc/altusmetrum.xsl

commit d5d6d10ceb724081c7cf89a3885d7e6c3da14604
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Dec 17 14:08:12 2013 -0700

    capture my changes so far

commit dffbdd93d7a86a12d83a412de37dfd2a5f063995
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 11:38:46 2013 -0800

    doc: Add product pictures to manual
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d8da4ef325171960e16fc027c6039cb63eae942
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 11:19:54 2013 -0800

    Keep tables together on a page

commit 7acd0cf17c5ca7a00893f35c7fe9c657389070e0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 10:33:29 2013 -0800

    doc: Convert several more itemizedlists to variablelists
    
    When defining a term, use variablelist to pull the term out to the left.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8bb6dd75a602792936d623713fb009fea25ef491
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 16 21:21:24 2013 -0800

    Clean up reflashing section, include section on self-flash recovery
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1562affc4951e147eba20380ea5be2e9f7152789
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 14 11:47:31 2013 -0800

    ao-tools: Use st-flash for STM flashing instead of openocd
    
    st-flash, from the stlink tools, appears more reliable when flashing
    STM CPUs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d7ae63d8dfcc99a30285e0bd2411901941d1813
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Dec 14 12:16:03 2013 -0700

    add serial number to ao-usbload call, pass SERIAL to cal-freq

commit c94ca50fd9f24f271c160f6e0e95cb7340289354
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Dec 13 18:37:29 2013 -0700

    temporarily force stlink location in debian/rules to allow complete build

commit 6545a72012e94a50d185e1c4ecff3c3769d60acd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 10 00:54:32 2013 -0800

    java: Missed libaltos java compile flags from previous patch
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8959c059ec67f5334e31abbe3f831dd571a0b464
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 10 00:51:01 2013 -0800

    java: Add -target 1.6 to all java compiles
    
    This makes sure the results can run with the old JVM
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4596c134aa5e7867f1ca1d86d36afb2af9b8999
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 10 00:39:52 2013 -0800

    altos: Remove ARM .ihx files on 'make clean'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50753e84871b2a01d270d28b8b77a19614d2180c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 10 00:03:20 2013 -0800

    Set version to 1.3 in preparation for release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54f7888dc65ffc27c6ee5ef93953bd9b8fc029ed
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 10 00:00:31 2013 -0800

    doc: More altusmetrum.xsl updates for 1.3
    
    Spell checking even
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a140b3ad689bcebdcf87caab1e64048f693a9b85
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 9 23:16:13 2013 -0800

    debian: .ihx and .map files are left in subdirs now
    
    Install them from the right place
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95c1a5a61267233cf2c16175aeb73bfb7d12ba8f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 9 23:14:55 2013 -0800

    altosui: Ship TeleMega-v1.0 firmware
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b023c87e2b86ba57cbf97be1ab76b532e0a00fad
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 9 23:12:40 2013 -0800

    ao-bringup: Add turnon_telemega script
    
    And a few helper programs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ecb0465be76e9299511aeec663d267967834f6c3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 9 16:06:22 2013 -0800

    altos: Rename telemega-v0.3 to telemega-v1.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd91a5d5069ff940e07b8817a934ee65d4e8e235
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 21:08:36 2013 -0800

    altos: Oops. Was only filling out part of the TeleMetrum ADC record
    
    Because it's missing a return, we'd end up filling out one element of
    the ADC record per interrupt, and rotating through which one was set,
    hitting all of the even offsets within the struct. Yikes!
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1711890c002fe359bd6c3fdf4092b35d464c6d9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 21:07:17 2013 -0800

    altosui: When flashing to TeleDongle or TeleBT, match any .ihx file
    
    Let the user pick any .ihx file when using a device which can only be
    used as a pair programmer. Note that 'telemetrum' can be either, and
    we'll assume that it's a self-programmed device (v2) for now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 710343a23c7e6e9c079eafdf3aeea8a40cc2ce61
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 20:34:11 2013 -0800

    altosui: Match directories in hex file matcher
    
    This makes it possible to navigate around the file system
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd92bb8ff3be257925bf6e969d93a7f9dd941fb8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 20:33:22 2013 -0800

    altoslib: Don't require radio_cal or usb_descriptors in AltosRomconfig
    
    Not all products will have these values, so allow them to be missing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68adbf5bf08ed8af2f34c0d95d9c3d457574372d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 20:11:46 2013 -0800

    Add new tools to .gitignore
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2cdb90d9214f8e66b3574cbd9c5ed073a7861681
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 20:09:10 2013 -0800

    altoslib: Add self-flashing code
    
    This adds the ability to use the AltOS flash-loader on both STM and
    NXP processors.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 70d0841b4017e7580c893c7033c04fb2964adab6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 20:07:23 2013 -0800

    altoslib: Add AltosNoSymbol exception
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e1b134e29313a1bdac18de57fe547299e5ded2a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 20:04:43 2013 -0800

    altoslib: Use symbols in AltosRomconfig instead of fixed offsets
    
    The new Hexfile symbol code automatically adds the needed romconfig
    symbols for cc1111 products, and ARM-based products have symbols in
    the .ihx files. This means that we can rely on using symbols when
    finding config values in memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1183417145de549b9281f9e210d216facf3a94ef
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:59:37 2013 -0800

    altosuilib: Don't match product_altusmetrum for product_basestation or product_altimeter
    
    It's been years since we've shipped boards configured with
    product_altusmetrum, but now we've repurposed that code for the flash
    loader. When matching an explicit product, go ahead and also match
    altusmetrum so that the flash loader will fit, but when matching
    basestation or altimeter, don't as that will avoid popping up the
    flight monitor UI at startup when a board is running the boot loader.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0af4569446b12c026aa0ffd52c55839d69af0e1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:48:27 2013 -0800

    altoslib: Publish mapping from product name back to USB id
    
    This lets us choose which device to flash based on the filename
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 88fa5fa6acbdd66d1338ca73cbbac219d62b5136
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:47:44 2013 -0800

    altoslib: Create AltosProgrammer class
    
    This provides an abstract interface to flashing boards, for
    dongle-based and self-programming boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b0c1fbccb4ef1ae2ed356292cc8762360532b7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:46:30 2013 -0800

    altoslib: Add symbols to .ihx files
    
    Create a new 0xfe record type to hold the symbols, and append them
    after the EOF record so that other tools might continue to work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1ffdaf1f5e9b6e8ff0d4e08d8c504f8dfacd3a4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:43:13 2013 -0800

    altoslib: Support binary reading/writing in AltosLink
    
    Binary reads require an explicit length, and do not work while
    telemetry is running.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2cb7a96567e1302a699f78290fab5e29693940ab
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:05:01 2013 -0800

    altos/stm: arm-none-eabi-binutils now puts 'main' into .text.startup
    
    Change name of .text.ram to .ramtext, then load .text* into flash and
    .ramtext into ram. This ensures that 'main' and anything else in a
    random .text.* segment will get loaded into flash as appropriate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e22a0dce4248cce862147c985078de44c427b12
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:04:11 2013 -0800

    ao-tools: build ao-usbload by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1f3525afa801038f7087a3a2caf369f2460a5db
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:41:09 2013 -0800

    altoslib: AltosEepromMonitor had false import of altosuilib
    
    Not needed, and breaks the build
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eded084c6caa1f9423d690c8b45c8042f8355987
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:17:28 2013 -0800

    altos: remove all versions of stm-demo executable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb72b4018dd6a422afe1916d9538bb9ff1e45353
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:15:37 2013 -0800

    altos: Change flash loader name to just AltosFlash
    
    Remove the software version string from the product name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52b19511222980138faddb2047707baceff0a596
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:14:29 2013 -0800

    altos: Build .ihx files for all arm projects
    
    The .ihx version can be processed by the java loader
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1e4750a7d4af72e8e9086735885f48c9b56c18e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:11:41 2013 -0800

    altos: Allow products to override default 100mA USB current
    
    This will allow products to specify their own current limit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 25aaf6122cbddcbc6a80460dac8ccb9f45743ae0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:10:00 2013 -0800

    ao-tools: Clean up ao-stmload and ao-usbload options. Add --raw
    
    ao-stmload only uses stlink, ao-usbload only uses self-flashing, so
    clear up the options in the two programs. The new --raw option skips
    the serial and radio cal rewriting when flashing the boot loader.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ebb36d56c732ffe9cdb8d2ea53d00e1d4ece8f97
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:07:46 2013 -0800

    ao-tools: Allow building without stlink and readline
    
    This adds --without-stlink and --without-readline options to configure
    to disable these features, and adjusts the build process and code to
    handle that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5fd0dc6f69e7614ba71bbc215b32260a11595af3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 23:27:30 2013 -0800

    ao-tools: Add ao-flash-stm and ao-flash-lpc scripts
    
    These use openocd to download boot loaders to the arm-based products
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eee9b3ce1e5adae5aa4566050b6d6048344e92c4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:54:17 2013 -0800

    altosuilib: Deal with AltosUnits API change
    
    The abstract methods in AltosUnits now pass the 'imperial_units' flag
    explicitly, so deal with that in AltosUnits itself
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 407696f11ac1736e840c9b702592c46197d14c2c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:53:10 2013 -0800

    altosui: Clean up serial close handling
    
    Unify serial close processing in a single function (close_serial),
    make everyone else call that. This avoids a couple of cases where the
    device would be closed and not removed from the devices_opened list,
    leading to 'device is already in use' messages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a47532f411488f003726aa9365ede5dc90c5b78
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:51:58 2013 -0800

    altosui: Don't try to report bearing/elevation without GPS
    
    If the distance from the pad cannot be computed (due to lacking GPS),
    then don't try to report it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44249a9262a16ed103aedf30a300003fc2a17579
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:49:00 2013 -0800

    altos: Nothing in altos uses AES decryption, so don't compile it
    
    Saves a bit of space where AES is used, and avoids some compiler warnings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdb32b1717db4e8cb8cf94d810e74ce2b569566b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:47:45 2013 -0800

    altos/test: Compute and plot tilt based on GPS track
    
    This lets us compare the gyro-computed tilt angle against the actual
    flight path.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6fbf4829569d5edb476654f4e383b834af527dc6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:40:53 2013 -0800

    altos: Telemega uses eeprom, include it in main file
    
    ao_telemega.c didn't include ao_eeprom.h leaving a function undefined
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a9b0cdff5db03dc11b6ef69cf5436c834c3acc4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:39:41 2013 -0800

    altos: Add lots more GPS data to mega log
    
    There's plenty of space in the GPS log packets to hold course, speed,
    climb and DOP values, so just stick them in.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit de2e812b02a99a2f6d85f15a9600265931f6f6b0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:38:50 2013 -0800

    src/cc1111: Turn off RC osc after xtal is running
    
    There's no reason to keep running the RC oscillator after we switch to
    the crystal, so turn it off.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 473ae38ade0552c5ff3ca088b21345ed5dfad5d0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 15:21:26 2013 -0800

    doc: First pass for 1.3 finished; docs have most major sections updated.
    
    Final edits and corrections still required.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d9b93bfd637eb690159fc5efda0390eb602c6a7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 10:44:07 2013 -0800

    ao-tools: Split out USB loader to ao-usbload
    
    Leave ao-stmload using just stlinkv2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f27dff090c8f3a63bd932715643980703160bde6
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 10:31:32 2013 -0800

    ao-tools: Split out altos symbol editing from ao-stmload
    
    to be shared with ao-usbload
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ef287723f8d8bfbfb3582d22bfb5c2a3129414a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 09:52:38 2013 -0800

    ao-tools: Missing ao-selfload.h

commit e6c9ca218d944443c86555e513534d82713af936
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 09:52:01 2013 -0800

    ao-tools: move 16/32-bit readers from ao-stmload to lib

commit d93a65a90f19e4816231e03b1f399af6e3742aee
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 09:46:13 2013 -0800

    ao-tools: Move ao-selfload into library
    
    This needs to be shared between ao-stmload and ao-usbload
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14204e3d147ad99cc249ad8de254809180fe5c38
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 09:31:02 2013 -0800

    ao-tools: Add ao-elftohex and .ihx symbol support
    
    ao-elftohex converts an elf file into a hex file so that we can load
    it with java.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee07f1a0f8e431bebb3b948f6249f5f33413e966
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 09:29:52 2013 -0800

    ao-tools: Add debug printf support

commit 95a8180f3d7929dbad65c80421f99c925f245af0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 27 13:59:06 2013 -0800

    ao-tools: Create general elf and hex library routines
    
    Pulls the elf stuff out of ao-stmload, change the hex stuff into ao_
    routines.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73b1a7e644e255558378ab66de6426a7dfd8a7dc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 25 01:15:36 2013 -0800

    doc: Work on AltosUI Pyro config docs a bit more.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82b42935d047d2f7c2f7a63a3efb72a3f1d5594e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 25 00:02:06 2013 -0800

    altosui: Handle units in pyro config.
    
    This lets you edit the pyro configuration using imperial units if
    desired.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8da565bbafa2925aa889cf9249497a709a814b7f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 25 00:01:20 2013 -0800

    doc: Add telemetry enable and APRS interval config docs
    
    Also starts working on the pyro channel config window docs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f743934ebd1a7c7c8b6db0223f0309e590aa15cd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 24 21:55:20 2013 -0800

    doc: use correct quotes in altusmetrum.xsl
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f4abc14065aebceaac9313e4dcd4300e19999cf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 24 21:50:27 2013 -0800

    doc: "rocketry electronics" instead of listing products

commit 31a1c701bfaea97225e12ea0688b934790e3737e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 24 21:28:26 2013 -0800

    Use more 1/4 single characters

commit 96f33e780958adaaa4a9cc127caecaeb3f4c978c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 24 21:25:06 2013 -0800

    Remove duplicate log description. Describe pyro config.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3eaaefe6d746a2f53995a2470c5024f37c87c393
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 24 20:05:52 2013 -0800

    Extend the hardware overview chapter. Edit System Operations
    
    Extend the overview chapter to include tables describing the
    electronic and physical board characteristics of each board.
    
    Finish most of the System Operation stuff, still need to add pyro
    channel configuration
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ceed62fd97972b35f4cf6560625135723cb8610f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 13:48:18 2013 -0800

    debian: Build now depends on 'xmlto' for docs
    
    This wraps xsltproc, fop and xmllint for formatting pdf files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92753d4b8d6b17ebc7a9b65680abd46648726393
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:43:33 2013 -0800

    doc: Use system fo docbool.xsl instead of network one
    
    Instead of reading the master stylesheet from the network, just use
    the one installed on the system.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 89fc38f2cf143bed1fe8c4a4972267b15c9aa467
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:42:38 2013 -0800

    doc: Make pdf files depend on local stylesheet
    
    Now that we're using our own, rebuild the docs when it changes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9bbca59a9034cf7e6df4577e627d7447f3a9d51
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:42:20 2013 -0800

    doc: Make micropeak.xsl validate
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a3e27e3a392be4cfe03d200068a7e69bb2f3fdb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:38:52 2013 -0800

    Make companion.xsl validate
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d212d782bff977d609a9da1b805de4a2615fb474
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:37:23 2013 -0800

    doc: Make telemetry.xsl validate
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 87fbe12bdaf10c9ba7ba43608b1e980cdc09d496
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:29:42 2013 -0800

    doc: Make altos.xsl validate
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 963a61986ea4b48fdca0989479e9c50acb0f1a9d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:12:54 2013 -0800

    doc: Switch to xorg style to generate index
    
    This style sheet generates a nice PDF index
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9953a5f0440b269dac5c675f120e6a31dde8ec69
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:06:31 2013 -0800

    doc: Get altusmetrum.xsl to validate
    
    Mostly involved getting the listitem contents into para elements.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 152d978dc4be49b6b764e5e1966bd860c46054ea
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:05:10 2013 -0800

    doc: Start work on 1.3 doc updates
    
    Add 1.3 release notes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71705532374f222e51c66e2f1214dd01b3efc8bd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 15:02:50 2013 +0900

    Bump to version 1.2.9.4

commit 12481415c2e5fb03b003343c9499df711eb14f91
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 16:26:02 2013 +0900

    altos: include ao_eeprom.h in ao_telemetrum.c to define ao_eeprom_init
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf893a4149b05b97f18f9f487af805adef859d74
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 16:22:49 2013 +0900

    altos: Make sure flight erase log comes after config blog
    
    Oops. When converting from ao_storage to ao_config, I accidentally had
    the flight erase log overwriting the config block.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92eafd01f2809f39c5bc4058977c790d94a99df1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 16:08:50 2013 +0900

    altos: Move telemega to using internal eeprom for config
    
    And crank up the default per-flight storage to 1MB
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9c53ad6f8222878a26efecebd3bb1d1fe054a4b6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 16:06:59 2013 +0900

    altos: Move TeleMetrum v2.0 to using internal eeprom for config
    
    This leaves the whole 8MB of flash for flight storage
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83437b2fe304599e22d0a98b5410808bcb67dc97
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 15:45:32 2013 +0900

    altos: Allow use of internal EEPROM for config storage
    
    This stops exposing eeprom as 'storage' and instead exposes it with a
    separate eeprom API so that it can be used for config storage without
    also using it for flight log storage.
    
    The config code has been changed to allow it to either use storage for
    configuration data or eeprom.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b57f1cabfe5052306cb4c28793bea477f4aeb2d2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 15:18:58 2013 +0900

    altos: Don't hold GPS mutex while waiting in TM v2.0 report
    
    Holding the GPS mutex while waiting for the GPS code to dump data into
    the GPS variables is rather counter-productive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0951b1ef83d8d741d65811fa23bde43ee843a939
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 15:18:53 2013 +0900

    altos: Build TM v2.0 firmware by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3c40272713d93e79bb0989eefe191cd2bfe56a44
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 15:01:13 2013 +0900

    ignore "compile" script

commit 28327883d377896caddbad0f9efded56a227edd1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:59:40 2013 +0900

    Add TeleMini v2.0 turnon script

commit cffbc025532487bbd9b467476be05d0997b5133e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:56:47 2013 +0900

    ao-tools: add ao-mega man page, ignore executable

commit 40d3575a9365d77ca507ebee226d51d081e1ecc6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:54:57 2013 +0900

    altos: Clean up .gitignore and add a few random files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d2eb0b00a5a0faefce95bce949be7206b0aad37
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:48:21 2013 +0900

    Add ublox checksum generating program

commit d5367f20fa1ae71496fde071953c2cda89654071
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:45:51 2013 +0900

    Ignore mac .dmg files

commit 0093d5b368669e0c324f8d9dfcd2f004de85ee5c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:37:57 2013 +0900

    altosui, altoslib: Move eeprom download code to altoslib
    
    This should make adding eeprom downloading to altosdroid easier
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 45db3076b257adcf2c9f69ed0927f09d94af7a50
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:28:30 2013 +0900

    altosui: Make AltosEepromDownload not swing-dependent
    
    Will move to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6aa99c160f0695eb25ccc0598e4c36224c89dab4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:06:20 2013 +0900

    altoslib: Start moving eeprom download logic to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 74d73a2cd0b6a228eb396552e1d16685669349c0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:03:42 2013 +0900

    altoslib: Raise ParseException on invalid eeprom format
    
    Make sure the user knows when data are not downloaded successfully
    because the UI doesn't understand the eeprom format.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bdd6244d8b4a55c9aa4fb79b0cb1a0727afbc2ac
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:01:55 2013 +0900

    altos: Add orientation tracking to ao_flight_test
    
    Shows calculated offset from vertical in ao_flight_test output
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29b48b63305881471d9b97ef3fb236af03cb79f5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 28 00:36:13 2013 -0700

    altos: Don't hold GPS mutex while waiting for GPS data in report code
    
    Oops. This kinda breaks anyone else waiting for GPS data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3628bd2dd3612065792aef6c7ae5bc967b4f081
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 28 00:24:59 2013 -0700

    altos: sample profile address range was too narrow
    
    The range was cranked down at some point to diagnose issues within the
    task scheduler. Unfortunately, that change got merged, which meant
    that general profiling lost information outside of the lower 4kB of code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c1c6728bce4237ca3a8f6fde01356697a465dfd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:47:27 2013 -0700

    altos: Make telemega v0.3 compile with new quaternion code
    
    Adds lots more math code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e838bd2847e5684ce93b6f7cbe736ebed681c3c6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:46:54 2013 -0700

    altos: Make telemega v0.1 compile with new quaternion code
    
    Adds the necessary math code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b0ce8ca65d76b9cf55dfff002e13ce2fbb5f7fc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:45:48 2013 -0700

    altos: Add orientation test when HAS_FLIGHT_DEBUG is set
    
    This just dumps the current orientation to stdout so you can monitor
    it in real time
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d9e715d570b24ac124c30772b11923bd26ed670
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:44:47 2013 -0700

    altos: Update quaternion tests to check vectors_to_rotation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 195fd70cdc7f519cd8d4ac323088ed0b6c188280
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:42:58 2013 -0700

    altos: Change ao_mpu6000_gyro arg to float
    
    This lets callers pass more precision than just the original sensor value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d3fe7e9b6502432868f4430befac871dfea4869
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:42:26 2013 -0700

    altos: Fixup for 32-bit gyro averages
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4bebade9e9004bad81df1a423687f3e3f356f1c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:37:55 2013 -0700

    altos: Correct incremental rotation computation
    
    Trying to compute the combined rotation by taking the x/y/z rotations
    as a vector is a good approximation, but not accurate enough for our
    application given the large angles we sometimes see.
    
    Instead, use a correct-but-expensive function with a pile of
    transcendental function calls. The STM32L seems to be fast enough at least...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06b0c1b768a7d3eae57e66bc9aea25db49f9ea8a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:35:54 2013 -0700

    altos: Compute initial rotation from vertical
    
    This initializes the rotation with the angle from vertical, rather
    than simply recording the off-angle vector. Doing this allows us to
    accurately track the true orientation of the rocket, instead of just
    the offset from the initial non-vertical orientation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdbe8ce33e4a75e85caf07538ed7e997f462b758
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:33:11 2013 -0700

    altos: Fixup for ao_sample_orient rename
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d96fd33aa8a220d547512eb43c88fc8f5651e39e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:28:50 2013 -0700

    altos: Add sinf to math code
    
    Needed for the quaternion gyro tracking code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa7d0ba0efdde3ac9fb4df0589f9ead07b7ffff5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:26:28 2013 -0700

    altos: Keep 9 more bits of average pad IMU gyro data
    
    This reduces the offset error by a bit, minimizing gyro drift.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58f08c4b3cb9049d0c9cb02cde0d8dbdc3d33920
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:23:59 2013 -0700

    altos: Rename ao_orient to ao_sample_orient
    
    Keeps it clear where this name comes from.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c10cb9d31765e6ef0ba737bc484c5aed22a332f9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:11:37 2013 -0700

    altos: Add functions to init quaternions from vector pairs and euler angles
    
    Our low sampling rate means that the "cheap" hack for
    integrating quaternion rotations by using sin(x) ≃ x doesn't work, so
    instead we have to compute the partial rotation the hard way.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b25860b5b3b69642928dd9c30dec4b4b937a88c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:11:09 2013 -0700

    altos: Add some comments describing quaternion multiplication
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 616977d2955da13383a1869b9ccdb07338172109
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:10:13 2013 -0700

    altos: Mark arguments to quaternion functions as const
    
    Lets us pass constants without the compile whinging
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e923e11e185fd42d2a83e18b3d13bd839a72b1aa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 22:44:49 2013 -0700

    altos: IMU accel calibration values need to be signed
    
    The MPU6000 reports signed values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 351d53836e201834a2d89773a08ab7c2dab2b2f4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 25 04:34:16 2013 -0700

    altos: Calibrate IMU accelerometers too
    
    Average the IMU accelerometer values pointing up and down so that we
    have a zero-g offset for all three axes. This can then be used to
    compute which direction the rocket is pointing while sitting on the pad.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08143a922fe27bc50a19924f46538f9476ab5fd1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 25 04:05:09 2013 -0700

    altos: Add gyro-based orientation tracking
    
    This tracks the angle-from-vertical as an additional input to the pyro
    channels.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba99630f33440b993c69830856d2a7741ffdef71
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 25 04:03:39 2013 -0700

    altos: Fix GPS test frameworks to handle shared ao_gps_new variable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b83876718b1a535ee04ca0351ad57814454ec646
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 25 04:00:49 2013 -0700

    altos: Add floating point math functions from newlib
    
    These are all BSD licensed, so we can simply include them directly
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 039446f54ef6968a3f0b37ce32ca6bdcdbe62546
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 14 22:41:43 2013 -0700

    altos: Merge GPS logging into a single function
    
    Create a new global, ao_gps_new, which indicates new GPS position and
    satellite data.
    
    Use ao_gps_new as the new sleep/wakeup address.
    
    Merge the separate gps position/satellite logging tasks into a single
    function which waits for new data and writes out the changed values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c4b3658a96f1a64ccebf7bddda06b15b4ac4a6f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 14 21:49:39 2013 -0700

    altos: Use #define values for ublox packet types
    
    One case was using hex values instead of the #define equivalents.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db4cd8b3838d27bebdeb6a085a739a36f7634a91
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 14 20:42:14 2013 -0700

    altoslib,altosui: Be more robust when graphing bogus .telem files
    
    Deal with files containing multiple serial number/flight number values
    by preserving the boost_tick value across state resets.
    
    Check for invalid state when computing actual boost time for the stats
    window.
    
    Ignore invalid speed/accel values when computing averages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bd9786802751391cca3b83ac3045029e00e39ee
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 13 22:05:20 2013 -0700

    altos/micropeak: Increase boost detect to 30m
    
    This meant increasing the data buffering as well so that we could
    reliably capture the flight data back to the ground, even for slow
    flights.
    
    And, with the buffer extra large, we work backwards from the current
    buffer location to find the last ground location rather than working
    forwards from the first buffered location. This ensures that we don't
    capture noise before boost and instead capture a nice flight curve instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0e98597887a970f31b33895adb77d35e06b34ff
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Oct 10 14:35:54 2013 -0700

    updated turn-on script for telebt 1.1

commit 8af5dd05fe56768f225251bbc66831494d80048e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 10 10:02:03 2013 -0700

    Another try at skipping broken avr-gcc
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2296175eff9e4286eaf44451690701a46595987e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 10 09:47:52 2013 -0700

    Make sure the AVR compiler can actually link stuff
    
    avr-gcc was broken for a while, causing all linking to fail. Check for
    that and don't try to build avr bits in that case.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa169b80039728e35b0dec3be66a8483d48a3458
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 10 08:04:22 2013 -0700

    altos: Fix stm-bringup demo build to use installed pdclib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8d3835fedf9b7c4d203f321e72c2b086ebb3b97
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 10 00:00:05 2013 -0700

    altos: Use installed pdclib
    
    Switch over to the installed pdclib everywhere
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f6cbfac7c1965add91ebfc28ca3eac4561b4fb6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 9 12:04:14 2013 -0700

    Bump version to 1.2.9.3
    
    Rocketober, 2013
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e947bc5e1abcd054a584d69240f91123bad2178e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 9 12:06:30 2013 -0700

    doc: Add easymini outline to distribution
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18cb5f0b8f0917cbd4ff80f0920e8e5b35c822a1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 9 10:14:16 2013 -0700

    doc: Add EasyMini outline drawing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c584b5fc1128c7bfd7fb921ddc3a8ec498803b53
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 9 12:37:30 2013 -0700

    altos: Messed up the ifeq syntax a bit so ARM bits weren't getting built
    
    $(x) is not the same as ($x)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 74885d75621dad04984d8309c2618202f4d2b35e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 8 10:03:50 2013 -0700

    altosui: Binaries to package are only in per-product dirs now
    
    Each cc1111 project used to stick the binary in src/, but I got rid of
    that when we ended up with so much stuff in src that it was a mess.
    
    Building the release now requires looking in the appropriate directory
    for each binary to ship.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e5d1f3ce39495e3702ecd22cb45972e13a5c986
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 8 09:50:21 2013 -0700

    altos: avr-gcc appears to find the loader scripts without help now
    
    At some point, avr-gcc lost its ability to find the loader scripts
    necessary to link programs. That appears to be fixed now, at least on
    my machine.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7cccbb7a624a2a47b21682f416a135a28319b41
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 8 09:39:29 2013 -0700

    altos: Broken test for M0 compiler in src/Makefile
    
    Was causing it to try to compiler M0 progs only when *no* compiler was found.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 488a527267decece48e6682e0e0c7fc29cbed329
Merge: 6a1e398e f6661cc0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 8 09:26:41 2013 -0700

    Merge remote-tracking branch 'origin/master'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>
    
    Conflicts:
            configure.ac

commit 6a1e398e590121458176758858bb4210f3eb5a55
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 8 09:22:03 2013 -0700

    Add --with parameters to configure for compiler selection
    
    This allows the user to specify which compiler to use for each target
    CPU. Also checks to make sure the arm compiler supports -m0 and -m3
    cpu type flags. The build now actually uses the specified compilers too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16965716c02eb79b449d9d3b264814d775660134
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 8 09:20:12 2013 -0700

    altos/stm: New GAS version requires flags in APSR assignment
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 258d225df1f4afe1cfdc9c43208bcd75d18cdf2d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 7 22:00:15 2013 -0700

    altos: Rename easymini-v0.1 to easymini-v1.0
    
    The production boards are the same as the modified v0.1 boards
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f7edcee2db30652ce0b147f282de3396c3786ad
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 7 21:53:53 2013 -0700

    altos/lpc, altos/stm: ARM requires ISB after switching stack pointers
    
    This sticks a barrier in the CPU to prevent using the wrong stack
    register past the change.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4254de22864de2ed7ae5928c6b8bfd9df1c8a3fb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 7 21:51:30 2013 -0700

    altos: Don't require an LED for ao_flight
    
    EasyMini has no LEDs. Deal with it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71666409624bf544e8a55fa5ee91d2f8514a03ca
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 7 21:49:55 2013 -0700

    Change differentiation filter constants and limits
    
    Larger limits avoids clipping legit data. Using the same filter time
    for both ascent and descent makes the results look a bit cleaner.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6661cc015e1a92450dc3eede97d66005f69cc72
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 7 21:56:46 2013 -0600

    new toolchain for STM32L is in /usr/bin, not /opt/cortex/bin

commit 8bd218854e968d2b9407489359be0c4a1aefd2c8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 19 00:29:25 2013 -0500

    altos: Set TeleMini v2.0 USB ID correctly
    
    Uses 0x0027
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3bf7ed1761e08d0cb43b0ed330226ec38c844591
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 19 00:28:55 2013 -0500

    Add TeleMini v2.0 telemetry support
    
    Includes AltosLib and ao-telem
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be7f56b86478ef4a23a2af77338c580b9c9e5e3b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 19 00:26:24 2013 -0500

    altoslib: Prefer averaged ground pres for ground alt computation
    
    If ground pressure is recorded (as from an eeprom file), then prefer
    that value to the average of the pre-boost ground pressures when
    computing the ground altitude.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56b577e55c264c8e3152bb2b2cca02fa8836ac1e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 15 14:29:46 2013 -0700

    altos/telemetrum-v2.0: Use red LED during boot time
    
    If the LED is stuck on, then the board has failed to initialize,
    so use red instead of green as a warning indicator.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1fa3ff9ba6d04303b3de6952675532492c85182f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 15 14:29:09 2013 -0700

    altos/telemini-v2.0: Change initialization order
    
    Make sure busses are running before devices are initialized
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0ff5f0fbc4900ad45bb7910ffc0c5a4e4cc4b857
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 15 14:21:08 2013 -0700

    altos: Stop copying cc1111 binaries to the altos/src dir
    
    Just clutters up that directory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b86c69d56261da54745076b1f5a9c8e8e44787c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 15 14:13:59 2013 -0700

    altos: Add nanopeak-v0.1
    
    The same as micropeak, just a few different pins
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 690094e2d7d9cfe5eb4edb478fd79e5d133c6b4b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 15 14:11:50 2013 -0700

    altos: Move micropeak sources around
    
    This sticks the micropeak sources in appropriate directories, rather
    than in the micropeak product directory so that they can be shared
    with future micropeak-style products.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2449d123690746d0d0d5d66dfc4d3a05b9f5dc0c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 18:24:46 2013 -0700

    altosui: Include device name in Table view
    
    It's part of the telemetry, so we might as well display it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae675c66594d366774d8f7f9c78f1236d3810eed
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 18:23:06 2013 -0700

    altoslib: TeleMetrum v2 telemetry includes computes Pa/°C, not raw values
    
    Telemetry sends converted pressure/temp values as it doesn't include the
    MS5607 calibration data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e22b34bde421a9df090c9196fd4347468c8176a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:54:07 2013 -0700

    altoslib: Add receiver serial to telem file names
    
    Makes it easy to record telemetry from multiple sites and compare them later.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0ad95614685a73856bb26a94866909e5fc025434
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:52:51 2013 -0700

    altosui: Set 'flight' value in AltosEepromMonitor window during download
    
    This feature was lost in the AltosState updates
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b66e0d4c107a0727279d03d1d0e1e40a9eaaa3bc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:52:06 2013 -0700

    altosui: Load Telem files in AltosDataChooser too
    
    Telem file loading was stubbed out from AltosState changes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1512255d20c8a395f30ed4914ddd3295842312b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:51:44 2013 -0700

    altoslib: Add TeleMini eeprom file to Makefile.am
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e52d34137626ca756ea01f317ef7c359e464a5b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:50:46 2013 -0700

    altoslib: Lock access to AltosLink config_data
    
    Prevents multiple callers from trying to get config data at the same
    time and messing up the serial line
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29bb16397f14ed617ca3fbf48f2a7b726fd627d8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:49:36 2013 -0700

    altoslib: Set 'valid' for valid TeleMetrum eeprom download
    
    Had separate 'tick_valid' value, which wasn't useful as the supertype
    didn't look there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a299a5a9a1b89c7ebc00ebd33a789793a6835181
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:48:52 2013 -0700

    altoslib/altosui: Add TeleMini-v1.0 eeprom support
    
    Got lost in the AltosState transition
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82b3e3e4889aa5d4d157df1ad82e28068fda9e2a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 23:31:22 2013 -0700

    altosui: Remove debugging printf from InfoTable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f4650990e8a7cfcf8461e8928dfc426c9a563cc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:57:19 2013 -0700

    altos: Set tick value in new TeleMetrum v2 sensor packets
    
    Was getting left with the old value, which wasn't very useful
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7314bf807544eecf2fd970e93c752ff15688bb42
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:56:57 2013 -0700

    ao-tools/ao-telem: Parse new TM v2 packets
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ffdf82445817d1c97699f7de82534420b87d0ea7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:56:11 2013 -0700

    altosui: Fix 'Graph Flight' button in landed dialog
    
    Telemetry file reading was broken (oops!)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e3edacceb169326b8f5727bb5737d8238e9e40b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:55:43 2013 -0700

    altoslib: Remove debug printf from AltosTelemetryMetrumSensor
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59f0deff6d7bae22fb1b9a0649f3481b3d287d8e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:55:09 2013 -0700

    altoslib: Rewrite AltosTelemetryIterable
    
    Sort while reading instead of sorting separately.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit effc62354fc82bb937c6f445a147fc92153a0731
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:54:02 2013 -0700

    altoslib: Record time_change in AltosState correctly
    
    time_change is used to make real-time playback work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b9ee58a7af839462680a0bdf1c1721017269986f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:53:14 2013 -0700

    altoslib: Update received time when replaying flights
    
    Received time is otherwise recorded as the time when the packets were
    read from the file, which doesn't work in real-time playback
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e17e3691d93636eebbd7381f2df1303dc46ea96c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:52:22 2013 -0700

    altoslib: Only open log file when both flight and serial are known
    
    Some telemetry formats include serial and flight in different packets,
    so wait for both before creating the file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9c495c7ca1e08b7ac76b0dab8b3bd9bd3a7edfc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 15:03:07 2013 -0700

    altoslib: Use AltosTelemetry.parse to pull telem lines apart
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f017b4837b106e8c422955a95762f1bf3c78016
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 15:02:47 2013 -0700

    altoslib: Remove more AltosRecord based files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 984515452f9ab56dad112d725469acfa54e2233b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 11:55:24 2013 -0700

    altoslib: remove AltosRecord based eeprom code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3325df306933f080619f13ba1db45de484613d5a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 11:50:41 2013 -0700

    altoslib: Remove AltosRecord-based telemetry code
    
    All of this is now AltosState based
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9e9c6592c49109288a4e02e780b130fadb97db7
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 3 15:11:33 2013 +1200

    altosdroid: convert rogue files to unix line endings
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 93e66b4911b7285f9095712ef746571153c3f088
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 5 03:11:42 2013 +1200

    altosdroid: more updates for new AltosState
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>
    
    Conflicts:
            altosdroid/src/org/altusmetrum/AltosDroid/AltosVoice.java

commit ee14ad16c242e8bd7a9d33ebf569211d1490b8e1
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 3 15:10:23 2013 +1200

    altosdroid: update to support new state code
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>
    
    Conflicts:
            altosdroid/src/org/altusmetrum/AltosDroid/TabAscent.java
            altosdroid/src/org/altusmetrum/AltosDroid/TabDescent.java
            altosdroid/src/org/altusmetrum/AltosDroid/TabPad.java

commit 5b976a6651f4eb05d30afc08b9e1f27c7e52ae00
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 11:33:48 2013 -0700

    altoslib: Finish AltosState changes. Update version number.
    
    Removes all of the AltosRecord bits, changes the monitor idle bits to
    have per-object state updaters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b984ff81d6b8979574e0248ffe8876634b8e1942
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:42:42 2013 -0600

    altoslib: Set measured acceleration for measured acceleration
    
    Was setting computed acceleration even for measured data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96a651cc1b81b30f4cbde454e34cf80ed8825945
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:42:00 2013 -0600

    altoslib: Clear sat data when tick changes
    
    Sat data comes in multiple records, but the tick is always the same,
    so use that to tell when the set of sats is new
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4de934c283a839fcbb246b36aa15362f3cf8629c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:41:12 2013 -0600

    altoslib: Start integrated value at 0 by default
    
    Check for MISSING and start at zero in that case
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cfd8e4ebb3cb63937a71537095adb911d6211817
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:40:04 2013 -0600

    altoslib: Use first few baro samples for ground pressure on TM
    
    TM didn't record the ground baro reading in the log file, so pull out
    the first few measured baro samples and use those instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ee99c1861ef1898a77aead41d80383e697bd248
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:38:20 2013 -0600

    altoslib: Make Ascent/descent use different filter values. Always filter.
    
    In derivative code, use a shorter filter during ascent as the baro
    sensor is cleaner then. Then, make sure to always filter the values as
    the very first few baro samples can be noisy, which generates a bad
    starting speed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 70e67925cff98984d49fbc3f60e880c91e6d5079
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:36:16 2013 -0600

    altoslib: Remove duplicate cmd/tick from TM eeprom file code
    
    Also replace tick setting with super call (which does that)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc54014cfd4dbca67fa9db66e906ab8212a2eaa2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:35:23 2013 -0600

    altoslib: Clean up metrum eeprom file reading
    
    Spurious tick setting, fix some local variable names
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d203a2da2641bec21a4257c8a7b03d9a1eba53a5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:34:41 2013 -0600

    altoslib: Correct mega/metrum eeprom years by adding 2000
    
    The files contain a single byte for year, which is always years since 2000.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 999c3c7866613e658a6c26374499bc516bbc944d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:32:37 2013 -0600

    altoslib: Correct tick wrapping in eeprom file reading
    
    Just need to signal that at least one record has been read to know
    when to start checking for wrap
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d3af3d74f70a0933829be91ad3e3be04b1f1023
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:31:58 2013 -0600

    altoslib: Ensure eeprom file body always exists
    
    Create an empty list of body elements if none were read from the file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 528e2e41112cad8a81bccbb89c3bd202b818a506
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 2 23:10:23 2013 -0600

    altoslib: More AltosState hacking
    
    EasyMini graphs are looking good now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 224a1e01bacb7db0076129906ed58e1c785e1b14
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 2 23:08:34 2013 -0600

    altos: Not all products have pins to control flash loader
    
    TeleGPS has no exposed pins for this function
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 77dc89ed5b7bf8f5b3fa3b6131660f1a98f583ea
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 31 23:11:39 2013 -0500

    altoslib/altosui: Further AltosState transition work
    
    Parses most eeprom and telem records now; altosui updated to show from
    AltosState info.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c781469ff907a32bd43a5d781391b6859b14cd32
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 31 23:10:56 2013 -0500

    altos/telegps: Initialize logging system
    
    Otherwise, very little logging works
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ec1b97d278c7aec3199fb7270f0dcf9484c879f
Merge: 017ed54f 41881535
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 31 08:22:09 2013 -0500

    Merge branch 'master' into new-state

commit 4188153548fca104bb49cda2d502c708fe4b49d7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 31 08:20:48 2013 -0500

    altos/lpc: Add bits for building flash loaders
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 017ed54ff69ef2f7740ea2578e22bf72e88deafb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 31 08:19:28 2013 -0500

    altoslib/altosui: Fixes for state changes
    
    Format for gps alt (now double).
    Use new code for csv file loading.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f07f6d55edf5b97020680b3ce1d9e00bb3df64a6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 31 01:48:02 2013 -0500

    altoslib/altosui: Get legacy telem working with new AltosState structure
    
    Make AltosTelemetry work without AltosRecord
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit de8d9c5630ae46378c50faf97f7d2e97fe139e30
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 29 19:24:51 2013 -0500

    altoslib, altosui: Restructured state management now does TM eeprom files
    
    Removed uses of AltosRecord from AltosState, now just need to rewrite
    the other AltosState changing code to match
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce1378385ef273010498e81c205f42d8e32c7dc1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 29 19:22:18 2013 -0500

    altos: Split EasyMini and TeleMini log formats
    
    Same data, but EasyMini uses a 3.0V supply while TeleMini uses 3.3V,
    which changes the intepretation of all of the ADC values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 04d7d0f829ba953ffeca8ad9887a4b6b2b5d5087
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 27 21:28:07 2013 -0600

    altoslib: Start restructuring AltosState harder
    
    Make per-packet code update state itself rather than having all state
    updates done centrally. Will make adding new packet types easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcc51bb18985c24fa35bce0dd42ea3d847b960bf
Merge: 7c82acc1 a73b0251
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:52:58 2013 -0600

    Merge remote-tracking branch 'origin/telemini'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>
    
    Conflicts:
            src/core/ao_telemetry.c
            src/core/ao_telemetry.h
    
    Added both Mini and Metrum telemetry defines

commit 7c82acc1c1c5b7b4da7c7ecb3b2fd90140e4c703
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:12:25 2013 -0600

    altos/stm: Make sure we switch to MSI during timer init
    
    Need to ensure that the CPU is actually using the MSI during timer
    init or all of the other clock changes won't work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6802b6a65b1fec06c2c873282be792c40b3c8f5e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:10:58 2013 -0600

    altos/stm: Remove stale timer defines
    
    Stuff from when we weren't using systick
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e9ed70f50e3f535c2580820771bb1bc3cd055fe
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:08:51 2013 -0600

    altos/stm: Make sampling profiler work again
    
    Disable the separate stack as that means we can't figure out the PC
    from the timer interrupt. Move ao_idle_loc after the interrupt release
    so that we see idle tasks correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2fa87754c5c11bb86e9b1878580c3d4f4b2463f5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:08:04 2013 -0600

    altos/stm: New compiler doesn't correctly build flash bits yet
    
    Use /opt/cortex until we make the packaged one work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4887af0bf90661a3fdca76f1797a704888edab06
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:04:18 2013 -0600

    altos: Force u-blox to 9600 baud for now
    
    The Max-7 parts just aren't happy switching baud rates, managing only
    about half the time. Someday I'll figure out why, but until then, make
    things work by just leaving the chips at 9600 baud
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 61163980f096d555a843e25cd9fe1aec93bbbbba
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:02:48 2013 -0600

    altos: Add debugging to ublox GPS driver
    
    The new max 7 parts seem to be unhappy about switching baud rates, so
    I've added a pile of debugging to help out. Some day, I'll figure out
    how to make them work, this code is being left in place to help with that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44d4c66b21d6b5a0c656fdff6d01ef1d125c1101
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 21:54:31 2013 -0600

    altos: Update time for next alarm each time a task is added
    
    Adding a task with a sooner timeout than existing alarm tasks was not
    correctly updating the time to fire the next alarm, causing tasks to
    be delayed by the wrong amount.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 39475c7b8da4f29936f73ffa2bff112f50ee9328
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 21:52:29 2013 -0600

    altos: TM v2 places the MMA6555 upside down compared to Tmega
    
    Means we need to invert the data coming out to make it work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f222e8504bfd01027e3c380c239a2cde2c367d74
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 27 22:00:29 2013 -0600

    altos/telemetrum-v2.0: Use 9600 baud for ublox
    
    Something is up with the Max 7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abde595116f6e8b60ec9ce81554c05de11fd456e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 27 21:36:02 2013 -0600

    altos/telemetrum-v2.0: Fix MMA6555 SPI pin assignment
    
    For TM v2.0, it's on PB 3-5, not PE13-15
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 454a41359b94e9bcf8582420abc359bbab9d8176
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 23 11:25:56 2013 -0700

    altos: Rename TeleMetrum v2.0 ADC sense members
    
    Use sense_a and sense_m instead of sense[2]
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6aade70be0a7669d65a8606753d21e4eef5592cd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 20 14:20:56 2013 -0700

    altos: Add TeleMetrum v2.0 boot loader
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b0f9b25a56fa8b4aa1c2e9d79c43e6a97cab0c0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 20 11:40:17 2013 -0700

    altos: Initial TeleMetrum v2.0 bits
    
    Adds new telemetry and logging formats along with code for TeleMetrum
    v2.0 design.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a73b02518fcbc9fc0807ed8e141d3a06e8ad8214
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 18:46:02 2013 -0700

    altos: Don't use ao_data on cc1111 projects
    
    cc1111 ao_adc.c supplies the needed globals at this point, and linking
    both into the program leads to two different versions of each at
    different addresses (yay SDCC linker!)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d54156caf856ab5570f050692b333a2c5d991265
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 18:44:23 2013 -0700

    altos: Make ao_wakeup reentrant
    
    In case we end up invoking it from two places at once.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e941695aa27e5eaf453ca1128b8d835472410a4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 18:43:20 2013 -0700

    altos: Check for MS5607 MISO low before sleeping
    
    If the MISO line goes low before we manage to configure the
    interrupts, we'll miss it entirely unless we check the pin explicitly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b9acb88aa97e8565cdf9342fc59a5aee08e3d34
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 17:18:57 2013 -0700

    altos/telemini-v2.0: Add ao_exti.h depend. Init beeper and usb.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7274b77666df9d2cab2854ec1a403d80e5fce73b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 17:18:17 2013 -0700

    altos: Use %ld and %lu for MS5607 debug output
    
    The value are 'long', so use the right printf format.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e3955a5b0ac125bd807920c467f959618449fbc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 17:17:47 2013 -0700

    altos/cc1111: Wake up non-ADC sensor code each timer tick
    
    Make sure the MS5607 code gets told to sample every tick
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b2f83a7d686b5fbc0aaa56d48cb734f353631c8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 17:16:54 2013 -0700

    altos/cc1111: Leave pin interrupts completely disabled at init time
    
    Don't even turn in the PICTL bits as that seems to cause the chip to
    be unhappy.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ca98dc8c868c47c372d6b666c36e691fa402824
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 17:15:55 2013 -0700

    altos: Get telemini to copy current MS5607 state to ring.
    
    The ADC code is responsible for actually inserting the non-ADC data
    into the ring, so do the copy there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af9f9cf0c21630562c74fae41773319229bf44d3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 16:42:45 2013 -0700

    cc1111: Hacky pin interrupt support. Only useful for TeleMini v2
    
    This code is designed to support the MS5607 MISO interrupt bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2380a4b9bd69629c78eec0a87ff8681a0524d8d2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 16:41:33 2013 -0700

    cc1111: Rework ADC configuration a bit, fix Tm V2 ADC usage
    
    The Tm v2 ADC code was not actually fetching and storing the ADC
    conversion values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aeb1c8a2aa533cb2805f0dbe848e098c8cae2b39
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 16:39:47 2013 -0700

    ao-tools: Use TeleDongle for default ao-dbg target
    
    Makes more sense than assuming we're still using the old TI developer board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 377a44cbfd5c8a659d2fecabb154726717a41900
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 25 22:34:09 2013 -0700

    altos: Build more products by default
    
    We keep creating more hardware...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e72147e215a982ce701099626424b9a856ac9d09
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 25 22:33:30 2013 -0700

    altos: Changes required by cc1111 multi-spi support
    
    These drivers got missed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af6f4205b00669af40acffc528cc8093b0236cf6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 25 22:29:46 2013 -0700

    Bump version to 1.2.9.2
    
    Set version for Airfest testing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 312f6194a4bc75473cb0d61a6d58b66fb1f7c068
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 12 00:43:31 2013 -0700

    altos/teletiny-v2.0: Support multiple SPI busses on CC1111
    
    Needed for TeleMini v2.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c2bbfd9a1a4b9de42cf566f21f179ff5ede0419
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 23 16:52:59 2013 -0600

    altos: Add exti and spi to telemini-v2.0
    
    No longer builds like this
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56911f27376b0fe91a464e369bb8aa1531b3c7dc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 23 02:17:51 2013 -0600

    altos: Make TeleMini v2.0 fit
    
    Mash lots of storage locations and code around to shrink stuff down to size
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb844328322fd7d9f4dafb58b322257a70b347e6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 22 19:20:54 2013 -0600

    altos: Add 64-bit subtraction
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ccd902d0fd2adc40c72982babb60fac4da6a087
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 22 17:08:55 2013 -0700

    altos: Add 64x64 multiply. Test 64 ops for dest same as either source
    
    The test change is to ensure that the destination may be one of the 64
    bit sources.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7602ae566a5cbf2d2cbb1d68bad7e2d1177a33a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 22 14:38:19 2013 -0700

    altos: Make 64x16 mul a bit faster
    
    the unsigned 32x32 multiply really does work, just use it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3114baef45803250a2e5cdd2ee4a9171f2045b0c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 22 14:32:50 2013 -0700

    altos: Add 64-bit add/mul/shift for SDCC
    
    SDCC doeesn't provide a native 64-bit type (sigh), so
    implement the minimal operations necessary for the MS5607 conversion
    routine.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0b4e926ecececa7499a301b6135189be119512e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 22 13:03:06 2013 -0700

    Initial TeleMini bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ded57394f6dfd7beb9526c031a5c6c6c9926917
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 25 22:22:55 2013 -0700

    altos: Explicitly list the linker script needed for AVR targets.
    
    Something changed in the binutils-avr package which makes the linker
    fail to find the script in the default location.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 203951f6e049ec7e95489849a2bfaa01aa19c0c9
Merge: 4babe731 b363a628
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 25 22:00:27 2013 -0700

    Merge branch 'master' into telegps-v0.3

commit b363a628fc6137c3395a48ef13de7a799ec3e2c3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 22 19:31:15 2013 -0600

    altos: MS5607 pressure computation for low temperatures was wrong
    
    Second correction only applies to temps < -15°C, not 15°C.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa2948803d33dbee6f1eab30370178252df2b56d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:45:06 2013 +0200

    altos: Wake up on LPC usart ISR only once
    
    Instead of waking up after every character, wait until the FIFO is
    empty to reduce overhead
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 10f88c46df9a266f62452dc25275c79a3bb0653d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:43:18 2013 +0200

    altos: Set default LPC stack to 512 bytes, Em to 384 bytes
    
    The default for lpc has been raised to 512 bytes, but Em doesn't have
    enough RAM for that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41428d1e1e44a17eea5fda2b34cabafbdebf1464
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:35:08 2013 +0200

    altosdroid: Add note to report TeleBT battery level
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e908eb090fc2aaa03b35dc37c3e008b05ad44d80
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 23 11:24:18 2013 -0700

    altos: Use installed arm compiler for LPC
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1aed2eb5c7d477a2f3d4fada22980041aba97cb8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 23 11:22:10 2013 -0700

    altos/lpc: Stop using burst mode for LPC ADC
    
    Burst mode doesn't stop after one round of conversions, so we end up
    getting incorrect values in whatever the last conversion register is.
    
    Just use single conversions and take an interrupt per channel.
    
    Also, slow down the ADC so that our values are more stable -- just
    need to make sure we get the whole conversion sequence done 100 times
    a second.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4babe7310f78338ca36ab9d31ac833eada27485f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 24 23:22:18 2013 -0700

    altos: Allow products to disable RDF entirely
    
    TeleGPS doesn't ever want RDF
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1ec15f4585e23eb67affbe7d9d97261576b198d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 24 23:21:53 2013 -0700

    altos: Add telegps v0.3 product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2f385946132690ca6dc141d7c7830ae0cfe3458
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 20 08:54:44 2013 -0700

    altos: various cc115l driver hacks
    
    Try to recover from TX_FIFO_UNDERFLOW by resetting the chip at idle
    time.
    
    Do a calibration phase during setup.
    
    Program power to ramp up to limit key down noise.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0dd55f66d79f54b450fd8122aecd84d68b810bf4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:45:06 2013 +0200

    altos: Wake up on LPC usart ISR only once
    
    Instead of waking up after every character, wait until the FIFO is
    empty to reduce overhead
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0dd93ccf0920260b41c4003955617fd0cd1c8b4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:43:18 2013 +0200

    altos: Set default LPC stack to 512 bytes, Em to 384 bytes
    
    The default for lpc has been raised to 512 bytes, but Em doesn't have
    enough RAM for that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a22a300009679a14d66214a5d61e9e6a177279f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:40:33 2013 +0200

    altos: Allow ublox to run at other baud rates
    
    Provides a configuration option to set the ublox serial baud rate to
    something other than 57600 baud
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0a0a747624c2df66ca4a73b5a0de014ea204dca
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:36:35 2013 +0200

    altos: allow projects to override default config values
    
    Override default radio power and APRS interval
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bed68ef5a6999b2e23853958502a689a7dbc15b3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:35:08 2013 +0200

    altosdroid: Add note to report TeleBT battery level
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0e126251360f050b7121f167771c057bda8747e
Merge: d95a2c5d 4fe47adc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:33:31 2013 +0200

    Merge branch 'master' into telegps-v0.3

commit 4fe47adc7aca54951a50b1c1ae95cb02e46f8d3d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:30:52 2013 +0200

    altosui: AltosDbm class was missing somehow
    
    This doesn't appear to have been added?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ff54bb96f6c00c0c2c7dd32f81403bac331621a
Merge: fa0859a5 01f8df08
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 16:03:26 2013 +0200

    Merge remote-tracking branch 'origin/master'

commit fa0859a51576efe231effcb5995f325f9e7e0fcb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 16:01:44 2013 +0200

    altos: Make FAT test program link explicitly against libcrypto
    
    For some reason, the MD5_Final symbol isn't resolved when linking only
    against libssl.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 01f8df088759ee7e6bc3900a013e0ea4fafaf984
Merge: e2ebe60a 15063cbb
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 30 00:15:06 2013 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit e2ebe60adf061479a1259a5c68b9cd5f5bacf644
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 30 00:14:41 2013 -0600

    add a note about callsign matching and case sensitivity to the manual

commit d95a2c5d1ddce913dcb1d1ab5dc59f6a588ab599
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 24 14:29:43 2013 -0700

    altos: Remove ao_radio_gpio_bits from normal build
    
    Only needed for the CC115L_TRACE code, and it only builds on STM
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c542a2ed0f222bd0ec84e4a9651585d441dd7ccf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 24 14:29:01 2013 -0700

    altos/lpc: Rename serial port to 'serial0'
    
    This lets existing serial port users find the right function.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 324ceea43c115f4bed3a5276e57559c6c76b07c1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 2 17:54:38 2013 -0700

    micropeak: Add Download button to menu bar
    
    It's the most common activity, after all
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 156e60954fae15bc090984f79cd5594f910ca913
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 2 17:53:51 2013 -0700

    altosdroid: Just use GPS location provider to build on 4.2
    
    Attempts to use the network provider cause the app to crash
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e148582217d6e02ac90a68e2bb2532947378d36f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 24 14:28:06 2013 -0700

    altos: Support mega-style logging without ADC
    
    Used for TeleGPS, just exposes the necessary log writing function
    without also including the ADC writing code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 261ec8fc7043e9314469e919aa96acc461f7e5f2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 24 14:26:23 2013 -0700

    altosui: Add EasyMini USB ids
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0dd148e388944d8d265da51d62806c4a00b2c13d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 24 14:23:53 2013 -0700

    altos/lpc: Add boot loader
    
    Support the USB boot loader, add USB pull-up support.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2568b36ae9d38ae1607ec08b84b06e0fe84bd3ba
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 22 00:53:38 2013 -0700

    altos/telefire-v0.1: Use same LED selection as the v0.2 setup
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58eda6f873f5d6e8e219f769bdf67ce4dbc96fd7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 21 19:40:59 2013 -0700

    altos/lpc: Don't disable all interrupts when disabling one interrupt
    
    The nvic iser and icer registers read value indicates all enabled
    interrupts, icer writes disable the set interrupts. Re-writing icer
    with the current value ends up disabling all interrupts, not exactly
    what we wanted.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9081d881bc48bf7fdce617d300ac02c1a5962239
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 21 19:40:03 2013 -0700

    altos/lpc: Remove ao_usb_task structure
    
    It's not used
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 23f11b188fc6aacd29e7f01a7d8a40853b7655df
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 21 19:39:27 2013 -0700

    altos/lpc: Enable brown-out-detector
    
    Make sure the processor does something sensible when the power disappears.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9e713bc8ab2080d5c1c38570b112f13c886bd11
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 19 22:45:54 2013 -0700

    altos/telefire: Radio status (no data, weak data, good data) on LEDs
    
    Instead of blinking RX/TX, report the radio status on the telefire
    nodes, just like telelco does. This makes the LEDs on telefire
    *exactly the same* as the LEDs on telelco, which seems like a good idea.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d90c2fa650de4cdb008d5e2559463c08da8db934
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 19 22:44:16 2013 -0700

    altos: PCA9922 LED driver needs Enable driven low to latch values
    
    Driving Enable high means anything going past on the clock and data
    pair is reflected on the LEDs, which isn't terribly useful
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 572faa19b9a496866e3b589d5eb9f37a680206ab
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 19 22:42:58 2013 -0700

    altos/cc1111: Fetch RSSI for TeleFire from correct byte
    
    Reading the status byte doesn't provide very useful RSSI info
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 025beb0fea011d0e3dab59b5d16e7ffae97c613c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 17 14:52:32 2013 -0700

    altos/lpc: Get rid of ADC filter
    
    Now that the source of the Vcc noise has been identified, remove the
    unnecessary ADC filtering.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 10f3d0084ff1c0b3dbf28c5d44727b514caeee20
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 17 14:00:43 2013 -0700

    altosui: Add raw pressure to the AltosUI graph
    
    A nice addition, and useful when diagnosing baro sensor issues
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 298e54856b5f8809b43f24407caa4a6be60822f3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 17 14:00:11 2013 -0700

    altos/lpc: Get the IRC turned off after boot time
    
    This involved carefully moving the USB away from the IRC before
    turning it off.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3ad488477def157e277e239e81f164b49725925
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 17 13:58:41 2013 -0700

    altos: Disable USB on all flight computers when in flight mode
    
    There was a check to only disable USB on boards with radios, but for
    EasyMini, we want to disable USB too for flight mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e2f3f2556e714833d8b7d0f65877b07b3dc2cb5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 16 22:32:16 2013 -0700

    altos: Declare m25 write-in-progress as 'ao_port_t'
    
    This lets us use port bits greater than 7 for M25 chip selects
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcf769198863c1b0f1b05f41d0c052a3dbfef247
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 16 22:31:58 2013 -0700

    altos/lpc: Remove spurious semicolon
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d040adeef9df4cda31dce603db81dc7ce19ec0d1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 16 22:31:31 2013 -0700

    altos/lpc: Don't disable all of the clocks just yet, USB doesn't work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1676c7dbc3dcce2962be9ef9a58d37c7b48e3c0f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 16 15:07:54 2013 -0700

    altos/lpc: Turn off more clocks, disable USART for easymini
    
    Try to reduce noise on the power supply.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be9ee9ed2d041c4ab4e77ee2010fe3c7a1ca6597
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 15 01:20:49 2013 -0700

    altos/lpc: Filter ADC inputs
    
    They're amazingly noisy on EasyMini, so just filter them as the only
    thing we use them for is battery and pyro numbers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7361371190bf3805b6d0414e61f697aca7c7cff1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 14 04:38:11 2013 -0700

    altos/lpc: Make ADC inputs work
    
    They're still very unstable (bouncing around a lot), but at least they
    seem to report useful stuff now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6827d0a7c59d606ea05387465f1ad4d914babd49
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 11 16:31:20 2013 -0700

    altosui: Use preferred units for main deployment height configuration
    
    Show and accept values in the preferred units; create a separate list
    of preferred values for each set of units
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15063cbb8f76bffea71575d295ca87b7ceca36d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 9 23:18:09 2013 -0700

    altos/telelco: Add 30ms delay in search after finding a box
    
    This gives the remote boxes time to get back to listening for messages
    after receiving the packet from the found box.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 988924b51980ad43e39bc4785a625ff25eb16449
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 9 22:09:13 2013 -0700

    altos: Add fast-timer API. Use for quadrature and button drivers
    
    This splits the fast-timer portion out of the debounce helper code and
    shares that with the quadrature driver which now uses it directly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72b6c699d355fcd41addb9919d846e63105b9db7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:34:19 2013 -0700

    altos: Add debounce helper. Use in button and quadrature drivers for TeleLCO
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47b7e1d819e48aaebf6ffda49effbee041ce8750
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 9 12:13:06 2013 -0700

    altos/telefire: Leave siren on all the time. Add siren/strobe debugging.
    
    The 50% duty cycle wasn't actually loud enough outside.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 187f661c2512e4260d0ca64134de8fad199f5944
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 9 10:00:54 2013 -0700

    altos: Add telefire v0.2 support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ba2035c78293bc312804722249df76dd4692d71
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 9 09:53:07 2013 -0700

    altos: Add driver for 74hc165 shift register
    
    Just reads one byte from the shift register using the SPI driver and returns it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e8b72a9dc5b6c3a0f6132dc2dec04f8c08a1deb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 22:38:56 2013 -0600

    altos: Add pyro operations to regular ignite commands
    
    Instead of having separate commands, just mix the two sets together.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4bc1f3390b9ebbe07af4bc0f0a1c0915193ddf42
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 19:41:22 2013 -0600

    Set version to 1.2.9.1
    
    Mark bits to be used on Monday of NSL 2013
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f131e740477d29b6623fa336da79e53f765a55b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 19:48:03 2013 -0600

    altos: Make manual pyro firing command work again
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ca472333a3587f0e47d54f5edc287494262ef98
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 19:47:02 2013 -0600

    altos: write pyro fired to correct log field
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 956f4dff1cc521059434743624b1271fb92b96ae
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 19:39:13 2013 -0600

    altos: Light pyro charges simultaneously if so configured
    
    Don't try to be nice to the battery, just let the pyro circuit deal
    with it and try to get all of the specified circuits going at the same
    time if they're configured to do so.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 62547a042d042fadec652c5081f96816a8e66970
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 19:03:12 2013 -0600

    altos,altosui: Add pyro state logging for TeleMega
    
    Only in the log file (no obvious space in the telem packets), but at
    least we should be able to check for pyro failures.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 277577fecc71e3c52b823938f396cf42be403ebe
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 19:01:58 2013 -0600

    altos: Add pyro code testing to ao_flight_test for TeleMega
    
    This parses the pyro settings and signals when the pyro channels are
    fired in the output.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1408c13f176f3f021e9face48c4cd33528ee96c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 18:58:41 2013 -0600

    ao-tools/ao-mega: Dump 'pyro' state from mega log
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8083aa731c99d09bdd4a8c216bb11f846734d7df
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 18:57:58 2013 -0600

    ao-tools: Add ao-mega tool to parse TeleMega eeprom files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21689ef744ddf43965ccad89dc1133a905011d7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 18:54:02 2013 -0600

    altosui: Missing 'break' after selecting 'mega' format detection
    
    Caused 'mega' logs to be dumped in 'mini' format which didn't work well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17e0ccccc8619f96d2cf56bd98d63a7e59f5301d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 18:50:10 2013 -0600

    altosui: Stop downloading mega eeprom on empty block
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 013cba5ed1fde72240a68ec648bd14977f5e48a4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 20 21:41:01 2013 -0700

    doc: Update description of graph window to note new tabs (config and map)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e711c708b0d2c8d8c2d72e34a795ad8e9b5ab5de
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 20 21:37:20 2013 -0700

    Create release notes for 1.2.1
    
    Move most of the 1.2 content to the 1.2.1 block
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2344ba81fa51215471099e56518112478bdf2e73
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 21 11:31:05 2013 -0700

    Separate out cortex-m0 compiler tests in configure
    
    The summon arm toolchain doesn't work for cortex-m0 parts, but the
    linaro toolchain does. Look in /usr/bin for the -m0 compiler but
    continue to use /opt/cortex/bin for the -m3 compiler
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85eb75c3251d8e141d7269fc7ffa6197174ea8c3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 21 11:30:44 2013 -0700

    altos: Can't use inline functions because SDCC doesn't do that
    
    Sigh.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd5567882b732f8947b44b217552077c82a3d28e
Merge: fd55c1fe 57b4d82d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 21 11:16:54 2013 -0700

    Merge branch 'lpc'

commit fd55c1fe53adf5c50dcd3ce8296f80871cec73e9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 21 11:16:33 2013 -0700

    Bump master version to 1.2.9 to avoid confusion with 1.2 releases
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bffe8caf0294e9cfef2dab1c6b5a8d1d87ac3a2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 21 11:08:15 2013 -0700

    altos: Set the path for the STM32L compiler explicitly
    
    This makes sure we use the known toolchain for STM32L builds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7282fab337dc48d32606276e5f51c057a3bff8cb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 21 11:04:25 2013 -0700

    altosui: Add TeleBT firmware to release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57b4d82dee10b142b820aa306028a288a85214f6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 23:07:54 2013 -0700

    Add Mini logging format. Use in EasyMini
    
    This is a 16-byte record that includes all of the sensor data in each
    sensor record, along with records for flight state changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27e9b93f3d35890a49575b2ead1983ce3c2fc213
Merge: a4df2575 d9cbef8c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:40:42 2013 -0700

    Merge branch 'master' into lpc

commit d9cbef8cd364aae54855cc5bc64fb8c2b22057b0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:35:42 2013 -0700

    altos/telemega: The last two igniters are apogee and main
    
    Not the first two. TeleMega v0.3 has these marked on the silk
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4df2575b4e782e83cc4e9b1d2e5cd2397a97dd8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:33:35 2013 -0700

    altos/easymini: Initialize beep and ADC. Declare use of igniter bits.
    
    This makes easymini actually work!
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a87a8e8067d7b2d0ff3a3274af9f1e919b5b7793
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:32:34 2013 -0700

    altos/easymini: Use different pins for igniter outputs
    
    Was using the I2C outputs which are open drain, which makes it
    impossible to force them high as needed to driver our igniters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16eb0b04df3d1db65bd40717133abe94db0f2a15
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:31:48 2013 -0700

    altos/easymini: MS5607 chip select bits were defined wrong
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 455802b7e853956180799c058e9561876d98d831
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:30:49 2013 -0700

    altos/easymini: Easymini doesn't have USB connect or VBUS wiring
    
    Disable these in ao_pins.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35b120c4154df0351c3a802f86dda224a7643068
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:27:53 2013 -0700

    altos/lpc: Force idle mode if USB gets an address during boot time
    
    This lets EasyMini be booted to idle mode by simply plugging it into USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1f01cd4406063191a51cb68fc4634eabfc60fc2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:27:05 2013 -0700

    altos/lpc: Reset SPI device at startup time
    
    Wasn't doing the reset sequence correctly (write 0, then write 1).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0ad8b5b5e1b4c7a9ffba9d25f3c32ce708c3ec5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:26:07 2013 -0700

    altos/lpc: Configuring wrong pin for SPI1 MOSI
    
    Was setting configuration for PIO1_21 instead of PIO0_21.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b9bb088a36fd351809f4c378356327ffa663c974
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:25:13 2013 -0700

    altos/lpc: Allow for alternate SPI SCLK0 pin usage
    
    SPI SCLK0 can appear on three different pins; let the application
    configure which one it wants.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 397109139fb9ff27ec7cfb0cafa65d1dbea053bd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:24:11 2013 -0700

    altos/lpc: Leave SPI enabled all the time
    
    Might be able to turn it off with some care; more experimentation required.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e383d7a28d01729c50f933ceda77ea767d1b8087
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:22:20 2013 -0700

    altos/lpc: Create TX/RX busy macros for SPI driver
    
    Check for both fifo status *and* device busy to make sure the device
    is idle before we touch any registers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07d261c08214837b5d5cac4d2be43e51a0c47868
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:19:15 2013 -0700

    altos/lpc: Fix beeper driver
    
    Set prescale limit, not current prescale value (pr instead of pc).
    Flip output 1 on PWM match (set emc toggle for channel 1).
    Don't hold counter in reset (turn off CRST bit).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3fe11b277dd7268eb445d120c8f9537f95148891
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:18:44 2013 -0700

    altos/lpc: Missing parens around ao_gpio_set macro
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a78012782c779de3433b91e6b854b2fdbd7230fd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:17:48 2013 -0700

    altos/lpc: SPI runs off main clock (48MHz), not sysclk (24MHz)
    
    Update SPI speed definitions to match
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d51c9fda3478f205e4bcdf1b7bf21eb1e0a516bc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:07:52 2013 -0700

    altos/lpc: Pull ADC data from the correct registers
    
    Was just stepping through register space arbitrarily, which would have
    worked for EasyMini, but might have failed later if the ADC pin usage
    wasn't consecutive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6343bd774f542a4f915cf1fca2053d03e93bf2c3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:06:03 2013 -0700

    altos/lpc: Don't use loader to place USB endpoint data in USB ram
    
    Instead, just assign a fixed address in registers.ld. This avoids a
    confusing section in the elf file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35a05041d3ca3e69a146bd3bf8038c0f1cbc1b42
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:04:29 2013 -0700

    altos: Add EXTI_PIN_NOCONFIGURE to exti interface, use for MS5607
    
    This asks the EXTI code to not mess with the pin configuration so that
    the MS5607 driver can get interrupts on the MISO pin while still using
    it for SPI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 098fd43a740ee2a782f82b6b71965b60cdba2d62
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:00:24 2013 -0700

    altos/lpc: Make EXTI code work.
    
    Clear rise/fall bits in ISR to avoid re-entering.
    Block interrupts around enable/disable bits.
    Create shared _ao_exti_set_enable function to control mask changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f794e6c95697b034be315632fddb3a5475c43b5b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 19:57:23 2013 -0700

    altos: Use ao_spi_get/put_bit in MS5607 driver
    
    Replace open-coded ao_spi_get/put and ao_gpio_set sequences
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b7ab41e4dc92dcd382f4c05459088d8df8b70075
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 19:51:32 2013 -0700

    altos/attiny: Fix ao_spi_get_bit/ao_spi_put_bit macros
    
    These were never written, so just use ao_spi_get/put_mask.
    
    A precursor to changing how the MS5607 drives the SPI bus
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 49f9cdda5f1812687b82915acc78a9d9136255bf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:54:30 2013 -0700

    altos: ignore built files in easymini-v0.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c57e1630002c921739ff22395497d93027d381b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:53:32 2013 -0700

    altos: Build easymini-v0.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 278300b2bc98b92cc71ec016ab0fc93eb3696435
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:52:59 2013 -0700

    altos: Initialize SPI for easymini
    
    Doesn't work very well without this
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbe5eee76faf386eefe69539935ab318944ac452
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:52:14 2013 -0700

    altos/lpc: Stick USB control structure in USB memory
    
    No reason to have that in regular ram, and it means we've got space
    for large enough stacks now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3587bfd248e115bb1abb28f71b263575b4e8e367
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:22:10 2013 -0700

    altos: Add easymini-v0.1 product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4991db4809ae547fdb245e3cb42517fa7524de5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:21:43 2013 -0700

    altos/lpc: Use separate interrupt stack
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5311720525ac73e9d42067b68adf25fc2e054af5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:21:20 2013 -0700

    altos/lpc: Try a smaller stack.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f5218e2544dcb659aec6c3adee50d61cab1bba3a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:19:41 2013 -0700

    altos/lpc: Add pin interrupt driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c0d0147251bfcebd753196b74c22c00c3116fd22
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:18:55 2013 -0700

    altos/lpc: Add beep driver
    
    Hardwired to our current beeper pin
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 166977c65bddb50d600a3c1e1f278c425b673697
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:18:19 2013 -0700

    altos/lpc: Add ADC driver
    
    Uses burst mode to get the whole set of values in one interrupt
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ed25a46571d988ccf37ae915dff97b5f00bcf9cf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:16:41 2013 -0700

    altos/lpc: add gpio int, spi, adc and ct32b defines to lpc.h
    
    Lots more devices
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b0b7bf1462341718e582223a880f2dfcd79e2ad
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:15:58 2013 -0700

    altos/lpc: Clean up broken IOCONF defines
    
    Missing comment closes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08887678f900adae81dcb1a7f5353d98d127aafd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:14:57 2013 -0700

    altos/lpc: Fix ao_enable_input, add ao_enable_analog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15ca452b60271e3a0f7327216df04eef5b985240
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:14:16 2013 -0700

    altos: LPC interrupt priorities are just 0-3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 935a7ff38010ec4ad19f315f8a2a1557c01ae554
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:13:17 2013 -0700

    altos: Add LPC spi driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d9b42470e8889b44bb08858a610285410a200ab9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:02:38 2013 -0700

    altos: Use ao_port_t in m25 driver
    
    This uses ao_port_t for all of the chip select masks
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 28890aa5893898cd0bb0ac033e491eb307a84ca5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:02:01 2013 -0700

    altos: Use ao_data_pres macro in ao_log_tiny
    
    Now it works on easymini too
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82afe3a3b737c43dbeaad41ea5af1841357297a6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 02:54:55 2013 -0700

    altos: Check for packet mode before trying to disable it in flight code
    
    This is only relevant for telemini
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52063c2679752033135fff928c7686e368d2a825
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 02:54:30 2013 -0700

    altos: ao_data_get is in ao_data.c now, not ao_adc.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4385d29fc1b233b3ad56d4af68a175e760c1751
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 02:53:32 2013 -0700

    altos: Allow architecture to define the type of port registers
    
    LPC11U14 has 32-bit ports, STM32 has 16 bit ports.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca4f3161258356c06fe1270f7ccdf0d6939e2d34
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 02:52:49 2013 -0700

    altos: Move ao_data.c from stm to core
    
    This should be used on every processor
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac089d4fb930b7dbc4161259fd9bddba94395ebc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 17 03:36:47 2013 -0700

    altos/lpc: Get USB working
    
    The lpc demo now has a USB command line.
    Also allocates system stack so we know when ram is tight at build time
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 185e6d15bcda229949a984910d7394203d301db9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 16 18:58:24 2013 -0700

    altos: Allow target-specific USB endpoint specifications
    
    The LPC has only a small number of endpoints, and those are not
    configurable. Let the LPC USB driver pick the IN and OUT endpoints by itself.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c35e21a86ab32bc91eb10a60c071b702fc0f963
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 7 19:27:17 2013 -0700

    altos: Finish off LPC USB register definitions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 918342016705303baa1630c62c290aaf2dcc2801
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 25 20:38:32 2013 -0700

    altos/lpc: Start adding USB register defines
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91d201abcbe9373360919406427b7e4fb9e1b42e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 17:10:24 2013 -0500

    altos/lpc: Start adding USB register definitions
    
    Just the bare struct, no defines yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9bf67798b134ad796c2f4bc9240ee450722148ec
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 00:40:38 2013 -0500

    altos/lpc: Take advantage of USART TX fifo
    
    The USART has a 16-byte TX fifo; keep rough track of how full it is to
    avoid waiting for an interrupt after every TX byte.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e8f6ba8b779cd9635f82d6da5f113715c3ee4c7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 00:20:55 2013 -0500

    altos/lpc: Get USART running
    
    Adds a simple demo thread that spews data to the serial port
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9d0eb3f3154f98abb0c8952d7171f3e7d3de9b2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 18 16:15:52 2013 -0500

    altos/lpc: Get 100Hz timer running
    
    Use systick, which is built into the ARM core
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 04b243e6ef212f54ed284cfbde6d5abb637bf60e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 18 15:55:26 2013 -0500

    lpcxpresso: Add ao_demo.c
    
    Kinda necessary for the demo to build
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bcc65597d3d20f1d58df784100af766cee5f0f20
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 18 15:54:13 2013 -0500

    lpc: Initial lpcxpresso bits
    
    This gets the LPC11U14 clock set to the PLL and blinks the LED.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6735a391c2a1e3be01ac9e68b44ec0974592c11c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 17 03:34:50 2013 -0700

    libaltos: use PurgeComm in Windows altos_close to abort in-progress ops
    
    Instead of manually signalling the related events, use PurgeComm which
    can then abort the operations itself. Also make sure all of the
    relevant handles are set to INVALID before closing them to avoid race conditions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd8d061d0f63158b5b03814d77cb76fdf5a0abad
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 17 03:27:20 2013 -0700

    libaltos: Build the linux library targets when doing a 'fat' build
    
    These are necessary for the fat release, so make sure they're built then.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a19805a6b079450b5afd5fa2334cede8495ae4a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 17 03:21:08 2013 -0700

    altos/cc1111: Hack on USB driver to make Windows happy
    
    The Windows modem driver is quite chatty at startup time, getting and
    setting the comm parameters each time the device is opened. Sometimes,
    when setting the parameters, the cc1111 would STALL EP0.
    
    Most of the time, Windows would happily pass this as an error back to
    AltosUI which would then re-try the open (and succeed, most of the
    time).
    
    Sometimes, Windows would stall for 30 seconds before passing the error
    back. This made the whole UI freeze, and I suspect most people assumed
    our app had died.
    
    A bit of analysis with the beagle USB sniffer and I discovered the
    STALL settings, but there wasn't any correlation between the data on
    the wire and when the STALL would be generated.
    
    So, I found a couple of other cc1111 USB stacks on the net and just
    looked to see how our driver differed. There wasn't anything clearly
    related, but there were a list of small differences:
    
     1) Other drivers didn't bother waiting for the hardware to
        ack the USBADDR setting; doing it this way means we can set
        the address *before* acking the setup packet. It'll get
        set eventually, at which point the device will start responding to
        packets again.
    
        Easy to fix, and saves a bit of code space too.
    
     2) The other drivers set the STALL bit for setup packets which aren't
        understood. This shouldn't have any effect on 'good' systems as
        those shouldn't ever be generating bogus setup packets anyways.
    
        The driver already handled the STALL state in the interrupt
        handler, the only requirement was to figure out when to explicitly
        set the STALL bit.
    
        That required moving the state updating code from the start of the
        ep0 setup handling to the end, after the setup packet had been
        examined and data queued in or out as appropriate.
    
     3) Our driver explicitly queued an IN packet for any setup request
        that wasn't waiting for an OUT pack. This appears to tie in with
        the USBADDR change above as before I made that change, this change
        caused the driver to fail to respond to most setup packets.
    
        This was simple once the above change was made, just move the
        generation of the IN packet inside the code that switched to the
        IN state.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ef0136c27e8f47a1eb38f9cbcd2c61288732d78
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 15 15:32:59 2013 -0700

    altos: Generate unmodulated carrier for CC1120 test mode
    
    This sets the deviation to 0, enables the preamble and turns on the
    transmitter. It will sit there happily sending a bare carrier forever
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1931e028bebc3cd8df9392e30eb0e888d0799768
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 22:29:06 2013 -0700

    altos: Move MS5607 info from 'v' to 'c s'
    
    Makes more sense there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69b9f613ad36b8039f223ed30f8c75913916d82c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 22:19:07 2013 -0700

    altos: Remove some MMA655x debugging printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0571531066918fdefe9447f3b4192d0c6c477afa
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 10:48:24 2013 -0700

    altos: Grab SPI mutex until MPU6000 I2C mode is disabled
    
    If other drivers use the SPI bus, the MPU6000 gets confused as its
    sitting on the bus looking for I2C messages. Just grab the mutex
    before the OS is running and hold onto it until the MPU6000 has been initialized.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9beacd77b3e8106e036e50a67312dfee414fbc51
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 09:01:49 2013 -0700

    altos: Initialize MPU6000 CS pin for SPI mode
    
    Without this, we can't talk to the chip very well
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d553230903ddd0ec522c07be0df975b38ef23d3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 09:56:16 2013 -0700

    altos: Fix telemega v0.3 igniter order (drogue/main moved). Label ADC dump
    
    telemega moves the igniters around so that E/F are now drogue/main.
    Add custom labels for ADC values to make parsing possible
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4e4eec827d61a05fda52ddb68b55f17b6028d5e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 09:25:08 2013 -0700

    altos: gps serial routines are called ao_gps_*, not ao_ublox_*
    
    This caused the u-blox driver to use serial port 1 instead of the
    project-specified serial port.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 461215eea72ff9d64748304e76b08da37ee3dfe9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 09:21:54 2013 -0700

    altos: Give u-blox 3 seconds after boot before we bug it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5e9193f6375be27e5f7a0321fd34b6acfe81247f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 09:12:29 2013 -0700

    altos: Add 'g' command to ublox GPS code.
    
    Take the gps_dump function from ao_gps_skytraq.c and move it to a new
    file so it can be shared with the u-blox driver. That affects every
    skytraq and u-blox user as they need to include the new file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdad289a0803babecd30cbc0a95be99c5caadeb5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 15 01:24:56 2013 -0700

    altos: Add flash-loader for telescience-v0.2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 116d8570766fbd3ef529111171935637a2e466af
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 08:51:22 2013 -0700

    altos: Set u-blox navigation settings
    
    Airborne mode, < 4g (as good as it gets)
    Only use 3D fixes (2D isn't very useful)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb0fb6f4beab484e7fe55b39d18c1f19778f1211
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 08:35:24 2013 -0700

    altos: Use symbolic names for ublox packet id
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ccfd2d2e4b84e72e5502cb72a7da6372b5e2b47
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 01:06:20 2013 -0700

    altosui: Generate useful KML files from TeleGPS logs
    
    Use GPS altitude when baro altitude is not present.
    Don't require flight number.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bdea4c88318a41ade3d3b6b2cbfc097ae3e4f3be
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 00:38:34 2013 -0700

    altosui: Use GPS alt + baro height for KML altitude
    
    GPS altitude is generally more absolutely correct than baro altitude,
    so use that as the nominal pad altitude when generating a KML
    file. This results in a KML file that has the flight trace start and
    end closer to the ground, which is always nice.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43f94e923a6a87520edcbb8fb4829e6ddf708908
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 00:24:53 2013 -0700

    altoslib: Use sequence numbers to track GPS updates to AltosRecord
    
    State objects now record what GPS sequence ID they have to know when
    the GPS data has been updated. Record objects bump the GPS sequence
    each time new GPS data is recorded. This way, record objects aren't
    modified as they're iterated over to generate the list of state
    objects which makes it possible to iterate multiple times and get the
    same resulting set of states.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c88aa32b979f379e3cf316dcb651e264c32a5283
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:59:26 2013 -0700

    altos/test: ao_gps_test_ublox uses ao_gps_blox.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 61f5183fb6aff63c1133011b5625814ee56e96da
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:58:18 2013 -0700

    altos: Struct used for u-blox testing had lat/lon swapped
    
    The structs in ao_gps_ublox.h are used only by the test framework, but
    it's useful to have that look right anyways.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a730dd7a78b5ae428bcfe809257dabedc4338f5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:33:12 2013 -0700

    altos: Switch TeleMega v0.3 to u-blox
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2f0dcc73df612d10ed12d364fe661ccd831f037
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:32:25 2013 -0700

    altos: Provide a define for the number of sat infos in a telem packet
    
    12 fit, but it's best to use a symbolic constant
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50457f9983ec0a432f1050464382749436e3da94
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:31:31 2013 -0700

    altos: Add U-Blox GPS driver
    
    Uses binary mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 125ff0b7c74af4db98a81439ee9f1b92fe8b8833
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:29:22 2013 -0700

    altos: Don't bother fixing telelco-v0.1, just disable it
    
    Lots of stuff to do to make this old project build; just disable it
    instead of fixing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 672edb20434248038ef5fbb87f2c0984bd5ad513
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:28:27 2013 -0700

    altosuilib: Mistake in the MegaDongle listing -- was set to TeleMega
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80a6b0ea5c36c307a8edc79ad10ef7a8ff3d480e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:27:00 2013 -0700

    altoslib: Correct hexfile address ranges
    
    Stop trying to use sentinal values for addresses and just keep a
    boolean tracking whether they've been initialized. Avoids precision
    errors in the variables.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9bd717e71d69338b1af521b37e8bd975e503398e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 10 19:21:18 2013 -0700

    altosui: Wait for valid callsign/flight when graphing
    
    Wait for the data record to indicate that the flight value is valid
    before setting the graph callsign/flight/serial data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 106d212ff5920c39d95751ef6249dc141970412c
Merge: ecb12857 09d5d6f5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 9 21:06:52 2013 -0700

    Merge branch 'master-fixes' into stm-flash-fixes

commit 09d5d6f546ccef2bfd4941e590f047485bb73d76
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 9 21:06:23 2013 -0700

    micropeak: Use new 'last logdir' preference for MicroPeak save/load dialogs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95a3a089f9c97684918937eecd94dcac77c47696
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 9 21:04:52 2013 -0700

    Information from configure about android build was misprinted
    
    A typo in the script caused it to print either 'yes' or ''
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17eada6e586731defa9fd75316670c2b2b1601ee
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 9 21:04:11 2013 -0700

    altoslib: Add non-persistent 'last logdir' preference
    
    This is used to record the last directory for reading or writing log
    files so that the UI can pop back to the same place next time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 271e8adbc9549c7b3b4d0ec14e4edb1a6ab715d1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 9 21:03:38 2013 -0700

    Add altosdroid notebook entry for imperial units
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ecb128579e7576fc27c8ca93708f316b9ac91630
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:06:24 2013 -0700

    altos: Wait after configuring boot pin before testing it
    
    Clearly the pin isn't quite ready just after it's been configured, so
    hang around for a while (100 nops) to let things setting down before
    testing the value of the pin. Makes booting a lot more reliable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4a90eec4b8ee4a35711aa74c13b3f30d12c0fe08
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 15:33:04 2013 -0700

    altos/stm: Create per-product flash loaders
    
    Split the flash loader prototype into pieces so that each product can
    build a custom flash loader with very little code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b131c5ac59bbd339a724892586023a43f97c7f90
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:37:15 2013 -0700

    altos: Add ao_boot_chain to telemega v0.3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1695f6af46ea647119d651fc09c97d604d08c736
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:26:11 2013 -0700

    ao-tools/ao-stmload: Add --verbose flag
    
    This dumps out the serial communication so you can see where things go wrong.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6d6df03826083a244715b88a30ad681f17b4510
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:25:36 2013 -0700

    altos: Remove stdio from stm-flash
    
    This saves enough memory to fit in under 4kB
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a2e0676f476b0e2bdd5102315ebd5904b57f384a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:24:08 2013 -0700

    altos: Get rodata into flash, make sure sections are aligned
    
    .rodata* needs to be in flash; otherwise strings get left in ram.
    Failing to align sections makes the initialized data get dumped into
    the wrong place in memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e092b383d55bcf9e2a230ccfe85052adb18b254
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:23:14 2013 -0700

    altos: Make stm-bringup build again
    
    stm requires AO_BOOT_LOADER_BASE now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b1797312b34ba2b8121f82605f8d2c419167737
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:20:47 2013 -0700

    altos: Run self loader when application sets boot addr to 0
    
    This causes the flash loader startup code to fall into the loader when
    the application sets the boot address to zero.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2412e867138635d79ea0fa8d43efc0a6aa19784
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:19:13 2013 -0700

    altos: Allow STM usb driver to be used without stdio
    
    This lets the self flashing loader be linked without any of the stdio
    code, which saves a bunch of memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afad5ae893a48785f3b50ff4125dc78648343a2d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:08:35 2013 -0600

    altos/stm-flash: Check target flash address against AO_BOOT_APPLICATION_BASE
    
    Allows that value to change
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9ae987073f90402821120dbe962fceb4fc9f5435
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:59:12 2013 -0500

    ao-tools/ao-stmload: application base moved to 0x08001000
    
    And, use a symbolic name so it can be easily moved in the future
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9029722708b54826aa9374555470cb40922c5da5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:56:00 2013 -0500

    ao-tools: reboot to loader now uses 'X' instead of 'L'
    
    'L' is used by lots of other commands; switch to 'X' which is free.
    
    Sigh. Someday we'll have words for commands instead of just letters
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dfc268e0021e1cd3045f73339a749d292a6a6300
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:35:57 2013 -0500

    altos: Use flash loader on all STM products
    
    Includes the boot chain stuff
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ded61d59888c79ef1f94e664b5fb770841a801a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:33:33 2013 -0500

    altos/stm: Provide another 4kB of flash space for apps
    
    With the flash loader now < 4kB, we can use the spare 4kB for applications
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6cd015b8b6b02bd8e0ce28f248426ae75c242b53
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:32:18 2013 -0500

    altos/stm: Shrink stm flash loader to < 4kB
    
    Saves 4kB of flash space for applications.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02681adbc5919bd3713788da352aa36ace619ef4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:30:31 2013 -0500

    altos/stm: Allow core timer to be excluded from build
    
    This removes all of the support for the base 100Hz timer from the
    system, saving space when not needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a453e2245996854e722346789f972fd088e33ba8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:29:56 2013 -0500

    altos/stm: Don't define task macros when not tasking
    
    The necessary data structures aren't defined in this case.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d0f4bc23eae4f1e085bfb853c995f1fb6b8b594
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:27:52 2013 -0500

    altos: Eliminate stdio looping when system has a single stdio source
    
    No need to loop if there's only one
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f3bbb11880f45284f1f094990ffa32a66bf4560
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:24:48 2013 -0500

    altos: Move ao_notask to core
    
    The STM flash loader wants to be taskless too, share this very simple
    implementation of sleep/wakeup.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21356aec543dd85426a52469426351ce006a17dd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 16:16:55 2013 -0700

    ao-tools/ao-stmload: Remove IRC dregs in source code
    
    oops.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9df4e874b2785aec4aecce2f767543ee9f638b4f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 16:15:21 2013 -0700

    altosui/altoslib: Move more flashing code from altosui to altoslib
    
    Required a bit of refactoring to eliminate swing types from the
    flashing code, but nothing major.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09e0c304b420a12fa1616005db946523c6e5bef1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 16:01:08 2013 -0700

    altosui & altoslib: Move a pile of debug/programming bits to altoslib
    
    Prepare to create external Java utilities to flash devices
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9acd488c5f945511f813d84c3c6f69846d4601e8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:35:15 2013 -0700

    altosui: Support 32-bit ihx files
    
    This just borrows the same 32-bit ihx parsing changes from ao-tools.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9ba2d17b979410acfa41f9954674757f7f321fc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:33:31 2013 -0700

    ao-tools/ao-stmload: Fix ELF, add IHX, add self-flashing
    
    This splits loading into ELF and IHX paths, and splits flashing into
    stlink and self-flashing paths.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f30b1f14dbab6e6ea94177e459c80732e31e433
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:30:24 2013 -0700

    ao-tools/lib: Add loading support for 32-bit ihx files
    
    These place the upper 16 bits of the address in a special record. That
    requires handling records in file order, so don't sort them in address
    order anymore, instead find the bounds of the loaded data by scanning
    them all.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d98fc5d3f106f3063608a2e5c69d9359061437a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:27:42 2013 -0700

    altos/stm: Add comments to the .ld files explaining how the romconfig stuff works
    
    Would be nice to be able to explicitly define addresses for the
    romconfig variables, but I can't figure out how to make that
    work. Instead, just explicitly load the files in teh right order to
    make things land in the right places.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab1cbc0f51ddf897a3a7a768862d9dfe26a6c14d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:26:26 2013 -0700

    altos/stm: Add .elf to .ihx rule
    
    Uses objcopy -O ihex to extract the initialized bits from an elf file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9362d400d06aa3badfc826d8edbd7c55406b4f7d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:24:42 2013 -0700

    altos: Switch ao_stm_flash to read/write binary blocks
    
    Change from development testing code to something that actually reads
    and writes data from the USB link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a3f668e71751608ea2e38519003446bc6ceb348f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:21:58 2013 -0700

    altos: Create ihx version of stm-demo
    
    Both ao-stmload and the eventual java loader will support ihx files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5db4d5e5b1272b161102e889e65b9c7bc7928352
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 23 02:23:03 2013 -0700

    altos: Add erase command to stm-flash app. Validate addresses.
    
    This also leaves the code writing fixed values and printing read data
    in ascii instead of binary. Useful for debugging, will want changing
    for the product.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac6b4fca0970faa0a537a813242585693b839469
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 23 02:21:27 2013 -0700

    altos: Fix STM flash programming
    
    Wait for flash to go non-busy after writing or erasing a page and
    before jumping back out of the RAM code.
    
    Export a separate 'erase' operation for testing.
    
    Re-lock flash after every operation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35ef1f17e3efaa6d586ab7bb301f8133d52023b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 23 02:18:55 2013 -0700

    altos: Validate boot chain start address
    
    If the first block of boot memory has been smashed, and the start
    address is bogus, don't bother trying to jump to the
    application. This makes the system more resiliant to flash failures,
    presuming the loader erases the first block, programs the other blocks
    and then finally comes back to program the first block.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db7f17980c303e442f88c8a4168351dbc2c0b1a0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 23 02:17:04 2013 -0700

    altos: Mark .boot section as (NOLOAD)
    
    For some reason, the silly linker marks things in section .boot as
    data rather than bss, so they'd end up initialized by default. Force
    them to be NOLOAD so they preserve values across reboot so that boot
    chaining works properly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit efc0898d824ebd0abe0b088ed9a8b40c34623ab7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 23 02:15:35 2013 -0700

    altos: Fix up stm-flash output file name. Use discovery LED pins
    
    Include the AltOS version in the file name, just like any other AltOS
    program.
    
    Switch the LEDs to the discovery board as we're using
    that. Eventually, we'll stop using LEDs entirely.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4bc55ee8fabc9f4c997c2a515d74baada590c93e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 11 18:14:28 2013 -0700

    altos: Add actual flashing functions to stm-flash app
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1a43ce313c85cb7f8f16f7f0647d9d4320ba692
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 11 13:21:04 2013 -0700

    altos: Clean up boot loader support
    
    Split out code into separate files.
    Add support for getting back to boot loader from application.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56a7cbbf51f5c9ebbfe17d1cc30ed807572af3cc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 11 00:01:52 2013 -0700

    altos: Add program flash function
    
    And get it loaded to RAM so it can execute correctly.
    
    Nothing calls it yet...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9c35b100c3fcae661501d2bf89eedc7fceb2e1c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 10 21:02:59 2013 -0700

    altos: Make stm-flash capable of switching to application
    
    This shrinks the base OS load down a bit as well so that stm-flash
    fits comfortably in the first 8kB of memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a6887032b4d217bca5236ea15389218f10d69545
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 24 00:18:14 2013 -0800

    Add STM self-flashing loader
    
    This allows the real application to get loaded at 0x2000 and jumps to
    that at startup time if the boot pin is set appropriately
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 887209b61ac3012d0fd2206cf1016c44f59cb432
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 7 19:29:06 2013 -0700

    altos: Sanity check barometer before going to pad mode
    
    Make sure the barometer is reporting some sensible value before
    letting TM try to fly the rocket.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 802ca114ca064a9dd557a82e992653b145f8e660
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 7 19:28:07 2013 -0700

    altos: Elide M25 debug output from storage info command
    
    This is just chip-specific info that no UI actually needs. It takes a
    bunch of ROM to write it though, making TeleMetrum not have much space left.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3876b5bfad383119339aea51e2cf301012a1f991
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 6 16:08:52 2013 -0700

    altos: Set APRS deviation to 3kHz
    
    I finally found a bunch of references to APRS on the net and they all
    appear to assume a 3kHz deviation. Let's see if this works better with
    Yaesu radios.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4458b5a3cd3f88188c820cd0763f4e1d99fff311
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 3 01:07:06 2013 -0700

    altos/test: Fix warning in ao_aprs_test
    
    Was not forward-declaring ao_radio_send_aprs, causing a warning
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 091582c446319fe4a79154153ece5372b2faec83
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 1 08:58:17 2013 -0700

    altos: Use SYSTICK on STM32L
    
    It's probably more power efficient than using one of the timers, and
    it's certainly easier to configure.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b7b0ddfddee3f8e21f21d67cd9f522fa50777265
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 1 08:56:57 2013 -0700

    altos: Mark GPS telemetry packets with GPS time stamp
    
    This provides a reasonable accurate indication of the system time when
    the GPS location data was received, and also makes sure GPS packets
    get some timestamp when no other telemetry is being transmitted.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a6a5d0afa646564a9277ad3bd80c4225247a27b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 30 20:25:20 2013 -0700

    altoslib: Update GPS state even if new state is unlocked
    
    Otherwise, we can't see fine GPS details while GPS is unlocked, and
    that's annoying
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e9b405e939136d25d937334d1f14f06c7d6127b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 30 19:04:26 2013 -0700

    altos: Use separate exception stack on STM32L
    
    This reserves 512 bytes of memory for a stack, then makes sure that
    exceptions continue to use that stack while processes use the per-task
    stack.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac72d1c298fc553808a8e04a65482d4990f177d7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 30 18:57:53 2013 -0700

    altos: Reduce stack usage of FAT driver and logger
    
    Move some large stack arrays to static storage.
    Also eliminates some printf error messages which don't seem that
    useful except for debugging.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit df70e3e87874d80516c6d43cfe745d511d54f206
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 30 00:12:44 2013 -0700

    altos: Open up the DVGA gain to use all of the available settings
    
    We usually work in RF quiet areas; let the AGC hardware try all of the
    available gain settings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e18910659e56ea52ee493d8cc4bce4b219d5bb75
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 30 00:06:08 2013 -0700

    altos: Stop using telelco v0.2 top LEDS for radio TX/RX
    
    The top LEDs are now used for signal strength; a red LED indicates
    failed communcations, so we don't need to blink stuff and annoy the user.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8744fd5d541955b0920c7d8e2696039cdcfdf1dc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 30 00:05:33 2013 -0700

    altos: Make cc1120 driver return false on recv timeout
    
    Was returning an uninitialized value, which was often not zero
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4fe42801f42f2fc2688555f4585dbebc28bb2d61
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 29 23:53:43 2013 -0700

    altos: Reconfigure CC1120 receiver to match our usage
    
    Open up the AGC to the full range.
    Set the AGC ref based on our receive BW (100kHz).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb0e1720be2aa4fb6729ceada09c18947bfee2bc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 29 23:20:25 2013 -0700

    altos: Compute "real" RSSI value in radio code as needed
    
    Instead of dragging around the weird CC1111 RSSI values, just compute
    a dBm value in a signed 8-bit integer, ao_radio_rssi. Use that
    everywhere we need RSSI internally. We leave the weird CC1111 value in
    the packet reply as that's what the host expects.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 949700f276b80b4eb28f15b5559714f430f227f1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 29 20:24:16 2013 -0700

    altosdroid: Add Notebook entry for reloading telem data option
    
    This lets the user recover the rocket flight data after stopping the
    application but before recovering the rocket.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9f2e6471c11a1f9feb183e05f24c53968098bdb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:30:29 2013 -0700

    altos: More .gitignore bits
    
    stm-demo
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab99d71c4ba97a28ee463170d10712b2de94dc50
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:27:32 2013 -0700

    altos: Add a bunch of .gitignore files
    
    Ignore ao_product.h and built binaries
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85d32468210c9989ae52bd29f883c4380af43961
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:25:37 2013 -0700

    altos: Add ublox checksum app to generate ublox config lines
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 257500776935b5950cd7c49f9c799b3174d9232d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:22:41 2013 -0700

    altos: Add .gitignore to kalman test dir

commit 5a77a62bce5e5ab5998f24588839f3c8a1cc6221
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:21:17 2013 -0700

    altos: Build test framework for kalman filter
    
    This has some known flight data and generates kalman filter
    information for them to test
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 24a03d0c64fc0b56ad5ccfd6588aa47690ea2a65
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:15:28 2013 -0700

    altos: Ignore ao_aes_test binary
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2c697af790d53c68154facc19e4096aed5de798
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:14:50 2013 -0700

    altos/test: Add telemega plot helper script
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 086217bbde6d549cad61bdde728c75d29023d1c6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:11:27 2013 -0700

    altos: Add nickle micropeak log parsing code
    
    I think this was just some debugging stuff, but it doesn't seem useless
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d46d26d714cc172b5ea493478d9dd3cad323152
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:09:54 2013 -0700

    altos: Add telelco-v0.2 project
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38d4110e59a44687d8a4743b8cd04cbf2761c9d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:08:03 2013 -0700

    altos: Allow LCD segments to not be multiplexed across digits
    
    This allows each LCD segment to be individually configured as to which
    COM and which SEG drives it, permitting maximum flexibility in wiring.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f09b2fc7fcfb1b3dcb1a46a8b9856092dd59866b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:05:18 2013 -0700

    altos: Clear any broken cc1120 TX fifo bits before transmitting
    
    This just goes and clears the transmitter before using it, just in
    case it got wedged somehow. It also clears the bits while waiting for
    the radio to go idle, otherwise it'd never make it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b878ca38045b1bee6ea4d649298727ac3fa197c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:03:57 2013 -0700

    altos: Make cc1120 driver wait for TX finished
    
    Otherwise, we may come in and try to use the radio again too quickly,
    causing it to go into a TX fifo error state.
    
    This change watches the MARC status until the transmitter is
    explicitly marked as finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f677a83348a9568679240ee9d731ab454f289831
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:02:12 2013 -0700

    altos: Provide timeout value to ao_radio_recv
    
    Instead of using ao_alarm around calls to ao_radio_recv, provide an
    explicit timeout value as needed by radio functions with more
    complicated system interaction than the cc1111. The timeout is 8 bits
    of clock ticks.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0488cd9cffc837e99490a0761216bbc5847ff400
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 22:52:23 2013 -0700

    altos: Build test framework for AES code
    
    Simple CBC-CMAC test with a constant 0 key and constant 0 data for now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3edbaa90fb7cb31fa0bd835a7c6c8930fd6dfeb6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 23:23:33 2013 -0700

    altos: Make telemega-v0.3 binary use the right name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 168188f6650dc9a777d57f9c7a8ff1be957bc892
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:23:48 2013 -0500

    altos/stm: Remove USB EP0 task
    
    Handl EP0 actions from interrupt handler. This allows USB to be used
    in a taskless environment, like the STM flash loader
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b6128d634c49e1790675ae8111e970b1af1f141
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:29:32 2013 -0700

    ao-tools/lib: Deal with binary USB data in debugging output
    
    Dump non-ascii characters in hex format.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3cbec0292d5167bce5c23eeea95f7a2d13bccc79
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:20:09 2013 -0700

    altos/stm: Always declare all romconfig variables
    
    I haven't figured out how to assign addresses for specific initialized
    variables, so we'll just have to always declare all of them and make
    sure that we add new ones at the end.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4551be8b03a795ece94fd303a1f556c63c0a0096
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:14:12 2013 -0700

    altos: Call ao_task_init before initializing any drivers
    
    When using task queues, the sleep queues must be initialized before
    any invocation of ao_wakeup or the OS will crash. Just make sure
    ao_task_init is always invoked early in the task process to get that done.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6dea353e732b6e19586c844796bc3bb848cc92f8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 10 21:05:34 2013 -0700

    altos: Expose ao_put_string function
    
    This works like puts, except it doesn't add a trailing newline.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1629acba4a63baae2c687ed56a17d02faf45f5e5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 2 23:14:02 2013 -0700

    Allow build without SDCC
    
    The AltOS directory handles not building the cc1111 apps when sdcc is
    missing already, so don't require it, just whinge if it's missing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7cce6c205e4595894e033ab8f0acc8064bf9f561
Merge: 75f8229d 55915098
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 29 17:24:43 2013 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 75f8229d4a8d7c9a28ea3d88fda72af0d1f1ccc2
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 29 17:11:48 2013 -0600

    add libssl-dev as a build dep since it's used in FAT filesystem test code

commit f2a8ac537d254cc08c0be9c16bf2d5cc03fd04fc
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 29 17:06:57 2013 -0600

    point to pkgconfig content in /opt/cortex so stlink stuff works

commit 55915098f2668e3a71568d51a9888dc4bdf40992
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 16:07:34 2013 -0700

    altosdroid: Add wish for persistent TBT and freq settings
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38a680e1407a80ff8ad19e1a90dd4e87b22fe922
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:37:36 2013 -0700

    altos: All STM ADC users need to declare HAS_ADC_TEMP
    
    Otherwise we can't configure the ADC unit correctly at boot time
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2717f14567c1fe1bb061024332c8022ef0e06049
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:36:11 2013 -0700

    altos: Build telemega-v0.3 by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cef4e3ee95037050ae859fb2fdc0a57373764bd8
Merge: fefc0210 f3ee7deb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 25 22:22:50 2013 -0700

    Merge remote-tracking branch 'origin/master'

commit fefc021045089ffd00d03e4c4e6cf42a13692828
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 25 22:21:26 2013 -0700

    altos: Add TeleMega v0.3 support
    
    Includes adding SPI support to the MPU6000 driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38206dd71e70565ded505a1e86257cd49b10bf9b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 25 21:27:03 2013 -0700

    altos: Add MR25 everspin MRAM driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ed83e34d1163c7fae0a205528c60dc83973082a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 25 21:25:39 2013 -0700

    altos: Make SD card driver compile without radio support
    
    The SD card driver blocks the radio when trying to access the card as
    that operation appears very sensitive to RFI. This fix makes the
    driver work when there *isn't* a radio driver in the same device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3ee7deb6b2fbae7e3c66fe0af0cba36378793f1
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 25 00:26:39 2013 -0600

    document need for an ARM Cortex toolchain in /opt/cortex, point to build docs

commit 90b0db1ae53182c94bf12d661446fc369d916366
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 15:53:04 2013 -0500

    Re-add telemega outline pictures
    
    after the great renaming
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9a6c4f71e02bb0073dcd030de735904494da81f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 15:15:03 2013 -0500

    altos: Re-generate TeleMega bits
    
    Lost in the great megametrum rename
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa7eac32adf4c2cdf441991d02411758f2682d1e
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 22 13:00:26 2013 -0600

    name change from MegaMetrum to TeleMega

commit 8c05f608c8f103649c1e5ec0d5742621e233af78
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 11:06:36 2013 -0500

    Move cortex toolchain to /opt/cortex
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f92ab336a258e8b1ddf58de33d6883251b9532d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 21 21:04:50 2013 -0500

    altosdroid: Add request for sat images to AltosDroid Notebook
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 045da152fae82712b937bc81f02c9531e042cbe0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 21 20:53:14 2013 -0500

    altosdroid: Add a few more Notebook entries
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27afe30176051fca816d85c1be265ac663ef851c
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Apr 22 13:50:35 2013 +1200

    altosdroid: Bump APK version, and re-upload.
    
    Didn't re-build altoslib for the previous APK!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 759376cd0aac61c5afce31aed27ef98aba791173
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Apr 22 13:50:13 2013 +1200

    altos: update .gitignore files
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b4ffb3ed36fc8696603616bf5f31b07fb3829614
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 20 23:55:06 2013 -0600

    document my snazzy new 4-pin to MM v0.1 debug cable

commit 45d638634e389bab61b0ee792420609eb8a9ad97
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 22:30:23 2013 -0500

    altosdroid: Add Notebook to track feature requests
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e28d3541b8da31ebef5a199baf8f544d238298e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 22:16:28 2013 -0500

    libaltos: Delay after opening bluetooth device on linux
    
    Writes immediately after the open disappear sometimes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02a564bbc3a23b4f90685e8b29083ddb3e4b3563
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 22:05:01 2013 -0500

    libaltos: Try Bluetooth open 5 times on EBUSY
    
    After closing Bluetooth, it can take a second before the device is up
    for another connection. Hang around retrying a few times.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6348186397dbef6da912586cea58d6663c511501
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 21:40:47 2013 -0500

    doc: Start filling in details about Altos Droid flight monitoring
    
    This is almost all identical to AltosUI; I think we'll want to share
    the two sections.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d49c16c6c33264952854b9f24bc737d92036449
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 17:38:15 2013 -0500

    doc: Add a bunch of Altos Droid material to the docs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6055ee0b7fb99f1b41ece8ba912bdd201ea35b1b
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:52:56 2013 +1200

    altosdroid: Release v1.2, push to play store.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 49caac78786014d443d9c05f47b5eb3070ec9bd3
Merge: 5b7bbf18 cbf38c55
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:51:07 2013 +1200

    Merge branch 'altosdroid'

commit cbf38c557a2046b6d6af3a9aebc0cef8e0dc5f11
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:46:41 2013 +1200

    altosdroid: Make the service class implement locationlistener
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c5b31a14e1ceeb9a33e0016f345832344d24ced7
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:44:07 2013 +1200

    altosdroid: fix up 'send last' code.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit cc674d8f991a3a055236ad8b51fecd99080540e1
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:41:50 2013 +1200

    altosdroid: check for mAltosVoice being null.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 7701e142f9e3a81c536c546c9a0abfb3ba709abc
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:41:28 2013 +1200

    altosdroid: set tab height based on screen density.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit a9e02e32cb10e5b5f17cd555bb28fdc205ac3612
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:40:58 2013 +1200

    altosdroid: Add filters for TeleBT bluetooth devices.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b0d6e2000d1b48859f5a276a5af254cc1a6cc9ad
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:40:33 2013 +1200

    altosdroid: incorrect property syntax in pad xml
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d1ca6b5805cb5e934e013463448b75dd4a3c864f
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:40:03 2013 +1200

    altosdroid: whitespace and import tidyup
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ecfc8a08147cfd179b341475333d68a39c978f0f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 17:16:50 2013 -0500

    altosdroid: Update distance/bearing on map tab
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5b7bbf183e558330d27702aa1bebf205f0e094aa
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 20 12:22:38 2013 -0600

    improve text in telebt turn-on script

commit ff332e640b27c6be37dabef58ebac350ac2347b2
Merge: b3000609 87d6ed24
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 17 10:41:05 2013 -0700

    Merge branch 'master' into droid-gps

commit b3000609e4010ff4d29debe72ea1866e775af539
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 17 10:38:54 2013 -0700

    altosdroid: Fix integer formatting in tabs
    
    Was trying to use AltosDroid.number for integers, which didn't work as
    it expected doubles.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 87d6ed24f3650981ae1ff9bfdb0298d2c01e7575
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 16 17:47:17 2013 -0700

    altosui: Disable main deploy setting for TeleGPS
    
    Just like all of the other flight computer settings, disable the main
    deploy altitude configuration for TeleGPS.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a03aaaca60ccb4b44595e5e1c1047d07d8b6d60f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 16 17:33:42 2013 -0700

    altosui: Handle broken network in map tile loading
    
    Handle missing pngfiles in AltosSetMapCache by checking ImageIO.read
    for null return.
    
    Do incremental map tile downloading asynchronously so that the UI
    doesn't lock up when the network is slow
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2640c09c76ce32e471dcf6df83095d146bb39a2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 16 14:22:23 2013 -0700

    altosdroid: Check for missing values
    
    When displaying numbers, check for MISSING values and display nothing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d5a557004c00d1ae25da04dc63c78b816562a236
Merge: 6592a5be 5b041769
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 15 23:26:33 2013 -0700

    Merge branch 'master' into droid-gps

commit 5b041769dc926f0aa18072f46abca60b11ede44b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 15 23:25:55 2013 -0700

    altosui: remove debug message from AltosFlightUI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6592a5be127a9c95d3b2e7d5aa6ffba71c6748b9
Merge: c6f85cb1 eba3aa94
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 15 23:19:44 2013 -0700

    Merge branch 'master' into droid-gps

commit eba3aa949decacd5592472a3cda920aa6a06d96f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 15 23:14:22 2013 -0700

    altoslib: Check for null state.gps before accessing it in eeprom records
    
    Used to be we'd set state.gps to garbage before seeing the first GPS
    record; now we leave it null, which will cause crashes for code that
    doesn't expect it. The code for reading and replaying eeprom data was
    not checking and was nicely crashing as a result.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6f85cb149dff8732104521cb62b355e8a0d7148
Merge: 3cd8ff18 58dd4b88
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 14 20:02:10 2013 -0700

    Merge branch 'master' into droid-gps

commit 58dd4b88fe738e005a13dfd69651853ea7f79205
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 14 14:54:52 2013 -0700

    micropeak: Oops. Lost the call to actually start downloading data
    
    Lost when adding the 'help' text somehow; presumably a debugging issue.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3cd8ff18a7546c1e251747ba26240cb130003ef1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 13 12:13:18 2013 -0700

    altosdroid: Update UI even if no telem has been received. Center map.
    
    This allows the receiver location to be displayed even when telemetry
    is not.
    
    Center the map on the first valid location, either receiver or
    rocket. Update center if a significantly more precise location is received.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 192bc28fbe2a8613d0b42e4fb3f7674a1a50abc7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 13 11:45:23 2013 -0700

    altosdroid: Get rid of a couple of startup messages
    
    These are just annoying
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4b6fc3238ad9911fd40ef25accf82a401cb190f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 13 11:39:14 2013 -0700

    altosdroid: Show our position in the map tab. Squeeze to fit phones
    
    Shrink everything to fit on phones, then add phone location to the map tab
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f7015afcca7c6042365d2124d3a5b7219e8e588
Merge: 5077f3ad 778daf0c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 13 10:51:04 2013 -0700

    Merge branch 'master' into droid-gps

commit 5077f3ad1967a33712e9ff411e3b2a0b4e1a5c4a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 13 10:50:26 2013 -0700

    altosdroid: Shrink text so it fits on my phone
    
    Yes, this is a hack; will try to figure out how to make it resizeable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 778daf0ccbd8a073da33497e33c29400d0ecc464
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 13 10:39:14 2013 -0700

    Windows: Add all of the AltusMetrum USB IDs to telemetrum.inf
    
    This should make Windows load the driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 25c01719f17be8da73a859867c14df0fc29b5441
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 11 22:16:03 2013 -0700

    libaltos: Retry Windows serial port open five times
    
    Maybe this helps?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 679401fff981b675dd5a188c64e8940254588800
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 03:09:16 2013 -0700

    altos: Make sure the packet format is set reasonably for radio test
    
    Dunno if this matters, but it might as well be set reasonably
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1430c48cfef1ef21831205f4fadd26ca6c7f5dbe
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 00:55:59 2013 -0700

    altoslib: Remove spurious debug message
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdbf8053658c71a657005af68202023d0b4af1fe
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 02:42:37 2013 -0700

    altos: Don't include bufio debug commands by default
    
    We shouldn't need these
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c54bd59780275ece87eafb8143cf0637b35e794c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 02:35:15 2013 -0700

    altos: Stick a mutex around FAT operations
    
    This allows the command line and logging operations to occur safely in parallel
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e6e2ca60c65a4fe2bee0bd8b9b89d45a7dbcfb3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 01:55:33 2013 -0700

    altos: Delay while waking up SD card a bit
    
    This seems to make bringing the card from idle to ready mode more
    reliable. If you spam the card with requests, it will eventually
    whinge and shut down communications.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 19ef593be9ff3f329e44472735d90c80129d2795
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 01:04:55 2013 -0700

    altosdroid: The Map already draws our location; no receiver marker needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ec6fb3b9cec0f864d6e65d0cc6b4dd42edd3e16
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 01:00:36 2013 -0700

    altosdroid: Check state.gps != null before using it
    
    Avoid crashing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02243463adbdfb860f69580f544da9026dc7cbd4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 00:55:59 2013 -0700

    altoslib: Remove spurious debug message
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9212ce268f3a4a9f3f019f23f6eef8b57207d340
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 00:19:24 2013 -0700

    altosdroid: Compute course from android device to rocket, display it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f02bb1df132443fc27b69f23f382ea87e610f533
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 11 23:56:47 2013 -0700

    altoslib: Add range and elevation to AltosGreatCircle
    
    Move the computations from AltosState here so they can be re-used elsewhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a8cc23de5776ea3fa2bdc96cbe63422eb555d63
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 11 22:39:14 2013 -0700

    altosdroid: Mike was right -- only need one LocationListener
    
    I mis-read the docs and thought we needed two listeners, one for GPS
    and one for network position. Looks like we don't
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83ce46c73b0e876f9f630943af19ea97b3a21d3c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 11 22:34:36 2013 -0700

    altosdroid: Send LOCATION and CRC_ERROR messages to UI.
    
    This collects all position changes and crc error increments and sends
    them along to the UI for presentation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f88d345c407e409611448d0e8813ab5a6de0a0b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 11 22:16:25 2013 -0700

    altosdroid: Hook up the position listeners
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81730670b6848bebb2c6a8ac7813419112f2779a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 9 14:53:25 2013 -0700

    doc: Add an outline of an AltosDroid chapter
    
    Not much content yet, but I think this is pretty much the sections we need
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07fb6efc54b8575627572a2113bdbc62914bafb5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 9 00:38:25 2013 -0700

    altoslib/altosui: Adapt monitor idle to new AltosListenerState
    
    Move the receiver battery monitoring to the new spot
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 398c02b945a58634c8932f07df2c2be8438da7d1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 9 00:28:05 2013 -0700

    altoslib/altosui: Carry receiver status around in AltosListenerState
    
    This moves the crc_errors into the new structure and adds a receiver
    battery voltage value there as well. Now the receiver status can be
    monitored separately from the flight status. That also means that code
    receiving state updates should be prepared to accept missing listener
    or flight state values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08eb1e3e1abb1aa4f5ea92b781a2ff8f480006c5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 8 17:42:18 2013 -0700

    altos: Monitor battery voltage on telebt
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ba0df9b440b69bf5bc5f4e435b431adf303fee2
Merge: 1d3ab47d 28adf554
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 8 18:02:37 2013 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 28adf5541354715b185dbb45b28c97c7d9cf8bcd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 8 16:48:40 2013 -0700

    altos: Create telebt-v1.0 product. Remove old telebt products
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d3ab47d82fe005ab6854386c0ffa5771ee49bf6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 8 16:48:40 2013 -0700

    altos: Create telebt-v1.0 product. Remove old telebt products
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c0dc761095a5a77c87c3b4dcd1d42a4e79f6604
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 6 23:48:36 2013 -0700

    altos: Try RDF mode for TX calibration
    
    Trying to get the radio to stop modulating the carrier when
    calibrating the radio, we'll try RDF mode which says no preamble or
    sync data. This might shift the frequency though?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30c397296bcdaceb4c2c9d0509dc591b489ece02
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 17:44:06 2013 -0700

    altosui: Graph TeleMini flights without crashing
    
    Adding maps to the graph UI failed to check for missing GPS data in a
    couple of places causing crashes when fed a TeleMini file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 67b8bdb4ea8c22688d4f18416593346585595cfa
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 17:29:40 2013 -0700

    altosui: Display current GPS in 'pad' tab for 'startup' staten
    
    This is the state for telegps, so just display the current GPS info as
    we don't know where it started at.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 907cc6c50755c0d19b93c15678d6f3022a6ee10b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 16:48:05 2013 -0700

    altosui: Hide flight-related tabs for telegps
    
    Products without a flight state don't need ascent/descent/landed tabs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e747156d0ea4b62eea30a8f486ee105ee35dcaf5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 16:47:07 2013 -0700

    altosui: Don't display missing sensor data
    
    For devices without sensors, don't display temperature, barometric and
    accelerometer-derived values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 997cdef3fe04acdd566d287e70981f7b7934d0c8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 16:44:58 2013 -0700

    altoslib: Make any incoming telem packet update the RSSI value
    
    Every packet has RSSI info, so use the latest one available. This
    makes telegps RSSI available as it never sends sensor packets (having
    no sensors).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0cd203e418e73a1f11460425985b7575c2f0a76c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 16:43:53 2013 -0700

    Set telegps USB id to 0025
    
    It was accidentally using the same ID as megadongle...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96c32125a780ad6b39c015f4abbae07fead68582
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 16:41:29 2013 -0700

    altos: Shorten SD initialization timeouts.
    
    This makes failure when no card is present much quicker.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 985df526ec142258ef990d0b55b0a14e13c099b4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:39:35 2013 -0700

    altos: Horrible kludge -- disable radio while talking with SD card
    
    The SD card really doesn't like the RFI generated by our enormous
    radio, so just lock the radio out while working with the card.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14c63f94f36a95272d91695039abf54efb423a91
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:10:14 2013 -0700

    altos: Add defines for the specific pins used for telegps SPI
    
    These aren't needed at this point, but who knows?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b34370cea662eb245e43aca20a6650b84b55ef6f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:08:18 2013 -0700

    altos: Retry SD card I/O. Use time for timeouts instead of counts
    
    Sometimes I/O operations may fail; give the card a chance and retry
    the operation in case it works the next time.
    
    Replace the loop counts with loops that check the clock so that
    they'll have consistent timeouts even if the CPU or SPI speed changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3a41bed39ec1abfc3ab74e9be7dd393e975542b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:07:06 2013 -0700

    altos: Provide build hooks for sampling profiler in telegps
    
    Might prove useful if the CPU is ever doing anything?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fae116fbebb9658fe15690ff43dfe8568a58c2a9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:06:03 2013 -0700

    altos: Add a FAT test that re-writes the same file multiple times
    
    This caught a bunch of FAT cluster chain allocation bugs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 79d01a571935138b24b86a7181307ee014d248ed
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:03:57 2013 -0700

    altos: Support open on multiple simultaneous FAT files
    
    Need to be able to see the contents of a log file, even if the logger
    is running.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0838b6c8797b84cf8df8f92ee20fb6ae79e434d7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:02:14 2013 -0700

    altos: Make sure FAT cluster allocation works for size zero files
    
    There were some rounding errors mis-computing the number of clusters
    needed, and the logic to figure out how to re-connect a chain was broken.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 76bd204de744c34e5cbf6efa93adb89bc2cb08b3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:00:21 2013 -0700

    altos: let FAT tracing work in ao_fat_test as needed
    
    This allows the FAT DBG hooks to be enabled even if some other module
    turned DBG off.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a764bf06d0975cbf1620b079351c7437053ea1a8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 01:58:37 2013 -0700

    altos: Flush the on-board mega log after every sample interval.
    
    SPI flash parts don't need flushing, but the SD card does. Make sure
    the SD card contents are sane after every logging interval has passed
    by flushing all dirty blocks to the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2de64b10894b366398a8b37ebd2305d9be46d46
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 16:11:27 2013 -0700

    altos: Create the log file if it doesn't already exist
    
    open will return failure unless the file already exists.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 659a6915f5ba5129096e55ccc04c975d216546ae
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 16:10:33 2013 -0700

    altos: Make ao_fat_readdir return real error values instead of 1/0
    
    This way, we can distinguish between 'something bad happened' and
    'you're at the end of the directory'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 182ceaac7d91dc6e9ebac6455d5de0c10687796b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 13:55:16 2013 -0700

    altos: Increase SD card timeout at startup time
    
    Sometimes the SD card takes 'a while' to go into idle mode at first
    power up. Just hang around waiting for a long time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d813566cdc4d43a43ed988dde4a3ceeccf24efe6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 12:46:41 2013 -0700

    altos: Fix command-line FAT filename parsing
    
    Pad extension with spaces
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db01557ce493c435db177fda78653697ba2afa51
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 23 02:10:38 2013 -0700

    ao-tools/ao-stmload: Be smarter about ELF parsing. Retry open on failure.
    
    Figuring out what goes where is tricky; turns out we want to pull all
    of the sections that map inside any program area that is supposed to
    be loaded from the file.
    
    So, we walk the program headers, then walk all of the section headers
    looking for those that suck data from the same portion of the
    file. Compute where in ROM each relevant section goes and build a full
    ROM image in memory using that.
    
    This patch also adds code to close and re-open the device if the first
    open failed to do what we want. Much nicer to have the computer figure
    out when the open succeeded rather than having people re-run the app.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 144b44e13ce3361ff59cbb555e84d542455a4e17
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 12:39:32 2013 -0700

    altos: Unmount file system after each testing pass in ao_fat_test
    
    Otherwise, we use stale data and 'bad things' happen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a70139c9a8a177df8f20f525703b13c0aec0fbc7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 12:29:37 2013 -0700

    altos: Don't add fat commands when building ao_fat_test
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b2f211758dfa97230a730b8c4b31e0e711c19c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:04:57 2013 -0700

    altos/stm: Always check for idle IN buffer before sending
    
    Unlike the AVR and CC1111 USB drivers, the STM usb driver queues IN
    bytes in a local buffer instead of in the driver; this means that the
    driver is queuing bytes while the previous IN packet is queued for the
    host, which allows for overlapping execution.
    
    It also means that when the local buffer is full, we must check to see
    if the host has picked up the previous IN packet before trying to
    queue another IN packet for transmission. This is done by always
    waiting for the IN buffer to be ready before sending data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit de199601a177fc2d45ad9bd7357111111844d40a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:03:59 2013 -0700

    altos/stm: Add debugging mechanism to STM USB driver
    
    This adds a pile of debugging hooks to the USB driver to try and
    isolate various lockup-related issues. It's all disabled by default,
    of course.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4f1f3e836393304434130d362771a39f6f8f859a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:00:20 2013 -0700

    altos: Do not release interrupts from any pollchar function
    
    getchar relies on interrupts being blocked across the pollchar calls
    and into the sleep call or it may go to sleep with data pending.
    
    This prefixes all pollchar functions with _ to indicate that they are
    to be called with interrupts blocked and eliminates all interrupt
    manipulation calls from within the pollchar functions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7afcec1a1dce140dfa569469df4ef42ed407a742
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 12:23:31 2013 -0700

    altos: Add sdcard read/write tracing
    
    This just dumps info in trace mode about read and write commands
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0595d94c7deea29d9e3d4bcbc106b9bed5ee103
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 12:22:28 2013 -0700

    altos: Move fat mount information to separate command.
    
    This makes the mount report precise error information and then prints
    that with the 'M' command.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0628541e1bfc3e4a122cc824188ed53fddf733e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 12:21:03 2013 -0700

    altos: Disable CC115L debug commands
    
    now that it appears to work, leave these disabled by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8826b1ad5487de9345b7dcaf6c75a45117ff538
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 10:35:47 2013 -0700

    altos: Add SD card writing function
    
    Now that the FAT code seems to be operational, go back and add
    SD writing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 649999863c7228ead0225968752d068dc0d30091
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 30 01:33:49 2013 -0700

    altos: Add logging and telem to telegps
    
    This turns on telemetry, APRS, RDF and data logging for telegps.
    
    Data is logged as soon as GPS has a date to create the right
    filename, using files of the form YYYYMMDD.LOG which just barely fits
    in a FAT filename.
    
    Telemetry/RDF/APRS are all separately controllable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3d8956df3a3ecb3918b5db4d78b057d68541c33
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 30 01:32:30 2013 -0700

    altos: Export ao_fat_sync and ao_fat_full functions
    
    ao_fat_sync() flushes the bufio data to disk along with any fsinfo
    changes. ao_fat_full() returns whether the file system is full.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7455a892e8bf5402e7ff2c4bd2ddad05dfe76638
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 30 01:31:12 2013 -0700

    altos: Lock cc115l radio mutex when using global radio values
    
    This moves the locking up above the global state variable uses so that
    multiple radio users (as if we had any) won't collide.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd32140df2a595ce66d603b98516bae519327c5d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 30 01:30:18 2013 -0700

    altos: Configure cc115l sync byte count for each radio mode
    
    two sync bytes for packet mode, disable sync for rdf/aprs mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93a9aa703a0173e13b327ed432e6d52e90ebfa1b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 29 17:05:36 2013 -0700

    altos: Get CC115L radio working.
    
    This involved figuring out which GPIO signal would reliably indicate
    that the transmitter was finished; I ended up using the PA_PD bit for
    this.
    
    This also converts all of the radio users to the long packet support
    as the CC115L has only a 64-byte fifo, not large enough to hold either
    an RDF tone or a regular AltOS telemetry packet.
    
    This also renames the public API for sending APRS packets from
    ao_radio_send_lots to ao_radio_send_aprs, which is at least more
    accurate. The workings of that API haven't changed, just the name.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9aeed244879f90b5b6dab1c7ca095cc001b03fe5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 29 12:13:59 2013 -0700

    altos: Add temporary RF power settings
    
    These expose the raw cc115l and rfpa0133 register settings so that we
    can calibrate them against measured power outputs.
    
    I've tested them to verify that they change how much power the board
    consumes, so they're clearly doing something...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 86e1039e14304ac13db540f2ee3afd4ff170b8b4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 29 00:32:23 2013 -0700

    altos: Add FAT32 support. And lots more testing.
    
    Generalizes the FAT code to deal with either 16-bit or 32-bit
    versions. The testing code now runs over a variety of disk images to
    check for compatibility on all of them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44e418bbecd3a3deae942803141cf115d92f29d2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 28 17:38:14 2013 -0700

    altos: seek forward on FAT cluster chain instead of restarting
    
    This improves sequential file performance by taking advantage of any
    previous cached cluster/offset pair and starting from there when the
    cluster changes rather than starting from scratch at the begining again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8101e4af199a3d79bff434f788cce9f97aeac53a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 28 16:57:02 2013 -0700

    altos: Add a simple cache for the FAT position->cluster computation
    
    This improves read/write performance with large files by not
    re-walking the cluster chain for every operation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7b606e93a4e4fbd2c0e883352ed74619ee24cf7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 28 16:05:24 2013 -0700

    altos: Clean up fat driver API. Improve fat test
    
    Make FAT api provide reasonable error return values, change the tests
    to write and then read a pile of files, checking that the contents are
    correct (using md5sum).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1fe0654b45cc8f944394308cf29945b537becc4
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 28 15:55:35 2013 -0700

    altos: Add sanity checking to busy counts in bufio driver
    
    Make sure the busy counts don't underflow or overflow.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6fe32e0fc407522101e805cf2653253cb3cee291
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 27 22:11:53 2013 -0700

    altosui: Don't deref null pyros when saving altimeter config
    
    The check for no pyro config is to compare npyros against zero rather
    than check the length of the pyros array as the latter may be null.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 985cd22b941415b1ae2709ae1ab6b60c3d815ec1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 27 18:43:42 2013 -0700

    altos: Use FTDW, clear DATA bit. Disable backup write protection
    
    The newer(?) chips in telegps didn't like the previous programming
    scheme, so go back to fixed time for write, which does an implicit
    erase before every write. Also clear the DATA bit, which is only
    needed for double word erase/programming.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4a68878a66508e6f1523cd813b2e37bcf2e90ab3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 27 01:25:24 2013 -0700

    altos: Teleshield has a radio, set HAS_RADIO in ao_pins.h
    
    Otherwise, lots of random code won't know about the radio..
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 561175afebc63ec3d2f8f7305235c9812ceaf501
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 27 01:15:04 2013 -0700

    altos: Add new panic flag for bufio misuse
    
    Allow the bufio code to signal a fatal error if someone misuses the API
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd43955ff0c4d39a685b79e91cb62898a5f1b875
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 27 01:14:15 2013 -0700

    altos: Hook up the FAT16 and SD card support to telegps
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e14834817f78a04b4d9b44a8373119dffd42c966
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 27 01:12:33 2013 -0700

    altos: Add SDCARD and FAT16 filesystem support
    
    This adds a fairly primitive FAT16 file system implementation
    along with support for SD cards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 747114786512339211d4981a7828c8c6f1f46c20
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 26 14:28:37 2013 -0700

    altos: Fix config to not abort radio recv when no recv is available
    
    Use the new radio recv define to skip disabling the receiver when
    there isn't a receiver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 237e853b820b01409562b93b82684e5147286806
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 26 14:27:46 2013 -0700

    altos: Allow radio recv and xmit to be separately configured
    
    The CC115L is xmit only, so split out the functions and provide
    defines to check for xmit or recv separately as needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d187460bdcb97bf6d0a3550e4e03c4c223e4cc1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 26 14:26:38 2013 -0700

    altos/stm: Ensure SPI always sends 0xff during receive
    
    SD cards require 0xff when fetching data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 136ca0922e968d650e9e420a47d228611a3cb45e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 26 14:25:48 2013 -0700

    altos: Improve CC115L driver. Generates carrier now.
    
    Still no data, but at least the carrier comes up on frequency now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4889b33af9700b9d872364f0cadaf9425cf84a7d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 26 14:24:45 2013 -0700

    altos: Add RFPA0133 amplifier driver
    
    No configuration of power level yet, just the bare driver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6fe1e32f5361e901b88b63a30f070e67d460ada1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 23:52:14 2013 -0700

    altos/telegps: Hook up cc115l driver
    
    Doesn't actually do anything yet, but should initialize the chip at least
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ddfb3ea07c2073f8c4d79feaf262c9fb910cfce
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 23:51:11 2013 -0700

    altos: Add cc115l driver (untested)
    
    Includes support for sending telemetry, RDF and APRS tones
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15bc83a0eaaa9a43d67fdc3e9f412d5b2c1f06dd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 20 23:22:37 2013 -0700

    ao-tools: Make library support µPusb
    
    Set baud rate to 9600, look for FTDI-style names
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50dd268a715224a01f8a6b481670a4ae6621cb28
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 20 23:21:37 2013 -0700

    Add telegps initial version
    
    Just lights up the GPS and USB
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 548cf57d5a5ea323bbfc3605b44c23fc48dec96b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 18 22:12:48 2013 -0700

    ao-tools: add ao-dump-up
    
    Dumps out a µP log. Useful for µPusb bring-up
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d171d10d97307a1a1a62e660e9194121b79a09be
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 11 18:16:55 2013 -0700

    micropeak: Improve download docs and UI
    
    Add text explaining that the LED and phototransistor must be
    touching to both the doc and the UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 90ee11542b111befa0e96e27292dc548e5c37396
Merge: 97efce5f d7973de3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 10 11:43:06 2013 -0700

    Merge remote-tracking branch 'mjb/altosdroid'

commit 97efce5f7ff227aaa8990529217d3d10db3443dc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 10 11:41:49 2013 -0700

    altos: re-enable optimization for stm-demo. remove unused bits
    
    This makes stm-demo run on the discovery board again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7973de32adff5402844cc1e1da3eced05265074
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 23:28:26 2013 +1300

    altosdroid: Add map polyline between pad and rocket
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b691fc48f5e879045e68e070162af56cd08f03b4
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 23:27:28 2013 +1300

    altosdroid: Add rocket and pad map markers
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b7c82b867b12ca016164725f3736bc5b55048999
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 20:40:13 2013 +1300

    altosdroid: programmatically create map fragment
    
    * Allows reliable fetching of a GoogleMap handle.
    * Set map options, initial location (NCR North for now, temporarily)
    * Add some info fields below map, and update them accordingly
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 8adadf6bd2ba623642675e4beafac4ac98b1916d
Merge: d029acad 0c0c6d60
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 20:24:56 2013 +1300

    Merge branch 'master' into altosdroid

commit 0c0c6d60cdce39582fa5350e9b016a08e76f27a1
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 20:24:15 2013 +1300

    altosdroid: Add SDK checks to configure.ac
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c2d966a8ca9dcf6ccf5c268c616cf1384d45002d
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 20:22:51 2013 +1300

    altosdroid: adjust clean targets to get rid of automake warning
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 988e9079e20133554acfecc74a109195688c2752
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 20:22:09 2013 +1300

    ao-tools: Add ao-edit-telem to .gitignore
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d029acad6a992be9b7b4498e70605f8a1e1a4ef6
Merge: eba7b2ef 72c5b142
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 19:07:01 2013 +1300

    Merge branch 'master' into altosdroid

commit 72c5b1429bdfd6e9d2185bad7d0adb281fdf659a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 9 20:40:52 2013 -0800

    ao-tools: Add ao-edit-telem
    
    This lets you edit a telemetry file. The only current editing
    available is to change the pad location, allowing a flight to be
    replayed anywhere in the world.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b460d38bc2685bca7f530b7749c0e0381f6264c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 9 20:39:31 2013 -0800

    ao-tools/lib: Add cc_telemetry_unparse
    
    This takes a telemetry structure and generates a string version
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0803da851e2e061affc172fdde6301652d1be755
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 9 20:37:38 2013 -0800

    altosui: Add N/S and E/W to info table lat/lon values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eba7b2ef8ef23bdb61b0390e47be6f27ffde31dc
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Mar 8 19:41:32 2013 +1300

    altosdroid: fix side-to-side scrolling in map tab
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 84d35e4cbd7ea2f681c43496b9b9db84f9dd923f
Merge: 760b1f02 e0d9128b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 7 13:00:44 2013 -0800

    Merge remote-tracking branch 'mjb/altosdroid'

commit e0d9128b7219b4c8ee68245a44b3428e796ca2f1
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:37:51 2013 +1300

    altosdroid: Auto tab changing
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ecfc568574ababd23b2c4dc1323cb7265c097933
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:37:22 2013 +1300

    altosdroid: implement Age field updating
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 86b742743b26693cf8e56034d4ea68ff277931c1
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:35:43 2013 +1300

    altosdroid: implement UI updating on tabs
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 2a81d637308e680b99d7218ba9e03c9ade6626f1
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:33:27 2013 +1300

    altosdroid: implement tabs interface
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 59dfcbe14622c20aaa7d5b131eece9f4c8db6887
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:28:45 2013 +1300

    altosdroid: Import initial versions of XML and Java for Tab content
    
    * Includes TabsAdapter class borrowed from Support Library sample code
    * New "GoNoGoLights" class for dealing with the red/green/gray LEDs
    * extra required strings in strings.xml
    * Couple of support functions in AltosDroid.java
    * rudimentary Maps tab - does nothing at present.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d6f1b176f4005af3b6fd16d8c7d22260a3ccdfd8
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:20:47 2013 +1300

    altosdroid: whitespace cleanup
    
    DAMN my OCD.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d229d702c8532f477e2ace2af36f2d0cc6e728d3
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:20:06 2013 +1300

    altosdroid: make AltosDroid.pos() static
    
    * Will be used from tabs that display lat/lon
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit cf03ddb42042002bfb88e13ecfb89b27e7aeb91e
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 20:53:26 2013 +1300

    altosdroid: convert spaces to tabs in strings.xml
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 89f8bb52ea858f059374474c0adda3cd5095a589
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 20:49:41 2013 +1300

    altosdroid: adjust release Makefile target
    
    * Rename target
    * Add dependency on unsigned release APK
    * use $(ZIPALIGN) variable
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 6ff45bef719bafd2c827e479186c8fadf6f779aa
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 20:48:16 2013 +1300

    altosdroid: Symlink red/green/gray LEDs via build system
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 795fba09a3ca273cd2daeeb7d9fed6bae6fa6a86
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 19:23:39 2013 +1300

    altosdroid: Adjust build system for GMaps & Tabs support
    
    * Use SupportV4 library for Tab support
    * Use Google Services Lib for Google Maps
    * revert to a standard Android target, not Google API's
    * Add permissions required for Google Maps to manifest, and API key
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b7dc6045892b33b04ec7c27bdc940b4d3e1b9cbf
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 19:05:43 2013 +1300

    altosdroid: adjust Makefile rules
    
    separate altoslib linking and, making of external lib directory.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 353372425550177cf0531a05706491a96414d12c
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 19:02:48 2013 +1300

    altosdroid: use a glob for source files
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 1c9a3a5080ca0e21f45c2b7ea889793645796751
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 18:59:30 2013 +1300

    altosdroid: Only update BuildInfo.java when other source files change
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 10042fed36d19c1b21b8f04c57da708afc085b25
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 18:54:45 2013 +1300

    altosdroid: Fix up some formatting in manifest
    
    (And add flag to allow settings backup by google services)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 760b1f02c178c600226f39b5e66d8cbadbf4a29b
Merge: afd26742 cbad587b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 6 21:53:22 2013 -0800

    Merge remote-tracking branch 'mjb/master'

commit 5560148ffea1a718a303d999a0f8a625deceef23
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 18:51:27 2013 +1300

    altosdroid: minor whitespace cleanup
    
    (damn my OCD!)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 9a54e278298540582b91ff3eda476265082e890c
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 18:46:32 2013 +1300

    altosdroid: update copyrights/licensing
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit afd2674261e128a0ecff8fbf5dd6a64196b026f6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 4 19:44:30 2013 -0800

    altoslib: Invalidate GPS new data bit when updating state
    
    Somehow this line got lost when the GPS ground altitude fix was made.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3605e97ee918b3f87e4c471906f708c3ea027eef
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 3 16:53:52 2013 -0800

    ao-tools: Add ao-dumpflash program
    
    This program dumps the entire flash contents of an AltOS device to
    allow for external analysis.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 784edcda52d681bbc9302fbc7efb80cb214f71b8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 2 17:46:29 2013 -0800

    libaltos: Open FTDI serial devices twice on Windows.
    
    Looks like the Windows FTDI driver has 'issues' and opening it only
    once doesn't work correctly. Just close and re-open the device and it
    seems to be perfectly happy.
    
    Who knows?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb09076fe16d28e25f5b20b2178cfad10adbeddb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 1 20:48:28 2013 -0800

    doc: Add version 1.2 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9cba68049f957d69a88150470c086dd6f4a42c0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 1 20:45:43 2013 -0800

    doc: Document how to get TeleMini to 'emergency recovery' mode
    
    TeleMini needs emergency recovery mode in case you forget the radio
    parameters and need to get things back to a known state. Add
    documentation to describe what this does and how to get it enabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 113b1146f6ac0ecd423f3fb409e02730604b8aca
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 1 12:34:04 2013 -0800

    altosuilib: Disable graph element notifies for each add()
    
    This reduces the number of notify calls made and dramatically speeds
    up graph creation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 351e4110f519d18bb36747955578e9e5b9aeec7b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 1 12:28:34 2013 -0800

    altosuilib: Add setNotify/fireSeriesChanged methods to AltosUIGrapher
    
    This will let the data adding functions disable notifications while
    adding all of the graph data, and then send a single notification when
    the data sets are complete, which speeds up creating of the graph
    elements quite a bit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0bd0093a65b73a178da6ddcafcc4dbaa3caca39
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 24 01:20:41 2013 -0800

    altos: telescience-v0.2 is an ARM product
    
    Move it from SDCC to ARM targets as Jenkins doesn't have an ARM compiler.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9230f0a5b119044235c0c419e85a83115aae924d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 24 01:20:16 2013 -0800

    altos/driver: Make HMC5883 driver build again
    
    Adapt to changes in OS interfaces
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2120d362cefceba69e75996b6391d9558978c01d
Merge: 5246acb7 a04c4f7b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 24 00:20:54 2013 -0800

    Merge branch 'telescience-v0.2'

commit 5246acb70b79980de36bd5d0ba0d017529ae9a78
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 24 00:20:36 2013 -0800

    Update build version to 1.2
    
    Prepare for 1.2 release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 25435dcbc6416935aa432fc090ea977bfff5d153
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 24 00:19:49 2013 -0800

    altos/stm: Add more bits to NVIC register definitions
    
    This cleans up a few values, adds more comments and a few more NVIC fields.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbad587b49c565edd2c9356a015d6cfd52df93a3
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Feb 15 22:09:16 2013 +1300

    altosdroid: excise old code/xml
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5e53a485310cc11e6add077fb4bd0b0267734ff0
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Feb 15 21:59:08 2013 +1300

    all: clean up .gitignore files and Makefile clean targets
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit be8eecc4117a14139e4421ce86b67d29a0f0c3d4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 11 11:40:38 2013 -0800

    altosui: Fix AltosLanded call to AltosGraphUI
    
    Changed the argument from String to File but forgot this one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59365eb4e1f63a1ced1667ac233058a06a8eecef
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 11 10:34:47 2013 -0800

    altosui: Remove graph series which aren't available
    
    Make sure all graph series have actual data underlying them by
    checking the available data before creating the series objects.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a9ca1dcd00da2cfdd0a2ea616308dfb64ee80d4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 11 10:31:24 2013 -0800

    altosui: Stick file basename in graph window title
    
    The title was empty before, this seems more useful than that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a4cd7b9b318ddea5d1dcc71918819f11256ca94
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 11 10:24:34 2013 -0800

    altosuilib: rescale axis when enabling data series
    
    This makes sure new series are visible when you enable them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 169a6d51718d6b9fae757df9950d2e960d1c8c1d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 19:33:50 2013 -0800

    micropeak: Remove Info.plist
    
    It's built from Info.plist.in
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 64399500ad1a7ad70452cbda4d60723b5904ca3d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 19:01:41 2013 -0800

    Build Windows .nsi files in configure script
    
    These need the library version numbers embedded in them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbd9dd989a662f41ddcb0c9e0f4453840687fd4a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 15:34:56 2013 -0800

    altosui: Add map and GPS data to graph window. Trac #50
    
    See where the rocket landed without having to replay the whole flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0a125503e502d213711df0d7774d837d4d98447
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 14:56:10 2013 -0800

    altosui: Display count of erased flights along with their numbers
    
    An attempt to clarify what's going on by providing both a count and
    the flight numbers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17455da530833d3db03ee2ace7b15130ed307670
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 14:51:46 2013 -0800

    altosui: Display block number while downloading flights. Track #51
    
    We don't know how long the flight log is, but we can at least provide
    a block number in the pacifier to let the user know it's not wedged.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9cf50c9f29f42cc3ca0daff3c69a4087cf9aa1c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 14:40:48 2013 -0800

    altoslib: Fix available flight log storage computation
    
    number of flights was off by one as it was initialized to -1
    storage erase unit wasn't getting fetched correctly
    flight_log_max is in kB, not B; need to multiply by 1024
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 504cf412e8b60b5ff2dea93ed3336f0e058dea62
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 14:18:16 2013 -0800

    altosui: Display callsign in connecting message window
    
    When waiting for the remote end to respond, display the callsign along
    with the frequency so that the user remembers that it's important to
    set that too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2701ae646124f0668c5f2d1df3fc80f0075a9d7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 14:17:04 2013 -0800

    altosui: Interrupt MonitorIdle when changing frequency/callsign
    
    When switching radio parameters, the local device needs to have the
    parameters switched, so interrupt the current operation and start
    over, the frequency and callsign will be set the next time through.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc0ea39fee73417ecd69c020d9eca723ebb2cf65
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 11:58:36 2013 -0800

    altosui: Add callsign to Monitor Idle window (Trac #62)
    
    This makes it a lot more obvious that the callsign is relevant to the
    Monitor Idle process.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf88c5f829ea5d32043431945e862a9f6c96740a
Merge: 32270296 d05a7799
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 01:21:52 2013 -0800

    Merge remote-tracking branch 'mjb/master'

commit 32270296671aac3b3ba15f9c1777bcdd77b9c36c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 00:40:59 2013 -0800

    altosui: Adjust graph voltage tool-tip value format
    
    Voltages are always small, so use more of the space for the
    fractional value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5fb03421751b342dcd450caee49a608d8828175
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 00:32:26 2013 -0800

    altoslib: Fix a couple of unit functions to make them public
    
    Nice to be able to use these outside of altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2efd3ad80d4fefa8ccc1b80a2e657dbf9ba0c60f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 00:29:29 2013 -0800

    altosui/altoslib/altosuilib: Switch altosui to shared graph code
    
    This adds a configuration tab to the graph window to enable/disable
    various plotted values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0169e56ad030c0096b1068d00f06957990dfb31f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 20:24:33 2013 -0800

    altosuilib/micropeak: Add state markers to micropeak graph
    
    I think this makes the micropeak graph as functional as the altosui graph
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 518b16f64f4be096ceff13ab31b96d6909fe3ae2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 19:24:18 2013 -0800

    altoslib: Fix altoslib install
    
    Was using AltosLibdir in several places still
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41ede0267250a1d3b26e19cc9dd78f32609f7f0f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 19:23:27 2013 -0800

    altosuilib: Initialize graph axes units
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d3da1530c1007d5d1f28062b3947f4aa981bfa8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 02:00:13 2013 -0800

    altoslib: Add AltosUnits.graph_format
    
    This describes the format of numbers used on a graph axis for use with jfreechart
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab9caa22ea905844a99e08b5f6d3b072f094283e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 01:59:18 2013 -0800

    micropeak: Use altosuilib graphing functions
    
    Move these out of micropeak and into shared code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9839b0b62d797a8616fc66038e3f3c68e2a214d0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 01:58:23 2013 -0800

    altosuilib: Add graphing routines from MicroPeak
    
    Make these available for AltosUI too
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd5e6b80a8be5fac7d913b97570f7e11f70a60ba
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 01:55:51 2013 -0800

    altosuilib: Remove duplicate AltosUnitsListener.java
    
    This lives in altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6d7776bbe0b7f84e51af88d1ac2b7d35133a0ad
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Feb 9 09:09:36 2013 -0700

    various updates to the text .. more SMA to BNC adapter references, etc

commit 033c2c4c018343b0e86d5e231bc2dc56e643f8ee
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Feb 9 08:47:10 2013 -0700

    update copyright year to 2013

commit ed200884f3e4fb895ee17ef38a9b6d3371b59625
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Feb 9 08:44:11 2013 -0700

    add pcb overall dimensions and screw sizes the holes are intended for

commit e374f8e5a5f12602ef62518fcf672a231080baee
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 8 23:37:49 2013 -0800

    doc: Add TeleMetrum and TeleMini drill templates
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c3024b759fcdf8b84a2139c1535c573a31eb5c95
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 10:51:49 2013 -0800

    altos: Add atmosphere.5c
    
    Shared code for building pressure tables
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e982294961205bef525ecad7172a1f3ab66677f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 09:56:18 2013 -0800

    test: Accept micropeak CSV files for micropeak testing
    
    This interpolates the missing values to provide a reasonable testing
    environment for the Micropeak flight firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9aca92a20343a2cf7e05abc7b100852d81f86c0d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 09:51:30 2013 -0800

    altos: Document which MPU6000 revs have broken accel values
    
    From Tridge -- MPU6000 rev C4 and C5 are broken, having accelerometer
    values in the wrong range. This commit just adds comments which note
    this; experimentation will be required to actually sort out what's
    going on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 809eb5b1252a75d489e3ad2fd2a4af701fa0aa52
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 09:50:07 2013 -0800

    micropeak: Update Makefile to versioned Java libraries
    
    Library names have changed; deal with it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7afd76e70c086003a2cd87ce459fda4188c76ad6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 09:49:07 2013 -0800

    altoslib: fix Makefile JAR target
    
    Was referencing stale classAltosLib.stamp instead of new classaltoslib.stamp
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d1d8d2a3c129cdbd55427bcda0f26715b02f1ee
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 29 17:00:43 2013 +1100

    Add version numbers to java libraries
    
    Make our private java library names include a version number so we can
    ship and install multiple versions at the same time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a3c5de6657d1c26e52015a8acec0cd05e294cef
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 29 14:52:23 2013 +1100

    Change AltosLib to altoslib
    
    Follow Java conventions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d05a77992df983b9fa79f0e2b20d2c6b387c180c
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Jan 29 01:34:48 2013 +1300

    altosdroid: initial release to Play Store
    
    * Add release keystore (encrypted)
    * Turn off debugging in UI
    * add 'sign' target to Makefile.am
    * Update version string in AndroidManifest.xml to match released version of altosui.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5eb52f54a616f4e89b718d50d77a7b68cf7a4354
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 24 14:18:39 2013 -0800

    Mark MicroPeak as a recording altimeter, not a peak-recording altimeter
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b62097c9d79f848042485234dc46ade60deabc02
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 22 18:50:02 2013 -0800

    micropeak: fix 'make clean' and .gitignore
    
    Make git status clean in micropeak dir
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96193d8c09159b81e60851ed90682b9120e15f55
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 22 17:49:25 2013 -0800

    micropeak: Add mac build file Info.plist
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b5c988fb59c1e48baa81b56be9b7b4ab0eebabea
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 22 17:34:44 2013 -0800

    Add documentation for the MicroPeak USB interface
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9da66ca607664bb81b0986c121518faa4c1cb9fd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 22 17:29:37 2013 -0800

    micropeak: Respect font size preference in MicroPeak stats tab
    
    This uses the font size preference to adjust the size of the text
    shown in the Statistics tab.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3454592169dcb61b81de9af2b631b87e7dd86231
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 20 15:42:05 2013 -0800

    altosui: Make initial AltOS window position configurable
    
    Give the user a choice of nine locations on the screen
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf03ab3383b679e6617e8ab7004be91e5a727562
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 20 15:39:53 2013 -0800

    altosui: Remove duplicate AltosUIPreferences.java
    
    This lives in altosuilib now. Several files needed imports of
    altosuilib added as a result.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e1133481f2208fd16be8196977696da2cce430f3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 20 15:37:40 2013 -0800

    altosui: All of the Altos class is actually in AltosUILib now
    
    Remove all of the duplicate content, shrinking AltosLib to a simple alias
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d35fd843299b5ff09a36220e6ecd8aefceb9b2c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 19 18:04:08 2013 -0800

    altosui/micropeak: Let native window system place windows
    
    Instead of forcing windows to our choice of positions, let the host
    window pick reasonable locations. This avoids having all of our
    windows appear on top of one another.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aed990c3a37249a111c783336afade7ecdda7546
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 19 19:30:38 2013 -0800

    altosi: callsign could not be configured for AltosUI
    
    An extra local variable called callsign_value was hiding the object
    field by the same name and preventing it from getting set to the right value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4646beb421ab5bec612dfe5e3c57e790b1f41203
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 18 21:53:54 2013 -0800

    Tag version 1.1.9.3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce3c9e6be6fde51fb02d692f1ef1222fb5ada8c9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 22:05:32 2013 -0800

    micropeak: Fetch Mac and Windows drivers when creating packages
    
    This downloads the FTDI drivers from FTDI during the build process
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a04c4f7b07e97d568f8f6f56dd363329817fb52c
Merge: 0c2fa961 bd84dfd8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 15:22:46 2013 -0800

    Merge branch 'master' into telescience-v0.2

commit bd84dfd8e53d8939281993e062015f67c0dd9fa2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 15:18:31 2013 -0800

    micropeak: Show decimeters in stats window
    
    We're promising this kindof accuracy, so we'd best show it off
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 540309240a8515116120dbd4403902282ed8c27b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 15:15:49 2013 -0800

    altos: Add Kalman filter to MicroPeak
    
    This filters altitudes more accurately and also allows tracking of
    acceleration, which is used to discard height data generated by
    ejection charge noise
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 249ee968305ae6e8fcf0a10e5cf9cc5826bd81dd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 15:13:31 2013 -0800

    altos: Add computation of MicroPeak Kalman correction coefficients
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd60d85d07b881ac03294a8cf607e469f2e69610
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 15:01:12 2013 -0800

    altos: Correct model error covariance matrix
    
    Finally found a couple of decent references on how to set the model
    (process) error covariance matrix. The current process matrix turns
    out to be correct for a continuous kalman filter (which isn't
    realizable, of course). For a discrete filter, the error in modeled
    acceleration (we model it as a constant) needs to be propogated to the
    speed and position portions of the matrix.
    
    The correct matrix is seen in this paper:
    
    On Reduced-Order Kalman Filters For GPS Position Filtering
            J. Shima
            6/2/2001
    
    This references an older paper which is supposed to describe the
    derivation of the matrix:
    
    Singer, R.A., “Estimating Optimal Tracking Filter Performance for Manned Maneuvering Targets,”
    IEEE Transactions of Aerospace and Electronic Systems, AES-5, July 1970, pp. 473-483.
    
    This change has a minor effect on the computed correction
    coefficients; it should respond more reasonably to acceleration
    changes now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c2fa9614ffe22901ba0fd089e1e02c362f9fbe0
Merge: 456120d2 f2b59cf3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 10:40:28 2013 -0800

    Merge remote-tracking branch 'origin/telescience-v0.2' into telescience-v0.2

commit 456120d201d72c89576a0c8d69b2fcba44169507
Merge: f24c4219 994ff76a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 10:39:40 2013 -0800

    Merge branch 'master' into telescience-v0.2

commit 994ff76a064dcbd3113db771cd9cd9591fd68dea
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 10:37:55 2013 -0800

    doc: Add simplesect headers to release notes
    
    This makes it easy to see which changes are from each version of the software.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f64fe671b7b4e2389219d672bcea978d0539d4ae
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 16 10:46:04 2013 -0700

    document what the 'Age' value in the AltosUI display means

commit f2b59cf3d30425bc4b12f37e86832e40b7702d3d
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 16 10:46:04 2013 -0700

    document what the 'Age' value in the AltosUI display means

commit f24c4219de9563cf0ef24b763ce54d961c182696
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 13 21:38:26 2013 -0800

    altos: Change CC1120 SPI speed to 4MHz.
    
    Most of the chip can run at 8MHz, but extended register access is
    limited to 6.1MHz. Instead of pushing things, just run the SPI bus at
    4MHz.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a866431e9a063830b407f749ff97a730831e5e4e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 13 20:50:10 2013 -0800

    altos: Crank fast SPI on STM to 8MHz
    
    With the GPIO pins set to 10MHz now, we can run SPI at the maximum
    possible speed (8MHz).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d885616e2e522b8aea5e7d5398f16d330a0cffa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 13 20:48:47 2013 -0800

    altos: Set STM GPIO output speed for SPI pins correctly
    
    The GPIO pin settings affect the output impedence, and hence the
    maximum speed for SPI. Cranking these to suitable values allows SPI to
    run at full speed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2810aa33fc6fe254761a0044c62c7b23e59e6bc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 13 20:48:08 2013 -0800

    altos: Build telescience-v0.2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3645cb6578ec2a11ab7b0f6d435c6de22ca02a9f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 13 10:31:59 2013 -0800

    Update avr ao_spi_slave code to match API changes
    
    Made the interface use void * for pointers and uint16_t for lengths
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7883744526156879ad63256ab12d959df56d5252
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 12 20:11:38 2013 -0800

    altos: Initial telescience bits
    
    These might do something, and should at least bring up USB
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 670034eef48d63cdaec8d271fa93da984ffe2ea9
Merge: 8c5ebaf8 d374d6be
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Jan 12 10:57:22 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit d374d6be7eb040457f4df6c38b5d057f26ee741c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 12 09:45:31 2013 -0800

    micropeak: Record samples before boost detect
    
    This saves a ring of 16 samples while waiting for boost, and then goes
    back through those looking for the first sample higher than the ground
    and writes the remaining ones to the log so that we get a more
    complete log of the flight
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85baf657e7ea6debbed9effc6f8daff7ef09a5d8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 23:42:41 2013 -0800

    altosui: Reference altosuilib.jar and altoslib.jar from original dirs
    
    The symlinks may not be created when the build is getting run as the
    dependencies aren't in place (thanks, automake).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 962e3bd0461f187cd599ba54e7129c84f97d4c4d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 22:11:36 2013 -0800

    altosui,micropeak: Link altoslib.jar and altosuilib.jar before compiling
    
    The symlinks for the libraries have to be present before compiling stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f6b1570277c326c00d5da274f608fbdeb91c911
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:42:23 2013 -0800

    micropeak: Note when libaltos fails
    
    Not getting any device list back from MicroUSB means the library
    wasn't found, so pop up a dialog box explaining the situation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c3e807ffcd34d514f36bc11adbae9337991a1743
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:41:35 2013 -0800

    micropeak: Create 'micropeak' script correctly
    
    Add altoslibdir, remove -cp argument
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98e74150040e444ed6480ef3d107caa54c205ef9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:38:15 2013 -0800

    micropeak: Demonstrate how to hide various parts of the graph
    
    This just shows how to disable a series and axis; it's not used here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 505ef49a041740fe7cbb5c537b68d22e5fb6c0be
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:37:18 2013 -0800

    micropeak: Report recorded apogee instead of searching flight data
    
    This makes sure we report the true apogee value instead of looking for
    the maximum height value in the flight data, in case the flight
    recording ended before the apogee was reached.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e94f9547a566c74c30b6321bc073b8bdcb071604
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:34:24 2013 -0800

    Fix up 'make fat' to build all libs and micropeak too
    
    There are now three libraries to build for both altosui and micropeak.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 12a9bd0479db25cbe45c0385913315cc1e0bc892
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:26:20 2013 -0800

    libaltos: Need to check for tty/ttyACMx before ttyACMx
    
    Otherwise, we'll find 'tty' when looking for 'ttyACMx' and no good
    will come from that
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ed6b13e87c1cc2d6618b6ba3a293ea6e3b5752e
Merge: acff2f46 d409417f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:48:12 2013 -0800

    Merge remote-tracking branch 'origin/micropeak-logging'

commit acff2f466031fd1a8533fc315411c3734a8bacc6
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:27:32 2013 -0800

    altos: Time out reading packet data from cc1120 after 100ms
    
    Sometimes the radio will give a spurious wakeup indicating that a
    preamble seems to have arrived, but no packet data will appear. In
    this case, abandon the packet reception and go back to waiting for a
    preamble again. This releases the SPI bus for other users and also
    avoids missing packets.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f715b5da3424adacc5a7f1e001e1dd7fa6f50385
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 9 15:29:01 2013 -0800

    altoslib: Clean up AltosRecord clone methods
    
    Make the AltosRecord version abstract and then implement suitable
    versions in each subclass by creating copying constructors for each
    class.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 42733d2823b1ecf54c03881fc120067868c0ff4c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 9 15:23:46 2013 -0800

    altoslib: Don't smash existing GPS pad alt after boost
    
    Leave the existing GPS pad altitude value in place after boost by
    checking to see if it was ever computed before resetting it to the
    barometric pad altitude. This makes GPS height values relative to the pad.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c5ebaf88b459b09924753a8077393a7b0639133
Merge: 59f355f5 d7d259c7
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 8 22:12:17 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit d409417ff8e9ed9d406bf1c04542a4ecb574768b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 6 13:20:25 2013 -0800

    altosui: Create .dmg file for Mac OS X installations
    
    Easier for users than a zip file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2582e9b45bb81ff70fbd5c8581370c8c1b5bd5e5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 6 13:00:00 2013 -0800

    micropeak: Add ReadMe.rtf to Mac distribution
    
    There are *two* steps to installing MicroPeak on Mac OSX. Best help
    out the poor user by explaining that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f05b1996122b6c6bce81ca33e85c2a65c3ded18
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 6 12:52:25 2013 -0800

    micropeak: Create Mac OS X package
    
    Includes the FTDI driver and the MicroPeak app
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d663da13db60e1200535282ee1a0ea6305cad98c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 5 10:59:26 2013 -0800

    micropeak: Suggest filenames for saving data
    
    Uses the format '<year>-<month>-<day>-flight-<number>.mpd'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c9eecfae02e8499e7c3d53a4386f026c54b04cd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 5 10:38:20 2013 -0800

    micropeak: Create .dmg file for apple. Create micropeak-jdb script
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20d54cae1eeca6c5d05bfacbafd77c8aa72247c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 5 10:37:30 2013 -0800

    micropeak: Use new libaltos entry point for FTDI devices
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e7e71e2042f2bfc24adcc57cecfe26368eb03e8a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 5 10:36:50 2013 -0800

    micropeak: Move raw view caret to top. Make raw text uneditable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 70c7674b53d77e9995a235bb2dc455cb53d9e81e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 5 10:36:40 2013 -0800

    micropeak: Remove debug printf for command line
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 746ae98829a0fc15577ae0f7b506112178f481e3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 5 10:35:20 2013 -0800

    Add separate code path for listing FTDI devices
    
    This lets the library do different things for FTDI devices, as is
    required on Windows (for instance)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca284d8bef2f4bd360eaec58048ba9abdafc55bd
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 18:14:40 2013 -0800

    micropeak: Use data.export for Raw display. Change to MPH
    
    data.export already knows how to format stuff, so use that to
    construct the raw data presentation for the GUI too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81088b42b3ea899c8d1b3f09ee4fe24378fa03c9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 17:40:19 2013 -0800

    micropeak: Export in lots of units
    
    meters, feet, mach and gs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f20781010a6560b7b359af269c502d098917c446
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 17:31:01 2013 -0800

    micropeak: Add command line export option
    
    micropeak --export <foo.mpd> will create <foo.csv> full of useful data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 36e9603f74b85776ac049758021b51909161aeb1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 17:30:29 2013 -0800

    micropeak: Add Mac OS Info.plist file
    
    needed to build a Mac OS X application
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 722dc277dee915dcd09d3d65c0ee19173b114ef7
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 16:30:44 2013 -0800

    micropeak: Change graph tooltip units on the fly
    
    Make sure the tooltips show the right units when they change
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e4c5b0a6ed3594cff6ab71398c172daa7c67177
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 16:19:33 2013 -0800

    micropeak: Use JTextArea instead of TextArea
    
    Looks nicer and doesn't appear to have the same weird clipping problem
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1979063928f1cdfc75c01ec098164c2822a5138d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 16:07:49 2013 -0800

    altosuilib: Fix install issues on Linux
    
    altosuilib.jar wasn't getting installed
    micropeak was using the wrong name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31fa139578a86821844e3e2efb1a84bdea4f1370
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 12:24:44 2013 -0800

    micropeak: Add view of raw data in GUI
    
    Looks just like the export file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c423d9287c6b9ea7233f5e3430682cb1c865da1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 11:44:32 2013 -0800

    micropeak: Add CSV export
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93d640de65a1ecedfef89c96521c21632f96f372
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 11:22:11 2013 -0800

    micropoint: Add MicroDataPoint
    
    This holds height/speed/accel data all in one place
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0933f2ed5791cfdc28242cd60be3942556f4ed20
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 10:48:56 2013 -0800

    altoslib: Remove unused fake product_micropeak_serial
    
    Code cleanups have made this no longer useful
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb670e9b7576563d747ae5c9416371f145455ec1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:50:09 2013 -0800

    altosui: Remove duplicate AltosUSBDevice
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc404bee7163a369eb1d95e0942b676bd3f95574
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:41:42 2013 -0800

    altosui: Use shared AltosUIListener
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0bbd3e2571336b5f5872759b5010148325efbaa
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:40:13 2013 -0800

    altosui: Use shared AltosUIFrame and AltosUIDialog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae09bd641a86970763380f3028f987ffcb791020
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:33:36 2013 -0800

    altosui: Use shared AltosFontListener class
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8af405f1ac4d1b930f10465fd0270a49176f16d1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:31:35 2013 -0800

    altosui: Use shared AltosDeviceDialog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 605b752080827bb59fcff5af9f1eab9fd5dad76b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:09:10 2013 -0800

    altosui: Remove AltosVersion.java
    
    Version data now stored in AltosUIVersion.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ce43661834920c3a8f3a1b6e1c555fb952b512d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:06:41 2013 -0800

    altosui: Use altosuilib for configuration
    
    Start moving to shared UI code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a5666bcf4949b846589c000e1620afe39593f57
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:06:22 2013 -0800

    libaltos: Remove a couple of spurious debug printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9efc57e4052e3c11218973f7666ad18ea5cf2a5a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 23:15:14 2013 -0800

    Rename AltosConfigureUI to AltosUIConfigure
    
    Leave AltosConfigureUI for AltosUI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 103eaa674be7582437aa850f0fd82788e10f244b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 23:10:04 2013 -0800

    micropeak: Check CRC on downloaded
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4dae5b876b089c17c87c72df2ad2fa5ec4f1657c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 23:03:29 2013 -0800

    Build micropeak by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ac109132d1878abbd277ae21215716326404781
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 18:20:23 2013 -0800

    Build installable versions of MicroPeak GUI
    
    Makes windows/mac/linux versions. Windows version appears to work on
    Wine at least.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d94ceed48be439f368d597bf06ed1e8adc4ef46b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 17:10:55 2013 -0800

    micropeak: Add 'Close' menu item. Fix start location
    
    Let the window system pick a spot to place the application
    windows. This avoids having them all sit on top of one another.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 982b272920fcb444fd399941cabe613d8ac7104b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 16:57:31 2013 -0800

    micropeak: Fix chart colors
    
    Need to apply custom colors after setting the theme
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d83587c3c66b730cc54ca153714eee520ee40b2c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 15:30:11 2013 -0800

    micropeak is code complete now.
    
    Added save and download functionality. Removed 'new' from file menu.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65b512c890a3ccf487655b79305ab1cfcf49259c
Merge: 434e946a d7d259c7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 14:24:59 2012 -0800

    Merge remote-tracking branch 'origin/master' into micropeak-logging

commit 434e946aa79b5a7e60799f996887bc6467889b92
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 14:22:37 2012 -0800

    Allow CC1120 to sit on other SPI busses
    
    Reading the incoming data bypasses the SPI API and touches the SPI
    data register directly; which port that is needs to be specified in
    the pins file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2bd6aca54fc465995d6985c8799cd0d016c9a543
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 14:17:26 2012 -0800

    micropeak: Add flight stats pane
    
    Shows graph or stats in alternate panes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56a1210a7b04a3623d19ec282f26fecc79c126dd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 11:42:57 2012 -0800

    micropeak: Use altosuilib
    
    This removes a pile of code stolen from altosui
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6db192898eebf750c4d51516eff7916bc4da493b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 11:38:53 2012 -0800

    altoslib: Add units change notification list
    
    This allows the UI to automatically respond to changes in the
    preferred units.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 03496dc47372c40f7faae1766b0e729a1feeab7c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 11:32:56 2012 -0800

    Create altosuilib to share code between altosui and micropeak
    
    Need to convert altosui to using it, but that shouldn't be hard
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7d259c7b3eedcc1c185d2b7e3c33e829bd7ce96
Author: Keith Packard <keithp@gag.com>
Date:   Fri Dec 28 23:05:31 2012 -0700

    altos: megadongle radio int is C13, not C14
    
    Hard to get interrupts when listening to the wrong pin
    
    Signed-off-by: Keith Packard <keithp@gag.com>

commit f7a56152808c7838c1886884bb77de2705ab076c
Merge: daf8776f b70ca5ea
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 28 21:50:13 2012 -0800

    Merge remote-tracking branch 'origin/master' into micropeak-logging

commit 59f355f5288b42b2e47743d06e41e55819a55f64
Merge: 099d2b0e b70ca5ea
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Dec 28 22:30:26 2012 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit b70ca5eaf1c3d60bd9adf6835e1247f4147ca9c8
Author: Keith Packard <keithp@gag.com>
Date:   Fri Dec 28 19:35:46 2012 -0700

    altos: Fix MegaDongle CC1120 chip select pin
    
    It's on A0, not C5
    
    Signed-off-by: Keith Packard <keithp@gag.com>

commit a6e116515f5e4522adbfcd1900885c2a6034b57c
Author: Keith Packard <keithp@gag.com>
Date:   Fri Dec 28 19:34:33 2012 -0700

    altos: Fix cc1120 debug code to build on megadongle
    
    RDF function had changed, and APRS isn't available on megadongle.
    
    Signed-off-by: Keith Packard <keithp@gag.com>

commit daf8776f8646ba187f1a17f7aae797503bed3f2a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 28 16:34:48 2012 -0800

    Lots more work on the MicroPeak application
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 099d2b0ea59d825bd69a3fbb5523b9cbb9430ce8
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Dec 28 15:36:24 2012 -0700

    update stlink-pins document to make it clear 4-pin MicroMaTch is our
    standard STM32L programming connector, and the big MM thing was v0.1 only

commit 9da9adc2718928de2af65a68cddbcc636cc3e9e8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 25 14:45:49 2012 -0800

    Add file chooser for MicroPeak
    
    Needs reasonable directory tracking
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf8e1b6eecb2bae12ffdbd730bd6ec12ccdaf23a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 25 14:23:29 2012 -0800

    Start building MicroPeak GUI tool
    
    Download, save and analyze MicroPeak flight data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 868ef0c9c4b208c02a87180b0eede329369bdc77
Merge: 669cde8a 57487e78
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 25 14:20:42 2012 -0800

    Merge branch 'master' into micropeak-logging

commit 669cde8a87d88ceae89e369c1d38b88c9f8198cf
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 25 14:19:19 2012 -0800

    Move libaltos to top level
    
    This will let it be shared by the new MicroPeak gui
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57487e78b90465a21c87cf30deb0aeaba0887332
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 18 23:15:20 2012 -0800

    altos: Actually record ground averages for 6dof sensor
    
    This gets the long-term averages for the 6dof sensors recorded into
    the first flight log record.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 244415c515f21328cffe88d1369949a4af49a177
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 18 22:59:36 2012 -0800

    altosui: Clean up graph a bit, remove shapes, improve tooltips
    
    Sometimes graphs would get shapes at each datapoint which was
    annoyingly cluttered. And, the tooltips used a format that was
    difficult to interpret.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7d35b0bd86b912c43a21a275347fca201079847
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 18 00:39:37 2012 -0800

    altos: Add distinct LED pattern before writing log data
    
    Otherwise, the whole log looks like a an extra altitude digit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 23dc9a63ae8bc982d9352cfb7a3f508d8a08c374
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 17 22:58:49 2012 -0800

    altos: Make micropeak 'serial' interface work
    
    I prototyped the mpserial interface on a breadboard and tuned the
    circuit to register the LED correctly. Then adjusted the serial code
    to send bits at the right speed and format.
    
    The logging contents are now in hexdecimal with a CCITT CRC-16
    computed to verify correct reception.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1d37be4c024e9690107c693d9819229025966fa
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 17 17:03:41 2012 -0800

    altos: Average MPU6000 values on ground for later use
    
    Having long-term ground averages recorded to the eeprom file will make
    post-flight analysis of the data better.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b6c9e8ffc87481a23ba90fa22df7c9421e2cd6a6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 16:52:15 2012 -0800

    altos: Re-enable beeper on megametrum
    
    I turned it off during radio testing and forgot to fix that before committing...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd7c30324461b2aed83b86bfe4323180664123cf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 16:08:33 2012 -0800

    altos: Add new MARC status pin interrupt bits to megadongle
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dfff41c2bec16fe4c7b198a4720eb40d8e740ac4
Merge: 22a58b0f 00bc1a09
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 16:06:41 2012 -0800

    Merge branch 'aprs' into 'master'

commit 22a58b0f9b82ea8c7abeda79ca7a4cd21c3dc93c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 16:04:05 2012 -0800

    altos: Wire up another CC1120 GPIO to get MARC status changes
    
    When the radio drops out of RX or TX mode due to an error, it changes
    the MARC status, and sends pulse down a configured GPIO. Use this to
    tell when something 'bad' happened during TX or RX so that we can
    recover from losing the SPI bus in the middle of transmission or
    reception.
    
    Without this, the radio would change state and we'd never know,
    leaving the radio code waiting for an interrupt that would never arrive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e3ac3f2038cc3a43252fc8f820a1373a637ab83
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 13:31:45 2012 -0800

    altos: Test APRS rounding by using coordinates near the boundary
    
    This selects lat/lon and altitude near the rounding boundary to check
    that the resulting APRS data is correctly computed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9bc701ce1132f04ec90ef22e6a7a90c67918737b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 13:30:20 2012 -0800

    altos: Document what HAS_BOOT_RADIO does in the m25 driver
    
    HAS_BOOT_RADIO causes the m25 driver to abort any ongoing receive in
    case that is holding the SPI bus.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b4cfd8719e3fd4a2904369e176182c870a3b43c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 13:29:31 2012 -0800

    altos: Round APRS data correctly
    
    Apply rounding once at the start of the computation, then truncate
    after that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00bc1a090a294e103370b8ab0a0fe5d7a2acfe92
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 13:25:54 2012 -0800

    altoslib: unconfigured radio frequency data is now -1, not 0
    
    This changed when AltosConfigData was cleaned up, so now frequency
    settings must check for positive numbers rather than non-zero.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 034dfc4f9bef049b1fb5704873dd76f6a3a9949d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 15 15:07:07 2012 -0800

    doc: Add warning about matching battery voltage.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4925a6f2f4edd5b54641a5240030e5c0e3e95db6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 15 14:47:22 2012 -0800

    doc: Add paragraph noting differences in JST polarity
    
    Looks like the 'standard' polarity for 3.7V lipos using JST connectors
    in RC aircraft is swapped from what Spark Fun uses. Note that in the
    docs to try and keep people from wrecking hardware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6fa1ec0dbf2a4eda8d061c67b3779b83b88f29f0
Merge: f1409311 73422bf7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 14 19:29:50 2012 -0800

    Merge branch 'micropeak-1.1'

commit f1409311761d65e85ac08c38c9b9a0114cc8f535
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 14 19:28:49 2012 -0800

    altoslib: Discard previous flight state on SN change
    
    A previous change discarded previous *telemetry* state, but failed to
    discard any previous overall flight state. This would reset some of
    the data fields, but wouldn't reset the GPS state and max measurements.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8dbe8abd034a2d1ee2ec0380ec376722a4ecbd71
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 14 19:27:56 2012 -0800

    altoslib: Only list flight logs for boards that we know have them
    
    Boards that don't have flight logs will generate a nice 'Syntax Error'
    and fail to initialize.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fc2e5beb9173663e1e37a9b5a7b6eea1046222f7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 14 11:11:39 2012 -0800

    altos: Log baro readings for MicroPeak
    
    This logs barometric data every 192ms (more or less) to the 504
    remaining bytes of internal EEPROM storage in the ATtiny85. This
    provides 48.192 seconds of logging.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73422bf72e07b169bfe37b02518b9e7479931971
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 12 22:53:36 2012 -0800

    altos: Note that Lithium battery may be included with MicroPeak
    
    I'm not willing to say that we'll always be able to include a battery,
    but we can certainly try, and they're certainly cheap enough that we
    should.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 688a9458bb03a81e71554c14295d1baacbbbd530
Merge: 816c6b5d c8866fba
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 12 22:36:59 2012 -0800

    Merge branch 'micropeak-1.1'

commit c8866fbae2b00b1d7a7ddf89a3f971a75d3dcd60
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 12 22:35:05 2012 -0800

    doc: Update MicroPeak doc to include EEPROM and programming info
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 816c6b5d087694a9db9c34cc5ec7671a1487d9b9
Merge: a4a84182 a4678cd8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 12 11:10:14 2012 -0800

    Merge branch 'micropeak-1.1'

commit a4678cd848da994dc893b75790e4c9a86e54d895
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 12 11:01:48 2012 -0800

    altos: Log in-flight data for MicroPeak
    
    This logs the low 16 bits of the pressure value to the remaining
    on-chip eeprom. It can be read out with a standard AVR programming
    dongle.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07a45c50429389ae7b51e12bc847d34fb1577bc6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 12 10:57:03 2012 -0800

    altos: Add load-slow target for MicroPeak
    
    This sets the programming clock to 1/4 of the 250kHz clock used by the
    MicroPeak firmware, allowing the device to be reprogrammed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69447d8ad3f5a1e1f59939477afc7720a437fadc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 11 23:43:30 2012 -0800

    altos: Tim Van Milligan suggestion for µP -- delay before showing last flight
    
    This gives the user time to move their finger out of the way of the LED.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4a841828924ee37f5201d4ff0aec38459f2d802
Merge: b26e837a d309fcff
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 11 14:42:43 2012 -0800

    Merge branch 'micropeak-1.1'

commit d309fcff54fe6904fb860f33c15fcb7d1c96e91b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 11 14:41:53 2012 -0800

    altos: Increase MicroPeak blink times a bit
    
    make the 0 longer (1 sec now), and make the time between digits longer
    (also 1 sec now)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b26e837a6f18641aae9372aab22168849ff10812
Merge: 1489c7f7 c233ef67
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 9 18:33:31 2012 -0800

    Merge branch 'micropeak-1.1'

commit c233ef67f42c14cb1d0e0542a9523b279f826af5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 9 18:28:33 2012 -0800

    altos: Use alt_t value to hold displayed height in micropeak
    
    Heights are 32 bits (to get .1 meter resolution) in micropeak; make
    sure we have enough bits while blinking out the computed value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit defd5d0784a754be30e3295067fbc85a108ad172
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 9 18:27:49 2012 -0800

    altos: Make sure pa to altitude conversion is done with 32 bits
    
    We need 32 bits to hold intermediate values, even if the final
    altitude is reported in only 16 bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 24948ea1d41f2a7c96ac09e35d1250909e5726ae
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 9 14:32:35 2012 -0800

    altos: Store altitude in 32-bits for MicroPeak
    
    Needs all 32 bits to store .1 meter resolution
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf47efdc86f0b421fcf4389669fbecf6fa3f5934
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 22:49:34 2012 -0800

    altos: Stop including profiling and stack guard code in megametrum
    
    These take CPU time and memory and are intended only for debugging
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4339d5c8e6373119e5377fe5c883b6b0e6ce37f6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 17:38:17 2012 -0800

    altos: Fix aprs test to not allow callsign configuration
    
    There's no configuration to take a callsign from...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abf82991b8e69754ebc4857ce78ac4a4b01f16e4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 17:35:15 2012 -0800

    altosui: Add APRS interval configuration to UI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd05421991b596fe9cf73ee25c9046b0fb4e32f7
Merge: 1f797066 1489c7f7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 17:34:10 2012 -0800

    Merge branch 'master' into aprs

commit 1489c7f75f7b9ce547ac49c157b440c4f9131ef4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 17:27:48 2012 -0800

    altosui: Call config UI from AltosConfigData directly
    
    Don't make AltosConfig have a pile of config code, stick that in
    AltosConfigData instead. This uses a new interface, AltosConfigValues
    to get from AltosConfigData to the UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f797066857b171b19829e2bb7187b8faf37d07c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 17:20:02 2012 -0800

    altos: Use configured callsign in APRS packets
    
    Instead of hard-coding my own call sign...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b28323ce91d23db5e1c3cbd1309c72aafcfbe235
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 17:18:32 2012 -0800

    altos: Make APRS interval configurable
    
    This provides a separate configuration value for APRS, allowing the
    interval between APRS reports to vary.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f8a704268f0978a39b9c7983e049ef55914f7280
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 10:15:25 2012 -0800

    altos: Fix up APRS packet sending code in cc1120 driver
    
    This fixes the FIFO management, ensuring that the data are streamed
    into the radio fast enough to keep the packet continuous. Sounds like
    it works, but testing with an actual APRS receiver is required.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 748e42ebf1dfb1efd5dec6ddd93f5c7aeedeb01d
Merge: 75912f8a c10f9a43
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 10:14:11 2012 -0800

    Merge branch 'master' into aprs

commit c10f9a438ed5789479d21c78153ca7f14c05534c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 10:05:51 2012 -0800

    altos: fix functions calling pollchar to use 'int' to hold the value
    
    AO_READ_AGAIN doesn't fit in a char anymore now that stdio is 8-bit
    clean, everyone using pollchar must use an 'int' variable to capture
    the whole value from pollchar.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16fd9009d8b034fd8d208115317f65fabe10072a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 08:32:22 2012 -0800

    altosui: Use AltosConfigData for altosui configuration dialog
    
    Instead of a separate config language parser, share with altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e572651b36ad557d716fb14e76e3eec132e5ebdf
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 17:08:39 2012 -0800

    altoslib: Make AltosConfigData parse all of the config data
    
    It was missing quite a few. This also speeds up parsing of config from
    TeleScience, TeleBT and TeleTerra by not listing flight info on those
    products (where it doesn't make sense).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb4f2b62d50aca615bd4f9f230a1736880125e3e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 17:07:25 2012 -0800

    altoslib: Make AltosMs5607 capable of parsing ms5607 info lines
    
    This moves the parsing from AltosMs5607Query
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4e86af6de52ea0bacf80e3936b6cd17c1cbf898
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 17:06:17 2012 -0800

    altos: Change 'flight-number' to 'current-flight'
    
    Avoids ambiguity with stored flight info, which starts lines with 'flight'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d095eb1987f35d0d4e6540bf335e1faaa7c86ec
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 16:29:36 2012 -0800

    altos: Shrink 'ao_version' by calling printf fewer times
    
    Each printf call costs quite a bit of code space on the cc1111, so
    instead of making multiple short calls, make one longer one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75912f8af04cecc0bbffecb2072d465c3744d4e8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 10:30:46 2012 -0800

    altos: Send APRS packets even during ascent
    
    If you're using APRS, presumably you want to watch the rocket going up too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f84c0adbfa494ddc7dbe276796d999560be9438
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 10:28:14 2012 -0800

    altos: Allow telemetry, rdf and APRS to be individually controlled
    
    But, only when APRS is available so that TeleMetrum and TeleMini don't
    change behaviour
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f661da527fb4a3a492f5322e2a718d441e1cde83
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 10:23:39 2012 -0800

    altos: Hook up APRS to telemetry loop
    
    Send APRS packet once every 2 seconds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1e6fa32b856b91afa355cd272d2d7287d3ccca1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 10:12:11 2012 -0800

    altos: Hook APRS up to the radio
    
    This adds an arbitrary-length packet writing function to the radio
    code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51ef826372f466f44901c4c609ed6a987d30fda4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 23:39:47 2012 -0800

    altos: Prepare APRS for use within altos itself
    
    Make all variables static, const-ify constants, change the public
    name of the single entry point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 74969483736381858484dca9ebb528d9d2d73f5b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 22:23:46 2012 -0800

    altos: Start restructuring APRS code to create and send packets
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 933d654ec917d9794e87407a7e579438bb738d54
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:37:47 2012 -0800

    altos: Remove a bunch of time bits from the APRS code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 684f53d67379cf2ae696fab93d81e49208dfa43c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:34:05 2012 -0800

    altos: Remove APRS sine-wave table
    
    We're generating a lovely square wave, which appears to be decoded
    just fine thankyouverymuch.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b79f448818126258174044a23db5b4f330fd5986
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:25:29 2012 -0800

    altos: More APRS trimming
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bb7200f85db1bc6e39e72e671be9a7aef9c8f09
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:22:55 2012 -0800

    altos: Remove more unused APRS code
    
    Getting down to a reasonable amount of code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d717edd18a35376811d6be0d0c7522ee8cc426f9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:13:37 2012 -0800

    altos: Reduce printf calls in APRS packet generation
    
    Merge all of the data into a single printf call
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e1254c4f3261f66d8070250898fe906eb80d8f2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:08:19 2012 -0800

    altos: Strip out everything but the basic position reporting from APRS
    
    Any useful data will be sent over the digital link; APRS is strictly
    for position tracking
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe820a8a2dc6248b5edb96a9521536d41b936116
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:01:59 2012 -0800

    Signed-off-by: Keith Packard <keithp@keithp.com>
    
    altos: Switch APRS to standard position reporting form
    
    Stop using NMEA sentences for position

commit 03f844ddcd95166211451fda0b20f9b15496294e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 20:11:35 2012 -0800

    altos: Add missing ao_aprs.h file
    
    This has defines for the planned APRS interface
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b1f186a574c22cebd9daba9d352ec82556c3b28
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 20:10:54 2012 -0800

    altos: Generate all of the APRS messages
    
    Note that two of them are in NMEA form, which some receivers appear
    not to parse
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c2c47dd7af2fc95de852178c4244daba02f44ed
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 19:44:09 2012 -0800

    altos: Add test scaffolding for APRS
    
    This moves some test code out of ao_aprs.c and into ao_aprs_test.c,
    and then adds Makefile fragments to compile and run the resulting
    program, creating a wav file as output
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d65751fded3321b8a350e4140c44f87fec95aab2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 19:30:27 2012 -0800

    altos: Make aprs code output encoded packets to stdout
    
    This generates a .wav file containing a single APRS packet. This has
    been tested and appears to be successfully decoded by an APRS receiver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 024e35dc6a0356adfc801a023d5ec208cf3996cb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 09:59:16 2012 -0800

    altos: Add Pico Beacon code as ao_aprs.c
    
    Pico Beacon hooks a GPS to an AD9954 DDS radio chip with a PIC. It
    directly synthesizes the necessary AX.25 packets to do APRS
    reporting. We're going to appropriate the code for use in Mega Metrum
    to (optionally) broadcast APRS packets.
    
            http://ad7zj.net/kd7lmo/aprsbeacon_code.html
    
    Signed-off-by: Keith Packard <keithp@keithp.com>
    (

commit ce12787b56f699166cafe4cdee9e2a4d8e66ebed
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 4 09:45:01 2012 -0800

    altos: Break out GPS speed resetting sequence
    
    To set the GPS speed, we delay for 1/2 sec, change speed, then delay
    for another 1/2 sec.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1778937e136fdecf8607dd9b358cf972d87ca34
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 4 09:43:56 2012 -0800

    altos: shrink ao_companion_status by merging printf calls
    
    Multiple printf calls are longer than one big one, so merge these
    together to save some code space
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6f440767eece896507903e6e58849f11088829f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 4 08:48:05 2012 -0800

    Another ao-mega addition which shouldn't be here
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f52e8afce514a6b943c92aaa6d7189d11d9fe76
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 4 01:34:03 2012 -0800

    ao-tools. Oops, let 'ao-mega' slip into build.
    
    This is a tool to parse ao-mega eeprom files; not sure it'll be that
    useful, and it's certainly not usable *yet*.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4d5d411679d074295d4722f4887fd1cf4f0906c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 4 01:30:39 2012 -0800

    ao-sky-flash: Clean up debug printfs a bit
    
    This makes debugging output a bit cleaner
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f6b3790667d9b92370b4fe0dad5626929fea2ba
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 20:51:47 2012 -0800

    altos: Make skytraq reflashing code try both 9600 and 4800 baud
    
    This lets it communicate with the ROM code which boots at 4800 baud
    instead of 9600 baud.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd8b2eadab12965d232640449b1d1c9f2484238c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 17:36:40 2012 -0800

    ao-tools: Add ao-sky-flash to update GPS firmware
    
    This uses a new feature of AltOS to directly connect the GPS chip to
    the USB link to reprogram the former.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 860d0526737295c695f8e6a790d72b49eb4a686d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 16:10:43 2012 -0800

    altos: Add support for reflashing skytraq GPS chips
    
    This simply switches the skytraq port to 115200 baud and then
    essentially connects it directly to the USB port by forwarding bytes
    in both directions.
    
    Once started, the only way out is to reboot the board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c90ece979f3c95cc6c557c5a2ba8f4a0ce78e173
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 16:08:41 2012 -0800

    altos: Expose GPS serial fifo on MegaMetrum
    
    Necessary for direct access by the GPS reflashing code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae0ddb0f866a26867f0147e0811717810f74c9ef
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 16:05:19 2012 -0800

    altos: Add ao_task_minimize_latency to reduce IRQ delays
    
    When set, this causes the task switching code to avoid blocking IRQs
    while looking for an idle task as that can increase IRQ latencies
    enough to drop characters at 115200 baud on the cc1111. Note that this
    *also* eliminates the ability to use low power modes as we cannot know
    at any point whether some interrupt has come along and woken a task.
    
    Has no effect when using task queues as those require IRQs to be
    blocked while looking at the queue. Shouldn't be a problem there
    though as the check for no running tasks is very cheap.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2c2d04f07253a90c4f7da49df43c3969119516b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 16:04:24 2012 -0800

    altos: Use ao_xmemcpy in ao_log_telem.c
    
    This eliminates the libc generic version in TeleTerra
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7db14905af5cbbfa47d1a2026cce6aea9e5aae7a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 16:03:45 2012 -0800

    altos: Add support for 115200 baud serial rates
    
    Necessary for flashing skytraq chips
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b65402361f36a0c722977bcb63edb26fda0db28
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 16:01:07 2012 -0800

    altos: Make stdio 8-bit clean by making pollchar return int
    
    We were stealing one value (0xff) in the return value from pollchar to
    indicate 'not ready yet'. Instead of doing that, use the integer value
    -1 and have pollchar return an int instead of a char. That
    necessitated cleaning a few other bits to make sure that 0xff wouldn't
    get promoted to -1 on accident.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0fa9ce23dd63846337872d6d666a469512614d07
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 15:10:59 2012 -0800

    altos: Share cc1111 reset/debug-start code
    
    These sequences are very similar, differing only in whether the dbg
    clock line is toggled while holding reset low for a while.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb01d968f21a171682e6358641edaf5eef815a66
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 15:05:31 2012 -0800

    altos: Shrink cc1111/ao_dbg.c a bit
    
    Share code for osequence of ao_dbg_long_delay(); ao_dbg_send_bits()
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81648829defbaf49fc98c4520540f7a20c50c417
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 15:04:21 2012 -0800

    altos: Share getnibble function
    
    Two implementations of the same function, one in cc1111/ao_dbg.c and
    the other in core/ao_send_packet.c.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 289ead258e217bc10493caab12a8b477f1bc2865
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 29 20:36:51 2012 -0800

    altos: Make TeleBalloon v1.1 build again
    
    This is untested, but at least it builds now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ceea0e75ac42acac4a20bf88f34bb93fd2768f4c
Merge: 7738ddc5 285fccfa
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Nov 20 12:37:38 2012 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 7738ddc5dcf4a9609ae2b066a783e3c9fa03d3be
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Nov 20 12:36:26 2012 -0700

    let upstream version rule, don't force use of Debian version in firmware

commit 285fccfa82d89b0decc3b44f413eef9d0c8f1e63
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:36:17 2012 -0800

    altos: Slow down micropeak report timing
    
    This makes reading the LED a lot easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ff0db3979405357003b52022e564a3da75ec3fb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:35:39 2012 -0800

    altos: micropeak LED is orange now, not blue
    
    Change the names around to match
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba3532a8ca7083b09fde5827faeb95f0c2f3b07c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:20:52 2012 -0800

    doc: Minor updates to the micropeak docs
    
    Mention light issue in quick start guide. Update run-time estimate to
    40 hours (measured over 44 hours)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1df3e6402489480e30600304bf024481902f9425
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:15:14 2012 -0800

    altos: Clean everything, even if we don't have compilers
    
    This ensures that stale bits aren't left if PATH isn't set right when
    'make clean' is called.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4737c81ee2da826b38cc52efbfb09017e6825ca
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:13:49 2012 -0800

    altoslib: Reset telem tracking state when switching altimeters
    
    This discards any local state when the new telem packet has a
    different serial number
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcb801b145e1ae6f1c0b3418a99245d34dbf5aa4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:10:29 2012 -0800

    altoslib: Allow flight number to be zero
    
    It's zero when there's no storage space on the device. Instead of
    waiting for non-zero flight number, wait for the seen_flight bit to be
    set in the telem tracking state
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c494eecc51f7d80e24e5db7af0021c56cb6871d4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:08:38 2012 -0800

    altoslib: MegaMetrum data telem packets have sensor data, not flight no
    
    Setting the seen_flight bit without a flight number leads to bogus
    file names
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 70c9fc74a68fdb92569eb73295cfa154cf3768f4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 09:50:54 2012 -0800

    altos: Make Tm recovery mode set RF cal and callsign too
    
    This lets us connect to Tm even if someone messes up the RF
    calibration or callsign info
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa3beed645c7bff08d22a657daffe75059dc7b88
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 08:46:31 2012 -0800

    altos: fix cc1120 radio test - state wasn't made static
    
    so whether the radio got turned on was random.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e037fbc004e1aa7d631ae999e587bdde2f6b71c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 17 17:34:01 2012 -0800

    altoslib: Add (disabled) conversion for MS5611
    
    In case we actually end up shipping an MS5611-based board at some
    point, it will be nice to have the java code on hand
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0606dc013d8b89fd5de0548af0de20fdab5c27d4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 16 22:19:17 2012 -0800

    doc: Start updating AltOS documentation for multi-arch
    
    Now that AltOS supports many processors, start updating the
    documentation to match.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3205a1d246e5ed229256aa787f26e6e122b7a2f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 1 17:52:22 2012 -0700

    altos: Build megadongle when possible
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 793b950083d09ead4f6230e041ad43aa9f5f2179
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 1 10:51:41 2012 -0700

    altos/megadongle: Add megadongle product
    
    Looks a lot like teledongle from a feature perspective.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f74d724f92b335d6c0674d0f1fcc650b729401df
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 1 10:50:03 2012 -0700

    altos: Remove legacy telemetry from ao_monitor when not needed
    
    For products not supporting LEGACY_MONITOR, remove the (undefined)
    structs from the ao_monitor union.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4d931cd99a7c91803584b71670e30c0d00217df
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 1 10:49:17 2012 -0700

    altos: Remove 'volatile' from ao_rssi.c globals
    
    No need for this, the variables aren't changed at interrupt time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 86f8b92149d1027b1d6d6b1cae097cfe47b02090
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 1 10:48:08 2012 -0700

    altos/stm: Support LEDs on multiple ports
    
    Split out the bits in a fairly simplistic fashion so that we support
    no more than 16 LEDs still.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcdaa0d748058a7f52a1bdc1a1627dc394762e5a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 30 19:56:51 2012 -0700

    altos/attiny: Remove debugging code which frobs PB1
    
    This was clearly stuck there to debug something; not a good idea...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af8cb40851a5cf5e3bd06ddd85e4e2df16bfbad2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 30 19:44:45 2012 -0700

    altos/micropeak: Run MS5607 at max resolution for micropeak
    
    We've got lots of time, so get the highest resolution baro data available.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 371da0c909098092db7b596496df9d58eed43703
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 30 19:41:08 2012 -0700

    altos/micropeak: Clock micropeak at 250kHz to save power
    
    This reduces average current consumption from 2mA to .4mA. This
    makes the battery last longer, but also gets the current under
    something that the typical CR1025 battery can support. Would be nice
    to reduce current even further; cheap CR1025 batteries still seem to
    fade a bit at this current level.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e8a4a00a5bb333d4ee9601d53242a82dfe0372c2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 30 19:39:55 2012 -0700

    altos/attiny: Don't initialize the CS pin in the general SPI setup
    
    Let the CS pin be configured by the driver, which can set the correct
    value before enabling the output.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7d2613bb0a6ab1c63e3f6252a3a2358fdfbc691
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 29 17:07:05 2012 -0700

    altos/micropeak: Set boost detect to 10m. Add 30s boost delay.
    
    Wait for 30 seconds before even starting look for boost. This provides
    an opportunity to close up the airframe, potentially causing pressure
    gradients seen by the baro sensor.
    
    Also, require a 10m vertical motion before triggering boost. This
    should limit accidental boost detect while capturing any actual flights.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d0ece403028e8a4453cc380575ed95c5e00ddb7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 29 11:49:23 2012 -0700

    doc: Add micropeak manual
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 424638446b7c7bb3f4aa6b4764d3e68175dcbf8c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 29 11:48:58 2012 -0700

    altos: Build micropeak when avr-gcc is available
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9ea0ad4024532fd6f87bb6708bf76b0c7aa1c5b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 29 11:47:17 2012 -0700

    altos/micropeak: Switch to MS5607 sensor. Require 4m for boost. Elide dead code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0623bc06a77536b903da09acbd12999d0ed05360
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 29 11:43:02 2012 -0700

    altos/attiny: Update to new interrupt macros
    
    Add ao_arch_block/release_interrupts macros to attiny architecture
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a46c9398a5f02ff4b52b7a4309a51498560cadb5
Merge: e57ab2a7 56023cf5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 26 14:08:32 2012 -0700

    Merge remote-tracking branch 'mjb/altosdroid'

commit e57ab2a7bfb69c0ef9b5b7fa8e53e20a500e7c6c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 13:42:10 2012 -0700

    altos: Provide ao_task_alarm_tick to reduce per-tick cost
    
    Cache the next wakeup time and check that before jumping to the task
    code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ccf0faa7d26d56deca7928b521d07be40504466a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 13:40:54 2012 -0700

    altos: Leave interrupts disabled while checking for task to run
    
    Otherwise, we run the risk of an interrupt waking a task after we've
    decided to idle the CPU.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b978cd467f9128f3069765dd8fbf8abad3459a4
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 13:38:13 2012 -0700

    altos: Clean up stm arch macros a bit.
    
    Turn a bunch of the macros into inline functions.
    Clean up the reboot method to use the stm_scb structure.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ee031bdab33cc6a1e2a7995a7c3a43f3a64b687
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 13:35:47 2012 -0700

    altos: Clean up cc1111 architecture macros a bit, removing cli/sei
    
    Just reformatting changes, aside from the removal of cli/sei
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff6a439cd24e239abd97107ecedf12dca71e59a5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 13:33:43 2012 -0700

    altos: Wrap ao_container_of value in parens
    
    Keeps the cast from being separated from the value when used
    in expressions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f221c78e6237e0a118ebe85c25e433fe16a7735d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 11:25:42 2012 -0700

    altos: Switch drivers to ao_arch_block/release_interrupts
    
    Stop using cli/sei, which are avr-specific
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56023cf5da9deede9fe627fe327783eceecf08f7
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Oct 25 20:39:20 2012 +1300

    altosdroid: more restrictive commit no. matching
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit bb3f42daffafb497639c2c678f6106ce54523ff3
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Oct 25 20:31:59 2012 +1300

    altosdroid: more reliable branch detection
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 963f7715be6c67056bbd8bbe898639adac64fc29
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 00:12:57 2012 -0700

    Bump version to 1.1.9.2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 282f0451dd141db3304ab73e4020a849e59721eb
Merge: 0680d62d 78e1de48
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 00:09:01 2012 -0700

    Merge remote-tracking branch 'mjb/altosdroid'

commit 0680d62d57496cea7ae4f1ef317c46e689b28e21
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 00:04:27 2012 -0700

    altos/megametrum: Depend on Makefile contents for build
    
    This ensures that everything is rebuilt when the Makefile changes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b49c751749dcd3e78991463c098f8d916f52179d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 23:50:55 2012 -0700

    altos: Add task queues.
    
    This replaces the array-based scheduler with a queue-based one
    instead. It should have the same basic scheduling semantics, but it
    walks shorter lists for each operation, making it much more efficient
    when the system has a lot of tasks.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b13d3c659240e5a8347b1ba7ab0bf1d8355eba3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 22:46:55 2012 -0700

    altos: Add stack-guard code. Uses STM MPU to trap stack overflow.
    
    This marks the lowest portion of the stack as inaccessible to the CPU,
    causing the processor to fault when it reaches it. The fault then
    generates a panic message so that the user can know what happened.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e80fa6de4ccc5c4851eab9fb941f9282d2e3eb16
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 22:35:32 2012 -0700

    altos: Replace __critical usage with ao_arch_critical as needed
    
    sdcc offers __critical as a machine-independent way to block
    interrupts, but as gcc doesn't, we need to use a compiler-independent
    construct instead. ao_arch_critical has been around since the AVR
    port, but some old __critical usages remained.
    
    This fixes a bunch of random hangs when communicating with MM over USB
    or the radio as the various stdio loops were running without
    interrupts blocked between the test and the sleep.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b119e19604aa557a40e848c60d98a67b5f259bbd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 23 22:17:49 2012 -0700

    altos: profiling on STM32L
    
    Add sample-based profiling, using a 1kHz timer
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d34811ba035367bbf26a8510265754f3fbb5a95
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 23:21:38 2012 -0700

    altos: Add ao_arch_block/release_interrupts to avr and cc1111
    
    Stop using cli/sei for AVR, add replacement to __critical for cc1111
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09aa379fc57cd4f30c18c7bda2532a79109354c2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 23:55:00 2012 -0700

    altos: Force beep timer regs reload when enabling beeper
    
    Without this, there can be a long delay between asking for the beeper
    and having it actually start sounding.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 097c931c979d3652ef8e279ba66bb7ce758f37a3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 23:52:49 2012 -0700

    altos: When slave mode first starts, accept any packet
    
    This eliminates the packet sequence matching for the first packet,
    allowing outstanding send data to arrive from the master instead of
    ignoring packets with data until they match the seqno
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 978c16105dd334a4a2807140dbbcc7f306a6b581
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 23:55:45 2012 -0700

    altosui: Allow AltosConfig to abort before serial line starts
    
    Check to see if the serial line is active before trying to close it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 78e1de481bfdbf7c7bb908c317b23c8ee275c84f
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Oct 24 20:54:18 2012 +1300

    altosdroid: Add version information to UI
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5ad62b07bef41921b46cb7251072dc24290ee4c9
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Oct 24 20:52:09 2012 +1300

    altosdroid: Add branch to BuildInfo
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 055f3232decc07e064d596469b81cf9869411c2d
Merge: 8ca58e20 9e60fa21
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Oct 23 09:38:36 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 8ca58e20208495ce63b8256a8ffa43932867e8d5
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Oct 23 09:33:17 2012 -0600

    remove local copy of launch-sites.txt and reference to old web location

commit 37a09f1edc57924dabcf2a71794a42e37b5a354c
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Oct 23 19:22:52 2012 +1300

    altosdroid: match only the current version tag
    
    Don't match non version tags - and always return the long format of
    git describe, rather than just the tag (when the tag is on the current
    commit).
    
    Split the commit number/hash more reliably by removing the version tag
    from the result first.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 9e60fa214ad2c48fbe8f7e5c437681aa35d249fa
Merge: 27c31572 4b41561a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 22:39:31 2012 -0700

    Merge remote-tracking branch 'mjb/altosdroid'

commit 27c31572f4f63c2282e1cc583f4402337fcb548a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 22:38:46 2012 -0700

    altosui: Allow any non-basestation to be configured
    
    TelePyro has some configuration bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 79f4e684713cff6bf999cac52f5d9525a6f7d278
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 21:39:12 2012 -0700

    altos: make check-avr-mem utility executable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4ea2e7c3ed84fb6f4e880da6c5ddf2a83d3ef61
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 21:38:18 2012 -0700

    altos: Allow pyro flight state config to be set
    
    Without these lines, flight state compares can't be shown or set.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e80d7cd18fa4dac98d941e86b5956403a7170966
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 21:37:25 2012 -0700

    altos: Let AVR products override the stack size. Set telepyro to 104
    
    Otherwise, telepyro doesn't have enough ram...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20496608ca287e65302193ee1afe9f0cad3a36e1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 21:36:12 2012 -0700

    altoslib: capitalize 'Invalid' state name appropriately
    
    It shouldn't ever appear, but it seemed wrong to have it not match the
    rest of the strings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe00d1169c65cb289f77093cf281efbd0a5d4e64
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 21:35:06 2012 -0700

    altosui/altoslib: Add support for configuring pyro channels
    
    This provides a UI on devices which have pyro channels other than
    main/apogee.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd619a01bf3489b1df017aca20362757b087ec11
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 08:52:08 2012 -0700

    altos: Add state comparisons to pyro channel conditions
    
    Let pyro channels block waiting for flight state changes. This
    allows for pyro channels to be synchronized with the main iginiter
    channels.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b41561abf9144e73995ccc18eadad7936d1dd15
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Oct 22 11:55:07 2012 +1300

    altosdroid: add autogenerated BuildInfo.java
    
    * Generated by shell script that parses git describe
    * Makefile rule to call script on every run
    * also includes eclipse hooks to call shell script on build
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 8cb09f8a3e2dae5f7f3d2d3dbbc81ba40b491e75
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 20:57:21 2012 -0700

    altosdroid: AltosState now has speed and max_speed funcs
    
    These pull out the appropriate baro/accel speed values and may use
    some fancier values in future.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4ee3a35dbb1586f65adada0eaf34b7b4e5432eb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 19:51:02 2012 -0700

    altoslib: Add AltosRecordNone.java
    
    oops. forgot a file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e16c33545640f745cec8dc595b2343359efced57
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 17:26:16 2012 -0700

    altos/test: Use MMA655X in ao_flight_test_mm. Add run-mm to plot mm data
    
    Pull MMA655X data out of eeprom file when available. Switch build to
    using MMA655x by default.
    
    Clone run-one to plot a single mm flight
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f789b0b94eb01e3875f7711ce053658c31e75fad
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 17:00:08 2012 -0700

    altosui: Handle .mega files in Landed tab 'Graph Flight' button
    
    Need to check for .mega files here too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a1a1dae3e00bfcddf31c447f915245a7d42e566
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 16:55:00 2012 -0700

    altos: Document mega log packet types
    
    Just add comments to ao_log.h so it's easy to remember which labels go
    with each record.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 89c621be35e1a6d3394b0e143391fcf2d94d7b41
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 16:53:23 2012 -0700

    altoslib: Parse GPS .mega file entries for reply/graphing
    
    The .mega file parsing had a pile of leftovers from when it was cloned
    from the .eeprom file parsing code. Replace all of that with the right
    parsing bits so that GPS data will be presented correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7894c27b2b2c3c46a7c107c8acd5977830f006cf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 16:13:14 2012 -0700

    altoslib: Move computed state from AltosRecord to AltosState
    
    Make AltosRecord simply track the raw data and have AltosState hold
    all computed values, including cross-packet averages and computed speeds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dec2e455935a71dec13b84bb886252b7f4a1a641
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 14:11:07 2012 -0700

    altoslib: Compute accelerometer speed from megametrum eeprom data
    
    Duplicates code from the TM eeprom state tracking code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcadf5e55f076604b0b168be0060026110e263ed
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 14:10:32 2012 -0700

    altoslib: remove a couple of TM log record types from MM log parsing
    
    PRESSURE and DEPLOY log records don't occurin MM eeprom files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f5a453cb4650fc97cc990a9e42242278c29cc04
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 13:42:00 2012 -0700

    altoslib: MegaMetrum eeprom never loses GPS date
    
    TeleMetrum had a firmware bug that would fail to record the GPS date
    and time correctly, that was hacked around in altosui, but isn't
    needed for MegaMetrum. Remove those hacks from the MM path.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84a144e8b479550406323bc3b2cf89026b770746
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 13:02:40 2012 -0700

    altosui: Correct megametrum eeprom filename date
    
    Was fetching day-of-month from the year field
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db0bbf76b5d739b5d7628bc9139dc8fecd501ac3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 13:02:05 2012 -0700

    altosui: Add new filename filters
    
    Allow the user to restrict filenames to telem, eeprom or mega files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eea141b2f35722bad4cd31d9484d6d794646f815
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 13:01:03 2012 -0700

    altos/stm: Stop spewing clock out PA8 pin
    
    This was used to debug the clock bringup, but is not useful anymore,
    and probably a bad idea to boot.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f664da148ae15d46d179d8ecede6fc0bc710ffb
Merge: 3aba5eb5 23b0c2fe
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 18 16:49:28 2012 -0700

    Merge branch 'master' into pwmin-new

commit 23b0c2fe95dbfaa4a8ce603b56b75d12d2c17d8c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 18 16:19:38 2012 -0700

    altosui: Re-add a couple of "unused" values
    
    The values in these calls aren't needed, but the side-effects are, so
    add them back in.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 05173876d5984a54929db486c9ce1e19bde79526
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 18 16:02:59 2012 -0700

    Bump version to 1.1.9.1
    
    Prepare for Rocketober/Thrustration
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ceb42f4c96076b01ac05577c9fe461b66e72d30d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 18 15:34:41 2012 -0700

    altos/megametrum: Switch back to using the MS5607
    
    We're planning to ship the MS5607
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a55501660ebab3b858a48483c5df1cfb4e858e4
Merge: 0361235c 440365bd
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 18 15:18:52 2012 -0700

    Merge branch 'master' into mm-ms5611
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3aba5eb5a75dff3e7c8778561c533903eacb110a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 22:33:34 2012 -0700

    altos: Build telescience-pwm product when possible
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f34f0ac7f355149446374a4c82dbf004919bc2dd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 22:21:04 2012 -0700

    altos: Add telescience-pwm product
    
    Split out special PWM-sampling telescience product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14698c424f833dc6d2fb38f69f5f661804cf8303
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 22:17:25 2012 -0700

    altos: Only enable PWM on telescience_pwm product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac318c19594569532f1fa53b639eefa28d9b7c34
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 18:41:00 2012 -0600

    telescience: correctly calculating rate values with higher resolution

commit da7ac5e95575f6aa1d2514748869771b7686c0e1
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 14:24:05 2012 -0600

    ICP3 working

commit ed5aa2329985ffbaba74514e0555f67fc378a8d8
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 13:41:27 2012 -0600

    Timer 3 working with slower clock and all 16 bits.

commit 1d7e6f5dcb29535cde9b7dfd6998d7889baf835b
Author: Robert Garbee <robert@gag.com>
Date:   Tue Jul 17 13:23:48 2012 -0600

    first work on PWM input to TeleScience, 'p' command displays timer 1

commit 1747ab07dab6f4e977e0c3e83b57510cd668e369
Author: Robert Garbee <robert@gag.com>
Date:   Thu Jul 19 11:40:20 2012 -0600

    telescience: steal last adc channel for icp3 most recent value
    Make the ICP3 rpm counter use in ao_adc_avr.c optional
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 440365bd17d804c2f574c35164612cf1682397d7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 21:54:23 2012 -0700

    altosui: Accept serial number of zero for eeprom download
    
    AVR-based products don't have a valid serial number, and so usually
    report 0. Accept this by making the 'no serial number' case check for
    negative values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d6d90e15db30991bf81060a0876ae8adb843c75
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 21:08:58 2012 -0700

    altos/avr: Use ISR_BLOCK to disable interrupts during slave ISR
    
    This avoids enabling and then immediatly disabling them
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8d8b23ca5e6c2d3a19f8aeda2764b43d25eb9d6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 17:14:05 2012 -0700

    altosui: Print exception stack trace when tracking flights
    
    More useful in fixing the problem
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef9cb19d8b210e02eaa1c657833c1bd5fc619ad8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 17:13:04 2012 -0700

    altosui: Handle missing pad distance in descent tab
    
    When the GPS isn't locked, the distance from the pad cannot be
    computed and is left missing. Not crashing in this case is more useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 60880bda2153ba3122c7102cd2bacbcca73b9e0d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 15 00:24:57 2012 -0700

    altos/telelco: Make the RSSI led turn red when no packet is received
    
    This involved splitting out the notion of ever having received an
    answer and having received an answer from the last query.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f31f6652f4b0898214d06d009af823a1ed3b96a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 15 00:24:28 2012 -0700

    altos/telelco: 10ms is not enough time to get a packet back
    
    Not reliable, so bump to 20ms
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fdc00ec143022356bf8cdbb28812f045b439c549
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 15 00:07:57 2012 -0700

    altos/telelco: Only display every 10th box number during scan
    
    This reduces the scan time to about 4 seconds, which seems tolerable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6069e38d6d2f9b37aa8671c41b4a470d92996a4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 15 00:06:57 2012 -0700

    altos/telelco: Crank up SPI speed to cc1111
    
    The cc1111 can handle up to 3MHz, so use 2MHz. Also, crank down the
    packet wait time to 10ms, which should be plenty long for the remote
    box to receive and return a packet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80227c08444d5c82fd43320644cdeec6f34fee1b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 15 00:06:10 2012 -0700

    altos/stm: Declare all SPI bus speeds
    
    Just list them all so users can pick what they like
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44c13005f34fdf7d4831e86e1f3e8729e9b67a68
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 14 23:40:58 2012 -0700

    altos/telelco: Actually set pad when it changes
    
    Oops. Lost the actual assignment to the current pad
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b042f3d6e6b3241cd5e55cf893242ea599d3c0e9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 14 23:24:49 2012 -0700

    altos/telelco: Handle case where no boxes are present
    
    Don't infinite loop looking for something which isn't there
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56ebb0a2f50fd56f4f0b0c695e516bee8fae36fb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 14 23:16:45 2012 -0700

    altos/telelco: Only present valid pads
    
    Limit pad display to valid pads, skipping missing ones.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84c56b1e92fca181207c468ea6351db3c2f196fb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 14 23:04:44 2012 -0700

    altos/telefire: Report valid channels instead of valid pins
    
    Now that pins don't match channels 1:1, make sure that the report back
    to the LCO names the channels instead of the pin numbers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91b8c8b20cead2836ec835f44b4ca0cf06cbf518
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 15:04:46 2012 -0700

    altos/test: Display MPU6000 values in ao_flight_test_mm output
    
    No computation yet, just making the values visible in the output
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6eec0bec06d2e246ea3c9552818ad3180c1e318
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 15:04:00 2012 -0700

    altos: Define full-scale gyro and accel values for MPU6000
    
    This lets other code convert MPU6000 readings into canonical units
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5caf56e89678637c1afa79700a2fa09aa67dea9b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 15:02:42 2012 -0700

    altos: When missing MMA655x, create fake Z accel value
    
    This avoids overwriting the MPU6000 y acceleration value so that other
    computations using that value can work unmodified.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 321d0f68c04a5a9c6ea7874081e6245d44c48bb4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 13:39:03 2012 -0700

    altos/test: Add ao_flight_test_mm
    
    This reads mega metrum eeprom files and runs the flight code over it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0ec77f5c90e0b930488ae2ab75efcbba8a3bd1d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 13:37:29 2012 -0700

    altos: Eliminate implicit 1 byte offset in uint16/int16 functions
    
    Make callers explicitly compute the full offset
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2733d1b71bbac2c5ef4a2c3a1992ba448e981267
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 13:35:42 2012 -0700

    altos: Split out ms5607 conversion code for use in ao_flight_test
    
    Makes the conversion code available even where the driver isn't needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46abd248fb2eb84f161672ffce121b2203d42be0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 13:34:28 2012 -0700

    altos: struct ao_log_mega doesn't have a ground temp value
    
    There's no averaged ground temperature recorded in the flight system
    to save there, so just remove the field
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eea1c8da986f9dbd0ca58c926a2bbe01721c1bda
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 13:33:45 2012 -0700

    altos: Document a few member offsets in struct ao_log_record
    
    Incomplete, but useful even so
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c607bd1442e60fec1421955c996f6aad1d98647a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 13:32:56 2012 -0700

    altosui: Parse .mega files from command line
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 162a21dc423c2883a54f7d2a154871ae714d1552
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:27:14 2012 -0700

    altos: Add .gitignore for micropeak
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6cfb2d3b1c75916ee69d069519edc675e37e1aa1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:26:08 2012 -0700

    altos: Add (untested) driver for AT24C i2c flash parts
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b9bf8e01e243508297f28b102cb2477dc1bc74df
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:22:41 2012 -0700

    altos: Add initial micropeak implementation
    
    Blinks out max height in decimeters, stores previous flight data to
    internal eeprom.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9c732effeb2ef4a4d8bc9599febed74a6ec2f466
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:18:37 2012 -0700

    altos: Allow products to define which LED to panic with
    
    Continue to use AO_LED_RED by default.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 767b74e1466ad4e31746340081d6d60e40359425
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:08:19 2012 -0700

    altos: Megametrum uses altitude-pa.h, not altitude.h
    
    Make sure megametrum gets rebuilt as needed when the various
    altitude-pa related files change
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 64500ab11ab76d2309608f8e02a1dd9658963b3e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:04:57 2012 -0700

    altos: Add attiny architecture files
    
    These are designed to work with the ATtiny85 processor, but can
    presuambly be easily adapted to others in that series
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16bad3b6ab65cf31b19152127cb6af69142c5c12
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:03:28 2012 -0700

    altos: Include struct ao_data declaration only when used
    
    Leave it out for products that don't have a ring of sensor data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7751c9cbc630f7251b8988f8da68be9a54ff552c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:02:29 2012 -0700

    altos: Clean up types in Pa conversion testing code. Only test to 40km
    
    A couple of missing 'int' declarations.
    Only test to 40km as above that there aren't enough data points to do
    anything reasonable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 866d10b3faa96f6c5a2c495a2c12a0d2bc8259ef
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:01:16 2012 -0700

    altos: Elide ao_altitude_to_pa in flight firmware
    
    Only the conversion testing code needs to get back from altitude to
    pressure, so don't include that code in other environments.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68308908afbd1f04b17056d2be408c89b3578c86
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 13:59:50 2012 -0700

    altos: Parameterize altitude table access and initialization
    
    This allows projects to store the altitude data in different
    representations or with different access modes.
    
    By default, altitude data is stored in meters, but the initializers
    include decimeter values so those can be used instead if desired.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 175380a436efa35bbfae2ee5e29e12e9ef86fbde
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 13:57:49 2012 -0700

    altos: Use alt_t for all Pascal-based altitude data
    
    This allows alt_t to be overridden for systems using the MS5607/MS5611
    sensors
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be0a28ee7a6fbd98fc8113db8501bb791a112fa0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 13:55:33 2012 -0700

    altos: Allow for other mutex implementations
    
    Allow projects to replace ao_mutex_get and ao_mutex_put with macros
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a3ee911353291b04e161d50a181ed4211d467a2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 13:54:37 2012 -0700

    altos: Allow projects to specify clock at other than 100Hz
    
    Leave the default at 100Hz, but allow it to be overridden
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7795d8309b3e1147bc37d31a0adde42d7dee6cd1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 13:37:07 2012 -0700

    altos: Prepare ms5607 driver for use in non-tasking products
    
    Micropeak doesn't have tasking, prepare the ms5607 driver for that
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a07b8ba166e05e7d1722c59651ef00e9fb7580d5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 13:31:17 2012 -0700

    altos: Split task definitions out to ao_task.h
    
    And only include them if using tasks
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3f059f8878a79b3154a19b6803fbc367eda80dc9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 10 14:28:07 2012 -0700

    altos/telefire: Add siren/strobe support
    
    This also involved hacking up the code to allow for non-zero offsets
    for the pad firing and continuity pins.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0361235c9ef56738ba0e97be88a85afef0ce8268
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 8 23:24:19 2012 -0700

    altos: Fix up ms5607 and mma655x commands to work again
    
    These just display the most recently fetched values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 39c5738acdfdf0c87b64de6135fe107971cfa12b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 8 23:04:16 2012 -0700

    altos: Go back to recording sensor data in globals
    
    Instead of trying to get things into the ring from a variety of
    functions, go back to the simpler method of storing them in globals
    and having the ADC code just pluck out the most recent values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 422799d9be36ef71b63c1c0fd80d5e76da802949
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 8 21:59:55 2012 -0700

    altos: Compute desired frequency when upgrading from pre-1.1
    
    Instead of just smashing the frequency to 434.550, compute the
    frequency from the old radio channel value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16bbe9d25856259d2694751c364b668638e4a971
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 15:40:41 2012 -0700

    altos/megametrum: Try running accel and baro in parallel again
    
    Now that the baro sensor appears to be working, try running
    conversions in parallel to see if that makes the accel cal happy
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d47dd1d9104745cf68bef23b066c5033ca30a84
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 19:39:15 2012 -0700

    altos/stm: Set SPI clock high for disabled SPI busses
    
    This should avoid an accidental low->high transition when switching
    between multiple SPI busses.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4b1dffeef3e9ea96e143f74782e4da7d116c0d4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 18:25:15 2012 -0700

    altos/telefire: Make sure armed alarm goes off on time
    
    Instead of turning the alarm off when a packet is received after the
    deadline, just do it in the thread which is awake all of the time.
    
    This prevents the alarm from sticking on when the LCO box is turned
    off while the arming key is on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35cb2dc51708ab572a4c72422e5902a313eda58e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 17:56:23 2012 -0700

    altos/stm: Clean up SPI pin configuration code
    
    Make sure none of the pin configurations are being used at startup
    time. Split out the pin configuration into separate functions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41add569413bf3ec564195963277c81f2d2da798
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 17:21:55 2012 -0700

    altos/drivers: Use data ring values for MS5607 presentation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b28eefe6b32033a0e85731aa38af7e07a8b45f5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 17:21:10 2012 -0700

    altos/megametrum: Make MS5607 driver hold SPI bus for whole operation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c676ad8048d10ad9da22ea3acf19e4e1872103ff
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 17:05:59 2012 -0700

    altos/megametrum: Use mma655x for acceleration measurements now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82fdc42d61340e6b76580ff12a9e1bea59eb8079
Merge: 6b8881a7 2cac8c57
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 3 10:44:28 2012 -0700

    Merge branch 'master' into mm-ms5611

commit 2cac8c572ce533ded89dae9a412b4d1b5c748342
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 3 10:43:28 2012 -0700

    altos: Re-enable the ms5607 and mma655x acquisition threads
    
    These were disabled to help with testing in Argonia
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b8881a7bdb9f89306a700e9a8853b00df29bf5d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 3 07:50:48 2012 -0700

    altos/megametrum: Commit for boards with MS5611 baro sensor
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fdd08cc093134c5f87dab9533b99a042a699381b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 28 22:39:55 2012 -0700

    altos: Provide MS5611 configuration option, HAS_MS5611
    
    MS5611 and MS5607 use slightly different conversion functions. Alas,
    there doesn't appear to be a way to tell them apart in software. This
    patch adds the necessary conversion changes and makes them depend on a
    compile-time configuration option.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc7216d286cc7fe8007f5208ad97a630166572f3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 21 13:29:17 2012 +0200

    altos: Shrink Pa to altitude table
    
    This improves the computation of the table enough that errors from a
    470 entry table are almost all < 0.5m.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c6231ecef2e4f978a0de452a17a2a24e6e68827
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 20 11:33:24 2012 +0200

    Bump revision to 1.2 development branch
    
    With 1.1 out the door, this now starts the 1.2 development series
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f2734bb418f5c3a89fa3f1bf1b98ce4cfe432e1
Merge: e69a433f 3fe5c2f9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 20 11:30:19 2012 +0200

    Merge remote-tracking branch 'mjb/altosdroid'

commit e69a433fd93b9f6bd2297d8045eb075fee29e73b
Merge: 19243ecc 6e0d672b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 20 11:30:11 2012 +0200

    Merge remote-tracking branch 'mjb/prefs_interface'

commit 19243ecc9b5bbdcc069ae24acf1ca807322c84d8
Merge: 90c1b6db 0ef8b714
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 20 11:29:55 2012 +0200

    Merge remote-tracking branch 'mjb/altosui_mjb'

commit 3fe5c2f9fc01258d45c20070e9874d76bc6c8c07
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 18 23:47:50 2012 +1200

    altosdroid: initial implementation of telemetry logging.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 0541201d4afe3e5d7913465e1db10e586d7182bb
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 18 23:47:06 2012 +1200

    altoslib: make parts of AltosLog public for usage outside altoslib.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c058ec2d6070458a0b7d3ef56041e985412ee565
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 18 23:46:17 2012 +1200

    altos{lib,ui,droid}: move OS specific code out of altoslib
    
    This is to allow the usage of AltosLog on Android - no swing, so
    we need to push the "home directory" code used to pick a default
    telemetry logging path - using the PreferencesBackend interface
    for now.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 36e684724e327dbd4319411ef0602fafb4d0c073
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 18 23:43:18 2012 +1200

    altosdroid: cosmetic re-order of methods
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 8f11a6d2c3de228c3cefb95a7d1a76d53e532acd
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 18 23:42:11 2012 +1200

    altosdroid: simplify keys() method
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit f79b445cc29fc1e424f99c97e71c7d3637bf4ba6
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 18 23:38:12 2012 +1200

    altosdroid: Update Makefile.am
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 90c1b6db8d1f401a992fe44983b3df64739fe263
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 16 15:12:26 2012 -0600

    further refinment of Releasing document

commit 7a0cce7fa0c802b1597fef94cfaf00aa0c28c988
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 16 13:59:21 2012 -0600

    releasing 1.1.1

commit 0cd443d5e55b2c3b97ecf53389ff76bc4bc6018f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 16 12:38:33 2012 -0700

    Add release notes for version 1.1.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe8ab96e8727c25c04cac473cafb264cf7e80156
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Sep 17 01:29:33 2012 +1200

    altosdroid: implement AltosPreferencesBackend, and initialize.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 52d3cad4f744140e1aa06fdfc0d49a0cf8734fd4
Merge: 31f5a026 6e0d672b
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Sep 16 22:27:04 2012 +1200

    Merge branch 'prefs_interface' into altosdroid

commit cb48dd0b03b445437f751028e8383610b65b0a68
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 16 02:39:25 2012 -0700

    altos: Fix telemini sdcdb init file
    
    Set the driver source path for the debugger
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3520bbf1ed6461d1ce7af001c529563a3cffa3c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 16 00:58:20 2012 -0700

    altosui: Gather Tm sensor data in Monitor Idle mode
    
    Tm is pretty much the same as TM for the analog sensors, it's just
    missing the accelerometr. Use the same code for constructing an
    AltosRecord for it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31f5a02654cbf172beed25f4c518dfb7be8c714e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 14 16:56:04 2012 -0700

    altos: Need to use 16-bit counts for ao_xmem functions
    
    Trying to use 8-bit counts is a nice optimization which fails when the
    count is larger than 255, as is the case with clearing the flash block
    in the AT45 driver. This bug resulted in the inability to erase
    flights on TeleMetrum v1.0 boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b898cf0a2abf2b0478d5afc5aca030c6b4c8bd0b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 14 12:59:31 2012 -0700

    altosui: Show over-ground-distance in Descent tab
    
    Helps to know where the rocket might land.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f36f73b2d02b72201683cf5795851034bbd6f28e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 14 12:58:54 2012 -0700

    altosui: Remove debugging from KML export
    
    Left in from testing the Eeprom export bug
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97ab77d548964115e4b41ad5952194fcd1455c96
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 14 11:13:02 2012 -0700

    altosui: Fix Landed tab units
    
    And clean up the whole flight value reporting code base. It would be
    nice to create a separate class to make this easier; at present
    there's a bunch of customization embedded in how values are presented
    in each tab.
    
    Reported by: Bdale Garbee <bdale@gag.com>
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43e646657502f6162fa02f37fd2bd5aa3e29a1a8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 14 11:08:57 2012 -0700

    altoslib: Update GPS seen_values in AltosEepromIterable
    
    Otherwise, KML export won't ever get GPS data to write.
    
    Reported by: Bob Brown <prefect@kloudbusters.org>
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b6dd9105ba36aa11d6d0ee6e0823965b9beffb9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 14 11:08:19 2012 -0700

    altoslib: Remove duplicate seen_ values in AltosEepromIterable
    
    These are defined in AltosRecord; duplicating them is not a good plan
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e0d672b8a516a604d8ea1abd2bed113c608143f
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 12:43:21 2012 +1200

    altosui: remove un-used import
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit f985ea055d935b10ae9ae8441fe808ba2c13c99e
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 01:27:22 2012 +1200

    altosui: revert AltosUIPreferences init() method
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 9335a74694df00c4876055e7c98661236646f6e5
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 01:08:53 2012 +1200

    altosui: Add return to try/catch.. duh
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d5e199c34ff5a02a4c4cc917c3f0eec32eae72a9
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 01:06:59 2012 +1200

    altosui: add missing try/catch
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 26c83bc0981036651a89c29771b2ad52c8fb0396
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 01:03:53 2012 +1200

    altosui/altoslib: bug fixes, update Makefile.am
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 08345b8909922f2ff8f9ed8b4497b9cbea6b26e9
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 00:53:56 2012 +1200

    altosui/altoslib: Add call to …Preferences.init() with backend object, remove static init()
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 17127847300de9a6782b901926a3fcb9ef021b78
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 00:46:34 2012 +1200

    altoslib: Add AltosPreferencesBackend.java to Makefile.am
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d875b459b5e9f7bcbbbbe318f947b0451ce6738f
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 00:44:59 2012 +1200

    altosui/altoslib: add methods to interface, fix imports/exceptions in BT code
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 67b618409a0d34fff26cac6025bc159ff92ede9c
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 00:40:16 2012 +1200

    altosui: add missing methods for Backend, fix BT code.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ec036e8fe057f4b641ba9ee17d6dce2689816047
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 00:25:49 2012 +1200

    altoslib/altosui: begin moving preferences "backend" into interface
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 0ef8b7148784ed5bcbea21dde313fb02f50ef734
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:17:24 2012 +1200

    altosui: comment out obsolete code - could probably remove the file.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 6daf71d0af7ffdbbfdb7436edd536bc811850d42
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:16:48 2012 +1200

    altosui: add type to … implements Comparable.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d3d69bdecfcb45d1e3a8c6b10c80eef1afcc2310
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:16:16 2012 +1200

    altosui: comment out/remove dead code
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c9fa8faabb6f7fb59714c42e1029ce3d71c52ff8
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:15:36 2012 +1200

    altosui: access class variables by class, not instance
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit f9e1c5949a24e27897587b0b0ca00e089f362215
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:15:07 2012 +1200

    altosui: remove redundant catches
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 38fb6c070ffaf820d524fecce540d91fc6dda57b
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:14:31 2012 +1200

    altosui: comment out un-used classes and associated imports
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ce1b19a012a2c1c623b03efb93b881e297736718
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:13:35 2012 +1200

    altosui: comment out un-used fields and methods
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 382c54a0d052c8975b57c995ef83bc8934bde242
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:09:58 2012 +1200

    altosui: remove un-used imports
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit eefcfa94f360f8c5a7233370d4178525bccbb22f
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 13 16:13:42 2012 -0600

    add note about checking doc copyright date and revision history to Releasing

commit 2441090f26c3df66a6ce48d64e64384ce9e5ef82
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 13 15:12:33 2012 -0700

    doc: Add revision history for 1.1. Update copyright date
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 320d90c376dccfe1599505e3b485df8d46e34bb3
Merge: 9a7d6431 2e6c6a6c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 13 15:36:37 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 2e6c6a6c15a7cff9f20b70a4cf58697da1302f01
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 13 00:35:27 2012 -0700

    doc: Document imperial units and groundstation configuration
    
    What it says on the tin.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a7d6431777ce3377b788ddac6cb9fadd53c039c
Merge: 2439f53e 9728b20a
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 13 00:58:30 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 9728b20a4ad9576ac1022dc9a5771f5a3eb92b3d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 23:56:18 2012 -0700

    altosui: Exit with an error status when file processing fails
    
    If the user provides any files on the command line, and if processing
    them fails in some way, exit immediately with an error indication.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0564f9b13d4e3050b0a45fc1c4f710ab2b1f9d81
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 22:40:57 2012 -0700

    altosui: Leave new_gps indication until gps value is used
    
    During replay, AltosState may not see a new GPS value as soon as it
    lands in the state field as additional records with the same timestamp
    may come in after the GPS record.
    
    Instead of resetting the new_gps indication when the new record is
    created, wait until the new_gps indication is seen by the AltosState
    update code and have that clear the new_gps indication.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e237920abb582d7ceb3e1925b11a848575ac68a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 21:32:25 2012 -0700

    altosui: Stop downloading eeprom data on a block full of invalid data
    
    When no valid records are found within an eeprom block, we assume that
    no more data will be found within the entire storage area.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2439f53ea21c84f7c510dc191dde025ada24281f
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 12 21:50:25 2012 -0600

    document workaround for 'make fat' not building altoslib

commit 07d9ba938f2742da1bce5d8df55cbc236207a981
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 12 19:50:07 2012 -0600

    update Releasing for non-native versioning and builds on debian branch

commit fe009534ce6846b6db96cac8f6c2d53ba8010d91
Merge: 69d42b26 8ee29fe4
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 12 19:49:51 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 8ee29fe48771dd22a0c5428761ee53a728495d11
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 16:07:41 2012 -0700

    altosui: Serialize data access in TD config code
    
    Setting the values was being done in the UI thread instead of the
    Serial thread, which left the serial thread with uninitialized values
    when it went to update the displayed value for the current
    frequency. All fixed now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 19e35de47157923670b1864ce7b04f8d82f3bdea
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 16:06:59 2012 -0700

    altosui: Lock access to preferences data
    
    These are accessed by several different threads, so keep things sane
    by just holding locks across all access.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b5340c2b75c500011355c4889da443c4b9c4891
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 13:07:01 2012 -0700

    altosui: Add multi-sized icons to all windows
    
    This lets the window system pick a better size for presentation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e4fc0b3953655eb720372d9b4274cd4bca19556
Author: Tom Marble <tmarble@info9.net>
Date:   Wed Sep 12 10:05:42 2012 -0500

    Reference specific dependent jars in the AltosUI launchers

commit f0f4f907042e12815284abe1b63ae2d4a5a2d598
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 02:30:59 2012 -0700

    doc: Mention changes to flight data download UI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 42bbe15512533f2d958b8219a02fbd256593092a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 02:26:32 2012 -0700

    altosui: Initialize flight velocity to zero when reading eeprom files
    
    Otherwise, the integration of velocity will start at MISSING and get
    stranger. Fortunately, we know the initial velocity of the rocket when
    sitting on the pad.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3c3c6eabd6837f0e72acee3906c8f71c6f0030e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 23:37:20 2012 -0700

    altosui: Don't say a decimal point for distances in meters
    
    Useful for distances in miles, but not meters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 87f9a8923656f275f74cfb6c8c6a57bbe59e74f8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 23:36:26 2012 -0700

    altosui: Initialize imperial units checkbox with correct value
    
    Use imperial units preference instead of serial debug preference. Cut
    & paste programming failure...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69d42b26223b45df4167aa3baafba100ad71baab
Merge: 3e9078cb 3fa5fbdf
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 12 00:26:21 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 3fa5fbdfd1ab257028f272fbc32759b39608ddaf
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 23:04:19 2012 -0700

    Clean up Windows event handles on com port close
    
    This avoids having to wait for the receiver to timeout before we can
    open the same com port again.
    
    This patch also adds a bit more debugging -- it prints Windows error
    messages to stdout along with the file/line where the error was generated.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a154ce0b9fc3ea360d6bc7e17d6debb2da94438
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 22:03:17 2012 -0700

    Include AltosLib.jar in windows install
    
    Otherwise, altosui doesn't do much.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e9078cb1077e7ad0d845f10c2ad0a007df76d29
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Sep 11 22:17:22 2012 -0600

    releasing 1.1

commit 4563624638884b7b2f16cd4d396c00690e045999
Merge: 11fbcf5e e5a55dbf
Author: Tom Marble <tmarble@info9.net>
Date:   Tue Sep 11 22:50:18 2012 -0500

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 11fbcf5e30e0cd09f2d6b448911d2ef62b7f29c7
Author: Tom Marble <tmarble@info9.net>
Date:   Tue Sep 11 22:48:04 2012 -0500

    Added the feature to AC to default --with-android to $ANDROID_SDK (if set)
    Fixed typos in altosui/Makefile.am (had removed JCOMMON, but it's from AC)
    Jenkins changes:
    - added android sdk
    - will now record artifacts: altoslib/AltosLib.jar,altosui/altosui.jar,**/*.apk

commit e5a55dbf265354e7c94be3e2be53c2d5c8fba056
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 15:53:36 2012 -0700

    Use ft/s for imperial speeds
    
    Bob Brown thinks this unit will be more useful than mph
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73d05650eae1d3958e02e9ffde2020a2438eccbb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 15:30:45 2012 -0700

    Add Version 1.1 release notes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ae3e4cea1cd180ff18b5293a67b4520cc8292be
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 01:00:05 2012 -0700

    altosui: Imperial units for graphs too
    
    Just to be consistent
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95268d681c9a6652d84db383f55a4fe8a4ac5173
Author: Tom Marble <tmarble@info9.net>
Date:   Tue Sep 11 12:54:31 2012 -0500

    Reverted package name to 'altosui' from 'AltosUI'
    Also added emacs backup regex (*~) to .gitignore

commit 13c64f6fb5764c6a0f3520cf4e48a75d78e163db
Author: Tom Marble <tmarble@info9.net>
Date:   Tue Sep 11 12:44:24 2012 -0500

    Add appropriate Java build deps as given from autoconf

commit 8e506274a35eccacd2d4523faa08d279a201753f
Merge: 0bc3ed53 1fc97dd9
Author: Tom Marble <tmarble@info9.net>
Date:   Tue Sep 11 11:39:22 2012 -0500

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 0bc3ed53aa8972c7080d6335f609cd9d0df1c79d
Author: Tom Marble <tmarble@info9.net>
Date:   Tue Sep 11 11:37:14 2012 -0500

    Use explicit build deps for altosui (avoids * wildcarding)

commit 1fc97dd9875a7639533a34438c4c7c999412eb3a
Merge: 8397d2b0 4420d4a9
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Sep 11 10:35:04 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 8397d2b041824ddf1cc0b82926f10da8aae3264f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Sep 11 10:34:00 2012 -0600

    update Debian build-deps in preparation for 1.1 release

commit 4420d4a9fc011ed970af506ef771dfb81580b666
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 00:49:48 2012 -0700

    Fix Latin-1 encoded copyright symbols in AltosDroid java code
    
    Otherwise, we get complaints when compiling these files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 708e7937cba52982b91244cf89bfbff46d346135
Author: Tom Marble <tmarble@info9.net>
Date:   Mon Sep 10 16:54:27 2012 -0500

    Changed package name from altosui to AltosUI

commit c2ebebc4967043b16380b8ec8800862993005358
Author: Tom Marble <tmarble@info9.net>
Date:   Mon Sep 10 14:50:37 2012 -0500

    Test commit (comment) to confirm push works

commit 67da878f740a387d0092631ad672e024d26e4192
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 10 09:16:04 2012 -0700

    altosui: Use units conversion functions everywhere.
    
    Provide a configuration option to select imperial units and use them everywhere
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 66a1e07efcac9324d33a1eca0dfb58a2724b667a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 10 09:14:03 2012 -0700

    altoslib: Add imperial units conversion support
    
    "Redneck" mode support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51836cedce41d8b36eac34c69370489162aaa2b5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 14:02:57 2012 -0700

    Bump version to 1.0.9.7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e45c47c52f9cc9c43b81148e0e58fdedb3af1eb8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 14:01:21 2012 -0700

    altos/telelco: Search for available firing nodes at boot time
    
    Query for available firing nodes, limiting device selections to those found.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 77775711d414227b3ed97859d1b21ab1c689a724
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:58:29 2012 -0700

    altos/telefire: Add steady warble when the LCO arm switch is on
    
    And make debugging a run-time option too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2933103be122414a9b1795b37003b7a2aa9f3d7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:57:16 2012 -0700

    altos/stm: Fix basic time interval to 10ms -- was 10.1ms
    
    Counting from 0 to 100 takes 10.1ms, so count to 99 instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0339583996fc57a666f8d3007a0f4b1034039a73
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:56:35 2012 -0700

    altos/spiradio: Label LEDs so that the radio code can use them
    
    Mark which should be on for TX and which for RX
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3fa71c497a5bf576974e70af06762f75734e6699
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:50:56 2012 -0700

    altos: Try to get remote cmac time closer to reality
    
    Record the time after the packet was sent, but before the return
    packet arrives to try and more closely approximate the time the packet
    arrived at the other end.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27ab744c6eec9243b7aa14161eec2fbf7003531e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:46:23 2012 -0700

    altos: Clean up flight data definitions
    
    These just shuffle the various definitions of data macros around to
    make the include files more sensible looking.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ced6a020d6d94b1c63837a7ab5b0091b7b8ea3c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:43:45 2012 -0700

    altos: include ao_arch_funcs.h at the very end of ao.h
    
    Move it below the definition of the ms5607 init function
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e053da3e7cb5a4c9ebbffd245cb5d83932183b22
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:11:57 2012 -0700

    altos: Allow products without MS5607
    
    The define for a missing MS5607 was wrong, so anything using the fancy
    multi-sensor data code would break without an MS5607 in place.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb5ab29b6744b382bb2f09486a7a6db7d12a3608
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:10:07 2012 -0700

    ao_tools/ao-send-telem: Only start real-time on valid states
    
    Check state to make sure it is < ao_flight_landed to keep invalid
    states from switching to real-time playback mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47d87872c11a63a435fe5b703a4ce33503790d96
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:09:27 2012 -0700

    altoslib: Add in a bunch of java files mising after Mike's cleanups
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2b458a448106ba1ab207f0ea6824b56927d8547
Merge: 9682e9e6 3fe93220
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:03:47 2012 -0700

    Merge remote-tracking branch 'mjb/altoslib_mjb'

commit 9682e9e6fe730417a77b47795fbe1f06c9a51177
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 12:29:32 2012 -0700

    altosui: Use helper functions to access arrays in AltosLib class
    
    These deal with out-of-range values correctly, instead of causing
    exceptions that will just break stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d65d921b9b2340fa23d3b55b4ae755324d392303
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 12:20:08 2012 -0700

    altosui: Catch errors in state value when saving flight logs
    
    Use AltosLib.state_name() instead of directly accessing the
    state_to_string array so that any invalid state values are caught and
    replaced with 'invalid' instead of raising an exception.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3fe932206f40f4d6f83a4ef49e064109a7a3de92
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 18:19:43 2012 +1200

    altoslib: move distinct classes to separate files.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit da053875c12b25b627e83430c3a956a994b435d5
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 18:19:07 2012 +1200

    altoslib: remove obsolete class
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 218c73b5bd5bd5673dc6f259f62b39541c52d6ff
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 18:11:13 2012 +1200

    altoslib: move distinct classes to separate files
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 42170d0e3a3b68a9d3db69714e043f7273a714fb
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 18:10:21 2012 +1200

    altoslib: remove duplicate AltosGPSQuery class
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 82f798e7b1343a56203af2e89790f6de9ab9f98d
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 18:09:37 2012 +1200

    altoslib: remove duplicate AltosIdleMonitor class
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 88667f7b7dff52eaf5e30f8f83fed0d7f767268d
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 18:07:45 2012 +1200

    altoslib: rename AltosIdleRecordTM.java to AltosGPSQuery.java
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit bbbe1846346b4ba61330f535a12b7a5029877ee6
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 17:53:20 2012 +1200

    altoslib: remove dead code
    
    (if object creation fails, an exception will be thrown - not return null)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 02d31db3d3255568cc348a41aa37a461d63ffde2
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 17:52:27 2012 +1200

    altoslib: resolve argument/variable ambiguity
    
    (and comment out set_flags() which had no corresponding variable anyway)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 639f3e5e5171769429eac9e2f17a7b315fd62135
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 17:39:25 2012 +1200

    altoslib: comment out unused methods
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 369c5e23ac6d65bab4b456ed86737576ac61102f
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 17:35:29 2012 +1200

    altoslib: access static variables via class, not instance
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b02c17b26e028a6f3a46781211a86a18272da4d0
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 17:34:17 2012 +1200

    altoslib: comment out un-used variables
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 20bc23ddb90f8a6da1f7ea70f02cf3a038059d32
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 17:32:07 2012 +1200

    altoslib: Remove un-needed imports
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c5e98d2b226824f2012e5710ac4b1596b9f0bfb1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 6 18:07:33 2012 -0700

    altos: Fix radio slave to run lights in the normal way
    
    These were left in a debug mode, toggling instead of flashing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 01820c3e95fe85d2bee648d41809f1a753f81020
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 1 00:15:16 2012 -0500

    Revert "first work on PWM input to TeleScience, 'p' command displays timer 1"
    
    PWM bits not suitable for master
    
    This reverts commit e93c6bcc799d76d4ff425815e2601a25e6796229.

commit 3ccc4a13e3f76bec864d61b0cdfd57c76c6baadb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 1 00:15:02 2012 -0500

    Revert "Timer 3 working with slower clock and all 16 bits."
    
    PWM bits not suitable for master
    
    This reverts commit 49b1ff4c614d24977b33cd17b583acc87acff476.

commit 8c743857525eff778d067068356dec486b9fefa2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 1 00:14:49 2012 -0500

    Revert "ICP3 working"
    
    PWM bits not suitable for master
    
    This reverts commit 75d6aa6f798606f1a6c5a46542065dda81e63b2a.

commit 294b1ec85a37e375a0ac70cbffc6398309d63a7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 1 00:14:27 2012 -0500

    Revert "telescience: correctly calculating rate values with higher resolution"
    
    PWM bits not suitable for master
    
    This reverts commit ada6f2dfc045e77cb9499f20cdec1b4a54ef0db1.

commit ec9e1186dce079a2f2b7be8050216ddb1bc1af66
Merge: 503eabd0 6d31f8d1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 31 22:24:16 2012 -0500

    Merge remote-tracking branch 'mjb/freq_menu'

commit 503eabd0e351ecdffda1416b7d00f8ef1d6913c9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 31 22:19:40 2012 -0500

    altos: Get mma655x driver limping along
    
    This appears to drive the chip correctly to see values from the accelerometer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 48a3e6e073e927e456ef4e456e512f6fb8e3b9ee
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 31 21:02:13 2012 -0500

    altos: Fix mma665x pin assigment for mma655x
    
    It's on PE13-PE15, not PA5-PA7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9af7819de086d9179c3a4d1df7c88ab67a7d7c7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 31 21:01:21 2012 -0500

    altos: Add custom panic noise for self-test failures
    
    Make it easier to tell which component is failing self test
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d31f8d15ef4bf75ae039dd7b1a6a615d00eb215
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Aug 31 17:53:53 2012 +1200

    altoslib: add missing manufacturer parsing for AltosConfigData
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 4e3ac2b624f68dd5a8f6dd7a33eb10cd78497964
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Aug 31 17:42:22 2012 +1200

    altosdroid: invert channel/freq ordering
    
    Matches Channel Selector in altosui
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 80bc985f79e616e5327aed4f7acc9bca71b8db54
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Aug 31 16:50:53 2012 +1200

    altosdroid: also display channel numbers
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b6a21856c68ca8cca93eb755285be1927acb91e7
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Aug 31 16:39:10 2012 +1200

    ao-send-telem: fix frequency set command
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 543ecb530d6fdf188a746ac59b72544e69bad830
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Aug 31 16:38:21 2012 +1200

    altosdroid: complete frequency change dialog
    
    Also implement Service IPC to action request.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit f1a9fff865e0b226a97ad5d6eaaac64bd5e5d410
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 23:07:43 2012 -0500

    altosdroid: Start a hacked-up frequency dialog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d8858ca1899c8b64f107ebb45711efbb7b8d62a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 16:30:04 2012 -0500

    altos: another .gitignore file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab9d5bf13e6f1735a0463f4bcab13d65170b7015
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 16:28:53 2012 -0500

    altos: ao_cc_spi.h isn't necessary for telelco
    
    The SPI radio defines are in ao_radio_spi.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b635cb26ba54c8f5c6a958e0ab0bc4d34d33b635
Merge: 354c1fed a8ecf3aa
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 16:24:38 2012 -0500

    Merge remote-tracking branch 'mjb/master'

commit 354c1fed7f06c2c45c661e7265c2ac4bc47e2750
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 16:22:51 2012 -0500

    altos: Add a bunch of .gitignore entries
    
    Clean up the git status output
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c59954fdf204f443d9bb28c4a66a30f925ef348
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 16:16:52 2012 -0500

    altos: Shuffle LCO functions around, add telelco first cut
    
    Pull LCO functions shared between LCO UI and command line into
    ao_lco_funcs.c.
    
    Import bits for telelco.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72d44d14aefcb754b871835aec8d265771357212
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 16:14:57 2012 -0500

    altos: Disable debug printfs and fix pad ignite time for telefire
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a8ecf3aa4e88d4c76643fb541fb1d5535a454aba
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 21:08:41 2012 +1200

    altosdroid: Implement voice just like altosui
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 2e6af70c87e7cc62a92b09bbbde745a31d83b5eb
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 21:08:06 2012 +1200

    altosdroid: Move bluetooth check to first task
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 519887571cee2840024c5c8f4b7f0e5c352d3323
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 13:23:29 2012 +1200

    altosdroid: add rssi/serial/flight, and re-work UI ordering
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 14022b002d2201fb3ca28292d976c90e2d9a15a2
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 13:23:04 2012 +1200

    altosdroid: rename ambiguous TextView name
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 91606c89828e60d8cf9a5ea4ff75b951d6fc042a
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 13:21:38 2012 +1200

    altosdroid: formatting/whitespace, correct ids
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 2137a112b4217d84041f749b8aa5eb8f4d330ba0
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 13:20:10 2012 +1200

    altosdroid: rework lat/lon to more common format
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c32325af6605e78c1d1147d466f3ea12ce94124a
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 13:19:41 2012 +1200

    altosdroid: rename azimuth/altitude to elevation/height respectively.
    
    (Matches altoslib, altosui, altos)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 8ffa4f9a474026f5a6523b26919a78565e0ed74c
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 13:13:20 2012 +1200

    altosdroid: move units into code, to match altosui
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 583458772746317b98fced907ec780edff465888
Merge: aea10c10 17b6ffb6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:29:24 2012 -0700

    Merge remote-tracking branch 'mjb/master'
    
    Pull in Mike's fancy new AltosDroid bits

commit aea10c107dff2643677a9c8d1fc41e14f4a66049
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:25:36 2012 -0700

    altos: spiradio debug serial is port 1, not port 0
    
    The SPI link uses port 0; it seems like the having the two try to
    share the same wires is a bad plan.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e7e8e21f2bb823cb6e74c73d0feddbc3a891107
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:23:13 2012 -0700

    altos: SPI radio - use 1->0 for 'done' and 0->1 for 'ready'
    
    This changes how the SPI radio protocol uses the interrupt
    line. Instead of a pulse indicating operation done, this now uses a 0
    value for done and a 1 value for ready. The key distinction is that
    the master can tell when the slave is waiting for the next command
    instead of hoping that it got done 'soon enough'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b6ed262460ee75fb5bb684d13d19c26c7ea750b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:22:02 2012 -0700

    altos: fix ao_pad debug output for query command
    
    Igniter status is an array these days.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 442f1bfc89528103e2c28f768c954b956e39afc5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:21:09 2012 -0700

    altos: Use updated pad protocol for lco commands
    
    Stop using the older single-channel protocol and switch to the new
    multi-channel protocol
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f64e62356bcfcd6ba8a88b09251793481bcd56c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:19:17 2012 -0700

    altos: Note changes to configured AES key for SPI radio convenience
    
    Keep a sequence number to mark when the AES key is changed so that the
    radio code can avoid sending the key before every CMAC radio operation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a7d2faf76a46271532102e217c2dd5515e38b72
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:16:42 2012 -0700

    altos: Wait for IN dma complete on slave SPI send
    
    SPI send double buffered, so the DMA completes one byte too early. Use
    the recv DMA to know when the SPI transfer is complete.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17b6ffb6c090112367eac944494f0fa58da453c7
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 01:01:06 2012 +1200

    altosdroid: initial attempt at a UI.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 98f65994ee547feb8cca63ff4ed0fefd3fb2d37d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 23:05:02 2012 -0700

    altos: Oops. forgot ao_data.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3a3982ceb721910c6a4f75badebb62baa6c6568e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 22:43:10 2012 -0700

    altos: Add spiradio Makefile
    
    git add doesn't add Makefile by default.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fc9841ee5e92318471b6bec09b7075a788ab8872
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:13:02 2012 -0700

    altos: Mostly working SPI radio link
    
    This includes long delays to avoid overrunning the cc1111 input,
    otherwise it works pretty well. The delays mean that we can't capture
    the reply to a cmac command though, so more work is needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27a879b4069ccedf8bbe39d7dbecf45000f29d8c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:12:27 2012 -0700

    altos: Include the radio_cmac debug commands in telefire
    
    Just temporary debugging
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb1a9a8c3f3d3993d5986925bc4ad112c2bbc119
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:10:34 2012 -0700

    altos: Explicitly erase memory in STM eeprom driver.
    
    This seems to make the STM32L152 happier
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3fe5a70d9ac2114ee554813b1dbb3019a3e4aff7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:08:59 2012 -0700

    altos: Track protocol changes to ao_pad debug messages
    
    Make the debug output build again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18b5021e99c1eef32d2d85f619c84e89cecae7a7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:07:55 2012 -0700

    altos: Stop providing debug commands in seven-segment driver
    
    The radio_cmac debug commands use the same letter, and this code works now...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 78cd26eec77adda23ef1b5ca2d91027f1e059868
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:07:05 2012 -0700

    altos: Move radio_cmac test funcs from ao_lco_cmd.c to new file
    
    These are useful in the firing node for testing as well, so move them
    to be shared.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2d919a2147025daa332957cda6d91959e4731ab
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:05:10 2012 -0700

    altos: When sharing radio DMA for AES, use it for in instead of out
    
    We look at the out_done value, but not the in_done value; if we use
    the radio DMA for out, we would have to use ao_radio_dma_done to check
    for completion. This way, we can ignore that value and use the
    existing ao_aes_dma_out_done value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31b42b99edbb976534ac432c07e218f13d1f5f9b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:03:52 2012 -0700

    altos: Fix ao_delay function and move from per-chip code to ao_task.c
    
    ao_delay hasn't been chip-specific for a long time, and it had a bug
    in not calling ao_clear_alarm.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac5d053e6d766d243b7a425ae19779810c350125
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:02:25 2012 -0700

    ao-stmload: Always round up load amount to 4 byte boundary
    
    The flashing code doesn't deal with partial writes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68df2b1173e82d48f7857ad2e9325e6a9cbbedfd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 22:45:47 2012 -0700

    altos: Enable STM SYSCFG when routing EXTI
    
    The EXTI routing information is in the syscfg unit, so that needs to
    be powered up or writes to its registers will be lost.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c677f26852b70bcbb303382c306ce06664fde028
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 22:45:20 2012 -0700

    altos: No need to initialize EXTI priorities at startup time
    
    They all get set to the correct value when enabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ed88fb72c3e3ecf3333c700d838667db71cfbdc
Merge: adbe64c5 621d0930
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 28 23:39:53 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
    
    Conflicts:
            debian/control

commit adbe64c5a9402b7c5075a444a12629131b663877
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 28 23:37:00 2012 -0600

    libelf-dev added to build deps

commit cb8f01745c9e8f258f96358b46e1caf17d6b0c9f
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 23:20:04 2012 +1200

    altosdroid: update Makefile.am for source file changes.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c220369953d351f49a5f45bfb5e317859d3a9843
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:26:12 2012 +1200

    altosdroid: Add Dumper class for testing
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 6c985c2b0433a08add3bbf55fdb30102157b4ede
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:10:26 2012 +1200

    altosdroid: add timer to stop service
    
    * Stops when no UI clients, and no bluetooth connection remains
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 781bdb6c15b7dd3cc2280b08a2f47ce0f92cf53f
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:09:34 2012 +1200

    altosdroid: do service start/bind/unbind in start/stop, not create/destroy.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ea5fe9e95a888d623329d17d048ee360ea114ad1
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:08:49 2012 +1200

    altosdroid: move methods around
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c6d667a6ac0decfde5bc8a180b14774e9942dd0c
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:08:19 2012 +1200

    altosdroid: tidy up old messages
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5c7370dcd7a65c81a3c903a71167e07cfcbade53
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:07:39 2012 +1200

    altosdroid: stop sending device name, just send config data
    
    * Kinda complicated, but ultimately more sensible
    * Just send the config data as an arg to MSG_CONNECTED
    * keep retrying connection till we actually get config data
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5ce8c63850dbc6462d7c41ce917e0e06672ec0ab
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:00:14 2012 +1200

    altosdroid: whitespace
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit df7b74909c3794b7b2397275e7fce9226cb99489
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 21:59:40 2012 +1200

    altosdroid: override add_reply() to add android based debugging
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 9d0f187f06c411f0d82e13ee4f2faea789ed9e79
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 21:59:15 2012 +1200

    altosdroid: more logical name for connection_lost() method.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 7664ecc0003151d3f05537f17914df2bf48e4275
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 21:58:47 2012 +1200

    altosdroid: rework ConnectThread
    
    * Start input_thread after connection, otherwise it's painful to kill
      on connect failure.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 502b24eb2c9c76e4e2bdcc79be0b71a869488b37
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 21:55:40 2012 +1200

    altosdroid: fix a connection retry having a null pointer
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c7bef83fd553987f83c0bf7ff37ef941872564fe
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 21:54:05 2012 +1200

    altosdroid: fix double call of stopAltosBluetooth()
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 150a726e125aa7d181c00348ddd1791fd84164e5
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 21:53:01 2012 +1200

    altosdroid: Miscellaneous comments/debug/etc cleanup
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 162c640d382b9f823573578fe97584adc94cd9b6
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 17:37:45 2012 +1200

    altosdroid: miscellaneous cleanup
    
    * Copyright info
    * whitespace
    * comments
    * unused imports
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ae03d8e87985b9f746e9e22b2394a0a5b4f39f1c
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 17:36:41 2012 +1200

    altosdroid: Add passing of Device Config at connect
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 03563c765d8b0ab3689c91b2b533c68e11650577
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 17:35:11 2012 +1200

    altosdroid: Add new "TelemetryReader" class to handle Telemetry
    
    * Add MSG_TELEMETRY messages to both AltosDroid and TelemetryService
      to handle passing of AltosState object all the way back to the UI.
    * Remove linkedblockinglist from TelemetryService
    * (MSG_TELEMETRY is a rename of MSG_INCOMING_TELEM in AltosDroid)
    * commented code in case statement inside AltosDroind - won't work with
      the objects it is currently passed.
    * Add new "MSG_DEVCONFIG" message to AltosDroid - allows TelemetryService
      to pass information about the connected device back to the UI.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ed653a1e6dc8884cb171af1406fd0999ef125a4d
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 17:26:09 2012 +1200

    altosdroid: create connected() method
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 621d0930244f25165d2ac5da596dcc87e253b965
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:52:11 2012 -0700

    altos: Add spiradio product
    
    Implements the SPI radio protocol
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 61d094f281431e9f11f806454981da8e1245fb5c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:51:53 2012 -0700

    altos: sdcdb rc file for telefire
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c31d07fb35a5b4d283facf649bed3f0f9802d1fc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:49:07 2012 -0700

    altos: Add SPI linked radio API
    
    Forward the necessary radio functions over the SPI link
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f3483f93137f41a61f3fcbe06afcaffb1b9e17b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:47:16 2012 -0700

    altos: Clean up radio APIs
    
    Move api to ao_radio_cmac.h include file.
    Expose ao_radio_test as standard API.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85fd7ab504a9fac1de90bbe7df8ea477a092c2b0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:45:56 2012 -0700

    altos: Build telelco and spiradio when possible
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 467acda662de8b96e7d0df729c2e4761686b82a1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:44:35 2012 -0700

    altos: Expose a signed version of the tick count
    
    Useful when doing time comparisons.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e7443bf350afe273e87a884915ea1e7662630cd3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:42:38 2012 -0700

    altos: Specify the LCD duty cycle for stm-demo
    
    This is the demo for the large 7-segment displays and needs static drive
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 708d49e498bbdc59bb5af9bf4ca5fcea5689547a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:41:13 2012 -0700

    altos: Test multiple quadrature devices. Export quadrature count.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8bfe8157cd9fe488d1ee961f200ffa0866322f2c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:38:44 2012 -0700

    altos: Seven segment display driver
    
    Hex numbers and the decimal point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 28c3923b6180e24a77aecc7162bb2852cec7d770
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:37:14 2012 -0700

    altos: More SPI slave changes for cc1111 driver
    
    Don't enable DMA in the other direction when doing slave transfers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a27b9b5c36cf748e415ba210c8d8ae72d8227a98
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:35:39 2012 -0700

    altos: Add SPI slave get/put macros to cc1111
    
    Theese don't try to drive the chip select line
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 304909b7534768bfc8da62954effb37ba86806ea
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:34:12 2012 -0700

    altos: Provide interface for STM LCD driver.
    
    This provides a simple function interface for driving the LCD segments
    in the STM chip. It also uses the update complete interrupt to block
    LCD users during flush.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1168f40223ca09df23215f2e2fc445a8a03aea9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:32:41 2012 -0700

    altos: Rename drivers/ao_lco to drivers/ao_lco_cmd
    
    These contain command line functions for testing the cmac and lco
    features. Now that there's a telelco-specific ao_lco interface file,
    it's useful to have both for testing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa8668931cbbc1506560222f2db7e427b514a351
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Aug 27 19:41:47 2012 +1200

    altosdroid: Let a freshly connected client know what the device name is!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 9a41508d92f95012a37bb75603e6e48a2c405204
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Aug 27 19:41:29 2012 +1200

    altosdroid: Add Connected/Connect_failed messages
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit e121ec3ae634f41979717281a28af5e4a38e8f3a
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Aug 27 19:40:30 2012 +1200

    altosdroid: don't need keys for Bundles anymore
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit afac4d6c82916eea67ac838cd22806bd73db00a9
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Aug 27 19:39:53 2012 +1200

    altosdroid: Toast() requests don't need Bundles
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 18c380120fe37a4bdc8f295e86c6c4413d1aa037
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Aug 27 19:39:09 2012 +1200

    altosdroid: really don't need to store a local copy of the device name
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 6441437d3b0e848b225a3d6c78ab00e2590c6988
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Aug 27 19:37:16 2012 +1200

    altosdroid: remove complexity around message passing
    
    * Don't really need to use bundles
    * TelemetryService: Use a local variable to store the bluetooth device object
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit f89e7de20374141b367205aa517a08ee203bfaf3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 26 09:53:16 2012 -0700

    altos: Trigger sample complete when all data are ready
    
    This has each sensor mark a bit in the current data record which is
    then sent for processing when all of the data are present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dec1481786ad54e22634e32109b5ed6e5483938e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 26 09:52:27 2012 -0700

    altos: Shrink STM stack size
    
    512 bytes should be enough for anybody.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d13d0fbfcb0fd6d8a1af46f6270a968d746c830e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 26 09:49:34 2012 -0700

    altos: Make ao_cur_task_index track ao_cur_task in ao_yield
    
    This keeps the two main task references (index and pointer) in
    agreement during task switching, avoiding an extra assignment at the
    end of the task switching loop.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c9baa88d6cd931c66d453674322908eb267ba4c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 26 09:47:05 2012 -0700

    altos: Make 'pad' driver useful with telefire v0.1
    
    This reports correct status bits over the radio and to the LEDs for
    all four channels, and also makes the firing test command control all
    four relays.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea4db73328e865fd658b573da256ca0004c69c61
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 26 09:45:03 2012 -0700

    altos: Add debug command for 74hc597 driver
    
    This dumps the current state of the 74hc597 chip.
    
    Note that this shows that the 74hc597 driver doesn't work, and that
    the circuit used in telefire v0.1 can't work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 89f1a685a02c7808cf03853aa9a5ee50c6baf49e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 26 09:43:34 2012 -0700

    altos: Allow sharing of radio DMA with aes engine
    
    otherwise, telefire doesn't have enough DMA channels.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58d2b70575f3616a056d2356a737b3be15ed3d66
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:38:33 2012 +1200

    altosdroid: begin adding TextToSpeech support.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 11896d22b7bc6e34e3f6109d28f8b6a2d37e6c25
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:38:10 2012 +1200

    altosdroid: whitespace cleanup
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit f8211fee3c8a5de6925eadca2679441801ac793e
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:37:58 2012 +1200

    altosdroid: Send device name and connected state back to TelemetryService
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 8fdde3e74c6dce35f90f4575ce6914516fc56aba
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:37:33 2012 +1200

    altosdroid: re-work connect/thread handling in AltosBluetooth
    
    * Much more resilient to failure
    * handles multiple blocked threads better
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit dba71db022ae4a9f7c5fd128b90caa73aa4e99da
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:34:59 2012 +1200

    altosdroid: remove old commented code
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 38827db5131a2681243649c76bfd1d7d9801f9ba
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:34:45 2012 +1200

    altosdroid: add handling when restarting BT. delay start after stop.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 30d107882b62edf4e6d48923209da6ce3dabeef7
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:34:28 2012 +1200

    altosdroid: set devicename and pass on to clients
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d95b84b56c63002788939b93b6ce949d921a4892
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:30:45 2012 +1200

    altosdroid: Send current state to client on connect
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit cf94a86f37284b53e89b13a7eeb871db647c61ba
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:30:00 2012 +1200

    altosdroid: add missing break; (just in case!)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 24fe48f66f94c99b8197a612afe6f98e980e9796
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:29:25 2012 +1200

    altosdroid: debugging statements
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 2ef1723091b0c491ef445474844376185ca4102b
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:28:59 2012 +1200

    altosdroid: forgot change to IncomingHandler constructor call. oops!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d40f96fcc961cfbf6af67fc84591d2660d065ca0
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:28:26 2012 +1200

    altosdroid: Strings and Layout changes
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 3d6fc5fe462531e05ca4b9be1a421490e067a28b
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:26:58 2012 +1200

    altosdroid: lots of debugging statements
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 31bffa435cec2098c7ab5c42c829ba6e1578b5d2
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:24:13 2012 +1200

    altosdroid: need sendMessageToClients() for setState().. oops!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit a9ec3c96288b7ea4e40586321a0a98edf0c8fee5
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:23:33 2012 +1200

    altosdroid: Need access to handler inside AltosBluetooth
    
    * Also move add_monitor() call
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d7173e814c49826f39bba1ff6b024819c555860c
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:20:01 2012 +1200

    altosdroid: reflect change in message name
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 215d78f06093bd8a8b08a85cae0f1f34aee2a6ec
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:19:06 2012 +1200

    altosdroid: begin adding state support
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit fe6680dd3b4c31b3d4edc3f06a142f02bcb879df
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:16:49 2012 +1200

    altosdroid: init device variable... oops!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 2c5513c51b187ad26a59b193b401f38c35141d27
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:16:04 2012 +1200

    altosdroid: Rename Connect message, add connected message
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit a6373e84393312ed0fbf22285c704819c2011588
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:14:09 2012 +1200

    altosdroid: init telem blocking list.. oops!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 21359f600354e8ee840e839e61ef97d30f3586fc
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:13:33 2012 +1200

    altosdroid: disable NotificationManager stuff for now
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 54baecc208a40606e3242b2cbd5e66567053646f
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:12:48 2012 +1200

    altosdroid: Convert handlers to use weakreferences
    
    * Also renamed bluetooth start/stop methods
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit bf7def1a7b93867dfe16fe6499ee028747634c41
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:28:58 2012 +1200

    altosdroid: Remove Binder import from TelemetryService
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5f4c47389a3d0d10d659a2e00fc74a150b5fed88
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:28:36 2012 +1200

    altosdroid: Add State constants for future usage
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 6ffcc82d8d18d3f05d4f5881e50dda298b43c114
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:28:09 2012 +1200

    altosdroid: begin adding IPC to TelemetryService
    
    * And add imports for LinkedBlockingQueue... oops!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit a33333b97e810f50db36f345aab71a3200feccc3
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:24:19 2012 +1200

    altosdroid: remove old Binder from TelemetryService
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b69796991c1da6baf245349fcc4392668b9b5570
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:23:17 2012 +1200

    altosdroid: begin adding IPC to main thread
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit bcd53483ccf4bbb2f163a011faae6d19a7bbed0d
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:22:23 2012 +1200

    altosdroid: Add TBT initialisation to AltosBluetooth
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ef29a197ce3318404f37e8a0b24d235e8b024a1f
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:21:57 2012 +1200

    altosdroid: Add debugging statements to AltosBluetooth
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit fb8cd14cca61ca59b95c23e71505607b4509d4ed
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:21:36 2012 +1200

    altosdroid: Add input thread for reading from TBT
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5ce132b3366cd120499fcbe22b5fbe96d21b8584
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:20:42 2012 +1200

    altosdroid: Move constructor for AltosBluetooth
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b59e7d0b201290f2cb0fd494ef28c1402e11ba3b
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:18:44 2012 +1200

    altosdroid: clean up stub functions in AltosBluetooth.java
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d184638be79dafd6fb43df21040eb52402f54ea5
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:11:12 2012 +1200

    altosdroid: AltosBluetooth.java
    
    * clean up variables/comments
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit bad155538c4630c62ade80afd20830aad37c287e
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:10:15 2012 +1200

    altosdroid: AltosBluetooth.java
    
    * Clean up imports
    * Convert from reflection to using Well Known UUID for SPP.
    * clean up local variables
    * Add debug conditionals to logging
    * remove references to socket type
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c9689a3ef65ea9da5a7009834add789737ffb6a9
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:03:54 2012 +1200

    altosdroid: Clean up imports in TelemetryService
    
    * Begin adding AltosLib usage
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ffdfc08c317f503e30604d058749b24c3ca7bafa
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:00:23 2012 +1200

    altosdroid: Add service start/bind/unbind to AltosDroid
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 95a34caa8343997bcf7d8969ee8ae3124efcb573
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:57:04 2012 +1200

    altosdroid: Remove AltosLib import from main thread

commit cfe93315fc0e4b01a95b8e59f24aca96b5a66daf
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:55:19 2012 +1200

    altosdroid: whitespace
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 3f3da6626ef41b2cab116d6299d2a89cbf7718a9
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:54:54 2012 +1200

    altosdroid: Re-locate TextView initialisation
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 917f519a4e876087590a3a260fbbccf4c0ac3e31
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:54:06 2012 +1200

    altosdroid: remove UI components/imports no longer used
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 80bf63702175322053f2b38c4fff56b653ab7c70
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:52:30 2012 +1200

    altosdroid: excise BluetoothChatService example code
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 372840b4ebfd3da3cd713b6bc6a8ffc8cd6b6b8c
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:48:48 2012 +1200

    altosdroid: remove TelemetryService activities
    
    service start/stop will be handled by AltosDroid/itself now.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 24503eb330bf887f5c76afe2aaa9c9f2ce177460
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:44:09 2012 +1200

    altosdroid: whitespace (spaces to tabs) (part2)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 7aab6e6b6e361455a7515fe6db7b0e9a6e4c786c
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:29:36 2012 +1200

    altosdroid: whitespace (spaces to tabs) (part1)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 0f3597389977f86a8c1bdff1b7f46107c43ef306
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 12:41:24 2012 +1200

    altosdroid: Update copyrights
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 7ecb429fe4682faf209452b1738ff3c8096fc5d5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:46:55 2012 -0700

    altos: Configure telefire SPI and LEDs correctly
    
    This places the telefire SPI bus on USART1 option 2 and
    marks the various LED functions with symbolic names.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 310c1d0bf83448eb12e5d64ac09a4279c25fd258
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:44:35 2012 -0700

    altos: telelaunch doesn't need ao_radio_cmac_init
    
    This function was used to initialize the LCO functions, which were
    moved to ao_lco.c a few commits back, so ao_radio_cmac_init doesn't
    even exist anymore.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6581fa1641882198c870c2f7b1340794b9d47f29
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:42:32 2012 -0700

    altos: Get ao_pad.c working on telefire v0.1
    
    Monitor all four channels, allow any channel to be fired.
    Turn on power LED at startup time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83e0d4352041b3964ea7a133b0f67da9ebaa1c77
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:40:27 2012 -0700

    altos: Split out LCO functions from ao_radio_cmac.c to ao_lco.c
    
    These functions are not used in the telelaunch or telefire nodes, so
    don't force them to be included.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c64999c39d6d9242f98bdc9312436c3333115bfd
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:39:46 2012 -0700

    altos: Have radio_cmac turn on LEDs as appropriate
    
    Use AO_LED_RX and AO_LED_TX defines if present to control LEDs during
    radio operations.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a8e9906513227600599da12b268ff5f807ae98c7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:34:55 2012 -0700

    altos: Add 'ao_led_set_mask' in the PCA9922 driver
    
    This lets a subset of the LEDs be controlled independent of other LED settings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50b58d703b8b48005a3ca9ad4e3603d6f7ac1430
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:33:38 2012 -0700

    altos: Make cc1111 SPI pins configurable
    
    Allow either USART in any configuration. Still only supports one SPI
    bus though.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a0ed0ff4192060854d69e640de2c30105eb2f62
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:27:13 2012 -0700

    altos: Disable telefire 'pad' listener when testing radio
    
    Ensures that the radio testing won't block waiting for a firing mode
    packet to arrive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 659c0cd3ee4b9581c12ac2cd1b4162bf07a921ce
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 19 10:02:16 2012 -0700

    altosui: Check for JRE 1.7 in Windows installer
    
    altosui runs fine with version 1.7 (on Linux at least), so allow that
    version to satisfy the java check instead of requiring the user to
    down-grade to 1.6
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab1279cc6a683595631d7ac8bed7b36e0c8a691c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 18 22:51:47 2012 -0700

    Here's the button driver and event queue logic
    
    These were neglected in the commit which was supposed to include them
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93db8febda03d9a02c5c1ccdc6ad44eaf00a433b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 18 21:26:34 2012 -0700

    altos: Add MMA655X driver
    
    Just debug code at this point, will complete on real hardware
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8457ca81adc9d62a7ffe56a7c0c36f2fcadaa682
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 18 21:25:34 2012 -0700

    altos/cc1111: Document SPI bus pin options
    
    Just a comment in the source code about which pins each option selects.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f46d94ca5c969c88dd307d1b684d6fafa2157020
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 18 21:24:16 2012 -0700

    altos: Use split SPI bus for MS5607 sensor
    
    Leave CS low while releasing the SPI bus when waiting for conversion
    complete -- other SPI bus users will use another set of pins.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1a48aa9ee0bf7fa6720b34c0f544485caea7cac
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 18 21:21:58 2012 -0700

    altos: Allow STM SPI bus on multiple pin sets
    
    This allows multiple STM pin groups to be used for each SPI
    bus. Useful for the MS5607 sensor which signals conversion complete on
    the MISO line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00abbbb79de67dc95176fe48b23ce3e8614e8d3a
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Aug 8 07:07:49 2012 +1200

    ao-send-telem: make --realtime work
    
    (add "break;" to the case statement for options)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 9456332fc16269270a2e9b7ef0b54523800cfe27
Merge: bd023491 4d4ad34a
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Aug 8 06:49:15 2012 +1200

    Merge branch 'master' of git://git.gag.com/fw/altos

commit 4d4ad34aec0c75c66162b992f1e52947e4685730
Merge: c7f22850 8e4ebd1f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 7 11:48:20 2012 -0700

    Merge remote-tracking branch 'mjb/master'

commit bd02349111ae0f39b320e6a10a330051ddc39fdf
Merge: 8e4ebd1f c7f22850
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Aug 8 06:46:56 2012 +1200

    Merge branch 'master' of git://git.gag.com/fw/altos

commit 8e4ebd1f6eb928b5cb7bcda4ed88851aa9e61bdf
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Aug 8 06:45:03 2012 +1200

    Add ao-send-telem to .gitignore
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c7f228503870c44dfd278ede8b0980dbac73d3c7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 7 11:32:16 2012 -0700

    altos: Fix .sdcdbrc file for telebt-v0.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c58f3d1a373b20fac3f51037008bcc40955f1348
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 7 11:30:47 2012 -0700

    altos: Oops. Serial 1 stdin was busted by typo
    
    A typo in the symbol used to enable stdin wakeups from serial1 caused
    the input to pend until some other wakeup occurred.
    
    This also makes the serial1 hw flow control pin selects in config 2
    work right, although those aren't used by any current product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46f87373bc8c28442273ee4f8da3a352223150f5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 6 22:53:52 2012 -0700

    altos: Add button driver and event queue
    
    With this, a single task can wait for any button or quadrature input
    device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 11046bc89b3ce6386f1005fc8476b08f54d6f5fb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 6 21:54:58 2012 -0700

    altos: Support multiple quadrature encoders.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f7e61c749b02ed16e368502062e39b0471e9257
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 6 20:20:32 2012 -0700

    altos: Fix up quadrature driver
    
    Mostly works now, should work reliably with a bit of input filtering.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab379493dbe9923db8e458d2f4e0344df17d331c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 6 19:35:02 2012 -0700

    Signed-off-by: Keith Packard <keithp@keithp.com>
    
    altos: Test quadrature driver

commit b0b52ca73bc836336ecc70247a9ed1dd633920d9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 6 19:34:34 2012 -0700

    altos: Add quadrature driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6171892fa32e8a662a494ec6ba28a82fddc68589
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 6 19:33:44 2012 -0700

    altos: Add ao_gpio_get and ao_exti_set_mode
    
    Needed to support general GPIO interrupts
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit de701d5a234cd21930cf92c9cabebb0e230da9b5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 14:58:40 2012 -0700

    altos: Build ao_kalman.h from cc1111 subdirs as needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fc9aed1ef3485d259722c9b89e19969e0afe257c
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Feb 26 22:30:09 2012 +1300

    Adjust service to be persistent.
    
    * Run as a foreground service -> high priority
    * Notification set to display as "Ongoing".
    
    Changed logo to be in colour at keithp's request. Greyscale logos still present as *_g.png
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b80d1f4e8a2df3ace64468a38a815a4f982aa179
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jun 10 20:04:24 2012 -0600

    move from Debian packaged sdcc to new cc1111 package forked from 2.9.0-5

commit 0f82021186565fda10df7893b95deae4a1f32778
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 12:17:25 2012 -0700

    src/cc1111: Enable SPI slave mode
    
    This is untested...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 39594fdb3e30a1a25dd894c217e3d9d773bab972
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 12:16:25 2012 -0700

    src/cc1111: Allow serial0 without serial1
    
    The ao_serial_speed structure is needed by serial0 too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2610b316eb939c1532061646b05207fcd54d984f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 12:15:36 2012 -0700

    src/cc1111: Add ao_gpio_set macro
    
    Allows general GPIO-using code to run on cc1111
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82a37d70e3cacf792c1aa18f8c0d2a19d6f321ed
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 4 22:58:48 2012 -0700

    altosui: Move 'implements Runnable' from AltosSerial to AltosLink
    
    AltosLink is the class providing the 'run' method, after all...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af34baf5dc587bee4cffa699ef383f85dde8c7cd
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 2 23:38:26 2012 +1200

    Reduce size of textview.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 359d7353fd7b7d4d537db04c5e89724502333ff8
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 2 22:09:24 2012 +1200

    AltosDroid: Begin re-working Bluetooth code
    
    * Move to using explicit 'magic' UUID, rather than java reflection
    * Re-work UI to make it more useful for testing
    * Use Insecure RFCOMM only, and remove code that differentiates.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c5304ac976dd44344a0b70ae3622e1f2d112a147
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 2 21:20:23 2012 +1200

    Fix min/target SDK versions
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 7481d06bebc2dc1473f451971d8b744c9da4e726
Merge: 599e28b2 c56dead7
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 2 21:18:15 2012 +1200

    Merge branch 'master' of ssh://mjb@git.ethernal.org/~/git/altos

commit 599e28b2242c79bdd0960ef16e580e51a2fa3795
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 2 21:16:54 2012 +1200

    Re-work external lib support for newer Android SDK
    
    * Remove older *.properties methods of locating lib dir
    * clean up Eclipse classpath file
    * adjust Makefile.am to link AltosLib.jar into libs/
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c56dead72f65e7468017656347dba531ab2ca480
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Jul 31 20:05:35 2012 +1200

    Ignore autogenerated file: altosui/Info.plist
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit fb79f8fb358f8df25674336cd558fc3998cb7d9e
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Jul 31 20:04:34 2012 +1200

    Don't build ao-stmload if stlink is not available.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 2e7e304e67bc1e094282c8668fa8cccf09f9c9b4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 19:48:08 2012 -0700

    altos: Add driver for STM internal flash
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 843fcab46d633e5bb6959286adeb68e41a4c30a3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 19:44:56 2012 -0700

    altos: Add telefire-v0.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4d244eefa4c779cd9c8a91389bf998c54705b72
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 19:42:53 2012 -0700

    altos: Add software AES implementation
    
    This is untested
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21e39811bd234c6f66ab7644864fcc1b8c316998
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 19:36:50 2012 -0700

    altos/cc1111: Fix serial 0 option 2 pins definitions
    
    tx/rx are 4/5, rts/cts are 2/3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 743dca54012758d3ae54312d542b34afa88495cd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 19:35:15 2012 -0700

    altosui: Remove duplicate values from info table. Add altitude
    
    No need to have state/call/serial/flight data, those are all in the
    header. Having altitude makes Monitor Idle slightly more useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bf21399d3d47d58410df4c6ce89fc20fcd42c89
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 19:34:00 2012 -0700

    altosui: Handle Monitor Idle errors better
    
    Deal with missing data by checking for MISSING in more places.
    Handle serial communication failures during send by reporting back
    from libaltos.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59588ba34159b27c02e1a886b46497ecfa0cf4d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 16:22:23 2012 -0700

    Add ability to re-play telemetry through TeleDongle
    
    This adds a new command to TeleDongle to send arbitrary data, and then
    creates a new tool, 'ao-send-telem' that replays existing telemetry
    files through TeleDongle.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52e920bc7a98edf5c6f2ad0bd59d581011dcd5c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 22 15:18:27 2012 -0700

    altos: Move ao_radio_cmac.c to core (it doesn't depend on hardware)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 233ab58df8ac8e1fdeab8d4c2f6c8c9d3f6e7be1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 22 11:53:44 2012 -0700

    altosui: Move AltosIgnite.java to altoslib
    
    To be shared with altosdroid eventually
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38f66a31174dd367e39d717c527f555add60a9d4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 20 12:04:17 2012 -0700

    tools: Use pkgconfig to find stlink for ao-stmload
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e033a72d3f420e18ed24354c7dfc7e1317a03fb6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 20 11:08:22 2012 -0700

    Add stlink pinout
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15ebd9c75aa57572040e3b1ee41e6f3eb8cf92ee
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 19 09:46:20 2012 -0700

    altosui: Delay starting KML output for flight and GPS coords
    
    Don't start outputing KML data until the telem record containing
    flight number and GPS coordinates are present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ada6f2dfc045e77cb9499f20cdec1b4a54ef0db1
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 18:41:00 2012 -0600

    telescience: correctly calculating rate values with higher resolution

commit e2b472bbb2418fc13be42dbc7c52beb88479c46d
Merge: 75d6aa6f b242f275
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 14:25:27 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 75d6aa6f798606f1a6c5a46542065dda81e63b2a
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 14:24:05 2012 -0600

    ICP3 working

commit 49b1ff4c614d24977b33cd17b583acc87acff476
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 13:41:27 2012 -0600

    Timer 3 working with slower clock and all 16 bits.

commit b242f2756a8d9419a9bdba890b9e6b73560bdc19
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 18 00:03:54 2012 -0700

    altosdroid: Start adding an AltosLink subclass for android
    
    Will talks over bluetooth while providing an AltosLink APi
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f164e48cbeff521d45737794e2046a08322951d6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 18 00:01:51 2012 -0700

    altosui: Make scan UI handle incremental telem data
    
    The new telem format doesn't send everything in each telem packet, so
    we need to handle updating information incrementally in the scan
    results. This involved clearing old scan data when switching
    frequencies and then updating existing entries with new data as it arrives.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a698cd68968fc0be5f96b1729cdea2f65d2ccbf6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 23:59:13 2012 -0700

    altos: Toggling telemetry monitoring would replay the telem queue
    
    Using the 'm' command to turn telem off and back on would end up going
    around the whole telemetry queue replaying everything there as the
    wait loop would exit when disabling monitoring even if the ring was empty.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9fd5e3c28fb0fd6da8641e7dd18b9912866d1b75
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 21:06:07 2012 -0700

    altos: With debug cables disconnected, CC1120 seems happy at +16dBm
    
    Let's see how it goes...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 700818c8ff0518e79bff2f0e80b2cc3cb3b48bf0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 21:04:58 2012 -0700

    altosui: Accept variations in spacing for igniter status reply
    
    Megametrum uses different white space; just deal with it here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6921c9040b1f1fc4408d163532b0695a3611195
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 21:04:23 2012 -0700

    altoslib: Move idle monitor managing code to altoslib
    
    More stuff to be shared (potentially)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4be63627e146c7c868b5b3468d34880a561cfba
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 20:44:55 2012 -0700

    altos: Megametrum ADC values are 12 bits, discard low 4 for telemetry
    
    We've only got space for 8 bits for the ADC values for pyro channels,
    discard the low 4 bits instead of the low 8 bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97c1cfee929a35dd1596dc02ce519b80132f3c5c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 20:43:31 2012 -0700

    altoslib: Don't use MISSING values in max computations
    
    Early telemetry state may be missing critical data, don't use MISSING
    values in computing max ranges.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 99b7eaf8d1b312443b842d078fb8464032b3a39b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 20:42:42 2012 -0700

    altoslib: Fix MM conversion functions
    
    Pressure is already reported in Pa, no need to convert that.
    Voltage divider computations were backwards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e93c6bcc799d76d4ff425815e2601a25e6796229
Author: Robert Garbee <robert@gag.com>
Date:   Tue Jul 17 13:23:48 2012 -0600

    first work on PWM input to TeleScience, 'p' command displays timer 1

commit a5d873d47b3b16ca32559b4de668bf07b25eddb0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 01:24:52 2012 -0700

    altos: Place STM config values at fixed addresses for re-use
    
    Just like cc1111, stick the serial number and radio calibration values
    at known fixed addresses so that when re-flashing the board, we can go
    find the existing values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20877ae9de8bb5d3a29e2a96024e53afbd396f55
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 01:18:45 2012 -0700

    Add ao-stmload tool
    
    This loads an ELF image through the STlink programming interface using
    the stlink utility library
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eda636c5f309b85282b4142118ee65673d28d137
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:36:20 2012 -0700

    altosui: Skip unknown data when parsing ADC for idle monitoring
    
    This resolves an infinite loop when talking to megametrum.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52196975c447851f14619213c1de5101d334eebc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:35:11 2012 -0700

    altosui: Move serial datastream parser to altoslib
    
    instead of having it in altosui
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0edb5616a70fd480317acc99ec3c28c662aa8556
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:34:01 2012 -0700

    altos: megametrum depends on ao_companion.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5860f75677ee20fcf35ab89a6b62f3e14a1c32f5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:32:26 2012 -0700

    altos: Enable pyro channel control in telepyro
    
    This should make the board actually work now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ce645a79b54e22d7835c6e390a22a5ad501a339
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:30:29 2012 -0700

    altos: Add manual firing command for extra pyro channels
    
    In parallel with the existing igniter commands, this tests the
    programmable pyro channels
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6581eefbdbd8d3e94f615bdf11652a000d131c8e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:27:58 2012 -0700

    altos: Use 'HAS_ORIENT' to enable orientation selection in pyro code
    
    Don't expose orientation options when no orientation data is available
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1887ca3d7d4a0259686f8c1e68d1e47c47b4ab84
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:25:47 2012 -0700

    altos: Pass flight dynamics to companion boards
    
    Necessary for TelePyro
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 90507d4f7ef77b0870a032b1d9809898c2924721
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:24:21 2012 -0700

    altos: Make ao_tick_count visible
    
    Necessary to fetch it when interrupts are already disabled as we can't
    call ao_time then.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 184e2ff4790974733df57facdeeb96bfe692ab54
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:21:21 2012 -0700

    altos: Remove some debug code from avr ADC driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e7ca3a7849b3cbbb38143d35fe86972290bd4e61
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:18:12 2012 -0700

    altos: Make sure telepyro ao_product.h is built before .o files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4de789331098abc24abcb9390a35aef889a41784
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 14:47:53 2012 -0700

    altos: Make storage addresses datatype configurable
    
    No sense using 32 bits for tiny hardware
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84d5e00d417af4924594908d19346bb965089cdd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 14:44:40 2012 -0700

    src: Add driver for AVR internal eeprom. Use for telepyro config.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a23030031c31267fc4f14accd9220f285c03b61
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 14:40:49 2012 -0700

    altos: No space for pyro help on TP v0.1
    
    AVR doesn't have enough ram to hold the help messages, and we can't
    use them in flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 366217e86a4c353012b5102322ee6927f7b27a21
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 14:39:05 2012 -0700

    altos: Remove unused 'func' from ao_config_set
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81b7b58c9df01847fa47747deeff8c3c91304ad1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 14:37:58 2012 -0700

    altos/avr: Remove debugging command from USB driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 42a51becf4b76f23dbd4f5f80f8879ce696aa543
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 14:36:51 2012 -0700

    altos/avr: Remove debugging printf in avr stdio startup
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0cfd22baa6af44e053428c30c1a95cf5551b68af
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 14 02:44:17 2012 -0700

    src: Add explicit 'pin' argument to ao_enable_output
    
    This lets the cc1111 use the atomic bit operation instead of a mask,
    which is immune to interrupt issues as well as being a shorter code sequence.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 37032e4b0cbac4c823e3dd18e60ad8900e9ceff1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 14 01:29:50 2012 -0700

    altos/megametrum: Support the four additional pyro channels
    
    These use the new pyro code to allow for some flexibility in programming.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82b50fc1b7f2c6af7264fbad2c35508abc15e81e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 14 01:28:55 2012 -0700

    altos/stm: Expose ao_gpio_set which sets a specific GPIO pin
    
    Will need versions for other architectures
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 726e0f2c547b6bae1f1e640e2c1155c0b9631a9b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 14 01:28:31 2012 -0700

    stm: running out of memory in MM -- reduce stack to 668 bytes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d90587535676f9492f0fde6b974353158104ef88
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 14 01:26:38 2012 -0700

    altos: Add arbitrary pyro channel support
    
    Programmed by specifying a conjunction of flight conditions that
    trigger the igniter to fire.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09633cac697e37d770b2b666ab20cab30628484f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 14 01:24:14 2012 -0700

    altos/stm: Force STM stack to start at the top of RAM
    
    Using a fixed size means crashing if there's not enough space for
    that, or wasting memory if there's too much.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b5f6d4e5251a825395c93916afa3af659c678498
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 19:15:32 2012 -0700

    altosui: Abstract remote connection timeout stuff
    
    This moves some of the logic for managing when to present the 'cancel'
    dialog for remote operations to altoslib.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f078a591cf2fafe89bb1bb883f49d80750129d44
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 14:28:53 2012 -0700

    altosui: Remove a bunch of debugging printfs
    
    These aren't useful at this point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 846a6298e4a8bfbe87bb24d7b0802c0bf6f233be
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:53:30 2012 -0700

    Report RSSI values in monitor idle UI (trac #44)
    
    This adds a new 's' command to TeleDongle to report RSSI value from last
    received packet, and then has AltosUI request that value when closing
    the remote link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf44ea354c2d1780cee343132c6058e11e9eefa3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:52:32 2012 -0700

    altos: Fix gcc compiler warnings in GPS code
    
    unused variables and mis-matches in printf format codes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe70611c3c7d4b8cce3b5292f0ec549f3191bf86
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:50:56 2012 -0700

    altos: Create macros to convert from/to radio RSSI representation
    
    AO_RSSI_FROM_RADIO and AO_RADIO_FROM_RSSI.
    
    Removes a bunch of open-coded versions of the same function.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18431c88c8a6cb267922b97192e8b7ddb88d0e7e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:49:26 2012 -0700

    altos: Have 'make clean' remove all programs, even old ones
    
    This makes sure that changing version numbers doesn't leave old
    compiled output lying around.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 726f47c8a07f060aed930e1d102a1e8b5a5c7aed
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:47:25 2012 -0700

    altos: remove optimization for 'help' that confuses cc1111 compiler
    
    The cc1111 compiler gets this very wrong and prints piles of garbage
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7be98836e69a222b2f9f4baacddcf12d168e2207
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:40:54 2012 -0700

    Add megametrum outline to doc dir
    
    And install it alongside telemetrum-outline
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc5d106f014f714a9a2d5f595a2de0da8f7da80a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:40:07 2012 -0700

    altos: Ignore megametrum built files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 675ccd41e3b668cd4e1d2dd282dd317a00d00151
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 00:35:21 2012 -0700

    Get AltOS version numbers into Mac 'about' dialog
    
    Generate Info.plist from Info.plist.in to correctly set the VERSION
    information. This also changes some strings around to make them look better
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46407f7f3e4d2b6e74b3a2e90b38736a792cfc54
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 22:41:59 2012 -0700

    altos: Force 434.550Mhz by connecting  debug gnd and clk (trac #41)
    
    Check for pin P2_2 low at startup and set the frequency to
    434.550MHz. This value won't get written to flash, so rebooting again
    will restore the configured frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa305da7e5dc182c99c09e422c053d85ed48d5d5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 22:09:44 2012 -0700

    altos: Continuously update ground state while on pad (trac #42)
    
    Average data for 5 seconds, wait 5 seconds and if still in pad mode,
    replace the existing data with the new data. This should avoid
    averaging in boost data while still keeping things reasonably current.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b92164143aaf0d2aa3d5d742484391c16545289
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 22:08:28 2012 -0700

    altos: Set HAS_FLIGHT_DEBUG=1 to include the flight debugging commands
    
    This leaves USB enabled, and adds the 'F' command to dump
    internal flight state.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb60d87b02c0fc83a0b4268212f0b6b740c984e3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 20:35:19 2012 -0700

    altos: Signal continuity over radio in pad mode (trac #40)
    
    This is especially useful for telemini which has no beeper, allowing
    you to hear the continuity signal while at the pad over the air.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bca72b782a2909ecedef15ad589292647221ca56
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 20:34:02 2012 -0700

    altos: Add 'void' parameter to ao_fec_decode callback parameter
    
    This keeps the compiler from whinging about the lack of a prototype.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aafa8859ecb27383f697b98f6991643b44f4721a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 20:32:31 2012 -0700

    altos: Save some memory.
    
    A few minor space savings in ao_cmd.c and ao_config.c.  Don't build
    unused conversion functions ao_altitude_to_pres and ao_temp_to_dC
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a60c5a728530e4659a6750d8d5b87000735d4531
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 15:15:00 2012 -0700

    altos: Improve ao_flight_test a bit
    
    Add -i flag to include flight description
    Have run-tests know how many failures to expect
    Add run_baro to plot a single flight using the baro-only mode
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b89d37d357273b97050c00d7fe12022e32799fa8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 15:13:55 2012 -0700

    altos: add some (unused) test code for different soft-decision sizes
    
    This lets us experiment with hard-decision and other possible
    soft_decision bit depths.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6694cedd560a7ea9520ef11472c2770b489187c0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 15:13:18 2012 -0700

    altos: Eliminate compiler warnings when building ao_flight_test
    
    We turn on a pile of warnings for that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ae3f467a1d7be2fc3b1a45ba12568a3a25a0099
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 15:11:36 2012 -0700

    altos: Rename *_mm.c back to *.c
    
    Was just a temporary hack to keep cc1111 products building during MM development.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 702ca87983594880d7926d2317d63802af82746e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 15:07:34 2012 -0700

    altos: remove stale ao_flight.c and ao_sample.c
    
    The mega-metrum versions are now the official versions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31b05454ec8d90b89fa3039563ff0e86ae80b2a0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 3 21:02:20 2012 -0700

    altos: Move profiling settings to Makefile
    
    Instead of splitting the changes across Makefile and ao_pins.h, put
    them both in Makefile to simplify enabling profiling.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 939ad8bfd640ed55116703a58f87af06e75ef87e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 3 21:01:01 2012 -0700

    altos: Crank up the gaussian noise in the FEC test
    
    This lets us check to make sure our receive performance isn't
    degrading at all, instead of just making sure we can receive
    perfect packets well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e8ab00cc45e48230e3b2018ce959114d3fedd228
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 3 20:59:35 2012 -0700

    altos: Viterbi performance improvments. Down to 5.7ms for command decode
    
    Stealing more of Phil's good ideas, decoding a command mode packet has
    been reduced from 9ms to 5.7ms. Lots more comments to help future-me
    figure out how this code works.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea957f9e6144f8411ac84ee2905700f55f5a6e8a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 3 00:29:43 2012 -0700

    altosui: Fix flight data download for TM. Look for MM flights when graphing
    
    A couple of minor fixes, the first to not force the log format so that
    TM/Tm data will be downloaded correctly and the second to expand the
    set of files to include '.mega' files when plotting data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 933fc7e4c2f617e49e1cfdf45b83695290b51456
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 2 23:44:10 2012 -0700

    altos: Do not block igniters on the radio mutex.
    
    Blocking igniters on the radio mutex fails when doing igniter testing
    over the RF link; the packet receiver task will never release the
    mutex and the CPU at the same time, causing the system to lock up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50b343d389039eae082e82b8ac0b76ae3e2b3ad4
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jul 1 23:24:20 2012 -0600

    extend cross-compiler availability logic to all target CPUs, not just ARM

commit f0ec8416f2e308e40e1b9f34a7c2549989fee5fb
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Jun 30 13:00:33 2012 -0600

    conditionalize build of ARM binaries on presence of arm-none-eabi-gcc in PATH

commit edbc5d27c8c2936b59ff5289276d9198b501ebc8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 28 17:43:36 2012 -0700

    altos: Declare cc1111 accel_ref as unsigned so the math works
    
    If accel_ref is signed, then the careful shifting and dividing dance
    necessary to correct for changes in the relationship between the 5V
    and 3.3V supplies always generates zero.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ccf64117662fc800a07b3a25e52255b80f8b5eaf
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 28 16:42:59 2012 -0700

    Update version to 1.0.9.6
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca1bc20735a170a77066f5f37e0ad728899a3989
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 28 16:05:56 2012 -0700

    altos: Disable MS5607 interrupt in the handler
    
    Avoids having the interrupt re-raised multiple times until the reading
    task finally wakes up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 572e1664938c7ce6c308b36779f6a412959e03f1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 23:11:27 2012 -0700

    altos: Track missed HMC5883 interrupts
    
    When it fails to signal conversion complete to the CPU, keep track of
    that and report it with the rest of the current data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 79dbe1a5e46d7f0b8929400897631ab969cd2bc0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 23:09:16 2012 -0700

    altos: Increase default STM stack to 648 bytes
    
    512 seems cozy given the printf implementation we're using and the
    extensive interrupts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aab7b31b71aa7c87c5a5003084e4b7773c30835f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 23:05:36 2012 -0700

    altos: panic if MPU6000 self test fails
    
    Don't try to fly if the board isn't working right.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9f65211c378849270a6138fda05ed2a166f7d82
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 23:04:25 2012 -0700

    altos: Disable mag sensor for megametrum
    
    It doesn't work unless USB is connected or occasionally while the
    debug port is enabled. It's mystic.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd623b21cb904238c6d903b6936ff2f8ebf6f339
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 23:03:33 2012 -0700

    altos: Allow megametrum to be built without using the mag sensor
    
    I'm having trouble getting it working reliably, so we'll like disable it
    for now. This patch makes that possible.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd21c050fd8b96b33ab6859c942bf55cf2b91868
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 19:47:52 2012 -0700

    altos: Make profiling Viterbi decoder more useful
    
    This blocks starting the decoder until all of the data have arrived so
    that the time spent in the decoder is easily computed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 407cefae9cb95c5910b3bd79851776c48729e06b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 19:45:22 2012 -0700

    altos: Unroll viterbi state loop for >30% performance boost
    
    9.3ms vs 14.7ms, a clear win.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4f258fe565dc3e58b83761bfa1a2276946012163
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 17:18:57 2012 -0700

    altos: Clean up STM I2C clock computations
    
    Fix both clock time and rise time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84f9a525c64491afa9b7a565e3c10a4cee106e14
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 17:17:44 2012 -0700

    altos: Clean up radio CRC handling
    
    Make the FEC code just set the CRC_OK bit like the cc1111 radio does;
    eliminates a bunch of weird conventions across the FEC API.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b0b7f5da2d29716959c6793d744e47a3d435c247
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 14:38:35 2012 -0700

    altos: get MPU6000 I2C link working reliably
    
    This slows the i2c bus to 100kHz (yuck), sets the rise time to spec
    (it was way off) and adds more delays during bus setup. I've run this
    for hours now without trouble. Will try to adjust things back to fast
    mode and see if I can make that work as 100kHz isn't fast enough to
    reliably get data at 100 samples/sec.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e63d624f9670b5e2e002fcd5f24b80cf7f1effdf
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 14:35:56 2012 -0700

    altos: reorder stm USB state stores to avoid races
    
    Must set ao_usb_in_pending before telling USB about new data or an
    interrupt could arrive at the wrong time to clear it.
    
    Same for ao_usb_in_flushed.
    
    Without these changes, I've seen the USB bus lock up on occasion,
    waiting for an IN packet to consume data, but with no IN data pending
    in the hardware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08a4ed8fe794a2b2b52147bd5535fe0954822e95
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 14:34:53 2012 -0700

    altos: include targe SPI speed in get request
    
    STM needs it to be provided when enabling the SPI device, so just fix
    AVR and cc1111 to do the same.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a1d4a557a30e2e743936b828b654187ec562ca8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 02:46:27 2012 -0700

    altos: Wait for i2c START condition before setting interrupt bits
    
    This seems better than the random loop that it replaces, but I still
    have no idea why this is required; it doesn't coorespond to the docs
    at all...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9695a217e13f9d194b6dc40e2696017e5f8e8176
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 01:22:32 2012 -0700

    altos: disable FEC debug on MM
    
    Seems to work; we'll leave the code around in case something bad
    happens later.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b96eece8e42df0713fc92d47b6bb27604c0168a2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 01:22:00 2012 -0700

    altos: Clean up cc1120 driver a bit
    
    Make some variables static, remove stale debug code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a00aff5ee93ea9763b5c0466fcecc823cad135ef
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 01:20:43 2012 -0700

    altos: Don't try to grab radio while firing MM igniters
    
    If you're in idle mode, you stop forever as the packet mode receiver
    will own the radio mutex forever.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8fc643c9768f0db31a248331681af9490f5715af
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 01:19:05 2012 -0700

    altos: stm i2c debug code was calling flush() even when disabled
    
    The fancy stm i2c debugging code had calls to flush() that were
    invoked outside of the conditionals leading to all kinds of fun --
    flush() may re-enable interrupts, yield or do all kinds of wacky
    stuff, none of which is appropriate from the middle of a device driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0285696e5280fc64774b6c3a2fcdaa36bd36ae7c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 01:17:51 2012 -0700

    altos: mpu6000 requires a delay during start
    
    I have no idea why this is required, but the mpu6000 will not come up
    and run if this isn't present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4847595e0383e5ff9c5a373f3c7f2af8c210c50a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:25:00 2012 -0700

    altos: ao_ignite.c is no longer cc1111 specific
    
    Move it to core
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8efac8eb99a9aabb45d9fbf742e4be91e4b331a5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:21:04 2012 -0700

    altos: Add debugging code to check for stack overflow
    
    Stack overflow often happens from interrupt handlers sitting on top of
    a task stack. Check for this during ao_wakeup as that is often called
    during interrupt processing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ebeac02a990da3fa6dd71487141d0bc6f78b42de
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:20:17 2012 -0700

    altos: Enable full flight computer functionality in MegaMetrum
    
    This turns on everything that currently works
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb2b83fcd28199d8c686e676d46d6ecfbf706f37
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:18:44 2012 -0700

    altos: Create a 32-bit 1MHz timer for use in profiling execution
    
    This provides a simple method for getting high-resolution timer data
    to use in performance tuning code. It's not used by default anywhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 097b337eb9b7deff13d5dcdafddec9bec3868b93
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:17:00 2012 -0700

    altos: Abort radio receive when using flash memory on megametrum
    
    Radio receive camps on the SPI bus, making it impossible to access
    flash memory. Abort any pending receive operation when trying to get
    to the flash part.
    
    Yes, this is a total hack.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ae69a1c2ce7e45db9d9c175bc63867eff68ebe5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:15:54 2012 -0700

    altos: Make gcc happy with ao_telemetry_set_interval
    
    Using unsigned locals made GCC sad as it was compared with a signed value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4036bf6e7997b618f89a05dd1214c16066ba2b2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:14:13 2012 -0700

    altos: Turn radio-related bits of ao_flight_mm.c
    
    Now that MM has full radio functionality, we can make it work right.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b5f5fd92109ac6f4909a81303d52bc9220cc2520
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:13:14 2012 -0700

    altos: custom hex printer for telemetry packets
    
    Using printf is way too slow with pdclib; just hand-write hex byte output.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f1ae622eff60e05c1f5d8f822a3cf6a85750c6cc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:11:10 2012 -0700

    altos: Optimize FEC encode and decode
    
    Integrate interleaving, CRC and padding within the decode/encode
    functions.
    
    Provide for ISR priorities so that the 1120 RX interrupt takes
    precedence over the other interrupts or we risk losing bits.
    
    Optimize the viterbi decoder a bit (goes from 10ms per packet to 7ms
    per packet).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 936ecad62596f34773afb7460b10f63df7d0896d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:07:38 2012 -0700

    altos: Add GPS logging code for MegaMetrum
    
    MM uses a different logging format with larger log blocks, so
    restructure the GPS logging code to fill them up
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 33f8f7add27a02d24b0671da353b59762224c1ee
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:05:42 2012 -0700

    altos: Make cc1111 radio control functions static
    
    No need to publish these; they're all private to cc1111
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 03dc80d15a2f8fe9d7340351226dadd8bc3cfdb9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:01:58 2012 -0700

    altos: Clean up usage of port parameters
    
    Make stm port parameters always be pointers; this avoids the confusion
    where some macros took '&port' and others took a bare 'port', and also
    unifies code to run on other processors in a consistent fashion.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f11f05c5d634de2a80c34d0d3dc93925980f52e6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 22:20:50 2012 -0700

    altosui: Make libaltos recognise new USB ids
    
    libaltos has a small range of 'AltusMetrum' products to avoid opening
    other devices. We've got more IDs, so open up the range.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9dcb4e2ab60ecf0cc7371c1b1a620be952fa8776
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 22:19:01 2012 -0700

    altosui: AltosSerial and AltosLink both tried to provide frequency setting
    
    AltosLink owns all of the device configuration, so remove that from
    AltosSerial and make sure that AltosLink provides the right function
    signatures (wasn't using the new direct frequency setting command).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eab18714ed9eabbcef0ff81b07427da042a58ccc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 22:16:44 2012 -0700

    altos: rename ao_viterbi.c to ao_fec_rx.c
    
    Keep it parallel with ao_fec_tx.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09761fe0f6ed40ff74317fbb47d6a74068fb4ce4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 25 06:51:36 2012 -0700

    altos: Incremental viterbi decode
    
    Decode radio input one interleave block at a time. This overlaps the
    decode computation with the packet reception, leading to lower latency
    in an attempt to keep up with the transmitter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 628076aa90e7bc9a894646e417dd8e1fe149b60d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 25 06:38:34 2012 -0700

    altos: decode cc1120 received packets
    
    Call the fec decode function, compute RSSI and check CRC
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 70cf32e89df19bde5185339fc703532c8a5b8be6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 25 05:03:34 2012 -0700

    altos: Get cc1120 packet reception working
    
    Interrupt-per-bit, but it seems to work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 246174b32bb6cf827d240c32d6a51c3513a08c37
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 25 05:03:16 2012 -0700

    altos: Forgot ao_telemetry.h
    
    Not much builds without this...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b292c14790fc225029cba3f80ce8ad6c5652bc4e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 23 16:05:42 2012 -0700

    altos: improve FEC apis to reduce data copying
    
    Integrate interleaving and whitening into encode and decode steps.
    Add CRC checking function for receive.
    
    Make ao_fec_test program round-trip the data and verify correctness.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 74f6a1a8c8fa9d5bb8d74c99782310b431dd4727
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 23 02:24:30 2012 -0700

    altos: Add ao_viterbi.c to megametrum build
    
    It's not used yet, just wanted to see how big the resulting object
    file was (492 bytes).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 566a0c277de01963922cabc80db8ec3a129923bd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 23 02:23:08 2012 -0700

    altos: fix comment about decoding last byte of FEC data
    
    There aren't *any* forward bits to use when decoding the last byte.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83549f8bde42c3fddbdc817540c869dc8aefd013
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 23 02:13:52 2012 -0700

    altos: Make ao_fec_tx_test build cleanly with -Wall
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7bf07dfdad260c1f219064957ef08fb480bf20f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 23 02:12:58 2012 -0700

    altos: optimize Viterbi implementation
    
    Minimize data usage, make data arrays static
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff8de3af193839de4bacfd07ade7a5f9ac0bf5b3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 23 00:54:42 2012 -0700

    altos: incremental viterbi decode
    
    Decode bits incrementally. Don't bother decoding the last byte; it's
    always a pad byte.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 047e95421c87c5d056038797b48f759bedabf245
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 22 23:31:11 2012 -0700

    altos: Start optimizing viterbi decoder
    
    Only need two cost arrays (previous and next). Create constant
    full-width decoder table instead of expanding bits into bytes for each
    decode step.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbf79a0f9cb859d04e8e03d627219cb2bf49611f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 22 23:12:02 2012 -0700

    altos: Add the simplest possible viterbi decoder
    
    I think I understand how it works now. It's not exactly speedy, and it
    uses a lot of memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75e4521ec42a368cebc67a07f8713d7a854ea265
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 21 09:52:37 2012 -0700

    altos: Move FEC code to core
    
    It's not a driver as it's not specific to the 1120 chip
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b5548d6ced67201311e1072d37fbedd3d9929c9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 21 09:51:17 2012 -0700

    ao-tools: Support MM telemetry packets in ao-telem
    
    Parse the new packet formats
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f421818fd7062f03bfaf9e606d6a4cfdcb13b49
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 21 09:50:18 2012 -0700

    altosui: Support MM telemetry packets
    
    Required restructuring the whole telemetry system to provide abstract
    interfaces to flight data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff5b0ba90e73a83360a2e8a7e9969ed2c3ce1514
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 21 09:46:50 2012 -0700

    altos: Crank down STM SPI speed for MM
    
    The cc1120 is noisy enough to break SPI data transfers at 4MHz, so
    crank things down to 1MHz. It's "stable" now, but clearly needs a
    filter and shorter traces.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2bd95edb6f77daeb1e8f043c4a239c248728e0c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 21 09:45:42 2012 -0700

    altos: Add full MM telemetry
    
    Create two new telemetry packets to hold all of the MM data.
    
    This patch also splits the telemetry structures out of ao.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 419a801131c1034f1fa149a67850290431cbda72
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 21 09:39:10 2012 -0700

    altos: Configure STM LCD driver for giant LCD digits
    
    These devices require static mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 611f37607fadcdc9908d67456f844a452ad4a87a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 19:11:35 2012 -0700

    altos: Make sure ao_storage_config is set before reading config block
    
    ao_storage_read does in fact call ao_storage_setup, but we need the
    value of ao_storage_config *before* calling ao_storage_read, so call
    ao_storage_setup first.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae3662c56effda9f0516c7d6ffd2d5f56b859593
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 19:06:08 2012 -0700

    altos: hack STM serial number to 58
    
    otherwise altosui won't record telemetry
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 976a8375932ddb46ca3100863b0a892732c0923e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 19:04:53 2012 -0700

    altos: make cc1120 ao_radio_send re-entrant
    
    It gets called from multiple tasks, so put local data on the stack.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 629f43e7c7abbff33e14b168a08a4b6a9c88b937
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 19:04:22 2012 -0700

    altos: Add telemetry to megametrum
    
    Now that the radio works
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b24f413da0b6d989b32e8654a91c8deee4c81dd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 19:02:50 2012 -0700

    ao-tools: add rudimentary support for MM telemetry to ao-telem
    
    Just pretends they're TM packets for now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4cb46b8a84a0dd5b8fcb479d7aa5157480e1bc67
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 19:01:24 2012 -0700

    altosui: Add rudimentary MM support to altosui
    
    Decoded the MM sensor packets as if they were TM packets.
    Add the USB ids.
    Add class of 'altimeter' devices and match those instead of just
    telemetrum as appropriate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55747ce210d7d80d5b4fdaaf9dc7ee0f7bc8b0a3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 18:58:56 2012 -0700

    altosui: Move product definitions from AltosUI to AltosLib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e6d236fdc615625fbbf28377453f920729e49b0f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 16:17:00 2012 -0700

    altos: Software implemenation of CC1111 radio encoding
    
    Add CRC, whitening, FEC and interleaving routines for transmission
    path to allow cc1120 to send telem packets to cc1111.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a294852b3607947f0f86bf236785456d8719e5f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 16:14:33 2012 -0700

    altos: Be more careful about register save/restore in ao_yield
    
    Make sure the general registers are all saved before messing with any
    of them. Then, explicitly use r0 to save/restore apsr and primask.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d3fe2a80d0925e3eded6d738d05c5b4ea61504c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 16:12:18 2012 -0700

    altos: Don't lose IRQ disabled state in ao_sleep
    
    Using ao_arch_critical around the wchan setting will force interrupts
    to be re-enabled before ao_yield records the state of that bit,
    potentially causing problems with functions not atomically testing and
    sleeping.
    
    Tasks that need to set wchan with interrupts disabled should have
    interrupts disabled when entering ao_sleep already.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e6d96816e6604ee8d9bb49345a1c1211699a655
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 16:11:23 2012 -0700

    altos: ao_storage_read already calls ao_storage_setup
    
    No need to call twice.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca310342d7b0bd1b78318cae38d920b8690dfd36
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 16:09:43 2012 -0700

    altosui: Catch timeout errors when setting up TD telem monitoring
    
    Close the port in this case so it can be used for other things.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58e005375ca29dec6091d87159055004e7f19605
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 12:43:43 2012 -0700

    altos: Use interrupts to wake up after RDF transmission.
    
    Also clean up the debug output
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5df94f74522357e062f4ec2786ff825381b2fb10
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 12:42:32 2012 -0700

    altos: Crank cc1120 power down to 0dBm to avoid crashing CPU
    
    Looks like RFI from the transmitter is confusing the CPU; lower the
    1120 power output from +14dBm to +0dBm to keep the CPU happy.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e856df474c386b8df3d2bd9e87b766ae0439efbf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:41:17 2012 -0700

    altos: Reduce STM SPI data rate to 4MHz
    
    cc1120 doesn't want more than 6.1MHz, otherwise it gets very angry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e09e35471e788b88909ff01037fb8e0e4eabcd7d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:40:30 2012 -0700

    altos: Start making cc1120 radio work
    
    RDF tones and radio calibration work now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2949ea15c59215834fedac7646f50c8a09f716f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:38:37 2012 -0700

    altos: Fix cc1120 packet mode datarate and config
    
    Was using the wrong function
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b7e4c29bf9608bfc972ae28b53cc823f4c37f92
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:32:10 2012 -0700

    altos: Make sure cc1120 is initialized correctly at startup time
    
    Check to make sure it pulls down MISO when CS is enabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27c95adf35e646840b9bd562497eea0dc96bb9bb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:31:36 2012 -0700

    altos: use 'b' command for radio beep
    
    'B' is used by the baro data dumper.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93e6d0a2c0b60e7bedd34f06ba63b468dcc8e013
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:30:03 2012 -0700

    altos: Fix RDF mode data rate and PKT_CFG0 value
    
    Changes tone to the desired 1kHz frequency and ensures the PKT_CFG0
    has the right value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c96e60bedeb00d28c36436c12b803fd8cbadce26
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:28:55 2012 -0700

    altos: Actually write cc1120 register values
    
    Helps to not use 'read' mode when writing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97d163c88ed8c8f64a9714018863d0b6eedab38f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:27:48 2012 -0700

    altos: Configure cc1120 frequency
    
    Set default conversion value, and pull the selected frequency
    calibration data out of the config block.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5a7df405c242593cbc828d5b66bbfc141a35947
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:26:06 2012 -0700

    Temporarily disable packet and telem on MM
    
    While work on the radio code progresses
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit baf1be1def01266512e67068948bf19b04ead6aa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:23:10 2012 -0700

    Allow product to override maximum number of command lists (NUM_CMDS)
    
    Just in case some product wants to save memory, or have more.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bfbd1d82f4c25120a97840a1bd4787680823afd8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 5 15:15:25 2012 -0700

    altosdroid: Add files necessary to build application
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8c363d9411fd5e79e3f806894dbc12bcc106b88
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:56:25 2012 -0700

    altosui: More changes to migrate code to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5634192a6036c6c7b47d224e2988e81bb71a4557
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:55:33 2012 -0700

    altosui: attempt to get ms5607 data into .mega files was misinformed
    
    The ms5607 'p' command also means 'go into packet mode', which nicely
    broke attempts to communicate with teledongle
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 705891be53e298ac6ced4ba02b87d2f6d1085b34
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:54:36 2012 -0700

    altos: Make cc1111 products all depend on ao_arch.h and ao_arch_func.h
    
    Ensures that files get recompiled as needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9ad342ae4c34626df4f2891da4c7f6d2c14d73e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:53:53 2012 -0700

    altos: Other half of the ms5607 prom reporting patch
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dec5cbee22f13c47690b0c6bf7ca724ef132fe5e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:53:06 2012 -0700

    altos: typo in ao_monitor prevented ground station from including code
    
    This created ground station software that couldn't actually receive
    and report telemetry packets.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e687a9bafc696998b47fd0300fbc89dece09509c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:52:38 2012 -0700

    altos: Make 'v' command dump pressure sensor ROM values
    
    Avoids needing a new command
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1832e2f76c844e97a2bd11226b003fb2af8057db
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:51:35 2012 -0700

    altos: fix test builds of non-accel flight code
    
    Remove references to accel variables when building baro-only flight
    test code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06afa2c3e78ea5bc9f1eb4913ee35c0eab0ac1bf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:50:10 2012 -0700

    altos: Legacy telemetry needs original ADC record
    
    The legacy telemetry packets included the raw ADC structure directly,
    so make sure that doesn't change further, allowing teledongle firmware
    to remain compatible with old TM firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f1b14932149153a096961fff94191778f88581d9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:49:15 2012 -0700

    altos: Remove unused AES code from teledongle and tidongle
    
    Leave this out as neither of these products need it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 718a8affe1df98eacfd707b5c8c34f9456dcff14
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:47:14 2012 -0700

    altos: Remove accel_ref from pre v1.1 TM firmware
    
    V1.0 needs RAM space for flash buffer, leaving too little room for
    this extra data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a19d6790a9800f925c8de24aac71796351e2c04
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 19:28:58 2012 -0700

    altos: More cleanups for moving files to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f86dac643081987c8994ab57a96640d5e91b342a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 19:59:40 2012 -0700

    altoslib: Clean up random rebase failures
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd43a2ae7594f062a8980d1756a07488ee54b447
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 19:42:47 2012 -0700

    altoslib: Move new sensor library code into altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0772020c969a69c3b0a705de7362340a9732daab
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 20:27:45 2012 -0700

    Build altosdroid

commit e81163ed875dc93a618baf9278f43ed7dd0f730e
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Feb 23 16:43:04 2012 +1300

    Add local.properties to .gitignore
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 392c878000e9909d37dae6342df3d6cb8f217a1b
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Feb 23 16:41:26 2012 +1300

    Add TelemetryService.java and associated files
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 69e6df07976a56b49e07c242cd6e5b2cbd2a578d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 23 17:00:48 2012 +1300

    Move altoslib sources to top dir
    
    No sense having them live deep in the file system.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b659904109f992b8a3e61efb94e81cdb19af1c9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 23 16:37:24 2012 +1300

    Demonstrate using AltosLib from altosdroid
    
    Get things hooked up so that we can use AltosLib functions from the
    android application; it's a bit of a hack at present, but appears to
    work. Some more 'official' technique would be nice...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a018724e40f2a4c0bae8b3d5c77bb90328ad4314
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 23 11:15:23 2012 +1300

    Ignore generated altoslib files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 025eb09b5de9b50de143da9f36bc02818e018ba9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 22 23:39:01 2012 +1300

    Build Android local.properties from local.properties.in
    
    Make sure the SDK path is set correctly
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3a80545d4ecedc4b98a9ee8296ab6abbbf64312d
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Feb 22 23:40:25 2012 +1300

    Add $HOME/android as an SDK location
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 091affece185dcd0832a55b0befeacaa182a57bb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 13 10:40:30 2012 -0800

    doc: Add companion SPI message protocol doc
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb5b5312a0c6102b12f3d4710ef213f0f6c67412
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 7 20:56:49 2012 -0800

    altosui: Clean up a few 'fat' build rules
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fc86ae58c3a296730fa99010cc27b8b3c2c3b780
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 5 16:30:41 2012 -0800

    Add altosdroid/Makefile.am

commit dfa059b22bf15de3f25328aeef4fdb8e5ca664dc
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Jan 4 21:01:44 2012 -0800

    Add AltusMetrum Logo as app icon, and change app name
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 402f1e76909229fc0c3b54743ba577b657495faf
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 4 20:54:40 2012 -0800

    altosdroid: build android bits when possible
    
    Locate android sdk automatically
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a48e4d40729e736929632ec422fd189ecdfba33b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 4 20:33:06 2012 -0800

    altosdroid: import code from mjb
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81465a20049da40cd8d3cda920d6585ffe87bfe3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 4 20:28:42 2012 -0800

    altosui: Move java altoslib to top level
    
    This will be shared with other (android) java code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d6df16525927d8096d1c0cccf4c86bf4c6599d53
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 22:43:48 2012 -0800

    Add altoslib/.gitignore

commit 02b53b7f592b78b2fec4f4a17b6b3e114d2bf3c5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 22:42:18 2012 -0800

    altosui: Fix AltosTelemetryReader move
    
    Lost the provided link value causing a crash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9fb15d397890c7e78bf3c1438f142f62bfc2bd35
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 22:41:48 2012 -0800

    altosui: Remove unused files
    
    Left around from development, these aren't useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5270a0f1416baef5fde08547c6c98d97f973ae95
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 22:35:41 2012 -0800

    altosui: Move telemetry reader &c to altoslib
    
    Move all of the device and file reading code into altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93305717ac4c993c88d9144d797ca64d26db97c5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 22:13:38 2012 -0800

    altosui: Move AltosState.java to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5ac5c37ea385e3a2b2703c6f125b4e3b55e867a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 22:05:47 2012 -0800

    altosui: Pull most of AltosSerial into AltosLink
    
    Share basic command processing across java users
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18914b9a84bbd8c4364a1568bb07dcc2b04ad7ba
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 21:12:45 2012 -0800

    altosui: Move AltosGreatCircle.java to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 027863b737190bccc3b5cd032d77587396d0c5c4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 21:08:34 2012 -0800

    altosui: Move AltosEepromTeleScience.java to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 346df410f570a67cda057550a067fa2b451b785d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 21:05:02 2012 -0800

    altosui: Move more eeprom stuff to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4ccdd253a9873c16f194a63a79f0c26feaafa29
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 20:57:57 2012 -0800

    altosui: Move eeprom managment code to library
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 89aa06cfdcb02de1894ccb01aed97782f9eec9b2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 20:47:16 2012 -0800

    altosui: Move AltosEepromChunk.java to lib
    
    Also fixes install issues with split lib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b273b8b298540b1a6d0a87b1cf61df1fbf62e013
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 20:39:16 2012 -0800

    altosui: Finish moving AltosConfigData to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4c88b0ca96758b663c82395e63b338043d1c1a10
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 20:34:38 2012 -0800

    altosui: Move AltosConfigData.java to library
    
    Create a new 'AltosLink' which exposes how to talk to the remote
    device abstractly via 'get_reply' and 'printf' methods.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ead8f1cfca2c454d18dce56479899f2b423d8bdd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 20:32:35 2012 -0800

    altosui: Add back in the split-out Altos constants as AltosLib
    
    These were pulled out of Altos.java, but not added back to git
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3c2f601139d36761de6a8a2210545d082ef16133
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 17:26:59 2012 -0800

    altosui: Complete split out of separate java library
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 40ee170753f4fd422c848e34a8da104683b7c8a2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 16:16:51 2012 -0800

    altosui: Clean swing/awt bits out of altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71636c1ed7cbe075921391605d1ac4edaa6ee52b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 16:13:46 2012 -0800

    move a file back

commit 6510e8495fc5e8057b6092963def4d78978625a0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 16:09:29 2012 -0800

    altosui: Split out lots of the altosui code to a shared library
    
    To be shared with the Android application eventually
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97663f922e236f4ee7bd08277ca80d419b5cd10f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 15:45:14 2012 -0800

    altosui: Split out UI-specific preferences
    
    Prepare to create library shared with android application.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9e52287751867d9e451146ccde78109609d30d7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 19:06:08 2012 -0700

    altosui: Fixed width format for new IMU values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9aa7993ee31bdfd6890ad7262a0375c07464ee76
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 17:09:00 2012 -0700

    altos: Intgrate hmc5883 sensor into adc ring
    
    Creates a task to poll the mag sensor and place the data into the
    sensor data ring.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69a8907ecbb7ca0e8526aeea0dc7490a191a0f8b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 16:57:22 2012 -0700

    altos: Get HMC5883 driver limping along
    
    Not pushing data into the ring yet, but the chip appears to work now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97317d332f21c42860747c4ecde633bd0228ef52
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 16:56:41 2012 -0700

    altos: Reset i2c controller at boot time
    
    In case it's wedged.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 64e2e66a5239541b15f43172655cfb3560bec79b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 16:54:42 2012 -0700

    altos: Fix broken EXTI edge mode selections. Clear pending exti on enable
    
    Make sure the edge mode registers are set according to the requested
    mode.
    
    Clear any pending interrupt when enabling to avoid spurious isr call
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d425ffba84ec6f632e8c0d44105de73242a86a9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 16:53:46 2012 -0700

    altos: Route correct GPIO line to interrupt controller
    
    Which GPIO a particular pin interrupt comes from is selected by the
    SYSCFG EXTICR registers; set these when an exti interrupt is configured.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1353b277f8314fbddef81c743bd6ea229364fd18
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 14:58:00 2012 -0700

    altos: Enable some debugging during flight mode on MM
    
    Until we've got the radio working, there's no way to see inside the MM
    state without using USB. Add a diagnostic command to dump out the
    internal flight state variables.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c04af7533bd3fd3f3260338c0753fde966131720
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 1 23:07:38 2012 -0700

    altos: Add support for MegaAccel daughter card.
    
    Switches all acceleration computation to using the MegaAccel
    accelerometer to ensure support for high-g flights.
    
    MPU6000 values continue to be logged as normal
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1824761f5b98e92485e2dd347b1c4d043ec207e2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 1 19:51:25 2012 -0700

    altosui: Quick hacks to download megametrum data and convert to CSV
    
    Very little useful data crunching is done, but at least we can save
    and convert files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab85337aa942cb73a08bd3b783771179773b9a67
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 1 19:35:33 2012 -0700

    altos: Timers clock base depends on perhipheral bus prescalers too
    
    For some weird reason, a non-unity perhipheral bus clock scaler
    affects the base of the various timers; this left the 100Hz tick
    running at 200Hz.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff4f3a56e09d595abbe32293cbdf1fe368633c49
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 1 19:35:01 2012 -0700

    altos: megametrum has logging
    
    This makes sure the various other subsystems know about it, like the
    'v' command.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6806103bad98385c0ec122d400f981eb81c59dd3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 1 19:34:17 2012 -0700

    altos: add high-z accel and mag sensor to megametrum logging
    
    These nicely fill the 32-byte sensor log record
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e5aebfe0203de9e69712fac291c8cd0d3a96a385
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 1 19:33:18 2012 -0700

    altos: Mark full and mega logging correctly in 'v' command
    
    Make sure megametrum reports 'log format 5'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7fce3ddf5e7e92a14cefb7fcf35e4014df744987
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:48:04 2012 -0600

    Bump to 1.0.9.5
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47bc9b2a39b7a8d3ef3fe8acc7fbf0512695e548
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:47:28 2012 -0600

    altos: Clear stm i2c transfer timeout alarm
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8164cd95db62e4564b3a9ba5c06a74c870c03841
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:46:51 2012 -0600

    altos: Remove debug printf from accel auto-cal
    
    Otherwise, this goes way too slow
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee61fb8ccb47f94b7c39e803f5a0248840d1eea6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:45:53 2012 -0600

    altos: Clean up ADC selection for cc1111
    
    Depend directly on product defines instead of trying to guess
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2df9113a22f4f67707d9ee777bd6b23ff671b105
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:45:30 2012 -0600

    altos: All cc1111 products have a radio
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a53b8b84283eb62157b0f8ecd8061f61a4b6bd6f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:44:45 2012 -0600

    altos: Shrink telemetry generation code
    
    otherwise TM doesn't build anymore
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43e558738c76afd72fc01660884be3158f44470d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:44:07 2012 -0600

    altos: Try to get hmc5883 working
    
    No joy yet
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f5e4cf7d8204016e023cf439d93de1203dc406e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 18:23:39 2012 -0600

    altos: Make teleterra v0.2 compile with new ao_data struct
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5dd5e0284c8b26b0d4ce69c64bb7864e0ae83db7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:45:09 2012 -0600

    altos: Make telepyro-v0.1 build with new ao_data struct
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29edf6d901432a1afc65900ff599c963edac5a2b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:44:01 2012 -0600

    altos: Make telescience-v0.1 build with new ao_data struct
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5fd869b244f8f2b76258dc31a5507a73fd47cf1d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:31:12 2012 -0600

    altos: Make telenano build with new ao_data structure
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 627b904b36e129ff2ead436a626699abfc3b3211
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:29:27 2012 -0600

    altos: Make stm-demo compile with new ao_data structure
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 090dc9aecdf4cfd1ac727325ae141d441c5b28aa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:26:43 2012 -0600

    altos: Make telemini-v1.0 compile with new ao_data structure
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98e992b65d366d9f79d7d2dd2dd4d1886dd1d9c4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:25:17 2012 -0600

    altos: Make telemetrum-v1.0 build with new ao_data structure
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce8153472069ed56b24ac36f297ac569d1f767d4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:24:09 2012 -0600

    altos: Make telemetrum-v1.1 compile with new ao_data structure
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ed635545e0b965901032ed2c3474ffe997c73de3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 16:52:45 2012 -0600

    ignore pa to altitude conversion file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd73c9b441f7672fb9982c4caeb5178df30f5d2b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 16:47:30 2012 -0600

    altos: Split out mm-specific versions of sampling code
    
    Avoid breaking telemetrum (too much) by splitting this stuff apart.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9eeba439ce8c9dc1def8528f96b6a67c6578d656
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 16:46:00 2012 -0600

    altos: Don't start ADC ring until the other sensors have a valid value
    
    Yes, this is still an ugly kludge, but it's easy.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d01c10eff4b70af13347969a7cece8730cf1a3f1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 16:44:38 2012 -0600

    altos: Data packet tick count does not live in adc structure
    
    It was moved to the global structure. Having two is confusing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 78423f3fc5164ea9fd428606419784c1700ad5c5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 25 23:18:06 2012 -0600

    Get megametrum ready to at least log flight data
    
    Doesn't track flight state changes correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0239e4dfe587528524b6380bbf6d9583047e52d6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 18 21:23:47 2012 -0700

    altos: Poll mpu6000 values every tick and stash them locally.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 34bb17bc1a3d8a1c95b5e57f059e7a1747e17a03
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 18 20:16:35 2012 -0700

    altos: Finish ms5607 support
    
    This has the MS5607 polling once each tick for pressure and
    temperature and then saving that in a global variable. The command UI
    provides for dumping the prom data so that an eeprom file can have
    raw sensor data along with the conversion factors necessary to compute
    useful values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d8b9d524d6424ff98dcc4155fe8b8bd892b6d8f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 18 20:04:57 2012 -0700

    altos: Add conversion between Pa and meters
    
    To be used with the MS5607 which generates data in calibrated units.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1541fc0bde71f503b1ae5757497e9e1e6d023111
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 23:14:57 2012 -0700

    altos: Check MS5607 CRC. Clean up MS5607 API
    
    It's not ready for flight yet, but at least it's sensible now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a62edd4a1f01a6ee380c3aabaff3f437e8d6f1e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 23:14:14 2012 -0700

    altos: Conditional byte swapping in mpu6000 driver
    
    Only needed on LSB machines.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a973f788563ccc66b01cc7557a004dabef18d09
Merge: d387f246 da2c920b
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 16 09:13:53 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit d387f246b24502642b76aad04eb3e0f1a5b78a05
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 16 09:09:44 2012 -0600

    build-dep on default-jdk instead of openjdk-6-jdk, closes: #655580

commit da2c920b9f3378d5a18551e008c1da5dace1e0ef
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:53:53 2012 -0700

    altosui: Try to make telem tick counts match eeprom
    
    telem files can have an extra wrap or two of tick count if they start
    recording a long time before the flight. Account for this so that the
    CSV file output from each have matching tick values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b5b898264077fcada29e73efa28dcbe4729f2709
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:53:11 2012 -0700

    altosui: Output recorded clock tick in CSV files
    
    This allows eeprom and telem files to be correlated accurately
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73c26f39b1a08fcc13e23a5b1a4293bc7df9f163
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:52:12 2012 -0700

    altos: Hacking at cc1120 driver
    
    Still doesn't work, but this adds a ton more register definitions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 318b564486aa9965bbad54c71e51fcb32b414162
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:51:25 2012 -0700

    altos: Get mpu6000 working
    
    This initializes the device appropraitely, and provides a command to
    dump the current values in converted form.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af949c67eeb9dc310b1430d3435d241adccfc0a9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:50:26 2012 -0700

    altos: stm: pass DMA buffer index to DMA completion callback
    
    This lets the user know which DMA has finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd7699cf8daded17ac41abf5c5170cfb599b6ff5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:49:24 2012 -0700

    altos: stm: delay during USB config with pull-up off
    
    This makes sure that a reboot will reliably cause the device to
    disconnect from the USB bus.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 744d05e6037ffc11688a9faa9c7b5dcda4065ee3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:47:17 2012 -0700

    altos: stm: share i2c_stop code between send and recv
    
    This waits for the stop signal to appear on the bus, necessary before
    starting another transaction.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ddaf501ddcfc1a5f74a1ef1b6b76e1c82d89c77a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 23:54:13 2012 -0700

    altos: stm i2c DMA for large recv appears to work
    
    Transaction appears to be clean on the i2c bus now; correct number of
    bytes received, and the nack and stop at the right time. This tests >
    2 length reads; should try that too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fad6cda3d081d438b18305611f37fe05335aa372
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 22:53:25 2012 -0700

    altos: megametrum needs ao_mpu6000.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f66f5de7a6cae71948da777ad0638bc6267a710f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 22:52:56 2012 -0700

    altos: Switch megametrum compile to -Os
    
    Looks like gcc has compiler bugs with -O0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f0cc91ce8e9807dca48a5c0c53d821f5060e245
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 22:47:33 2012 -0700

    altos: STM i2c work.
    
    Start now driven by interrupts
    Send now done with DMA and interrupts
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69feb1e3d94a028d04529edb015654bafd06353b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 1 18:12:41 2012 -0700

    ao-tools: Add GPS and rssi printing to ao-telem
    
    This prints all of the basic telemetrum messages now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b08095b3d41e21684a10bddfb54431019da5af6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 1 11:08:49 2012 -0700

    altos: Report latest telemetry data, rather than using the oldest
    
    ao_sample_adc points to the *next* ADC entry, rather than the most
    recent one. Step back one entry to get the latest valid data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b0b6bcc40891d8dd106d091d3af8107b2941c66
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 25 23:29:20 2012 -0700

    altos: Add hmc5883 and mpu6000 drivers to megametrum build
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0b8c614ec4d11f432963e48d94e4497d31a9ddc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 25 23:27:58 2012 -0700

    altos: Add mpu6000 and hmc5883 stubs
    
    No real drivers here yet, just some testing stubs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0266e08dbf19e2204fb5f758d5d0f944d2afff7d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 25 23:26:57 2012 -0700

    altos: Add STM I2C recv and stop funcs
    
    Recv doesn't appear to work with more than one byte
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 962476911aaab17fd482593a0e8b95fe47de2f29
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 25 23:25:43 2012 -0700

    altos: Oopsed the STM DMA channels for I2C1
    
    TX is 6, RX is 7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f55d0490017faa19b8d70b1742e4a45266c7e79
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 20 22:26:16 2012 -0500

    altosui: Mac OS Lion Java default heap space is too small (Trac #37)
    
    Increase it to 512M in the Info.plist file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1489263b895a2a825e29d0560c9b1dbba8a3f431
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 17 11:01:18 2012 -0700

    altos: Starting to write cc1120 driver
    
    This does "something" in radio test mode, appearing to generate a
    730MHz signal.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc305ea231ae22278abf91c0d9925f5992945369
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 14 13:53:36 2012 -0700

    altosui: Add apogee lockout configuration
    
    Provide suggested values of 5/10/15/20 seconds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4ab9f5dfa9f2a50e0528acf0a1fdeaa1f9bc523
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 14 13:52:37 2012 -0700

    altosui: Read frequency from device while configuring ground station
    
    Missed this when adding the TD config UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c8af6d35ebfc8fd896dfbf9928ec8f9dbfa531f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 14 12:05:28 2012 -0700

    altos: Remove debug printf from cc1111 check-stack script
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6cb744e305116a738b5d71686c6748f6f08c12ea
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 14 12:02:14 2012 -0700

    altos: Respect apogee lockout time in flight algorithm
    
    This prevents any apogee detection from occurring until the specified
    number of seconds after boost. This also prevents the switch from
    accel+baro to baro only mode in the Kalman filter.
    
    The test frame work is also changed to look for Apogee lockout: in the
    eeprom input file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a8fec1b6d8f3346f988882ffb03d7d0e45b3c81
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 14 12:00:32 2012 -0700

    altos: Clean up test scripts
    
    The flight test scripts were using invalid bash syntax. Clean that up
    and also switch the default flight directory to my new
    ~/misc/rockets/flights directory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9f6fca7cfe796cbd86ae9d8f1ebe31bba7251db
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 13 18:38:29 2012 -0700

    altos: Correct STM USB driver
    
    Configure endpoint registers correctly now.
    Restructure code to make sure we send the right IN packets.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a84d34fa08f43a5f79b1a5f8d8de7674d04647d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 13 18:35:46 2012 -0700

    altos: Check all USE_SERIAL_*_STDIO when computing AO_NUM_STDIOS
    
    AO_NUM_STDIOS is allocated based on the total number of possible stdio
    values. Now that multiple serial stdio are possible, make sure to
    check all of them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3c67543f3e5fddc6a8850f33ac519ccd55b607f0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 13 18:34:52 2012 -0700

    altos: Set USB Interrupt endpoint interval to maximum allowed
    
    We don't ever send anything over this channel, so there's no sense
    asking the host to poll it very often.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0667261e03b3fd403e97d02ea6204b007bb13f58
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 13 09:39:20 2012 -0700

    altos: Pull more interfaces out of ao.h and move to separate files
    
    This moves the aes, btm, companion, lcd and packet interfaces out of ao.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b4a53342980618b193cbee5b803e56f7c937893
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 13 09:36:00 2012 -0700

    altos: ao_telelaunch.c got left in src directory
    
    Should live in product/ao_telelaunch.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 040a6eb119451026e1ec7c3a6a8e76b439c632d5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 12 14:51:07 2012 -0700

    altos: Massive product config cleanup
    
    Support multiple serial ports more cleanly
    
    Split out parts of ao.h into separate feature header files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f952f9c285e2718a433c8c720c9b5d9c369e7036
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 12 14:50:12 2012 -0700

    altos: Start adding apogee lockout support
    
    Remove radio channel support too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d1606895f70c6bca20c25084107f90bd0b613ec
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 11 23:31:28 2012 -0700

    altos: Switch stm-demo to HSE clock, add USB
    
    Requires that SB17 be soldered shut so that the MCO from the STlink
    CPU is available the target for HSE input.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 49ac2828510e8b5fcba7e31631dac0580a455011
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 11 23:30:13 2012 -0700

    altos: Rework how STM clocks are initialized.
    
    Clean all of the RCC configuration up after turning on the clocks.
    Use the MSI clock during initialization to avoid messing around with
    the HSI clock temporarily.
    
    Allow for an external clock on the HSE line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93ef7e4a23d13540615f1a9782e1d58ddb7f258e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 11 23:29:38 2012 -0700

    altos: Use new USB driver in megametrum-v0.1 product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d432307a3c2709634350eaa1262b935028d073d3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 11 23:28:45 2012 -0700

    altos: Add STM USB driver
    
    Emulates the usual CDC-ACM device
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afd52a8b54fe31577d939a161ea9cf5ad48e3a43
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 11 23:26:30 2012 -0700

    altos: Add STM ao_arch_reboot implementation
    
    Uses the AIRCR register to force a reset
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 150881f86f8d90b5867507889441990d18223e62
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 11 23:25:36 2012 -0700

    altos: Add register definitions for STM syscfg and usb
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0dd9e1dd62656a931f9559af6da9131f704f83f9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 23:27:43 2012 -0700

    altos: Add support for multiple SPI busses and sharing device drivers
    
    The STM32L151 has several SPI busses, and we want to use more than
    one, so add a 'bus' parameter to the SPI interfaces. To avoid wasting
    time on AVR and CC1111 processors which only use one SPI bus, elide
    those parameters from the actual functions by wrapping them with
    macros.
    
    Configuring chip select is now all macroized so that each chip can
    have its own version, allowing the STM to share the various SPI device
    drivers with the cc1111 and avr processors. Note that only the M25
    driver has been ported; porting the others is 'trivial', but not
    necessary at this point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35e3c47da895bdd868b9b66b98bca64bd82db862
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:25:59 2012 -0700

    altos: make megametrum beeper test keep beeping
    
    Used to measure the beep frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9804528e249db256e020d4b5340ba6216d3474f0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:25:13 2012 -0700

    altos: Check for cc1111 flash overflow
    
    The linker is supposed to do this, but it ignores the static
    initializer data added after the code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d15c4976ed9c23c861e620eb9c429d1cb7eedbee
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:24:36 2012 -0700

    altos: Increase STM SPI speed to PCLK/4
    
    The pressure sensor seems happy at this speed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0cd682ef0c8cdcf364b7e173ff3a9f84e485c113
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:23:52 2012 -0700

    altos: Move MS5607 configuration to ao_pins.h
    
    Which SPI port and where chip select is to be found are product specific.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3909fca0a3f918121888a415f9bf9bca99505366
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:22:58 2012 -0700

    altos: Add missing parens in ao_ms5607.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c5bbfc7244faaae41c7b581644c3c253e9b7f462
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:21:46 2012 -0700

    altos: Reduce MS5607 reset delay, increase conversion delay
    
    Reset doesn't take very long, while doing a conversion seems to take
    more than 10ms.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51aef5d4fc29986353ad887f4a67ed2fe35f8c8e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:17:33 2012 -0700

    altos: Make STM clock configuration per-product. Fix 32MHz CPU speed
    
    This moves all of the STM clock configuration into ao_pins.h so that
    each product can configure it separately. While doing this, I
    discovered that the flash memory mode (64-bit, prefetch, latency 1)
    wasn't actually getting set, which is why the CPU refused to work at
    32MHz.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1dcfbb05531767e67df45c2799a2fe533834fb71
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 20:28:19 2012 -0700

    altos: Add beeper driver to STM arch
    
    Drives the MegaMetrum beeper
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 67044cca5b463772491d0712d0ce07a8f897a476
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 00:10:43 2012 -0700

    altos: Test I2C code on discovery board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a198dfcd1b0defe194feaf301f4586e5573d6e9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 00:10:01 2012 -0700

    altos: ARM -O0 flag appears to generate buggy code
    
    Use -Os always, which is annoying...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 597c3df668ccf656d8c014f665c154a03166577c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 00:09:18 2012 -0700

    altos: Make ms5607 driver do something
    
    It's loading prom values and converting sensor data, but it's getting
    the wrong answer at present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9362841b1075a2ae59eecc73137b20e700567a8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 00:08:20 2012 -0700

    altos: add STM I2C driver.
    
    Not well tested yet...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e027247a9ef82746c26bcb8d0a851a0fa06511de
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 00:06:35 2012 -0700

    altos: Slow STM SPI down a bit so the MS5607 returns values
    
    It's still not working right, but at least it returns something other
    than all zeros...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 059f09dbca4703c25b42389b54c6510331c39485
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 00:05:18 2012 -0700

    altos: Allow STM DMA channels to be reserved for one use
    
    This allows a single user of a DMA channel to reserve it for use
    without needing to lock the mutex; this is required for DMA from the
    ADC to work on megametrum as it wants to start DMA from an interrupt
    handler, which cannot block on a mutex.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7cfbbce2b94b5ac0094a0e34e1766fe1ceb12c8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 20:35:17 2012 -0700

    altos: Show temperature in stm-demo
    
    Use the ADC to show current temperature
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98aa481741b8fbc617545beda3d295b53de90716
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 20:33:27 2012 -0700

    altos: Use 384 cycle ADC sample time
    
    This is plenty fast, and provides nice stable readings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bce68e6a0abc19f49c573331164d13643c9bee5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 20:31:58 2012 -0700

    altos: Add STM temperature sensor calibration data
    
    Each stm32l has two-point factory temperature calibration data.
    Provide access to that for displaying temperature data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a41628c97e90770890cce1d6f580e92c1cad1a7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:55:53 2012 -0700

    altos: Add ADC support to megametrum firmware
    
    Measures all MM igniter and battery voltages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b9357f48597a034211affb3f18fc6089816456d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:55:20 2012 -0700

    altos: Add ADC tests to stm-demo
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b5e9d14b4e3e8f29ad8a7bb9b339890be4bcfa2f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:54:32 2012 -0700

    altos: STM SPI is not using interrupts itself
    
    All SPI transfers are done via DMA, so the DMA interrupts suffice.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5e41d1e03680af9806c599aad80b9b64dd719f9b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:53:12 2012 -0700

    altos: Add support for STM ADC
    
    DMA-based driver for the STM analog to digital converter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa96ee3db9b57cc2a88e9edd74bb9efcc228ccf3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:44:11 2012 -0700

    altosui: remove debug printf from AltosFlightStats
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e56038b65ba1c6413ba9942be3c092644986f126
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:36:36 2012 -0700

    altosui: When computing flight stats, auto-detect boost time
    
    Detect when boost actually starts by looking for the last low
    acceleration value before the recorded boost time. This improves the
    computation of the boost state data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20066268d8d1853055d0afe108584db34b425fcb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:35:26 2012 -0700

    altosui: Integrate accel speed from very start of eeprom record
    
    Don't wait for the flight computer to have detected boost--that's
    often several samples after boost actually occurred, which can leave a
    bunch of acceleration out of the speed computation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d35c4df12a3d8e2dab5d41f8d918ff4237f91e46
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 01:01:33 2012 -0700

    altos: Add ability to change radio frequency in TeleTerra
    
    Provide a way to set the frequency locally.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4700f63937786e8f6e9b4882363234a33eb54c46
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 01:01:06 2012 -0700

    altos: Make ao_config_set_radio public
    
    Allows other bits of code to reset the radio parameters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0a650a2be007b0436bd527d6c18f36eef6fbe2b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:25:50 2012 -0700

    altos: Force radio channel to zero when setting frequency
    
    Otherwise, the actual radio frequency will include the channel offset,
    which is not useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7119405a3dd7128120374a2a001bc98ef523619
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:25:26 2012 -0700

    altos: Make ao_freq_to_set reentrant
    
    Save a bunch of data space this way.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0d0d20c20e5eeacbc9a1ec1c93141a2044830fb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:24:59 2012 -0700

    altos: Shorten help strings
    
    Save a bit of code space
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8405efb6ca68c8216413b94e7acbdf51af00554a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:23:55 2012 -0700

    altos: Save memory in ao_config.c
    
    Shorten help messages.
    Stop setting aes_key on products not using aes key.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41a8383ccd29351f3a88a374f9456d6efb71b9a0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:22:41 2012 -0700

    altos: Save memory in ao_cmd.c
    
    Shrink a couple of help strings
    move a variable in ao_cmd from data to pdata.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f63065a16b65618b39314880c72074f0a8b5550
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:22:02 2012 -0700

    altos: Add fake install/uninstall targets for stm-bringup
    
    Keep global 'make install' from failing.
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5569e4df50648a3ec131ba5e244da9b67d1a67db
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:21:03 2012 -0700

    altosui: Radio channel gets set to zero by altos when frequency is set
    
    Just remember what the channe is going to get set to.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2db6b0f58811ffc44a468c8fbcacc08d37edd26c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 6 22:40:49 2012 -0700

    altos: Shuffle stm-demo SPI test code around a bit
    
    Move a debug printf beyond the chip select boundary to
    allow for more accurate timing.
    
    Send four bytes instead of just one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 89201cdf2062b7319a0da4e266e4d6edba1493f8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 6 22:40:17 2012 -0700

    altos: Declare stm DMA address registers as volatile void *
    
    Eliminates a cast when assigning to them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bcc23c3be1a20a362fea268901c600f9f0d287a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 6 22:39:45 2012 -0700

    altos: Disable DMA unit when idle
    
    Should save a bit of power
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20926b62a87154a846cb950dc542c737cd54826d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 6 22:39:12 2012 -0700

    altos: Disable STM SPI transceiver when idle
    
    Should save a bit of power.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b12bc445fe482306e4587ad60c6d2daf65a60f3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 6 18:07:07 2012 -0700

    altos: Add DMA, SPI and MS5607 drivers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a04ac8dff1bfc3efba8c7e4dc9c1a827496dbdf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 2 23:00:29 2012 -0700

    altos: megametrum builds an ELF file, not an IHX file
    
    Name it appropriately.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf1e4d60e1fcd75fa734365a2666ea8930938128
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 2 22:58:54 2012 -0700

    altos: Move SPI functions to architecture-specific location
    
    Some architecture specific stuff needs to use core altos code, so
    create new ao_arch_funcs.h files per architecture that get pulled in
    at the end of ao.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c09d155328bd446bb84ac1068d380cceb884df22
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 2 19:27:53 2012 -0700

    altos: Oops. Set per-USART STM baud rate register instead of usart1
    
    Was accidentally always setting usart1 instead of the per-usart
    register. Didn't work too well for other usarts...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 440226df03a85cd0047d876b57b2a3410bfb2b02
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Mar 31 17:53:25 2012 -0600

    be explicit in a couple places about only using single-cell LiPo batteries

commit 4ca52908c8b3f98a79588981f6878025250f0924
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Mar 31 16:43:39 2012 -0600

    use explicit path not $(HOME) to find ARM toolchain for now

commit 246618baf9b8803e5ae4e650eb46740d1128a010
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Mar 31 16:43:11 2012 -0600

    add config file for gdb use with MegaMetrum via Olimex dongle

commit b89f11139fae7ae722ed78d342a169ed2bf5c948
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 31 12:44:14 2012 -0700

    Build megametrum-v0.1 by default

commit bbf31b8591f89e2a1fcc7dac5f42d730a81473d2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 31 12:43:58 2012 -0700

    altos: Add stub cc1120 driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f2b75518169c4f2da9762de46bf1d9a71a04d17
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 21:54:32 2012 -0700

    altos: Move cc1111 DMA engine interface to cc1111/ao_arch.h from ao.h
    
    It's hardware specific
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47a9925f16f6a13b173c49d3873d91fc7cf6d46e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 21:53:30 2012 -0700

    altos: Move cc1111 AES driver to cc1111 directory
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93ae5f6ce09fa71ebd34f77a884684b3670c8b44
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Mar 31 13:29:15 2012 -0600

    openocd config file for MegaMetrum

commit b711768da6310a1b06f3b995a280587fed5f26cd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 21:45:44 2012 -0700

    Bump version to 1.0.9.4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0993595035a2813deba6991fa25bc0d475f2e6bb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 21:45:02 2012 -0700

    altos: Add ao_freq.c to megametrum build
    
    I think this will be needed to compute radio settings on the cc1120
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a157edbe1bf7fffd5a6041f7b1760674addd2229
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 25 13:08:05 2012 -0700

    stm-demo does not use altitude.h

commit c1531fb26461b9f4ec39672bbfaeb70e6f4d1056
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 01:42:32 2012 -0700

    Use -Os for STM apps. Fix altos.ld to matchall .rodata* sections
    
    Without .rodata*, it would stick the flash copy of the data on top of
    any further .rodata* sections. Fortunately, the linker catches that
    and complains...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2c110fb4531144f18f62200e4127738c84e87f1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:55:53 2012 -0700

    Get config stuff hooked up for MegaMetrum
    
    This stubs out enough stuff to let ao_config link and work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bda768c2be5b81bec13f21d4d3bb6a11a8e88fa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:43:47 2012 -0700

    Add preliminary MegaMetrum v0.1 support
    
    This turns on an LED, enables the internal R/C clock, hooks USART3 to
    the GPS chip and USART1 to the console.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c27e211796a64b6bbacfe6a1516e9872fdb0853e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:43:17 2012 -0700

    Use new Makefile.defs in stm-demo
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7ddfd4e6d75e50ca64a342181f5c52e9f4919af
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:42:13 2012 -0700

    Use 16-bits for STM32 LED mask. Export serial I/O functions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 606d866153cb639a2400cbedbc45046372ad1b30
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:40:48 2012 -0700

    Allow skytraq to be on non-default serial port
    
    Provide ao_gps_getchar, ao_gps_putchar and ao_gps_set_speed hooks to
    let product specify functions for serial access.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 25184baa36c20e3d661f94e642a33e8aae179d60
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:40:09 2012 -0700

    Allow for more than 8 LEDs
    
    Provide hook for architecture-specific LED mask (AO_LED_TYPE)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 87ca5c9c5f9cea1b9e14468e4694ce6acc21955a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:19:06 2012 -0700

    Clean up STM build by moving common defs to Makefile.defs
    
    Shortens default Makefile a bit
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41a3fded116a3101789df44647d0eb06be07a25b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:04:47 2012 -0700

    Make stm-demo display a scrolling message
    
    Instead of trying to frob the LEDs, which are now owned by the serial
    port.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b5e98a3407b369803109bfc1409e4f8b6e848ba
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:04:21 2012 -0700

    Flush LCD changes each time the text is updated
    
    Rather than requiring the caller to do it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6337b5f522be11926a6490d7bb27a4f7795da569
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:03:29 2012 -0700

    Automatically set ALTERNATE pin mode when setting alternate function
    
    When selecting an alternate function, set the pin to alternate mode as
    well; there's no sense requiring two separate calls everywhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9e61a4f1f0ce5e5177a2252e8b7a02a578e77f1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:02:38 2012 -0700

    Allow any STM usart to be used for stdio
    
    This also adds the alternate pin configurations for the other two
    usarts
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf060b3e3ed655bbb8464f342d0a0b1745a06173
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:01:50 2012 -0700

    Allow for more than one serial port in core AltOS
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d236a5c7cd6e9b1d7192e801d63b4bd348cc2f12
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 22 20:02:30 2012 -0700

    Move LCD string output code to ao_lcd_font.c
    
    It's all very specific to the 14-segment display, so
    stick it there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6da2f5846f2d28ea1f09f60ef2cc3f68113ac62a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 22 19:43:29 2012 -0700

    Add LCD device driver to STM32L port
    
    This enables the 6-digit 14-character display on the STM32L discovery
    board and provides an ascii output to it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a953ac32033ded18adf0cb3ca20134385fcd0a6d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 22 19:42:18 2012 -0700

    Add defines for LCD controller and RTC clocking
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6e557bc2f0bd6d4272ed00dd09554d27a83be89
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 22 19:41:23 2012 -0700

    Actually enable usarts with the new usart code
    
    And move USART1 to PB6/PB7 to avoid conflicting with
    the LCD pins.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 03fbc18ea17a9e77a1d4d8e0ddb97abbe5da3658
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 21 16:24:06 2012 -0700

    Clean up multiple serial port support for STM32L
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f560c961ae4fedec0c9f11d5b3635fcb0d67ed8e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 21 16:18:26 2012 -0700

    Add support for multiple serial ports on STM32L
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit faf2bea4fdb3dca7fbed35423a4fe4459ee92ceb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 19 11:25:40 2012 -0700

    Save/restore PRIMASK register on Cortex-M3
    
    This preserves the interrupt-enabled bit across context switches
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a14bee42a8431c909bcd74b0acec57329bc0284
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 19 11:24:43 2012 -0700

    Don't disable interrupts before saving interrupt flag on AVR
    
    This ignores the interrupt disabled state, so we'd always leave
    ao_yield with interrupts disabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7662a0096a860cddac413a310305fe842830c3b5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:29:51 2012 -0700

    Add .gitignore file to stm-bringup
    
    Ignore generated binaries
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4be74ef0d13114707fd8217907a5ec457f886160
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:26:43 2012 -0700

    Fix STM LED driver and blink LEDs on discovery board
    
    This adds a task to blink the LEDs, after first fixing up the LED
    output code to enable the GPIO and talk to the right pins for the
    discovery board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab6ea9043b592c25948a70b6204d613756a9a250
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:10:02 2012 -0700

    Basic OS running on STM32L
    
    This gets stm-demo working
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0cc01d378ae96325e429ad608b953661582939b0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:09:20 2012 -0700

    Add AO_PANIC_STACK
    
    Provide a panic code for stack overflow.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ca46760cf903860dccb4864578558a1abb6e0fa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:08:48 2012 -0700

    When debugging, send ao_panic message to ao_debug_out
    
    Use the low-level debug hooks to get the panic state sent to the
    serial port.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4bfce11873f34af9621c60f83a8355f85769f6d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:07:07 2012 -0700

    When debugging, send pre-init output to ao_debug_out
    
    Before tasking is running, send output to ao_debug_out to help debug
    system initialization.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93481fd3d9305a107b88c8a64de4194a6d94dc0e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:05:46 2012 -0700

    Incorrect type in ao_task_info for wchan
    
    Would truncate 32-bit pointers on arm.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ba5344514f8ed51f6fd69ca09f6c7035c4fd0da
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 17 00:06:59 2012 -0700

    Add stm-demo program
    
    This runs AltOS and talks over the serial port.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d1b24bb20dec09145fbaa6fe6897898d47dd16e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 20:24:29 2012 -0700

    These were moved to the src/stm directory
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8100ea5042013bb4eed67907b4e9d4e5c196df2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 20:23:31 2012 -0700

    Add stm bringup timers and move most of the setup code to the stm dir
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9279fd42793123784ce83ca151df6f4630487722
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 20:21:09 2012 -0700

    Add STM platform and stm-bringup demo program
    
    The stm-bringup doesn't run altos, it just initializes the device and
    writes stuff over a serial port. Works on the STM32L Discovery board
    at least, should do stuff on other boards too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2f13aa43ba79becbff6c9bfc18c665a58d96185
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 14:25:37 2012 -0700

    Add example STM32L programs
    
    This loads to flash and sends data over the serial link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3c7d1f6cfffb43299041f2850a48177f4e9b83a5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 22 23:26:03 2012 +1300

    'stdin' is a special name in some compiler environments, don't use it.
    
    Switch to 'in' in the prototype for altos_serial_set_stdin.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bdfcc9112c41c494de23594963980a730b625cc4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 00:49:29 2012 -0700

    altosui: Disable launch controller button
    
    The launch controller should just be a separate program.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf1e95810559584705d0b8a787375938c68e07c6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 00:37:52 2012 -0700

    altosui: Add Configure Ground Station dialog (trac #29)
    
    Allows the user to configure the teledongle frequency without opening
    up the flight monitor window, and also shows the teledongle fixed
    values like radio calibration, serial number and software version.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d60862fce6ac27a97ad6337eea32a4b48645d158
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 00:38:37 2012 -0700

    altos: Make sure config values are loaded in 'c s' command
    
    ao_config_get may not have been called when ao_config_show is invoked
    by the user, so make sure the config values are loaded before showing
    uninitialized data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b98f75dbcccd40c8cbf32c3bfd21bd6f5648b861
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 22:54:17 2012 -0700

    altosui: Sanity check values from device configuration
    
    If someone has down-graded and re up-graded the firmware, the config
    entries may be garbage. Sanity check them to avoid crashing the UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b6c7ae2c1f8cba7351cd139c49322280d9d3af47
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 22:53:08 2012 -0700

    altos: Reset config version if it's too large as well
    
    Any future config values will get trashed if we down grade the
    firmware, so we must reset the firmware version whenever it gets
    written.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3f0379db7067eaf104892a82b9c49142087adece
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 22:02:13 2012 -0700

    altosui: Make 'monitor idle' work with older TeleMetrum firmware (trac #28)
    
    Older TM firmware did not have the 'done' line at the end of the GPS
    report, rather it would just stop after showing the Flags value. Check
    the TM version and stop looking for GPS data when the Flags line appears.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a9baabaf33db5e30eb4ef8f923a4fd96fd28fb4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 21:49:58 2012 -0700

    altosui: Mark data 'Age' in monitor idle UI too
    
    Just like with the flight monitor UI, it's nice to know how old the
    data in the monitor idle UI is, in case the data link to the TM isn't reliable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f19f9a0eaba22789fdc07a52849e8aaf6fe4695
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 21:48:43 2012 -0700

    altosui: Catch attempt to set radio frequency to 0.0 -- use default
    
    Monitor idle was setting the frequency to 0, which takes a while with
    the new native radio frequency setting code. Don't do that, instead
    pull out the preferred frequency for that, as is done in other places
    where a frequency of 0.0 is used.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 170510bb183715e9ba580b180f20657d6602644e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 21:13:31 2012 -0700

    altosui: Find actual landing time when computing stats (trac #23)
    
    Look for the last time the height went from >10m to <2m from the
    nominal landing altitude and use that as the landing time when
    computing things like main descent speed, time under main etc.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0952224c36eba25db34bd147d2d579c66b15bbf8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 18:24:51 2012 -0700

    altosui: Change flight data saving UI to separate download/delete selections
    
    First pop up a dialog to select flights for download. Download
    them. Then, after that, pop up a *new* dialog to select flights for
    delete. Offer to delete all of the downloaded flights by default. Then
    delete the flights.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7dd1d62676c1e605fe69a4c0acfe7638c6b79aa5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 18:19:05 2012 -0700

    altos: Optimize ao_freq_to_set a bit
    
    Reduces size from 327 bytes to 287 bytes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d77a4ea206d627635159f35c76c744687d4e633b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 11:58:39 2012 -0700

    altosui: Show only supported telemetry version
    
    Make it clear in the UI which telemetry versions are supported,
    providing the combobox only for new firmware which supports all versions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8ebb83e64d66fa159e75aa560d39d80bb6d9d04
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 10:38:32 2012 -0700

    altosui: Configure radio with new direct frequency setting
    
    Instead of computing the radio setting in altosui, let the radio do it directly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1d12a117b36de7fe8dd992959b890bfd1163e81
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 26 23:35:35 2012 -0700

    Do radio settings solely by frequency
    
    Compute the radio setting needed based on the calibration value
    provided and the requested frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2550d72aee371676d2f09316051567681e53a7c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 26 22:05:04 2012 -0700

    altosui: Use ConcurrentHashMap for maps
    
    This data structure is accessed by multiple threads, so it needs to be
    re-entrant.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8610fdae8f47e1e8b6e8525227cc912664ecfafd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 26 22:04:13 2012 -0700

    altosui: Show time since last packet in flight status window
    
    Makes it easy to see when the UI is wedged, and when telemetry data
    are being successfully received.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 392a3107b9e9cc8c1ea51df6ff5ec54817adbc65
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 26 20:11:34 2012 -0700

    altosui: Restructure telemetry classes to be more sane
    
     * Make AltosTelemetryRecord be a class, rather than an interface.
    
     * Inherit from this for AltosTelemetryRecordLegacy and
       AltosTelemetryRecordRaw.
    
     * Remove bogus AltosTelemetryRecordGeneral class.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 77639dae0fb9975219c2e211ea6dd6c7965eeea2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 27 23:50:43 2011 -0700

    altos: Require callsign match in packet code
    
    Ignore packets with mismatching callsigns to avoid accidental
    connections between devices controlled by different stations.
    
    As a special case, if the device is configured with the default
    callsign (N0CALL), then let anyone connect. This allows configuration
    of new devices without needing to change the ground station callsign.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b4a4c7b6a0c3f93267f33482f490e7aa25c2158
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 13 10:40:30 2012 -0800

    doc: Add companion SPI message protocol doc
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d42ded7ebdb0c134c8dac61f41525c37d81ae61
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 13 10:44:23 2012 -0700

    update turnon_telemetrum to v1.2, add more turnon scripts

commit f450f8bc70f857053b26c4379f54a318062e89a1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 3 22:27:59 2012 -0800

    altos: Set correct registers for serial0 baud
    
    oops. not going to work very well setting serial 1.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6821ae734a7efaf2e069f6c5edf9605a9dbe125
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 3 20:46:25 2012 -0800

    altos: flush stdout when fifo from arduino serial port is empty
    
    This avoids leaving bytes pending inside altos
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65b9b5d0d91fef2c7452dc77017f31f176672304
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 3 20:42:41 2012 -0800

    Build teleshield by default

commit 7a42f2e0f145d2d520aed8e241fa39f7cb62b19f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 3 20:41:15 2012 -0800

    altos: Add support for UART0 in async mode
    
    And copy bytes from it to stdout.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 085625ff3992454b59583d95a3c415597c51f754
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 30 15:42:28 2011 -0800

    altos: More _asm -> __asm changes
    
    Missed a few last time
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 614ab6a991258a5caad0ca12ae35d0288a5b7503
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 30 15:38:32 2011 -0800

    altos: Clean up for SDCC 3.1 - more keywords
    
    _asm -> __asm
    sbit -> __sbit
    remove variables named 'data'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bbb94a6a25a106316414a9a281e924f6c56e9f38
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 30 12:27:35 2011 -0800

    altos: SDCC 3.1 wants __at instead of at
    
    Older SDCC would accept __at, so just replace all occurances unconditionally.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4783ac9653fd4f816f839452795e0d2e52129d5b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 27 15:47:54 2011 -0800

    altos: Switch teleshield to use radio slave mode
    
    And bring it up at startup time by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 791c137728dd3398bd7275be13cc9e6be96d7af4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 27 15:37:28 2011 -0800

    altos: Add teleshield directory and bring-up code
    
    This is cobbled together from various existing bits, but should at
    least provide some ability to test a teleshield board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eff8611e3eb19853b06acfcd7e978c9046cd5f78
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 17 17:05:06 2011 -0800

    altos: Create TeleMetrum v1.2 directory
    
    The hardware is software-compatible with v1.1, but it's nice to have
    the right version number in all of the files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6baf6f41040f7b074d8cc84ef75e254c5d2b466b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 17 16:58:04 2011 -0800

    altosui: googleearth doesn't accept spaces between coordinates anymore
    
    it got pickier for some reason; let's not put spaces in now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dbf7c0c59854e040b65f068069d80716f02fc1bc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 13 23:03:22 2011 -0800

    altos: Fix pad orientation for pre-1.1 boards
    
    They use a different code path for accel as they don't have the
    VCC compensation code in place.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1e293ff4953b51c19af8b52f2999419ea84e7e5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 19:19:40 2011 -0800

    altos: Add startup and config (view only) pages to TT
    
    The config page needs a pile of work before it's useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02b4e52a5349217df43105eaa1fff6bfc7dac4cc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 19:18:53 2011 -0800

    altos: Enable packet master and debug in TT
    
    The code was already getting linked in, so we might as well use it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e7044fd95472449e2fb860cef902fa458b91ccac
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 19:18:23 2011 -0800

    altos: Fix sdcdb settings for telemetrum v1.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f9e76e0d3492dcc8bf4b5b1f07c3c727cfdc0ef
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:54:14 2011 -0800

    altos: Trim skytraq NMEA messages. Shrink NMEA header matching code
    
    Tell the skytraq to not bother sending a bunch of the NMEA messages
    that we don't parse.
    
    Explicitly look for 'G' follows by 'P' instead of having some general
    header matching code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3dcb9451f40506abced72783966104645a73bc7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:52:02 2011 -0800

    altos: Allow TT/TBT reports to escape landed state
    
    The TM altitude reporting code kept beeping out state and altitude
    forever, which isn't very useful on TBT or TT.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f7d7a4fbede63b51208bf051e08aa73dfbf35a0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:51:31 2011 -0800

    altos: Remove LCD debugging code
    
    This isn't needed anymore.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 430b439b9a5cc98b32273a233505de2c2f975c59
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:51:03 2011 -0800

    altosui: Add ao_lcd_cursor_on/off
    
    This shows or hides a blinking cursor on the LCD.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75a8490a7bee2a2c7afd559b13f1d9c40c2aa08f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:49:17 2011 -0800

    altos: Add configurable set of channels for TT
    
    This adds the channel list for TT, which will be configured by
    AltosUI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ba946fea29ff134ffaeaea9d7932f4bd4e953aa
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:48:07 2011 -0800

    altos: Export 'ao_cmd_is_white' for use by other code
    
    This function tests the current input character.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20282ef00afe70e3f3193f6f0200254cb2c33e93
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:47:08 2011 -0800

    altos: Set default flight log max to 127k on TM v0.1
    
    The flash part on v0.1 boards is only 128kB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5972c642f0de0789e90268bfa19ef8b51c06eebc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:44:36 2011 -0800

    altos: Handle internal and external telem monitoring requests
    
    Record separate internal vs external monitoring state, allowing
    both to happen at the same time, and when either is turned off, the
    other keeps working.
    
    This also adds disable/enable so that other radio users can
    temporarily take over the radio; monitoring will resume when the other
    radio user is finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef7f86453d686a49882e8c1b88a59228c4c631a9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:37:53 2011 -0800

    altos: Check pdata+xdata memory usage during build
    
    The sdcc linker doesn't check the sum of pdata+xdata memory usage, it
    only ensures that xdata itself is small enough. This doesn't keep
    xdata below the end of usable ram on the cc1111 though (0xfe000).
    
    Fix up the check-stack program to also make sure all of xdata fits in
    available memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2bce71eba9f44b6fcf64e307c8174824c3a0fb57
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:32:49 2011 -0800

    altos: Set SPI fill value each time it is used.
    
    This ensures that the final MOSI pin value will be high after a
    receive is finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a705b62829d492e3a48c81077907cee61afb860
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:31:46 2011 -0800

    altos: Initialize DMA config address at boot time
    
    Instead of resetting these each time a transfer is started, just set
    them once at boot time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4de8bf6da4d725bb0514d032b0708c5cf420e8fa
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:30:56 2011 -0800

    altos: debounce buttons
    
    Provide API to clear out any button events that happen during startup,
    and then discard button events 'too close' together.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ad41b5820c2e252627959e4627473f07784be23e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:29:38 2011 -0800

    altos: Build TeleTerra v0.2 by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6db11c3c87725c809c518f5f19b07325faf9c84
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:10:18 2011 -0800

    altosui: Deal with serial port exceptions a bit better
    
    This catches a few exceptions and tries to make sure the serial port
    is closed afterwards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b132eefc5f63412bb4a98a4bb72b9055e40d5d42
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 22:30:17 2011 -0800

    altos: Make ao_xmem funcs require __xdata void * instead of casting
    
    Having an explicit cast in the ao_xmem wrapper macros caused the
    compiler to generate garbage values for pdata addresses, making the
    upper byte 0x00 instead of the required 0xf0. Removing the
    casts from the ao_xmem macros exposed this problem, so a new
    PDATA_TO_XDATA macros was added, along with a CODE_TO_XDATA macro
    which serve to cast pointers, with suitable address modifications, so
    that things work again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ecde50fbebe68a2e2200a2f8d081fd37074f840
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 22:24:22 2011 -0800

    altosui: Make UI Look&Feel configurable
    
    Saves the preferred style and uses that for all current and new windows.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 713bd503902526c17a7657c18be947ef8fa6a47a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 17:18:08 2011 -0800

    altos: Shrink Skytraq NMEA parsing - common nmea_finish code
    
    This shares the checksum testing across all three lines, saving
    another 103 bytes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3e8275572550b700563b3bde73cd7a43b608f17
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 17:11:39 2011 -0800

    altos: shrink Skytraq NMEA parsing more
    
    This cuts another 78 bytes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8266d8d39c0103e68ef3e476b9639574d9a48771
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 16:54:18 2011 -0800

    altos: Shrink code size of Skytraq NMEA parser
    
    Just mess around with the code to make it smaller. These patches save
    173 bytes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit df08b2f6de464f4546c1809b931eb4910d88b558
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 01:01:11 2011 -0700

    altos: A bunch of missing .gitignore files (mostly)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a7b285ec0945830b8b31877115157ddd12d6a9fb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 00:57:45 2011 -0700

    altos: Add i2c driver for avr chip
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0669f0d74fc24c4f1925a45a9975b7a49a65b692
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 00:49:23 2011 -0700

    altosui: Only update GPS data when new GPS information arrives
    
    Track which telemetry packets are actually producing new GPS
    information and only update the GPS average position and count of
    stable GPS reports with new GPS info, instead of on every telemetry packet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7e14a2750d437e8b77d68a944a0711e7a0c882b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 00:35:35 2011 -0700

    altos: Fix distance/bearing computations. Deal with large values
    
    Lots of little math errors dealing with large distances; easily tested
    as the GPS currently reports lat 24 lon 121, which is a long ways from
    Portland.
    
    Now reports distances in km when large, otherwise in m.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit da330c5975b9f565d059ef8084dfdacc20f34246
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 26 22:49:11 2011 -0700

    altos: Bring up basic TeleTerra v0.2 UI
    
    Lots of fun stuff here -- multiple panes of information.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e4cceedb5b758faae684978299e667c4bb06f4d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 15:24:02 2011 -0700

    altos: Flip button IRQ initialization around
    
    This matches what the docs suggest
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 90e738a3379d258a48a7c92f6708040fc39c373a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 15:20:50 2011 -0700

    altos: Fix battery voltage computation.
    
    Full scale is 4.95V, not 3.333V.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f70553106707e3496d07eecb83f0c0a1acad7f77
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 14:51:32 2011 -0700

    altos: Add battery voltage sampling driver
    
    For devices without a full ADC compliment, this just samples the
    battery pin and converts to mV.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e7a10c06a0486e9f869e361e46f2c98db9897b0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 14:08:59 2011 -0700

    altos: Add button driver and sample user
    
    Hook up the teleterra buttons and have them beep
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e2736226fcd7c1ab1ba93a5ebac9b285ebf4733
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 12:55:35 2011 -0700

    src/teleterra-v0.2: Initialize more hardware
    
    Initialize the flash storage and flight state reporting beeper.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07d4477b2e8477e96a2f155a25f95e14a9a47efa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 12:51:05 2011 -0700

    altos/teleterra_0_2: Initialize LCD driver
    
    Initialize the LCD for testing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85b259c5bba7edbd2a79471bb1104bcf3904d536
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 21 14:58:26 2011 -0700

    src/teleballoon-v1.1: Use Tm style initial state stuff
    
    Come up in pad mode unless someone talks to us while in idle mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb61f7aa2c8b692bd892b85e782f249187c80e5c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 21 11:30:43 2011 -0700

    altos: Add teleballoon-v1.1 directory
    
    This is an alternate firmware load for telemetrum v1.1.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a10aa835a06b71e2cefeb6b10daaf8cc394603b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 15 22:54:40 2011 -0700

    altos: Add LEGACY_MONITOR defines to more programs
    
    Make all monitoring programs define whether they want all of the old
    telemetry formats too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aef732fc9cdf527a18f2959d6fb7903e832209da
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 15 22:54:02 2011 -0700

    ao-bringup: Make it build with source restructuring
    
    Source code all moved around, need to find the header files in new directories.x
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0debe7ffc2aab2b4d08f42e488cb783ae91c36ab
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 23:30:53 2011 -0600

    altos: Add TeleTerra v0.2 product
    
    This includes most of the necessary drivers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65873a3ad1d8e8b5ec002be2576c6f496543306a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 23:29:24 2011 -0600

    altos: oops -- forgot to add the cc1111 string code
    
    This is required for all cc1111 builds now; it provides xdata string
    functions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit badda0d910c56135401dce9adc9e6abebdba2ad7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 23:28:02 2011 -0600

    altos: Split out arch-specific bits of LCD driver
    
    The arch-specific section just puts a single nibble to the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47c2c0b79dc516d2566ae149605b7d70ef2dca98
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 20:58:04 2011 -0600

    Bump to 1.0.9.3
    
    TeleScience and TelePyro now work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 652c024ed37bfed5de17f45c772796d5cbe4599f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:48:55 2011 -0600

    altos/telescience: Add more header dependencies
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75960500d1f290fa9f82183431443ac122f12c19
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:48:11 2011 -0600

    altos/avr: telescience doesn't have room for the flash write code
    
    This is useful for debugging the SPI and flash drivers, but not
    necessary in production code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b80f8ffb61566cbd134c399ea6ccf9290075490b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:45:51 2011 -0600

    altos/avr: Must leave space for init stack in ram
    
    The stack used during system initialization lives at the top of RAM,
    so leave some space for that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f1573a752425121d4c6a14285f1eb0fef3a8bea5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:44:48 2011 -0600

    altos/avr: Shrink default stack size to use less ram
    
    Not that we have any way of knowing how much stack we're using, but at
    least this seems to work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb837d9bb9e6736fcdfca7692b1f9490ea090838
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:13:00 2011 -0600

    altos: Allow ao_science_slave to not log data
    
    This is mostly for debugging with flash writes disabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac0bebc44bc657b303db4c41fa0c9624f3df9f4f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:11:56 2011 -0600

    altos: Make HAS_STORAGE_DEBUG define consistent
    
    This allows products to include the 'w' command for testing flash
    writing as needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3a28846d3ff8f82b0e97c211b9debf6d67ee5af5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:10:45 2011 -0600

    altos/avr: Clear SPI receive buffer before clocking new data in
    
    I don't know why this is necessary, but the receive buffer gets
    'extra' data added somehow.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e60c470b426b7be08a33133e7d8c94201d7e96d4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 17:44:40 2011 -0600

    altos/avr: Pull-up on the SPI slave select pin
    
    This makes the board work even when disconnected from TeleMetrum.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af4470f8025116179ef83726a8287e47c465907b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 17:44:02 2011 -0600

    altos/avr: Register stdio handler when using serial for stdin
    
    This code was left in a bit of a mess; just clean it up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3bda859caf1501f8408703dca81412d70ba00e04
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 17:42:24 2011 -0600

    altos/avr: telescience does not have a serial port
    
    The USART is used for SPI to talk to the flash part.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a186e92c5773c5d908e9cee889d645a8172dcdc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 17:39:35 2011 -0600

    altos/avr: Make ao_arch_critical argument be a statement
    
    Wrap the argument to ao_arch_critical in do { } while (0); to make
    sure it gets correctly checked as a statement.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3453068b0feb640b9d11dbeb021c535ce8b4a31
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 17:39:06 2011 -0600

    altos/avr: Print newline after dumping ADC values
    
    Cleans up the formating a bit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06b044629951b06c7ec9b0105b89f51b2880ebd0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 16:03:04 2011 -0600

    altos/avr: SPI mutex is now held by the caller, not the SPI driver
    
    SPI transactions generally require a read followed by a write, with
    the chip select held the whole time. As a result, the SPI bus must be
    held across multiple transactions. To make this reliable, the caller
    must hold the SPI mutex, instead of the underlying SPI driver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d1361c95f94125cda244b4cc5e55c2fb77b680b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 9 11:09:25 2011 -0600

    altosui: Deal with missing state transitions in FlightStats window
    
    Any missing start/end times are pinned to the end of the flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c82b07471f017171c58a6968adf79901f46a987
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 9 10:55:04 2011 -0600

    altosui: Deal with telem data that goes backwards in time
    
    The new telemetry stuff can send packets with older timestamps, so
    sort telem packets read from disk to create an in-order record of the flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 636b7b368e67346b0796cd84fbfd71e10966d61f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 9 10:21:56 2011 -0600

    altos: Respond to telemetry rate changes immediately
    
    Instead of waiting for the previous telemetry interval to expire,
    immediately switch to the new telemetry rate. This will provide
    more telemetry data early in the boost.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca036c5616c3e745c0b878ed90618d4ff710c0e5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 22:19:52 2011 -0600

    altos: Improve TM v1.0 apogee estimate
    
    v1.0 boards have noisy accelerometer data caused by interactions
    between RF transmission and the accelerometer measurements; this noise
    generates a negative bias in the accelerometer readings. The net
    effect is that the estimated speed is lower than the actual speed,
    causing early an apogee estimate.
    
    By increasing the sigma value for accelerometer data, the kalman
    filter 'trusts' the acceleration data less, putting more weight on the
    barometer data. This causes the estimated time of apogee to be closer
    to the correct value.
    
    This reduces the response to changes in acceleration.
    
    This new value is applied solely to TeleMetrum v1.0 boards. v1.1
    boards correct for this error, and hence can use the correct sigma
    value for the accelerometer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26d7eb7149da8c797d7e704d75f73af2d2aa52c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 21:31:34 2011 -0600

    Bump to 1.0.9.2
    
    (1.1 RC 2). Flown at Oktoberfest 2011 on 10/09/2011 (we hope)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aad03e3cab4c328e53d3df47b6dac1d3f7a49229
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 16:07:57 2011 -0600

    altosui: Remove igniter voltages from chart.
    
    These are just annoying; when we add the ability to turn stuff on/off
    on the fly, we can add them to the list of available items.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a7363b3ba99310bd44c9b66f6f5159e46762be4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 11:51:05 2011 -0600

    altos: Ignore ejection bumps when doing boost re-detect
    
    An ejection charge looks an awful lot like an extra (really small)
    motor burn. Ignore them by averaging the acceleration during
    fast/coast using a /64 exponential decay filter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82604193ed0c522c1fba0072b504fe88b027f1ee
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 11:50:24 2011 -0600

    ao-telem: Add new program to convert telem data to ascii
    
    This reads telem files and displays them in ascii form. It's not done,
    and it's not documented, but it's a start.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbf5a649c8b7101bef9d57e48e42ac775e758c79
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 11:46:38 2011 -0600

    altosui: Allow for multiple instances of each state in the graph
    
    With the new boost re-detect code, we can get multiple instances of
    boost/fast/coast, so make sure each are displayed in the graph.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9b0b7423c0640f729d61a91de6ff96ffe4b486e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 11:43:37 2011 -0600

    altosui: Max acceleration across boost instead of all ascent
    
    This ignores ejection bumps, making the max acceleration far more useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 258b75498916183ed250d3abb3282fe3d843e7a1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 7 09:53:09 2011 -0600

    altos: Write xdata versions of memory functions
    
    These are significantly smaller than the general pointer versions from
    libc on the cc1111.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>
    
    Conflicts:
    
            src/Makefile.proto
            src/cc1111/ao_adc.c
            src/cc1111/ao_packet_master.c
            src/core/ao.h
    
    Fix up the new makefiles

commit 128bbfa150f88c09f7adde2434b7bf0b5a9ed556
Merge: f6f54d70 246864b0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 7 08:41:56 2011 -0600

    Merge remote-tracking branch 'origin/simple-quiet' into multiarch
    
    Conflicts:
            configure.ac
    
    fix version number

commit f6f54d70b768dca1715ddddea64a4df00d82b09e
Merge: 1c344b76 0d10e257
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 7 08:40:14 2011 -0600

    Merge remote-tracking branch 'uniarch/master' into multiarch
    
    Conflicts:
            src/core/ao_cmd.c
    
    Use ao_arch_reboot after waiting for a second

commit 0d10e25766b96f5660e213115cf27b71ff164405
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 27 21:06:54 2011 -0700

    altos: TM: Don't turn on packet slave mode until idle/invalid state
    
    Leave the packet link disabled until we've checked the
    accelerometer. That way, we cannot accidentally get to idle mode when
    the rocket is on the rail.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fba1d605a627d03f9587ec060c45fb5d3e96aaeb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 26 11:50:28 2011 -0700

    altos: Delay reboot by a second to avoid re-entering idle mode
    
    TM and Tm go into idle mode if they receive a packet after boot
    time. When tebooting the device over the packet link, the packet
    master would be (rapidly) polling the device for additional data and
    so the device would invariably receive a packet during bootup and go
    into idle mode again.
    
    Delay the reboot by a second to give the controller time to disable
    the master end of the packet link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c344b760776cd5d8c0297d8db9bf02687381b4e
Merge: 4ed53ef8 fc4173ff
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 7 08:34:59 2011 -0600

    Merge remote-tracking branch 'origin/master' into multiarch
    
    Conflicts:
            configure.ac
    
    Fix version number and location of ao.h header

commit fc4173ff882dd9718f34ed043276ef612783dfe0
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Sep 27 00:59:08 2011 -0600

    add run-time dependency on libjfreechart-java

commit 989aae5b18856e3420ea5b7a26ddd8dccae9d6d3
Merge: 0552fbed e44f1ffb
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Sep 24 15:34:59 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 0552fbed34c9698dac30c239df2a823a8502b3f3
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 30 16:59:53 2011 -0600

    include 1.0.1 release notes in docs, closes: #642705

commit 4ed53ef838afd4e922deb1c721a311974527525a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 23 10:24:33 2011 -0700

    altos: Debug code for telepyro doesn't fit in telescience
    
    Just too many strings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f1328d22aab4378c4fb6f0c24dbee95948ca836c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 23:21:04 2011 -0700

    Dump test conversion of ADC0

commit 9b498a6b1327f543c73145e02ff16e76d09f2fe4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 22:54:56 2011 -0700

    Dump ADC registers

commit 7bc007ed45af8fe9ef5daeb7844f183cd9a49035
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 18:13:55 2011 -0700

    altos: Fix make-kalman to run under dash
    
    Dash can't deal with >&, so use the old-school > file 2>&1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 74d5dea5d5ef91db823018b631613d15c6da085d
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 21 16:42:52 2011 -0600

    fix bashism that prevents building with /bin/sh->/bin/dash

commit f68f22f527104cdffa1f5e398a51a466a13ff1fb
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 21 16:42:22 2011 -0600

    add missing sense_h entry in TelePyro table

commit 16aa67fc77b82a9d051f205037b27a5384e3e3b7
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 14:24:30 2011 -0700

    altos: missing ao_log_single.c
    
    Neglected to add this file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a02d4bace05cc829522933b9df6b82a9e17336f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 11:30:43 2011 -0700

    altos: Add TelePyro v0.1 support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0820f5c6dfe067590f36e8201a4049719dcf3d7c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 11:40:56 2011 -0700

    altos: Support staging by going back to boost as needed
    
    Detect additional motor burns by looking for high positive
    acceleration in coast or fast modes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c8a00bb9ccdf0d4257f037c2bf996ce5e6b0b0c0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 11:39:24 2011 -0700

    altos: Pre-compute RDF packet len at compile time
    
    Instead of computing the RDF packet len at run time, which takes a
    pile of code space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abf17522c206b465375b73a004a6d67bfa714ba3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 11:36:11 2011 -0700

    altos: SPI slave code is now per-product
    
    We can't write general purpose SPI slave code as we must eliminate
    any latency because the SPI ports have no buffering.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 246864b0597ddd397aba39be1fe39df0df189433
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 16 18:27:56 2011 -0700

    Update to version 1.0.2
    
    Bdale is planning to fly this version on 9/17.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eaa7d7c7dd445ade7d8e3228306785f9a545b89a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 4 08:49:16 2011 -0700

    altos: Silence radio while firing igniters
    
    Hold the radio mutex while firing igniters to reduce potential
    interactions between the two.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1e81db87ce0f89fd0b7651ca00979498cd00b78
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 4 08:48:05 2011 -0700

    altos: Delay restart of RDF at apogee
    
    Instead of immediately trying to send RDF at apogee, start it after
    the usual RDF interval to avoid doing RDF while firing the apogee igniter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e44f1ffb7104d70f5c9b9a90529ddbe1b75da074
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 30 16:59:53 2011 -0600

    include 1.0.1 release notes in docs

commit b2d4e49bfe88aa61ca36fb1af8f3088c5754304c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 29 14:22:19 2011 -0700

    altos: Split avr clock initialization to ao_clock.c
    
    This will be shared with the attiny code for TeleTerra v0.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e66fd72664aae7c000dce9c528803e28e7918fdf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 17:03:26 2011 -0700

    altos: don't beep igniter continuity for telenano
    
    Without any igniters, it's not nice to annoy people.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 122c4101164d598e655fa9ad8473053d30ff4212
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 16:55:55 2011 -0700

    altos: Report continuity in telebt
    
    Report continuity values from remote altimeter
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b9568a637ffdbc67225271005f2b996ee08a0df
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 16:39:41 2011 -0700

    altos: add 'report' to telebt
    
    This beeps out flight state changes and max altitude at landing, just
    like the altimeter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31e3255b6cbfaf95c0e97e2d1ec8de72f845994c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:50:30 2011 -0700

    altosui: Report error message back from libaltos
    
    This includes changing all of the error dialogs to show the error
    message rather than just the file name.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf72c2f5a69a736c28a9b63e124d510ef41a9f5d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:50:01 2011 -0700

    altosui: Add bluetooth bits back in
    
    Stub out functions on mac/windows for now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d478a39f2ede7b805bbe568cc1c8ecc176d7a04
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:45:05 2011 -0700

    altos: Add the BT serial debug code back in, disabled
    
    This code is useful whenever the BT stuff is acting up, so just leave
    the source in place, turned off by default.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8eaa1c4697a3cfc2406e1adadc3094f7f712341a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:43:32 2011 -0700

    altos: Add pragma to eliminate unreachable code warning on SDCC
    
    This pragma was removed as GCC doesn't support it; make it conditional
    on SDCC so that we eliminate a warning message.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c6a3195dec6ac68f5d7b3f883ccc2c316384e76
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:42:25 2011 -0700

    altos: Blink on telem packet receive instead of toggle
    
    Toggling the LED was too confusing; just blink for 100ms each time a
    packet comes in.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cff737c290347b61ba16584880c2f4c436b95042
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:40:40 2011 -0700

    altos: Remove RSSI reporting from telebt
    
    Telebt uses one LED for bluetooth connection and the other for telem
    packet reception leaving none for RSSI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27835686648e14b030f6f7ec1fc0c0fd1c387ea4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:38:12 2011 -0700

    altos: Add RSSI blinking to new-style telemetry code
    
    Pull the RSSI data out locally and set the RSSI led blinking when
    using the variable-length TELEM output mechanism.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f231a3e512ff7fdd87a399a72c7c36f283394f3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:20:41 2011 -0700

    Bump version to 1.0.9.0
    
    Make it distinct from any production version
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e53557373e539d591a03d02db146b27d08c7eba3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:18:29 2011 -0700

    altos: Start logging telemetry data right at boot time
    
    Anything logging telemetry data should just start logging packets as
    soon as they boot.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c3a0263d292cb0675f608d0ef085d13e51ce6ba
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Aug 28 13:39:37 2011 -0600

    update changelogs for Debian build

commit b33a92e372327158ab21c1bb2d091c58761efe10
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 15:19:43 2011 -0700

    altos: Share log code between telescience and telebt. Add telebt log
    
    Telescience and telebt both log data in 32-byte chunks, so share some
    code which manages that between the two products. Add simple telemetry
    logging to telebt.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e2b5e2957ddcb808723081ca7e046a28b7e70e5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 13:30:34 2011 -0700

    altosui: launch controller button needs to move over
    
    monitor idle was inserted into position 2,2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc827699be4ed9ac60a7e862e6532791968bf685
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 13:28:01 2011 -0700

    altos: Fix up telelaunch Makefile
    
    Adding all of the mising sources
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a1cbef0e316e38c80b71d3bac15641fe56e0a99
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 13:27:28 2011 -0700

    altos: Add HAS_LOG for products that log to eeprom
    
    Some products have eeprom for config, but none for logging (like telelaunch)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6afbc1876cd63f64e8975e300692f95a43866f5f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 13:27:00 2011 -0700

    altos: ao_launch belongs in cc1111
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9adf2c9c40ea1da2637ed809dc0d004e47844440
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 13:25:23 2011 -0700

    altos: add ao_aes/radio_cmac to tidongle, teledongle and telebt
    
    All of these can do the telelco stuff at this point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3c95582774355c991d0a9f27d0a86881e643e62
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 13:24:41 2011 -0700

    altos: move igniter defines back to ao_pins.h
    
    so that ao_launch gets them too
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b2db651a1dbc7ea97fce802b5f10b88be1ab42b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 12:42:10 2011 -0700

    altos: Add makefile for telelaunch
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02df2141e5a67afc16acd01a6c60f3cc61052b93
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 1 22:45:43 2011 -0700

    altosui: Hook up the launch controller UI from the main button box
    
    Provide a button to start the launch controller UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4568bc796a6c362ebf7f72ee9a5fa4a9a3c4ba6a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 1 17:08:24 2011 -0700

    altosui: Add primitive UI for TeleLaunch
    
    Display status along with arm and fire buttons.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be117376179126824439d98379079025ca0b245a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 1 17:06:49 2011 -0700

    altos: Keep relay closed while firing launcher
    
    Instead of opening the relay while checking the desired state, keep it
    closed until the state goes off.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc1b94df4d6b92e794ec93d9c1682ae5f61efa61
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 21 22:25:45 2011 -0700

    altos: Finish up primitive telelaunch protocol
    
    This adds two commands to teledongle, one to query and one to actually
    fire the igniter. These will (eventually) want to be replaced with
    something nicer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4299b5a36a2f6f9f7bbbc3a1b935dd2357c1fb0f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 21 20:04:05 2011 -0700

    altos: Implement remote launch protocol
    
    Uses the radio_cmac module to provide secure communication.
    Keeps igniter closed for 500ms.
    Provides remote status for arming and ignition.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 776df9ce2e7b4fa5cedda326988e66c614299af4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 20 23:46:04 2011 -0700

    altos: Get AES CBC-MAC packet transfers running
    
    This just has simple command-line based packet transfers for testing.
    
    This also adds special ao_telelaunch bits where the launch control
    code will live.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd0bf00081bb24af5cd67a9351b0b0c1a041d0d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 14:25:01 2011 -0700

    altos: More work on AES bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a731d240f802d37524ce84c3c6acf22bcda4d522
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 15 18:51:33 2011 -0700

    altos: Start work on AES and raw radio interfaces.
    
    We probably don't want this raw radio interface, but it's a start.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f145be3fc4ee94fdb5c1e2406b6c11d38bdbbd9b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 13 20:01:47 2011 -0700

    altos: Start telelaunch product
    
    Looks a lot like TM, but without the flight code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 859ee0268b9f2e1f5933019f1231d857a1cac4da
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 13 19:59:58 2011 -0700

    altosui: Add USB IDs for telelaunch and telelco to java bits
    
    telelaunch is 0x000f
    telelco is 0x0010
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b10fbbf0830053a39e4640a53598b1c027615c63
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 1 22:44:13 2011 -0700

    altos: Add 'send all baro' compile-time option
    
    This option creates a new packet type that delivers full sensor-rate
    barometer telemetry data to allow for off-line analysis of flight
    algorithms using all of the data, rather than the slower rate provided
    either over telemetry or stored in the eeprom file.
    
    Define AO_SEND_ALL_BARO and this will get built in. Perhaps this could
    be a run-time option...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c46c419704f661064d200432eb7efeeb11b3859
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 26 20:46:47 2011 -0700

    altos: re-order ao_task to match single-arch code
    
    This is just for testing to make the new build match the old build
    exactly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c32893ce79835a8f861d6ef414644c2ff9769ff6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 26 15:02:43 2011 -0700

    altos: Integrate telescience support
    
    Adds a few drivers including an LCD driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93b8f40bb451c9ec152490d1f431ab18f8ecb7d1
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:52:55 2011 -0600

    more release process doc updates

commit 9451ae5e4ea6ecfa512ba93197351682d4d043dc
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:51:18 2011 -0600

    update release process docs

commit 01aee9ebe517ed657692e0a39a31ae0ddfb5b8b0
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:39:45 2011 -0600

    update changelogs for Debian build

commit bc399d97a8424a5262f66a03e3bc403f793bb337
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:38:44 2011 -0600

    roll back packaging changelog for rebuild

commit 13e6e799070a1469cbc2ff990379ee520b8f0e6a
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:29:58 2011 -0600

    roll release notes version from 1.0 to 1.0.1

commit 1d15c841ad276127edae0345bd316c30731fffbf
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:24:35 2011 -0600

    ignore generated log file

commit 58a74c3c3dcd01509224326cffeb67a3e809e4e6
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:07:15 2011 -0600

    fix telemini firmware path name

commit 0a92eb2fa6b213533691288d8f99d72b80312983
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 09:43:06 2011 -0600

    update changelogs for Debian build

commit 3cea033ec928c21b9f7b810898ed3c3cc536d2ce
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 09:41:46 2011 -0600

    get ready for a 1.0.1 release

commit 674231773256bacd7acb4b5718c47412e47b813f
Merge: 08e3d54b 3bfe8df4
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 09:37:01 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 08e3d54bacf8b38a7c33e420a0bc19bcc7acedd4
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 09:35:54 2011 -0600

    moving git-buildpackage config into .git/ since it is fairly specific to
    Bdale's build environment, and doesn't need to be in the source package

commit 8125acc030574afed6f23aa8aa302d9c768bb04e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 25 22:55:33 2011 -0700

    altos: get avr-demo to build. Pull in AVR drivers and LCD driver
    
    This completes the basic task of making an AVR version of altos by
    getting the Teensy 'avr-demo' program to build.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9fab7dc99a0e7c22b511c5919adf7df85213252
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 25 22:04:36 2011 -0700

    altos: add GCC/SDCC compat macros, init_stack, save_context and GCC stdio hooks
    
    More arch-indepdency bits.
    
    GCC stdio is different from SDCC, so create suitable code in
    avr/ao_avr_stdio.c
    
    Create macros to initialize the task stack frame and save the task
    context.
    
    Add GCC/SDCC type definition compatibility macros
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a588092a7d76dab92e4ab11e0fdb457d2ddc9025
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 25 21:10:56 2011 -0700

    altos: AVR changes - create ao_arch.h files, define ao_arch_reboot
    
    Start pulling changes needed for avr port; architecture-specific code
    will live in <architcture>/ao_arch.h. This first change defines
    the ao_arch_reboot macro to reboot the microcontroller.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9513be7f9d3d0b0ec29f6487fa9dc8f1ac24d0de
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 25 20:43:44 2011 -0700

    altos: Restructure altos build to prepare for multi-arch support
    
    Split out sources into separate directories:
    
            core:           architecture and product independent bits
            cc1111:         cc1111-specific code
            drivers:        architecture independent drivers
            product:        product-specific sources and Makefile fragments
            util:           scripts for building stuff
    
    This should have no effect on the built products, but testing is encouraged
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3bfe8df44b575ca430ffaa051e20faa955a06c03
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 25 18:02:45 2011 -0700

    altos: Clear callsign on initial config load
    
    Before being written the first time, ao_config will get set to 0xff
    when the config storage is read. This leaves the tail of the callsign
    filled with invalid bytes. Zero the whole thing before loading the
    default callsign to make sure any extra bytes are set correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93ecaf7f18f8f4c15953c2e80dc9e1b20d04fdfa
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 15:46:30 2011 -0600

    update TeleMini turnon script now that we've made a stable firmware release

commit c3314dae2d3df82e188daf6ba8520cce833592c6
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 03:36:25 2011 -0600

    use multimaint-merge to make Debian changelogs less ugly

commit f9d87de0e2681c2ec5753f4fffef0e61a3a9e144
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 02:22:53 2011 -0600

    update changelogs for Debian build

commit 41998645c04a2ee856dec272b40c2dc5913291d3
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 02:16:17 2011 -0600

    add a postinst to remove sources.list.d fragment delivered by old private
    versions of this package, no longer needed once we have official packages

commit d65e4f6b0a8ba8f67c8a916f2e8be0ec5c75f47d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 02:05:49 2011 -0600

    really, I mean it, no longer deliver the sources.list fragment

commit 0579bd5de9e7686d227a16951dd520439ca5472b
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:55:32 2011 -0600

    we need a main category in the desktop file

commit 3ec03792adebbeadc9c0d4985c6f51877e8ab969
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:48:11 2011 -0600

    update desktop file for consistency with package section

commit 0b1d5b678f0e36fbe09d4d3babffb77f857f098d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:37:31 2011 -0600

    rewind packaging changelog to last tagged version

commit f0891fc2e4fa4fd6dd5c2bfc74e4514de986a295
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:35:18 2011 -0600

    ao-view is no longer included in the altos package, so have the old-style
    Debian menu entry point to altosui instead

commit a7ee1049519bf46b3864666999249876009fc3bf
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:35:06 2011 -0600

    changes in preparation for upload to Debian

commit 2992184f7a032c95e22023080fbc26443ed786f5
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:30:36 2011 -0600

    don't deliver sources.list fragment in official Debian packages

commit 3fc92a529dae410a41038cce38c6a44f5e58bd1f
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:11:47 2011 -0600

    prepare to release

commit 73abe19acf709c00f5352ec12e8cd6edae1d1963
Merge: 1bd781da 5158493c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 00:34:49 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
    
    Conflicts:
            doc/altusmetrum.xsl

commit 1bd781da934c738e0c9294197c7eb622b0710a9a
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 00:32:47 2011 -0600

    more tweaks

commit 5158493c8df527e7527057c719c75248609eb3dc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 23:21:02 2011 -0700

    doc: Remove duplicate documentation about max flight log
    
    This was described in detail in both the System Operation and AltosUI
    chapters. Remove the duplicate from the AltosUI chapter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e268798dc260311f5f0167909481b41c9d27fc1c
Merge: 458f816a 242344d3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 23:06:44 2011 -0700

    Merge remote-tracking branch 'origin/master'

commit 458f816ad23fd6784757b13b244057d4be64260e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 23:06:01 2011 -0700

    doc: Describe max flight log, ignite mode and pad orientation
    
    These describe what these configuration parmaeters do, not how to set them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 242344d3e32e7c7cd9270d708555923fa888e4d8
Merge: 5c1cf749 94a1b220
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:51:38 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
    
    Conflicts:
            doc/altusmetrum.xsl

commit 5c1cf7492b82e63a9db9d0238ecbcd2b59486893
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:50:31 2011 -0600

    tweak tweak tweak

commit 94a1b220bbfbb64b9772f3ee64a8e9d353d65e94
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 22:29:56 2011 -0700

    doc: Move the remaining command-mode descriptions to the appendix
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit edfb553bb4fa5b0c7c6c658505b2a99d05fb13bf
Merge: c74ab82a ec96f116
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:23:56 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit c74ab82a7b7a6ad6f79129a9ef5954270e7e8f11
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:23:45 2011 -0600

    more changes

commit ec96f11666f9cbd98e16caeccd5d399978bde81b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 22:20:29 2011 -0700

    doc: Updating Firmware is now a separate chapter
    
    The Flash Image paragraph references it, change the reference wording.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 11099fab63d32f53d0f2e04a7ab04392e39b5963
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 22:18:29 2011 -0700

    doc: Move updating device firmware section to separate chapter
    
    This isn't central to operation of the devices, so move it out to a
    separate chapter
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50769fbbeaaf61111d363411e0ef0b2868681cf4
Merge: 425fa995 d92c1736
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:15:20 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 425fa995aeaccc1ec9ecf011f185b4406df61541
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:15:15 2011 -0600

    more tweaking

commit d92c173615a5fb0278ff6878595bed3f8d813e03
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 22:12:39 2011 -0700

    doc: use 'radio link' to refer to packet command mode
    
    Make sure 'radio link' doesn't refer to telemetry and eliminate use of
    'RF link' and other similar but not identical phrases.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65ca6f0d7c96432413868274b2cfdea4b76683e4
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:03:23 2011 -0600

    more tweaks

commit 09981cd024297fd4ef093c7468de2b9d5f3c2691
Merge: a476e766 03c8b270
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 22:42:39 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit a476e76622b6fa70bf7c8883d2a2a64a382fbd78
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 22:42:33 2011 -0600

    more doc tweaks

commit 03c8b2702a45a12c4748cd1ec801d720c816d9e9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 21:39:48 2011 -0700

    doc: Move Packet Command Mode section to System Operations chapter
    
    It makes far more sense here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 221157af586c6fd7368ee858a390f38bc5ed50f5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 21:31:05 2011 -0700

    doc: Describe packet command mode a bit better.
    
    Include comments about TeleMini in the introduction, and then explain
    a bit better what the best method of reliably initiating packet
    command mode are (start operation, then boot telemini).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4e1aa92b6ce2f3e4c51029595d1d44a7f2f14a0
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 22:27:35 2011 -0600

    more doc tweaking

commit 6eff8d5831dde8e690586cd2a97ddf1595cd2674
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 20:59:28 2011 -0700

    doc: Document pad-mode 'on-board data logging' indicator
    
    There wasn't any documentation for this field in the 'Launch Pad' tab.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca0879ba6e5295b4fa790705f742eb647a462ea0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 20:42:09 2011 -0700

    doc: Spelling corrections in altusmetrum.xsl
    
    Lots of minor spelling errors.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 963649aa064acfe75d2ff4babd9a0d35dc254e86
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 21:39:21 2011 -0600

    doc tweaks through chap 3

commit 3d88e0493ab446d7c7011786390d30618a72d045
Merge: 02d65453 5a9972d4
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 21:26:26 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 5a9972d41a87d4204c6c93cacf14e2962cc1c59c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 20:22:29 2011 -0700

    altos/windows: Get latest JRE 1.6 version (Version 6 update 27)
    
    No reason to download stale java bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbfbaabb39f9f7709d00cf3dc63cc1bc7563062e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 19:13:03 2011 -0700

    altosui: Make flight monitor font size configurable
    
    Tiny netbooks aren't tall enough for the 'usual' font size, so provide
    a smaller option. Then provide a bigger option, just because.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9849883a754a73b861dd7be530753ff5c2abb499
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 01:48:28 2011 -0700

    altosui: Don't trust companion telemetry record 'channels' count
    
    It can be bogus, allowing the code to walk off the end of the
    allocated data array.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02d65453225a3807e61b2ac6e2a26da31a05bd45
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:53:02 2011 -0600

    update changelogs for Debian build

commit 1d286dab223e6c44a25180f944ccb5ba8ed9d5f5
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:51:54 2011 -0600

    prepare for another rebuild

commit 82634eae16f9691a6c70a48d0858a399814631f2
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:50:56 2011 -0600

    add pkg-config to the build deps

commit cf2823cab40aa450375c108bae8ed6b051fbefe5
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:45:28 2011 -0600

    update changelogs for Debian build

commit bf6f00693c394f885d3378415dc7c8a1815a31ed
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:43:59 2011 -0600

    roll changelog back in prep for another test build

commit 06aee245eb74e839e50226fa2ddb967c3977fe7c
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:41:53 2011 -0600

    another test round

commit 4d94e8f9f807a0bbeab0cdead011e74eeca1d1b6
Merge: 4b5369dc 3b0a9a1c
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:38:58 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 3b0a9a1c87390747492bfef435ac8e0829ec748f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 00:29:36 2011 -0700

    altosui: Try to get dialogs to look a little better
    
    grid bag constraints are not my friend.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2165e82327faaada23f0503b8e49b80f938b746c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 00:09:51 2011 -0700

    altosui: Add tool-tips to config dialogs
    
    Provides more information about the various settings, and, when
    they're disabled, tells the user why.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 63808e0392f43633f92fee137d968e969dd364c9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 23 23:20:00 2011 -0700

    Remove stale tools (ao-dumplog, ao-postflight, ao-view)
    
    These tools have all been supplanted by altosui at this point, and
    keeping them around increases the build dependencies by quite a lot.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 186dfc7c72aa7eba281f29f917088e49e44c2ddc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 23 22:51:57 2011 -0700

    altosui: Use system look&feel
    
    Turn on the 'be less ugly bit'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b5369dc3da2fc8441eeacbf094537b0cf52240d
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 23 21:37:17 2011 -0600

    update changelogs for Debian build

commit 99316a17a9642a207c45610e7cc1c33c2600ece0
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 23 21:33:53 2011 -0600

    rewind changelog to 0.9.6.0 for rebuild

commit 192881b7cae49af375cc2b8b7305c937079ee724
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 23 20:11:01 2011 -0600

    update changelogs for Debian build

commit fc7e46b1215ea2b4cc138ed77d8eaa122369b15f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 23 20:10:14 2011 -0600

    turn off auto-tagging during Debian build

commit 998adccc1c4f8f6c44833bbf4a52d9441748b996
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 23 18:56:07 2011 -0700

    altosui: add tool-tips to the button box.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 754b9591574c12ddd6e4ab590c6a5f3806b80213
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 23 13:29:23 2011 -0700

    libaltos: fix Mac OS X function signatures
    
    altos_list_start was declared to take a (int time) parameter for some reason.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa6df3fa21e8f09e70371e6c6cc7827a533b4fe6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 23:35:28 2011 -0700

    altosui: Update mac os X library
    
    This has been tested on 32-bit OS X and it works; dunno about
    64-bit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 955989147f90a4fd22c1375d1b41425dae4e7dd1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 23:34:55 2011 -0700

    altosui: Reset all config data on 'reset' command
    
    This lets you switch altimeters without getting any stale data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d249da3fb064754753bd20cd2ca1e5ffcce294ca
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 23:33:52 2011 -0700

    altosui: Only 'show' config dialog once
    
    Otherwise, the dialog jumps back to the initial position each time the
    data is updated.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9254c3472e42d93181674b2c3cd80fe6eea696e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 23:32:36 2011 -0700

    altosui: fix 'magic' string to signal end of config data
    
    Was using "done", which happens to be displayed by the 'l'
    command. Switch to 'all finished' which doesn't appear in the config
    data output. Yes, this method is a kludge.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4aebe65b089e4b825a5ae238b81e2181bd88175a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 23:31:54 2011 -0700

    altosui: Can't configure flight log max on TeleMini
    
    It's only got space for one flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3a84e8e0cc86481c301f4335843a0e1a94bad5c0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 23:12:30 2011 -0700

    altosui: Make monitor-idle display correct 'On-board data logging' status
    
    Count number of stored flights and see if there's space for another
    one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afe6aba9cb91e93234ffee2a22eee40f848ddedd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 18:25:34 2011 -0700

    altosui: Add --summary option to dump flight stats to stdout
    
    useful for quickly capturing sense of a flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e2fd7ae76c23aa8da1390ebcbd8f45276cd7a32
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 18:24:54 2011 -0700

    altosui: Show filename in AltosGraph window
    
    Makes it easier to tell multiple windows apart
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f4ea46dc205454411c224ada7805f813989efd4a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 18:23:41 2011 -0700

    altosui: Add date/time/serial/flight to flight stats tab
    
    And switch to using the AltosConvert units conversions functions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4c71ba56c471720c72853057d0a527825a78fa0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 18:22:21 2011 -0700

    altosui: Capture date/time/serial/flight in AltosFlightStats
    
    Time is the time when boost was detected.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ef731bd87c6d2a71a4edcc69a218eaf1aa7c465
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 18:21:35 2011 -0700

    altosui: Add a few simple unit conversions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b83d8eca433ed5796835f6a09271f50c7f27cc81
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 17:18:02 2011 -0700

    doc: Add Installation Recommendations chapter
    
    Document installation suggestions, including mounting, RFI, antenna
    issues and ground testing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0f62b8569c5535a2598cfb6ab52db79f0a52f92
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 17:17:43 2011 -0700

    doc: Add note about telemetry disable mode to 1.0 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 393d231b9689cd1c358600ee76e0e808f89670c8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 21 22:52:45 2011 -0700

    altosui: Attempt to make both 32- and 64-bit windows DLLs
    
    We'll see if they work...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d5bd40847b17c32405dfba864a2a5a3b19aa7e85
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 21 22:12:53 2011 -0700

    altosui/windows: Fix a bunch of windows compiler warnings.
    
    Some of these may have actually been serious -- a write length was
    getting stored in a signed char...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2353d83be15b398754c2564f95374c6ea0f8de92
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 21 22:12:04 2011 -0700

    altos-fat/windows: Check and install Java 1.6 as needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a08826292ebd802a1ff2effccac3b96fd061c47d
Merge: 3366cfe6 55be3db2
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 22 16:08:55 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 55be3db2e31fe97e7f351e3c490b8bc4cf7192b2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 21 19:18:54 2011 -0700

    altosui: Clean up command line processing. Add --graph
    
    Make the command line processing a bit less ad-hoc, track 'mode' of
    processing and deal with all files on the command line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6823ad5e48fc0a19791d96f886b5689f88c4311b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 18 18:02:02 2011 -0700

    altos/altosui: Add ability to disable telemetry/rdf completely
    
    This turns off the telemetry system so that it never transmits telemetry
    or RDF tones. In idle mode, it will still accept packet mode connections.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a08e7ac8bd3840b699c9a1ffc6b1e115b2b84bad
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 20 11:35:55 2011 -0700

    Bump version to 0.9.7
    
    Bdale is flying 0.9.6 at chili blaster, make sure later firmware gets
    a later version number.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2b0900f8b83fcb3085f3d042ffd961ffd758d5d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 20 11:28:53 2011 -0700

    altos: Merge common config code in ao_config.c
    
    This shuffles code around in ao_config.c to share some common code
    segments for starting and committing config changes.
    
    This also stops printing out changes as they are made which aren't
    needed by the UI code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 67f28c58db0deca8f8050d33e97ad96017f4baaa
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 20 11:19:57 2011 -0700

    altosui: Disable 'max flight log' config when there are stored flights
    
    When flights are stored in flash, the maximum flight log value cannot
    be changed as the flight data might need to be moved around in
    memory. Check for this case by looking for stored flights and
    disabling the combo box when storage is not empty.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcff63baf8fde1174571a2c7c860099e19dbf629
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 20 10:43:28 2011 -0700

    altosui: remove debug printf in pad pane
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3366cfe6145f64cdb04654854d5390c671a288e3
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Aug 20 09:28:04 2011 -0600

    update changelogs for Debian build

commit 787e4305a05e344c018abb872f788749203690d7
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Aug 20 09:24:29 2011 -0600

    update changelogs for Debian build

commit 605627d03eeb9f34026a84134992ad061b5b3946
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 19 22:47:50 2011 -0600

    update changelogs for Debian build

commit 048b3eb45169e572f33c68ff152b89db9ef97d31
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 14 21:11:41 2011 -0700

    altosui: Add 'On-board Data Logging' indicator to pad tab
    
    This shows whether the on-board data memory is full, or is ready to
    record the flight. This is indicated in the telemetry stream by a
    flight number of '0'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit adb7d345963ab9981c49c7cc68c6b4d7156dce46
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 14 21:09:42 2011 -0700

    altosui: Ancient log files used 'apogee' for 'coast' state
    
    2009-07-18-serial-004-flight-000 says 'apogee' for the apogee-detect
    phase of the flight; map this to coast so that this flight replays
    correctly (although the log terminates at apogee...)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4f64d66295a8f76680af8cfda4650aa4c4f8576d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 14 19:19:50 2011 -0700

    altos: Lost change that reported flight 0 when log memory was full
    
    commit 52ac83fedbfd380d14d4df2e79992bbdfba3552a added coded to check
    for a full flight log and complain with a special tone.
    
    It also reported flight 0 over telemetry, and that part of the patch
    got lost when moving to the new telemetry format. This patch
    resurrects that piece.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef7f60df841f1eb22b9cec0d7f68cf2c003d6b30
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 14 00:00:54 2011 -0700

    altosui: Respect storage limits in flight log max config
    
    Compute the maximum flight log using the data returned from the 'f'
    command (total storage and erase block size). Limit menu to choices
    which fall within this limit, complain if the user asks for too big a value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 746d6a472a20243a8c0eacc8edf8e81e0641bc17
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 14 00:00:07 2011 -0700

    altosui: don't set channel when using radio setting
    
    altos now sets the radio back to channel 0 when the radio setting is
    changed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 709485f20fb039f8dd087c8491c5f5a76718ae53
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 23:58:03 2011 -0700

    altos: use raw height while waiting for landing
    
    This avoids any noise introduced by the kalman filter, making landing
    detection much more reliable. This patch also changes the interval to
    10s so that the height bounds can be increased to 4m.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa71c2cdcb417eba2a2d30792ece9a47b8b3fc82
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 23:56:55 2011 -0700

    altos: Reset radio channel to zero when using radio setting
    
    Otherwise, it's hard to set the frequency over the radio link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f74761051f2a5ab45b82c4dd79a8569376bbe2e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 23:56:06 2011 -0700

    altos: Correct AO_CONFIG_MINOR from 6 to 7
    
    Forgot to bump this when adding radio setting.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 924d56a4d2d8b16530cd378b18cfc5d6e08420ed
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 21:10:15 2011 -0700

    altos: AltosSerial.flush_input shouldn't discard Interrupted exceptions
    
    The eeprom download code wants to interrupt serial communication so
    that it can stop downloading stuff in the middle of a run. Make
    flush_input pass the exception along instead of discarding it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcd15032eec45f3fdd003050710ebd5b85052662
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 21:09:19 2011 -0700

    altosui: Eliminate inter-chunk flush_input calls
    
    Once the serial line is nicely synchronized, we don't need to flush
    input between chunks. This speeds up eeprom downloading quite a bit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ba7b6196f68078f4ed4538c4e7fe30699dfe908
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 21:05:46 2011 -0700

    altosui: Devices with log-format can also delete flights
    
    Any device with either flight-log-max or log-format can delete flights.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 03e201e1acc8742399054e4ad36b533120ea1612
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:39:35 2011 -0700

    altosui: Add support for TeleScience eeprom download
    
    Using the existing eeprom methods, fetch and save TeleScience eeprom
    data, storing to a filename generated from the serial/flight from the
    TM connected to the TS board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a3e96bef31959a287b8696778d7d8cf911a7dc4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:36:18 2011 -0700

    altosui: Clean up eeprom parsing a bit
    
    Export basic parsing and checksum functions for shared use.
    Create 'erased' function to check a chunk of eeprom data for data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b0ec30de37aa822ba66d25ceaa8cf8dc967b4371
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:31:08 2011 -0700

    altos: wait 10s for companion to boot
    
    In case the companion is delayed while booting, retry the setup 10
    times with a 1s delay between tries.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41e5be32819d305c8268e6f992be91411ea13435
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:30:00 2011 -0700

    altos: Send serial/flight to companion board
    
    Lets the companion log them for later matching with TeleMetrum log
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa7dd04741bf3fd9cedc59ed3b45b69ef9312609
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 21:41:25 2011 -0700

    altos: Send SPI message at flight state changes
    
    Get the companion board starting its data logging as soon as possible
    after boost starts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7f540330c040c521f9d7626009a406e704a5e41
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 14:58:34 2011 -0700

    altosui: Add companion support to the flight UI and CSV conversion
    
    Shows the companion data in a new tab. Also put companion data into
    CSV file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18369c58e62bc64b969a7cf8be3103aa33c6d4aa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 06:29:13 2011 -0700

    altos: Check for companion init packet validity was busted
    
    Was using board_id == ~board_id instead of board_id ==
    ~board_id_inverse.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa642cf55c43188e9a21198d828d7ea90ff54280
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 05:42:05 2011 -0700

    altos: add the 'L' command to show the status of a linked companion board
    
    This prints out whether there is a board connected, along with the
    various values fetched from it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f87f0787fa5aa528674f3f4919eb22646c87c25a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 05:41:15 2011 -0700

    altos: Make sure companion task exits cleanly when done
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ebe2ffb29944abc4d6a35889c7b5f3d9f2871077
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 05:38:16 2011 -0700

    altos: Put SPI in slower mode when talking to companion board
    
    The AVR CPU on the other side just can't go very fast. This reduces
    the SPI clock by a factor of 16, just under 200kHz. As the companion
    commands are reasonably short, this shouldn't have a huge effect on
    overall SPI utilization.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30abbdc7ffcfc809b4a3fc31486fe968161ea225
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 9 16:59:16 2011 -0700

    altos: Add SPI-based companion board support
    
    This sends current flight state information and retrieves companion
    data to include in telemetry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 578c4b17b8f62f2727654ebda78ee139f9fe13fa
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:38:38 2011 -0700

    altos: Don't try to use non-basestations for remote eeprom download
    
    Companion boards may also have eeprom data to fetch; don't try to use
    them as a radio.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf06af154e232d4caa1585a1d6d5279a075292e4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 21:43:56 2011 -0700

    altos/altosui: Report log format in the version command
    
    This will make it easier to figure out what the contents of the flash
    should look like from altosui; the current 'guessing' mechanism will
    not scale to many more formats.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2f2f519dbc8ce233ab36222088c1be6b1362f01
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:28:38 2011 -0700

    altos: re-write a bit of GPS parsing code to reduce size
    
    Use a local variable while computing hdop.
    Place the next incoming character in data instead of pdata.
    
    Saved a surprising amount of memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7bcf25606cd5892d58295649f3d475d284494ee8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 05:26:09 2011 -0700

    altos: shrink text space from ao_config.c
    
    Eliminate redundant config initializers by setting minor to zero and
    letting upgrade code handle all of the new values.
    
    Stop computing (fake) frequency when showing radio channel
    Stop computing feet when showing main deploy height
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 313d740b5284b24f1cc7a1ba5779136b55d49ebe
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:33:07 2011 -0700

    libaltos: Mis-allocated device list in libaltos
    
    Would overrun mis-allocated array, causing chaos.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b87dd6f46922cf5f98deb2dffa2148c4244e48e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 15:00:14 2011 -0700

    ao-tools: ao-list was crashing with more than 3 devices connected
    
    the list of devices was getting realloced for each new device, but
    that realloc was too small.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 640422c028a2be898aa3a9048a0f6fad2e43dd8d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 11 16:11:34 2011 -0700

    altos: remove monitor disable stubs from altimeter code
    
    Monitor mode in the ground-station boards must be disabled when the
    radio is going to be used for another purpose, or the radio parameters
    changed. That places monitor-mode disable calls in other parts of the
    system which are shared with the altimeter code.
    
    Elide the ao_set_monitor calls for builds which do not include any
    monitoring code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d13460412046c53f36466193329caaa657bb278
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 11 15:59:47 2011 -0700

    altos: Apply igniter boot pulse-width reduction to telemini
    
    TeleMini needs the same fix as TeleMetrum to reduce startup igniter
    pulses.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b520c32bcddabd42c07ceafa827694a3ae23a76f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 11 15:57:58 2011 -0700

    altos: Pull igniter pins low as soon as possible at boot time
    
    This reduces the pulse width on the igniter circuit caused by the
    default cc1111 pin configuration at powerup time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 566b16e67be38c6425e616a5c38d641c4e1a9b12
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 22:43:26 2011 -0700

    doc: Add 1.0 release notes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a07b07d48f71b9a11e73a82db075cc57bad0c09f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 22:14:32 2011 -0700

    doc: Add release notes, include them in altusmetrum doc. Shuffle altusmetrum
    
    This adds release notes and includes them in the main altusmetrum doc
    as well as making stand-alone html available for inclusion in the website.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5aa3e49f794ba5ed2680016f3dca47d67ae99836
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 18:32:05 2011 -0700

    doc: Add telemetry docs to debian/linux/mac/windows packages
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7283deaa91e752acc45018ef2ea2f560b09af354
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 18:22:16 2011 -0700

    doc: Describe 'stats' tab in Graph UI, 'Graph Flight' button.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21837e0026c87635abf4baf2c6c574a7b274f449
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 18:14:10 2011 -0700

    doc: Document Ignite Mode and Pad Orientation configuration options
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 967c9d5ee691f87bf0d1e49ba055eb366e513e6a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 17:43:58 2011 -0700

    doc: Update altusmetrum.xsl for v1.0 software and TeleMini
    
    Add TeleMini references and sections as appropriate, update AltosUI
    docs to describe new bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be65308182363ca87db69db530297933324f3806
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 16:01:25 2011 -0700

    Bump version to 0.9.6.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f5623c8c32a38eaeb63fa74ab370025ac015d52
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 15:00:44 2011 -0700

    altosui: Move launch-sites.txt file to altusmetrum.org
    
    The official URL is now:
    
            http://www.altusmetrum.org/AltOS/launch-sites.txt
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4962bcf1ce15c21a946ea718bd676b901f0f2bd0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 14:35:21 2011 -0700

    altosui: Plot reasonable data from Tm files
    
    Don't plot acceleration based on baro data.
    Display baro speed if accel speed isn't available.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 01b9352eb8ca0e4e2d023ce973c4e863cdcc0c51
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 14:34:39 2011 -0700

    altosui: Prune telemetry file graphs to just the flight
    
    Remove data earlier than 1 second before boost and data after landing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e1487b1a5db0afd1d23c86d82c60b1c1a62aab0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 14:08:21 2011 -0700

    altosui: Add a 'Graph Flight' button to the 'landed'  tab
    
    This lets you see the results of a flight as soon as the rocket lands
    using the telemetry data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ac604d11de44cd824f09e4b467264a2b74be7bd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 13:35:26 2011 -0700

    Altosui: Add flight statistics tab to graph window
    
    Provide basic flight stats alongside the flight graph.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 94d9a2c36fabdf24d6a0b985851e95e4eb181fd9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 9 18:28:19 2011 -0700

    altosui: Ship TeleMini v1.0 firmware with fat blobs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a680ce61bdcffeacb7f0e4dcef71a03cb7cfe07d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 9 18:27:19 2011 -0700

    altosui: Ensure serial code tracks reply nesting correctly
    
    Trap any exceptional return conditions from 'get_reply' to make sure
    in_reply gets decremented.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 12bfa6cc42e3689f09abae2bd2584cbacf2aa2e0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 9 18:26:07 2011 -0700

    altosui: Don't export product defs from libaltos
    
    As we add new products, that would change the ABI generated for java,
    invaliding old library versions sitting around for windows and mac.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81ad44d4b6d9ad2f6b91d0906e8543da82da424f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 9 14:26:43 2011 -0700

    altos: Switch telemini from v0.1 to v1.0
    
    TeleMini production boards are firmware compatible with the v0.1
    design, so instead of creating another product, just rename the
    existing one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3985ef8bc69bcec13ce155567a8ed7c5c6051cb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 20:41:34 2011 -0700

    altosui: Add close button to 'fire' dialog
    
    Easier to hit than the tiny close box in the frame.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbf54a826d12c49b1b1996be247869d5ff4e2236
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 20:38:44 2011 -0700

    altosui: Make set of telemetries to use while scanning configurable
    
    with a preference to remember across application runs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7146311d9df541e075b4450cf9656a9aa7ffdd93
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 20:38:14 2011 -0700

    altosui: Reading serial from swing thread only bad if remote
    
    Make the warning on this condition based on whether the link is remote.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2662c577a895c96fce7b2bf815b9e752d2dfbde6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:53:59 2011 -0700

    altosui: Remove unused AltosConfigData from AltosTelemetryReader
    
    Now that AltosSerial manages this data, it's not needed here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 13eacb49de4312509c3a729a31dcda4d601f8a8b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:53:27 2011 -0700

    altosui: Flush radio setting to serial device
    
    When changing frequencies, make sure the device hears about it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97cf285d041062ae473c2823438b81c8fffe7f67
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:53:03 2011 -0700

    altosui: Remove debugging printfs from AltosSerial
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 364102d29ff4de0c252774f26417587fa88b7467
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:52:11 2011 -0700

    altosui: Show AltosFrequency in scan results
    
    Include frequency and description instead of just frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4cc16e111229b02d1081e2693ace0b33f662498
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:51:16 2011 -0700

    altosui: Save frequency after setting it in AltosFlightUI
    
    Otherwise we'll just save the old frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81bb6f42d8b859195ea5a35806c42d98ba82e8e1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:49:45 2011 -0700

    altosui: Have single radio_to_frequency function
    
    This takes all three radio params (setting, cal, channel) and computes
    the current frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c8c01684fa011acf3bbe5c3ebbc84aa8e8457a5e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:47:36 2011 -0700

    altosui: A few misc cleanups.
    
    Initialize radio_setting as it won't be set for older devices ever.
    Remove unused set_radio_frequency function from AltosConfigUI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd383b86b9a13d7af2d6b07f4fb85ccc666ed898
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:45:36 2011 -0700

    altosui: Must set radio calibration before radio setting
    
    Setting the radio calibration erases any previous radio setting as
    the radio calibration change invalidates any previously computed radio
    setting for a specific frequency.
    
    Hence, the radio setting must be configured *after* the radio
    calibration value lest it be ignored.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 40544dbfe09c64f7764a5f0686415805611fab25
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 17:46:04 2011 -0700

    altos: minor type in comment about accel correction
    
    Kurt Roeckx found a typo in the equations describing how the
    accelerometer is corrected by the 5V reference measurement.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a315b200cd0da1a964f5395cd59660be1b49672b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 12:31:48 2011 -0700

    altosui: Pull out BlueTooth support
    
    This leaves the code in place, but commented out so that it isn't used
    until we've got a bluetooth device ready for use.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a65daf94e8fe3e22f770ef76d9104c3dd11d0330
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 12:25:30 2011 -0700

    altosui: altimeter is not spelled altimter
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84ba927f503f81543dec286c4881be30bb5e60c5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 02:05:28 2011 -0700

    Set version to 0.9.5.0
    
    Make the frequency-based systems distinct
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e3e4f9c1e6a6bf972514f12c9d622258aa2aec2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 01:47:29 2011 -0700

    altosui: Convert from channels to frequencies
    
    Major areas:
    
     * Preferences are stored as frequencies instead
       of channels
    
     * Serial configuration is done using frequencies
    
     * UI is presented with frequency lists
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f03ca0ab8799bfa5100eaa2577cfd7b9c37d05bf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 7 14:52:29 2011 -0700

    altosui: Add dialogs to configure 'common' frequencies
    
    These are stored in preferences, but not yet hooked up to the TM/TD
    configure dialogs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba5dc35388d28c5769eaabc970c4d4b8c2c2ff9c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 3 23:07:53 2011 -0700

    altos: Add ability to set arbitrary radio frequency
    
    This adds a separate config parameter to control the raw radio
    frequency setting, allowing the user to select an arbitrary frequency
    instead of being forced to choose one of the 10 pre-defined 'channels'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e1e5c9b3e24670e9f58c6f7389eafb3338efdb40
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 12:08:45 2011 -0700

    altos: Remove pad_orientation functions from non-accel devices
    
    Anything without an accelerometer can't detect pad orientation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7207a95823dc2a27906759528dd88256cb20679f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 12:04:00 2011 -0700

    altosui: Change button to 'Configure Altimeter'
    
    Now that we've got more than one model.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30670732ca3f5a34025ab4bc4c69afa45637b4d6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 11:58:23 2011 -0700

    altos: Correct flight log max on Tm to 5k
    
    Was using the wrong #define name to check for Tm/Tn devices that use
    internal flash for data storage.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a67c16958df8e60b131b01e00fd5bca590af0e7d
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 09:38:53 2011 -0600

    update changelogs for Debian build

commit 4a507898d6de631bb2e8ed4aa3e0933d97222323
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 09:34:59 2011 -0600

    rewind changelog for re-build of 0.9.4.5

commit 5082b4998b8a9787e0e2f4d96d912e434aa9b81a
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 09:31:18 2011 -0600

    clean up all existing lintian warnings

commit f26c7172a1b2b5344fae6ede562f2da7a56b80e3
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 07:54:14 2011 -0600

    build depend on bluetooth dev package

commit 3cad81b0ebb52352c66643a2587e94a2b693a2d2
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 07:38:48 2011 -0600

    stop doing automatic tag push during builds

commit ebaad64525119c0fdacf382adc2c99e5df5be23f
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 07:37:23 2011 -0600

    update changelogs for Debian build

commit 6f9f75cbfccf975204ab847ca0e9cf86188716c6
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 07:35:47 2011 -0600

    update changelogs for Debian build

commit 7c94945690a6ff5cbf872026fd6411a30089c7b1
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 07:33:09 2011 -0600

    simplify version in last changelog entry so git-dch is less confused

commit 6d5e5b0be237d5448aa9d15decd6127cf41ca7b2
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 07:30:42 2011 -0600

    update version for a Bdale build for use turning on TeleMini v1.0

commit 6492218fc316f8cf6214a577807a8dd0a80a9b6a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 19:07:56 2011 -0700

    altos/altosui: Add pad orientation configure option
    
    Allow TeleMetrum to be operated with the antenna pointing downwards on
    the pad. This provides some additional flexibility when designing an
    ebay.
    
    The accelerometer calibration levels are flipped around to match, so
    no re-calibration should be required.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 11a2bb8e28df7ed87542f2ee726f877971f5d52a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 17:41:53 2011 -0700

    altosui: Add idle monitor dialog
    
    This monitors a telemetrum device in idle mode, either directly or through a
    teledongle, allowing the GPS status and batteries to be monitored
    without resorting to placing the device in pad mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3cc2eed6cdafe788a8617ab45c6664077e76411e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 18:01:52 2011 -0700

    altosui: Simple timeouts don't work with query data
    
    To get the query to come back, it's best to abort and retry the
    command, other wise the command may have been lost to the previous
    connection.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 37c41c962ea4631e62307a57d2ce6572b87fd743
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 17:41:02 2011 -0700

    altosui: Parse accel cal from 'c s' command
    
    These fields weren't used before, so the code to parse them hadn't
    been written.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95201e7fe4a6a7ec42321e8dbad3aea3bbf4c840
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 17:40:02 2011 -0700

    altosui: Standard text field in flight UI needs more width (now 20)
    
    Latitude and longitude take more than 16 characters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82e04a0e3a3296288a524ec582785a36fd644331
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 02:09:23 2011 -0700

    altos: Require sequencing through 'main' state before landing
    
    The old version of the code would permit the flight to go straight
    from 'drogue' to 'landed' without passing through 'main' at all. This
    meant that a false landing detection would leave the main charge
    unfired, potentially causing the airframe to land on drogue alone.
    
    Requiring that the flight sequence pass through main ensures that the
    main charge will get fired at the right time, although if the airframe
    lands higher than that altitude, it will not go to 'landed' mode ever.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c55bf35b11ae3ddae152795072d69e98184bac1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 01:49:35 2011 -0700

    altos: Reduce height averaging filter time constant
    
    Using the longer time constant could lead to false landing detection
    just after apogee, which is definitely not a good idea.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e19a117b99e8374ca0e8e35948e23bc672ad1a32
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 1 22:33:38 2011 -0700

    altos: Average height values for landing detection
    
    Instead of using the direct output of the kalman filter and hoping
    that is quiet enough to detect landing, filter that with a long
    exponential decay filter and then check to make sure that doesn't
    change more than 2m in 5 seconds as a trigger for landing detection.
    
    Tested with existing telemetrum flight logs and it correctly detects
    landing in all cases.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 146a0ab223e8d9b376125d1e59f597f6d7851a9b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 18:49:55 2011 -0700

    altos: Add ability to read new TELEM files to ao_flight_test
    
    Not that telem files are currently very useful as the kalman filter
    gets completly confused by the variable steps caused by missing data, but...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6795d353be91df96a571cebc237e6a54a065a380
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 16:44:10 2011 -0700

    altosui: Change continutity colors to yellow/magenta
    
    Makes them stand apart from the accel/speed lines
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f6cce5749724dbb836aaa27bbeedf977106f6f3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 16:43:41 2011 -0700

    Add HARA Bragg Farms site
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6796d9e253a808824ba32cdb008da8bf302780fc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 15:53:13 2011 -0700

    Fix NCR Pawnee location
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ddef3e4ec1b3ff86b164f83807c34c2a78f73eb8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 15:45:07 2011 -0700

    altosui: Mark preload site location with red circles (like launch)
    
    Just to show where on the map the official launch location is.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f3f3d575572eff33a2bc7a53d4691e59a428450
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 15:09:55 2011 -0700

    altosui: Add a bunch more site locations
    
    BALLS, Rio Rancho, METRA, QRS Cedar Grove and Hudson Ranch
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fef42e0d9e0a20bdbd32e052749fc63575515e1c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 11:29:13 2011 -0700

    altosui: Add launch-sites.txt
    
    Contains a few of our favorites.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81cac174c80ee42d9e94c6500da7c4c760c3ce67
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 11:25:47 2011 -0700

    altosui: Download list of site locations for map preloading
    
    The current URL for this is:
    http://gag.com/~keithp/launch-sites.txt
    
    The format is:
    <site-name>:<lat>:<lon>
    
    lat and lon are both in signed decimal degrees.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7cd8317bf78ece334e1ceb0263b875ca43bbbd2
Merge: 51796e2f a482d904
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 08:17:44 2011 -0700

    Merge branch 'preload-maps'

commit 51796e2f1ebce3ee8dc1ac90648381410c1379ee
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 23 11:32:29 2011 -0700

    altos, altosui: Add igniter mode (dual, apogee, main)
    
    This provides for redundant charges for either apogee or main.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1332ed55192f22525f31574f60fae4c6579e6f7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 08:13:15 2011 -0700

    Set version to 0.9.4.4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a482d904a3f391c3a24df3660acb3f3696aa6766
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Jul 16 23:08:49 2011 -0700

    altosui: Make sure degree and minute values are visible (map preload)
    
    Set min size to preferred size so that the value remains visible
    instead of snapping to 0 pixels wide.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1681c57cbbfc5214dbc2a519e54ce9f29ffe3921
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 22:43:34 2011 -0700

    altosui: Remove a bunch of sitemap debugging printfs
    
    Seems to work, let's get less chatty
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a4d934f6e2914bfe2d965630543f029a1576c11
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 22:34:44 2011 -0700

    altosui: Display full map preload area in view.
    
    This involved fixing the map view to support arbitrary sizes, and then
    exposing a synchronous tile loading API so that the progress bar could
    be used to show tile loading progress.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abb8510b97ce9cbbff0275cc31f74780fe1ce138
Merge: 0929ee32 00e6981c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 21:06:37 2011 -0700

    Merge branch 'scan-telemetry' into preload-maps

commit 00e6981c2e0a668864fcf391932855cd8942140c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 21:05:06 2011 -0700

    altosui: Flush telemetry lines before starting to watch for scan results
    
    This prevents pending telemetry lines from being incorrectly
    attributed to the wrong channel/telemetry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0929ee32f753255cbe1474988cb41a5a86d29a0e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 17:37:20 2011 -0700

    altosui: Try to avoid resize weirdness with map preloading
    
    grid bag + box does some strange stuff, this appears to avoid the
    worst of the interactions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 225073fd822f9861a83d65386c29fda9b37bf273
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 16:37:40 2011 -0700

    altosui: Add map preloading GUI
    
    Provide a way to manually enter latitude and longitude, preview the
    map area while downloading a 9x9 grid of map tiles to be used when
    monitoring flights without network access.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbd14ba103ee5e3c5eec18e3a4ff13c320b98634
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 20:44:51 2011 -0700

    altosui: Set 'seen' bits in legacy telemetry packet reader
    
    Otherwise, the 'scan' code won't show detected flight computers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e905042879147dd86241bf2dcc7437e5a6eb7578
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 20:43:57 2011 -0700

    altosui: Initialize channel and telemetry before use in ScanUI
    
    Otherwise we try to use telemetry format 0, which means 'no telemetry'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 941b90a4905e34936d24a25ca90ac04eb6f5a792
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 17:38:00 2011 -0700

    altosui: Generalize and centralize telemetry constants, parse v0.8 telemetry
    
    Move telemetry constants to Altos class, adding functions to compute
    names and lengths. Generalize users of these values to use all of the
    known values.
    
    Add support for v0.8 TeleMetrum telemetry
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ef786276b5d5c7d17c3fe4f36aa41db61a9742f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 14:23:08 2011 -0700

    altosui: Finish radio scanning UI
    
    Scans all channels and telemetry formats, presenting visible devices
    in a list. Entries from the list may be selected, in which case a
    monitor window pops up with the appropriate configuration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ebcba28b3c09925869b617880d2919e5d0e059f0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 14:19:41 2011 -0700

    altosui: Configuration telemetry record includes flight number
    
    Mark the reported altos record as including flight information.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4375bc737655546c2d40f49acdfc2e60ebfea5a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 14:19:14 2011 -0700

    altosui: Remove debugging printf from AltosLog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f32a55ac9a3ebbde2b41782f22491e72258fe05a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 9 19:00:12 2011 -0700

    altosui: Pop up monitor window from scan dialog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c20030ea4eb8e068e1ba88e01d07dfbc27bd7db
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 9 18:41:15 2011 -0700

    altosui: Start adding support for scanning radio for available devices
    
    This is untested.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7bb11b716ccb6c80701bc3f34ecf9bef97cbbfc9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 15 18:53:41 2011 -0700

    Set version to 0.9.4.3 for Bdale 2011-7-16 flights
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d0cf6f9a1b14a1b66aee3845964cd33d1f035c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 9 13:09:57 2011 -0700

    altos: new versions of sdcc require __ prefixes for custom keywords
    
    Fortunately, 2.9.1 appears to accept either, so we can switch now and
    prepare for sdcc 3.0.0.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f80f5705d64469bcfb00ff11aee68364edb271b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 21:38:57 2011 -0700

    altosui: Don't show missing igniter and gps values
    
    The new telemetry stuff leaves state.gps always set (but empty), which
    seems fine, we just need to look at state.gps.connected to see if
    there's a GPS receiver on board.
    
    For TeleNano, we also want to hide the igniter status fields as they
    won't have any data present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80ca066a825646f833ca609190c76c5252118d9a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 21:36:38 2011 -0700

    altosui: Build device constants into .java code
    
    This eliminates a depedency on updates to the system helper library,
    which means we don't have to provide a new library on all platforms
    just to support a new USB id.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 504ab7ab355652d5d01094c927089029596a0753
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 17:49:01 2011 -0700

    altos: product defines are always in ao_product.h
    
    When all products were built in a single directory, each one had a
    separate version of ao_product.h. Now that they all reside in
    sub-directories, each directory has its own ao_product.h
    
    This change is needed so that other modules in the system can use the
    product defines; otherwise, ao_product.h was not built at the right time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81cf2e833bedbc1ace8fd310e9e94bfb7673d428
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 16:43:17 2011 -0700

    altos: Ensure low-rate telem packets interleave with sensor telem packets
    
    To avoid over-committing the radio link, we want to send only
    one low rate packet after each sensor packet. However, the
    initializations for this were incorrect, causing the configuration and
    location packets to be sent at the same time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ca6400fd8a360b64d8f96f50d5595a7fd17762d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 16:18:54 2011 -0700

    altos: Remove ao_telemetry_orig.c and ao_telemetry_tiny.c
    
    All products use the common ao_telemetry.c code now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0154d13756bcb09f009981ee5e4bd27fd04b8788
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 16:19:22 2011 -0700

    altos: Switch Tm and Tn to common telemetry code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b65140a0139075adeddaccf0f4d5c7a75fac4757
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:52:25 2011 -0700

    altos: Switch flash drivers __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 038d7b25ba833da4be458409670d3f95e8aaf17b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:51:52 2011 -0700

    altos: Switch ao_flight and ao_flight_nano __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3742b36a528f114c3b1873caa4f39581145b76da
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:28:01 2011 -0700

    altos: Switch ao_dbg.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6903b6464db7eb803de8bf9b897c45431f7a1d63
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:27:32 2011 -0700

    altos: Switch ao_config.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6893752900385ee51cc4cf75e1b672202de7578a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:26:09 2011 -0700

    altos: switch ao_cmd __xdata to __pdata
    
    Saves code space
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ec986f08ce8d4635f4435bb0042b405d93edc40
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:45:04 2011 -0700

    altos: Switch const for __code in struct ao_cmds
    
    This saves quite a bit of code space when accessing these values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 355db71f4511adff8abcb2caded61c12fe8b7ee9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:41:32 2011 -0700

    altos: Switch ao_usb.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 359baab005c274a0841268c615c23b3ffef813cf
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:41:06 2011 -0700

    altos: Switch ao_telemetry.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2f8ade6994aa3a69fd08f19c4403ceb8cea295d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:39:44 2011 -0700

    altos: Switch ao_stdio.c __data to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9ba0da9247ea424a7a147aa85daae0d5e6316b81
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:38:46 2011 -0700

    altos: Switch ao_serial.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 86b41d4c2b8a9fa4507cdb75302e0cedebb103cb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:38:29 2011 -0700

    altos: Switch ao_sample.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 803bf106caf5d6b5ac12eb00a941647c7325edd1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:37:34 2011 -0700

    altos: Switch ao_rssi.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 002f167fc2709aaf1a4984aaa0a3519a97749d5f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:37:15 2011 -0700

    altos: Switch ao_report.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5203ddaac692bfd82a01368da9fb66c25e9e14c1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:36:45 2011 -0700

    altos: Switch ao_log.c and ao_log_big.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 62267144d189967fcd0724b6dfbdbab3cb6fb414
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:33:52 2011 -0700

    altos: Switch ao_ignite and ao_gps_sirf __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92047ff86c79c2b18ef565a4560b06fe00d6f159
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:31:53 2011 -0700

    altos: Switch ao_gps_skytraq and ao_gps_sirf __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 64860be02b3efa6f784a259249cfa6d14545fbd3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 13:49:05 2011 -0700

    altos: Shrink ao_add_task by rolling up a memset loop
    
    This has a dramatic effect. By pulling the 'stack' variable into
    registers it reduces the size of this function from 550 to 231 bytes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 480b48837db31987b947e4d32248965d4a16be03
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 13:21:25 2011 -0700

    altos: Shrink ao_config_callsign_set
    
    Replacing a hand-coded memset with a function call, using static space
    instead of stack space for an array.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41c230cac359b4459ca93196d08704b7d35447c7
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 12:38:11 2011 -0700

    altos: Shrink ao_cmd_put16, ao_cmd_hex and ao_cmd
    
    No functional changes, just reduces code size.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 481577a29380afe6750ef7c4e928daff837cbc49
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 23:38:42 2011 -0700

    altosui: Compress telemetry records marked with the same time
    
    Split telemetry transmits multiple packets with the same
    timestamp. Merge those into a single record when read from a file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7cfd43663cde5ebdf04e4face076d79ff6329ac3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 23:38:28 2011 -0700

    altosui: Remove debug printf.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0335f83c54df0b23c28d04d34c212a1bdffadd0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 23:37:51 2011 -0700

    altosui: Add main/drogue voltages to default graph
    
    Until we get a UI for changing the graph elements, lets add a few more
    potentially useful values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1f859170b37864b816eb561318dbfb1cafaeed6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 23:37:00 2011 -0700

    altosui: Elide missing values from graphs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72575dcb9cfbb5c1ccdb3510b9962a6f60ca3fa3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 23:35:50 2011 -0700

    altosui: Elide nul bytes at end of telemetry string values
    
    All telemetry fields are fixed length, so any embedded strings are
    padded with nul bytes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ac34f9c8efd464194137ac4ce8228bf9d7d83be
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 23:35:02 2011 -0700

    doc: Add section about TeleDongle USB line format
    
    Describe the format of the TELEM lines sent over USB from TeleDongle
    to the host.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit edf6252450e06fd42fa6dde3acd127baa8fa6d36
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 21:44:53 2011 -0700

    altos: Adapt to changes in telemetry Configuration packet
    
    Apogee delay added. flight_log_max changed to two bytes (in kB now).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 938949e39aac834a1c0912f8f307f74fe41418cc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 21:42:22 2011 -0700

    doc: Chang Config and Location packets
    
    Config packets get apogee delay, and have flight_log_max shrunk to two
    bytes.
    
    Location packets get climb_rate added.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4132ac5896114e5f3d8fb3f219422e8933078cf4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 21:41:44 2011 -0700

    altosui: Parse remaining standard telemetry packets
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef3ce687d73c1274ce5368432f4d449b063ce5c0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 23:39:21 2011 -0700

    altos: Complete new telemetry switchover
    
    This involved rewriting the GPS code to use the telemetry structures
    directly so that a memcpy could be used to transfer the data to the
    telemetry packets, saving a bunch of code space, along with fixing up
    the gps testing programs to deal with the structure changes.
    
    In addition, the teledongle code needed to have the monitoring code
    split into separate radio receiver and USB writer threads as the
    packets are now back-to-back, and hence come too fast to wait for the
    USB data to be sent to the host after each one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 359681f23e2f71bc8f4975a4a76ae28c08ecab2e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:09:03 2011 -0700

    altos: Add split telemetry code
    
    This sends every packet every time, which isn't correct, but should be
    useful for testing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b51e5466f7a125db873edd1fa9bd3881d7e98aad
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:08:19 2011 -0700

    altos: Shrink help text
    
    Reduce const space taken by command help text.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e5e4c1ad82d621ceb7286f72c87eeaf5976f9bf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:06:48 2011 -0700

    altos: Add sat info to GPS report command
    
    Plan to use this to report current flight computer state in idle mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06b6f78e22be38a26bfe11ed4d4b659d5b13f00c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:04:49 2011 -0700

    altos: Shrink const space in ao_config
    
    Eliminate separate 'cmd' and 'help' struct entries.
    Use \0 trick in cmd strings to eliminate whitespace.
    Edit help text.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3c26e534d8df34cfbf29b70cd1b2692493ce150
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:03:51 2011 -0700

    altos: teledongle does not need ao_packet_slave.c
    
    TeleDongle doesn't provide slave interfaces, so remove ao_packet_slave
    from the TD build
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c763a3f9cf2bf055e9705ce5ff4bc172f445037d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:02:52 2011 -0700

    Version strings must be < 8 bytes long
    
    The new telemetry packets include the version string, so make sure its
    less than 8 characters long
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a08173197d5533ecb395102ed34e751135660d06
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:01:59 2011 -0700

    doc: Fix a few minor telemetry doc mistakes
    
    Multiple 'accel' entries in the Sensor packet.
    Swap ground_accel and ground_pres to group accel cal data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98df3ba984acf3b47a09949bbea0f3264f711f5b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 14:17:55 2011 -0700

    doc: Complete initial telemetry description
    
    Finish describing the contents and modulation scheme for telemetry
    data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06e82bd2c2a5eea153a053e542df9bc3537e9a01
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 2 01:50:33 2011 -0700

    doc: Add telemetry format description
    
    Document the telemetry packet contents.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7fd9b8f720add559b262e81d61ededc9df16ca94
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 01:03:00 2011 -0700

    altosui: Support raw telemetry from TeleDongle
    
    Use raw telemetry frames when TeleDongle supports them, this involves
    parsing the hex dump of the packet instead of having teledongle take
    the packet apart. Only the legacy format is working at this point; the
    altos bits for the new split telemetry frames is not written yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb239b7161feea8646425b1f5788c3c82ae24321
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 01:01:08 2011 -0700

    altos: ao_radio_recv needs byte count *including* rssi and status
    
    That's two more than the actual packet length.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 336224a08327cadc95f6e5b564a4ddc64aaad8f8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 24 08:31:51 2011 -0700

    altos: Start adding new telemetry frame definitions
    
    These use the initial 24 bytes per frame plan, which will probably get
    changed to 32 bytes per frame.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5e111fdf1f23203baeeb490ae1b69402ebd513b8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 24 08:31:12 2011 -0700

    altos: Add checksum to TELEM output lines
    
    Verify the received telemetry lines to protect against OS data loss
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 489a68ba8e3bc360e2e8fc887e4c4b840b5a0dd3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 22 12:27:34 2011 -0700

    altos: Add arbitrary telemetry packet monitoring
    
    This adds the ability to monitor arbitrary telemetry packets (up to
    128 bytes), moving the telemetry data parsing up to the host.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e67b6890dd3a06665239f8dfd2e69266d055e46
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 22 12:26:45 2011 -0700

    altos: Rename telemetry to telemetry_orig
    
    This makes room to create a new multi-packet telemetry format without
    changing anything yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc0b49dcbaa2d0a69e002c151337b6e9fd3060d9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 2 23:16:30 2011 -0700

    altosui: Handle old TeleDongle receiving kalman telemetry packets
    
    The telemetry packets now send the kalman height/speed/accel values
    instead of the ad-hoc values. If received by an old TeleDongle box,
    the speed value will be of the form 0x8000abcd, which will be printed
    as a 32-bit value by TeleDongle. We only want the abcd part, which is
    the speed * 16. Detect this automatically and compute the correct
    values for all three.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d27e281f81aee88adff3d84085356ec310e4b92
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 25 21:38:02 2011 -0600

    Switch version to 0.9.4
    
    For Mayhem, so we can tell what version each board is running
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 479bdffa35d0b8d4e48868c8d20f3cb1549521ab
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 23:55:23 2011 -0700

    Revert "altos: Debugging TBT issues -- check pin configuration after boot"
    
    This reverts commit 514348055630edec12224c4b0964240b929759a3.
    
    Looks like this was never a problem.

commit 66bdf0e066bc0bb7a326a6c2a9c88b69e5c1be66
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 23:12:47 2011 -0700

    altos: clear CPU port 1 interrupt flag when handled
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8be559baa979c15e78f8dba7879b383dbe3936d3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 22:59:15 2011 -0700

    altos: Hook up the P1 ISR for TeleBT v0.1 bt_link line
    
    Otherwise, we're heading off into the weeds...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 23f441b95e55fbee709382b05d325bc021285766
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 22:49:54 2011 -0700

    altos: Initialize beeper for telebt
    
    Needed to get sounds to come out
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 514348055630edec12224c4b0964240b929759a3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 22:42:58 2011 -0700

    altos: Debugging TBT issues -- check pin configuration after boot
    
    Make sure the serial pins are configured as peripherals
    Make sure the ser_reset and bt_link pins are going the right direction.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 22e3ac0eb014b8255029763ae8180ad3527ba306
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 22:42:32 2011 -0700

    altos: Add beeper to TBT v0.1
    
    It's available, let's use it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d858b64ee0e8c227c149d2af6d2d634536964f4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 22:12:31 2011 -0700

    altos: pull TBT v0.1 ser_reset line low
    
    This line resets the BT module if held low for three seconds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3336d0f726afd1d43cf62280940e5fb91dab2e91
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 21:13:19 2011 -0700

    altos: Fix BT link status pin for real TBT hardware
    
    The prototype used P2_1, while the real hardware uses P1_7. Lots of
    defines to make this work...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 19bfa3882a2d95fcade256c2d63ad24f794281e5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 20:33:58 2011 -0700

    altos: Use USART configuration 1 with flow control for TBT
    
    It's just wired that way.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d9cc27641fe1778c098b065bf110be7823e6c9f4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 16:57:38 2011 -0700

    altos: Add telebt-v0.1 to Makefile
    
    Doesn't get built without it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c360e5c04e30421e9ea2f7006b7d35aef35f1edd
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri May 6 17:57:17 2011 -0600

    first cut at a telebt turn on script

commit c1760cebd47d0f03808f3204c0fcb1183f754e50
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 15:44:56 2011 -0700

    altos: Add preliminary telebt v0.1 defines
    
    This should make the telebt v0.1 binary that works on the real hardware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72a03baa73698fc1213a74320e6253c2380dd8fa
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 23:00:42 2011 -0700

    altosui: Fix BT manage dialog so that the device lists resize
    
    This makes the device scrolling lists fill any extra space when the
    window is resized.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e3bf13a38d24e95b16df1e2f01952d10f24cda10
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 22:55:08 2011 -0700

    altosui: Move AltosIgniteUI device open out of Swing thread
    
    Eliminate more blocking code from the Swing thread.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 109344d54d3fa4f79342fd1ea2a3f4085475e30c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 22:28:40 2011 -0700

    altosui: Display reader name (usually the device) when an I/O error occurs
    
    Access the reader name directly from the reader object instead of a
    local variable (which wasn't getting set anyways).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa5caf6310f074109472e6f55d8bd9751fb75c4c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 21:26:21 2011 -0700

    altosui: Fix TeleBT name in flight monitor title
    
    Was getting the product number, not the product name.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e7b7b80432bb251ac39efa1fa05d32b5f250e14
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 21:17:07 2011 -0700

    altosui: Separate out flash debug code to separate thread
    
    This avoids blocking the Swing thread while waiting for the serial
    device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 214cd69c0e4a1617ed5cde8fc2f46a4cee6ecced
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 23 22:50:58 2011 -0700

    altos: add telebt-v0.0 Makefile
    
    Git doesn't like to add these.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d41edb3384b6336f3482e61b0c9f9400a8b4f519
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 15:29:39 2011 -0700

    altosui: Make flight data download work through TeleBT
    
    This required flushing input before reading data blocks and adjusting
    some delays.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44fb71ca3e5bccd5f601fc5a2d5da7292050b1d6
Merge: 2ebdb888 c269e263
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 14:06:39 2011 -0700

    Merge branch 'telemini' into telebt

commit 2ebdb888f6792de70b3132950a988d49752d264e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 14:01:19 2011 -0700

    altosui: Eliminate ao_cmd_filter hook
    
    Disabling status messages means we don't need to filter them out of
    the input stream.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f5c9986dfa2d130b6c8c14308638cce49391a6e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 13:42:30 2011 -0700

    altos: remove BT logging code
    
    This was used to debug the serial line startup.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0195ff442c1da5d363dfda3f88f41865d0c6b469
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 13:31:10 2011 -0700

    altos: Remove bt debug command
    
    This will permit some additional cleanups.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce7cf0c5ddc5405f6f474f4e20752fc0b02f3ecb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 13:27:40 2011 -0700

    altos: Simplify BT communications
    
    Eliminate stdio I/O wrappers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e3d501940718428135e04995dff7fef691c08a20
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 13:20:19 2011 -0700

    altos: Solidify BT connections
    
    Use delays while sending commands to BT module.
    Don't use BT for stdio until the module is initialized.
    Add \r to name setting command
    Don't require 'connected' signal for command input.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b5957d5f6f8181da7be98c9bce49a0ec0b4a713
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 10:41:28 2011 -0700

    altosui: Wait two seconds after bluetooth connect XXX
    
    "something" isn't quite ready to communicate right after the device is
    connected, so we stick a delay in. There should be a better fix.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8de9d3cbfcd1db7b554fb761296a8de09aafc8c3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 10:25:47 2011 -0700

    altos: Add delays to bt startup sequence
    
    The BT device takes a few seconds after power-up before it is ready to
    receive commands.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17f38e045fcd8ca0224095c0b2b7b098df77a8d8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 08:43:40 2011 -0700

    altosui: Use persistent list of bluetooth devices for device dialogs
    
    Store a list of known bluetooth devices as preferences. Always include
    those in device dialogs with an option to go browse for more devices
    in both the device dialog and the Configure AltosUI dialog.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f249e5926f5fd9f86c41e7f0a414193533d4d8b0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 18 18:16:38 2011 -0500

    altosui: Make bluetooth dialog modal
    
    This allows it to be displayed correctly while the device dialog box
    (also modal) is up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84163eee7847a09fe78f8762b28f857d76bf5755
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 14 10:22:30 2011 -0700

    altosui: Make AltosBTDevice implement AltosDevice interface
    
    This will allow the use of either USB or BT devices through the
    AltosDevice interface.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9cdef76c1275b343099d0d01af82d7eadd36a410
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 14 10:12:29 2011 -0700

    altosui: Create abstract AltosDevice class
    
    This will wrap either USB or BT devices. The USB device constants have
    been moved to Altos.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5b3f18b38d80aa041b971204bf7a94278bd9584a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 8 19:46:15 2011 -0700

    altosui: Add primitive bluetooth device manager UI.
    
    This isn't useful, but does inquire for available bluetooth devices
    and show them in a list.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c269e263a6accd815ed5d08c0f5a6c3d5b9d3853
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 14 09:38:48 2011 -0700

    altos: Write a few pre-launch samples for Tm/Tn devices
    
    Record pre-launch samples in a small ring and flush that to flash when
    launch is detected. This provides a complete record of the flight,
    rather than simply starting after launch detect.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0fb471ce10642fc4a4bd40e4a81f8d6fe7a7c21
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 13 20:27:38 2011 -0700

    altosui: oops - lost state changes when downloading eeprom data.
    
    This would cause the reader to just keep reading past the end of the
    flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f49d694e776819e03b2c708e1c4ee23ba311430
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 9 22:53:12 2011 -0700

    altos/altosui: Log averaged baro sensor data in Tm/Tn
    
    Instead of logging the best height guess from the kalman filter, log
    barometer data. The logged data consists of the average value betwen
    log points to reduce noise.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8dd455204cf8712fa8c142b0c0517cec1bf5fd0f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 8 10:13:55 2011 -0700

    altosui: Add low-level Bluetooth APIs
    
    Adds the JNI functions to query and connect to arbitrary
    bluetooth devices.
    
    Adds Java wrappers to construct a list of proximate bluetooth devices.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf1c7df5301a1727e871a8447f835fe75bdce3fc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 8 10:12:50 2011 -0700

    altosui: Add TeleBT USB device support
    
    TeleBT can work just like a TeleDongle over USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a54a58d72147888f783a3caf364479efff4ed9b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 7 22:00:38 2011 -0700

    altos: Use PIO(6) on BTM to monitor BT connection. Fix BTM init.
    
    PIo(6) appears to be an active-low indication of the Bluetooth
    connection status. Hook this up using an interrupt to track the
    link state instead of using in-band status messages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f28efe271f9670473249574f6bcf6e160fe58c7b
Merge: 8db5c52f 835ab3a8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 19:35:22 2011 -0700

    Merge branch 'telemini' into telebt

commit 835ab3a8c2741a09b27de58c37439a193c9919ce
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 19:35:00 2011 -0700

    altosui: Add missing AltosTelemetryMap.java file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8db5c52f1c76a05020e4e0afbe4ea27485ad9f82
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 17:26:08 2011 -0700

    altos: Clean up BT serial communcations
    
    Disable echo on both ends in command mode to eliminate looping error
    values.
    
    Switch to 57600 baud to improve performance.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5d60fdb9c969c1516feb76a16001c9688112c4c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 17:25:07 2011 -0700

    altos: Make cmd echo per-connection instead of global
    
    Allow different connections to use different echo values, permitting
    the packet link to turn off echo while the USB link still has it on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e2c18249e16c98cf5f7dccdf8d3b84bc473863a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 16:48:12 2011 -0700

    altos: Clean up serial initialization
    
    Flush serial input buffers when switching speeds.
    Ensure pin configuration is correct.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92386f2e8419c4df125692cc998eb72ec49bf991
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:12:56 2011 -0700

    altos: Clean up usage of serial port for stdio
    
    Code wanting to use this must invoke ao_add_stdio; that way
    the link can be configured before command processing starts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f8a96a8516e13878b329dbf1da855ed9a3219c4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:11:44 2011 -0700

    altos: Make ao_serial_drain public
    
    Allow external code to discard serial input
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4f243a282f9aeb7433ccb2942850d380a091e603
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:10:37 2011 -0700

    altos: Remove serial monitor command
    
    This takes up space and isn't that useful these days
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 39bde78edc863d9d2ef50a59b8f28ab6274892b4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:08:37 2011 -0700

    altos: Allow any stdio to be used with packet forwarding
    
    There's no reason to restrict packet forwarding to work only from
    USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 01952da35a57ae4da062facb26b3c6d7de29190f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:07:23 2011 -0700

    altos: Provide for a pre-filter on commands
    
    This allows for external code to see each command line before it is
    processed and potentially skip it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 359ba0d9fc2c5947e6adc98bebcd061069c61e79
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:04:58 2011 -0700

    altos: expose set of available stdio values
    
    This lets external code manipulate which connection to communicate
    over.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce18eaa28b1385c962c09459cbc5f20e234d9ad5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:03:25 2011 -0700

    altos: Add P2SEL_*_MASK defines to cc1111.h
    
    These are used to avoid having the code "know" which selections are 1
    and which are 0 bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e74cf6d1c70a7a17d01c20f6831571245392498
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 31 20:58:14 2011 -0700

    altos: Add initial TeleBT code
    
    Prototyping with a TeleMetrum v0.1 board and a serial link to a
    bluetooth module.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c0971abc02b05d136aea257f3f40ba3b22b1d441
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 31 20:55:18 2011 -0700

    altos: Make ao_flight_test show true height but report saturated height
    
    To simulate a saturated baro sensor, clip baro data at a specified
    altitude. Continue to report the 'true' altitude in the output so that
    the resulting graphs are useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a14142e7b37031a51409f121b913fe793bf3603
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 31 20:53:12 2011 -0700

    altos: Baro useful ceiling is MSL, not AGL
    
    Use MSL instead of AGL for detecting over-range baro sensor values.
    Always trust baro sensor during descent; it'll get there eventually.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9dae18a664f70b668159487015e61be7f776926
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 31 20:51:15 2011 -0700

    altos: Reflect ao_flight split in ao_flight_test dependencies
    
    Need to rebuild ao_flight_test when any of the flight sources change
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f558cfa1df77c36a459168c1953d0945ee5a7f9f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 30 11:48:03 2011 -0700

    altosui: Only plot acceleration when present in data file
    
    Eliminates a bogus axis and data line for devices which do not have an
    accelerometer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9df9fc257eb2d7038d66ac7c2539aae4474bf12
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 30 11:47:07 2011 -0700

    altosui: Parse and export Max flight log value
    
    New configuration field might as well get dumped to the .csv files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 87bff181a95f6bf92c2cec350d331ba6af779e80
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 29 18:11:47 2011 -0700

    altos: Enable logging during nano flights
    
    Not having logging wasn't very useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 011e37f27b3926a42c8c1a74e0f179bb48829ec7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 29 18:10:46 2011 -0700

    altos: Run RDF beacon after apogee instead of waiting for landing
    
    This provides tracking when GPS fails, or on TeleMini.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08e6bbef2c3529dfd468ef221c526fc9f3ed5b81
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 29 10:08:46 2011 -0700

    altos: ao_sample_preflight was exiting preflight mode immediately
    
    Need to stay in pre-flight mode until we've gotten enough sensor data
    to calibrate things appropriately. The conversion from a unified
    ao_flight.c file was just broken here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56d045040c49728a854741e99545766f3723da5e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 29 09:39:27 2011 -0700

    altosui: Don't display 0000-00-00 for missing flight log dates
    
    With Tm/Tn not having GPS to get the current date, it's no longer
    unusual to have no date for a flight log, so don't show the 0000-00-00
    piece in that case.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ade7d99f02df825e70d0a964b4648156101ef78
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 29 09:38:23 2011 -0700

    altosui: Display exception messages from swing thread
    
    Flight log management exceptions were getting displayed from the log
    serial I/O thread instead of the swing thread. That's a bad plan.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f9be009ef26e3d7539f5932d267d7a8a7bcb7eb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 29 09:37:11 2011 -0700

    altosui: Make deployment testing handle Connecting... dialog
    
    Supporting the Connecting... dialog requires moving all serial
    communication to a separate thread. This was done by creating a worker
    thread and command queue to communicate between the UI and the serial line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 573edcd7dfe10ac3251396eae88eece55d82bcb6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 28 23:38:02 2011 -0700

    altosui: Make flight log downloading handle 'Connecting...' dialog
    
    This required moving all of the serial communication to a separate
    thread and making the bulk of the download operation run after that
    has finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c71a145daefb86d2c1297abec68e54bd951e3adf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 28 23:35:05 2011 -0700

    altosui: Clean up packet link connecting dialog
    
    Make sure the dialog is destroyed after use (otherwise, it hangs
    around on the screen sometimes).
    
    Switch timeout before showing dialog to 500ms -- that brings the
    dialog up less often when unnecessary.
    
    Use 'timeout_started' boolean to indicate whether the I/O thread has
    queued the dialog for display and whether it needs to queue a call to
    close it down.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6e7e812d67f91c63ba4982f7a899a72584027de
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 28 18:18:50 2011 -0700

    altos: Create custom nano flight code
    
    No igniters, just 'pad/drogue/landed' modes (where 'drogue' ==
    'flying'). A constant 1Hz telemetry and RDF rate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c754759a2d503633d527da4ebb20eb859cd506fd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 28 17:54:44 2011 -0700

    altos: Split up flight code into separate flight/sample/kalman bits
    
    The flight code mashed together data processing, filtering and actual
    flight managament into one giant pile. Split things up so that we
    have:
    
     ao_sample.c: Sensor data processing. Reads the ring, handles calibration
     ao_kalman.c: Filter the data to track the accel/speed/height values
     ao_flight.c: Flight state management, specific to rocketry.
    
    The plan is to re-use ao_sample.c and ao_kalman.c for hardware not
    specifically designed for rocketry, like TeleNano.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 006de838bbb096b9443863a46b8a125b1e6b5600
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 27 00:48:07 2011 -0700

    altosui: Handle serial calls from swing thread
    
    Calls from the swing thread cannot be canceled as there's no way to
    put up the cancel dialog. In this case, simply use the 5 second
    timeout and fail if no communication occurs within that amount of time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f23d0f3cbf1fb0c8eab497e266625f6410b69ba3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 27 00:46:19 2011 -0700

    altosui: Tell serial device which frame to use for timeout dialogs
    
    For the timeout dialog to appear, a frame must be configured for it to
    appear near. This patch sends the frame from the eeprom download
    functions to the serial code. That path doesn't yet work as the eeprom
    download is still trying to talk to the serial device from the swing
    event thread, which prevents the cancel dialog from working.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 067b21993e9a97fceadb355e571e5610535336a8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 27 00:13:38 2011 -0700

    altosui: Allow radio channel to be configured over the radio link
    
    TeleMini/TeleNano can't be configured via USB, so we need to allow
    the radio channel to be set over the radio link.
    
    This change carefully sets the new radio channel, disables the remote
    link and then sets the teledongle channel to the new value and brings
    the link back up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91a75279b6d306ba9d068a28c64917d5312122e8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 27 00:12:01 2011 -0700

    altosui: Off-by-one error in telemetry format configuration UI
    
    The telemetry format menu uses 0 for full and 1 for tiny, but the
    telemetry configuration uses 1 for full and 2 for tiny. One direction
    (config to UI) was right, the other (UI to config) was wrong.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ce8c9081e703d1405c2595ab9bda0cfa218c6c4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 26 23:38:54 2011 -0700

    altos: full logging must flush pending data before checking state
    
    Flight state must be checked only after any pending data have been
    written to the log as the 'current' flight state is only valid when
    the pending data values have been processed. This ensures that the
    'boost' state is not marked until the full ring of data is
    written. This ensures that the data processing code can find the
    barometer values from before boost to get an idea of the ground
    pressure value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3945d8f986d8f4bd3186a2cbaed5186e49d59839
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 26 23:15:36 2011 -0700

    altos: Variable log rate in full logging code too
    
    With the fixed ADC rate used to get better data during flight, the
    logging code now needs to vary the data storage rate so that descent
    data is recorded at 10 samples/second while ascent data is recorded at
    1 sample per second. Having the logging code do this itself eliminates
    any interaction with the flight code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97517ee585462c2d355f23f999fb8d9ebd908ec1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 26 00:01:22 2011 -0700

    altosui: Allow TM config connection to be canceled.
    
    This leaves the config UI connection attempt running and pops up a
    dialog box when it takes 'too long' in the remote case so that users
    with Tm or Tn devices can bring up the UI, and then boot the Tm/Tn
    without needing to time things carefully.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c121f1ef495e8af3eb39210baa40e212b691894
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 25 22:04:09 2011 -0700

    altosui: swing hide/show methods are deprecated
    
    I don't know why, but they are, so just replace them with
    setVisible calls.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b155647472ddfacb07c5ffa832e4d1f4a13ad342
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 25 22:01:18 2011 -0700

    altosui: Remove extra AltosEepromBlock layer
    
    This was interposed between the download layer and the eeprom layer to
    hold a eeprom block full of flight log records. The addition of the tiny
    log format required reworking the code to hold chunks full of eeprom
    data without regard to their content, so this content-specific layer
    didn't seem useful anymore.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 011615d40b3cb1d1c0ab9fa41e139e263a6a51e7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 25 21:34:31 2011 -0700

    altosui: Add support for downloading TeleMini/TeleNano flight logs
    
    Splits the eeprom downloading code into eeprom block downloading and
    separate eeprom data parsing so that the new data logging format can
    share the data downloading code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dea80af81b388cc3d7073444919f4e98b12fa730
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 25 21:29:50 2011 -0700

    altosui: Remove a bunch of debug printfs from the eeprom manager code
    
    Just noise on stdout.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f5b5848ad6ef5c808638a29c3dc0101b56ed11e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 24 08:08:43 2011 +0900

    altosui: Add telemetry format menu and preferences
    
    Switches the TeleDongle between full and tiny telemetry packet
    formats, saving the last used format for each teledongle in the
    application preferences.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3e68341f6f5daaf26dd162e4f9a06c29988986a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 24 05:27:57 2011 +0900

    altosui: Add support for telemetry version 4
    
    New telemetry format needed to support TeleNano and TeleMini
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e976a105423f2da1842f70da531c9051ba88a7f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 23 10:42:31 2011 +0900

    Add description to test flights

commit 93040ef4d0bd90ec5ae052f22243cd56adfb300a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 23 10:40:05 2011 +0900

    Add ao_kalman.h to .gitignore

commit 43a94380032300a2e33e1faa1efe93e858e0a2cf
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 23 10:37:39 2011 +0900

    altos: Exit flight test at landing. Allow description in test flight list
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 32364c9e0d346e0e5d517e18d4e90b8ff2fa944f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 23 10:33:38 2011 +0900

    altos: Ignore alt error for fast->coast. Allow larger error for baro apogee.
    
    With the fixed kalman filter, transitions across mach don't cause
    bumps in the merged filter.
    
    And, with working kalman bits, the signal for broken baro detection is
    stronger and so we can allow for baro apogee detection in cases where
    noise occurs close to apogee.
    
    Bump the kalman filter to trust the baro less so that the model tracks
    across mach.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d2042ccc2d29e4cb8ea39c5c69d07cb7e3daeea
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 16:55:08 2011 +0900

    altos: Restore sensible kalman values
    
    Now that the kalman code seems to work correctly, restore the sensor
    errors and model errors to match reality
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d7b476564a16eda81ab3406f70a21995e1b464e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 21:51:52 2011 +0900

    altos: Fix up flight code testing
    
    This automates flight code testing by reporting mis-detected apogee or
    main events.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a80d3836cfce3d4cfa7a71068539415c2dc421cd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 21:50:29 2011 +0900

    altos: Missing parens and some bad arithmetic in the kalman code
    
    Fixed point computations are a pain.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f30de5766c1eefb18c7d024a2cf10ce02de41071
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 21:29:05 2011 +0900

    altos: Add ao_flight_debug code
    
    Trace the kalman filter to make sure it's working.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3053b1f3c85d4fd84b3c6cc87858f433166df34
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 17:04:07 2011 +0900

    altos: Clean up some debug stuff in ao_flight.c
    
    Remove some spurious printf debugging.
    Remove an attempt at discovering broken accelerometer code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6864e06d88a5b908cffa7c4cd2be8969ff46ce4d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 16:51:04 2011 +0900

    altos/kalman: Kalman terms can be > 1, use 32-bit fixed point
    
    Because speed and acceleration are scaled by 16, it's fairly common
    for the kalman terms to end up larger than 1. Instead of trying to
    fuss with 16-bit values and shifts, just use 32-bit values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c14d6c5ace1d67bd948273ceb7eb6807b29c3806
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 08:51:23 2011 +0900

    altos: Compute a 'trust' value for the barometer
    
    Instead of making the baro use/don't-use decision binary, use a 'trust
    value' which slowly migrates from baro+accel to accel-only mode. This
    eliminates bumps in the data from a rapid shift.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b009b2efe3af8722c358c304c2243652594e0d5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 05:42:51 2011 +0900

    altos: Switch telemetrum over to kalman filter
    
    This changes the full telemetry stream to include kalman data instead
    of the old ad-hoc flight data. It's compatible in that the packet
    sizes are the same so teledongle can receive either and figure out
    which it has received.
    
    A few plotting and testing tools are added to make validating the new
    code easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20427ae4965f756aac0cedc5179a1c45b9a781f2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 21 19:59:27 2011 +0900

    altos: Add nickle kalman implementation.
    
    This generates the constants needed to implement Kalman filtering in
    the flight firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca3f03ef5c09446bebf0f5734f36a0248c457b1d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:55:39 2011 -0700

    altos: Add .sdcdbrc file for teledongle
    
    My sdcdb script uses this to set command line options automatically
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be838db49d999426a9dd02c0166fe161722f1e61
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:53:08 2011 -0700

    altos: New telemetry report format (version 4). Supports tiny telemetry.
    
    This completely replaces the version 3 format with a much simpler and
    easier to parse scheme. It's described in detail in ao_telem.h, but
    the basic idea is that the whole line is split into name/value pairs,
    separated by whitespace. Every name is unique, and the values are
    either strings or integers. No extraneous formatting or units are
    provided.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ad6bb342d237988404fa32540b38c61d6ddc1f0d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:51:02 2011 -0700

    altos: The kalman code requires a constant sample rate
    
    The kalman function can't handle a variable sample rate, so keep the
    ADC running at full speed for the whole flight instead of slowing it
    down after apogee.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31feb7777f73fed61193d3404f457ea1a081fe9c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:49:41 2011 -0700

    altos: Split telenano main from telemini
    
    Eventually, telenano will run different code; prepare for this by
    creating a telenano-specific main routine.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8950df02382f5f0aea5bac078fdf7134b98c43ed
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:46:18 2011 -0700

    altos: Split out tiny telemetry from full telemetry
    
    The TeleMini and TeleNano boards do not have either GPS or
    accelermeters, and they also run the kalman filter which produces
    standard unit measurements for the flight height/speed/accel
    values. This makes the telemetry significantly
    different. ao_telemetry_tiny.c sends the required data.
    
    Note that TeleNano sends the same telemetry as telemini at this point;
    there are a couple of values which are not useful, but the overhead of
    sending them is small enough that the hassle of having three telemetry
    formats seemed excessive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ba75e95c98d3e441a58d6f75d328d579e1997fe
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:41:44 2011 -0700

    altos: Make telemetry interval more consistent
    
    Instead of using a delay between telemetry packets, use a telemetry
    period and compute an appropriate delay each time. This requires
    changing the ascent telemetry from a 50ms delay to a 100ms interval,
    to provide a regular 10 packets-per-second rate. Before, we counted on
    the telemetry packet taking about 50ms to send so that we would
    receive about 10 per second.
    
    This also eliminates delays during descent for RDF tones -- those will
    get transmitted in the interval between telemetry packets without
    interrupting the spacing of those packets.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3f0bc801fd08a613c681504f0d1f9374486a2487
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:31:20 2011 -0700

    altos: Configure packet size from send/recv parameters.
    
    Instead of setting the packet size at configuration time, use the
    provided packet size to the send/recv functions to configure the
    radio. This eliminates many configuration calls, leaving us with 'RDF'
    mode and 'packet' mode, the latter working for telemetry and the
    bi-directional link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c28b9312d90a3a66016abc641c20bcd852d69f8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:27:15 2011 -0700

    altos: Don't init packet slave on TD. Make slave start optional
    
    Oops. TeleDongle was starting the packet slave code, which kinda
    wrecked its ability to receive telemetry packets. This patch simply
    removes the packet slave code from teledongle as it cannot be used
    (yet), it also makes the packet slave code initialization take a
    parameter which controls whether to start that by default; in the
    future, perhaps TeleDongle will gain a command to start packet slave mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e980b251e5a4d25410710a9aa89ef940e06b0d93
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 18:43:52 2011 -0700

    altosui: Add software version to Configure AltosUI dialog
    
    Show this somewhere so we can figure out what is installed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1aeb759c48f475ffaaae787515e080440c8386c3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 12:28:08 2011 -0700

    altos: Baro-only boards must not detect launch on accel or speed data
    
    The baro sensor generates too much noise to use small changes in
    computed speed or acceleration to cause a false launch detect.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a4f6d5ad55637cde97a1e2f247f92df59bc2e14
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 21:01:15 2011 -0700

    altos: Write height values to log for nano/mini
    
    This is a lot more useful than the old filtered pressure data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c985bb6a19c710409629f3c095332ba7afcf5248
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 20:36:59 2011 -0700

    altos/test: Add scripts to run lots of flights through the code
    
    This runs a long list of flights (there's a user-specific path
    pointing at the flights) and squawks if the baro and dual flight
    computers don't match.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dbe915795c66995805b5f37e6eb698cf2c143e61
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 20:26:12 2011 -0700

    altos: Fix mini/nano default log size to available flash space
    
    Also, remove accel cal code from boards without accel
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5db94e1e230bade966a997aa83165405a9ec9d83
Merge: 1a8f45e7 cbb968f5
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Mar 18 21:12:39 2011 -0600

    Merge branch 'telemini' of ssh://git.gag.com/scm/git/fw/altos into telemini

commit 1a8f45e7b720d01d3ff0c35ed1caaf8cbe0c3119
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Mar 18 21:12:12 2011 -0600

    fix up script to work and have reasonable texts

commit cbb968f5cf03625d453d84dc535758072a2c04c7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 20:07:25 2011 -0700

    altos: Add TeleNano support
    
    This just uses the TeleMini bits, which should work fine for now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 32c51840c792a737019fbc9fe42f2ca073b71827
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 19:49:46 2011 -0700

    altos: Tiny logging fixes. Scan at start, stop when land or full.
    
    Initialize the flight log for tiny systems by scanning the log area to
    find the current flight number and log area bounds.
    
    Stop logging data when the flight is over, or when the log area is
    full.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 62eae8a17d870e8ac6937ba23da01a5fbc652c6c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 16:53:11 2011 -0700

    altos: Add kalman filters for baro-only boards
    
    This adds a baro-only kalman filter to track the state of the rocket,
    and then uses it to control flight events instead of the existing
    ad-hoc mechanisms.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c826fab31f8aea25a942b6bb8435d4b04c1bef10
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 17 16:00:10 2011 -0700

    altos: Add tiny logging for TeleMini/TeleNano
    
    This splits the logging code into management of the log space within
    storage and separate code to actually write suitable log entries.  A
    new log writing module, ao_log_tiny, is added which writes only
    altimeter data at a fairly low data rate for devices using on-chip
    storage.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b546b474b7b6c5b4169b4c1ca09c6f17ebb3ae5
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Mar 11 21:41:01 2011 +1000

    ignore new flight test file

commit 82707a05af0eb2d54f46b58805c95cdf4e5a3703
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 16 20:36:50 2011 -0700

    altos: Internal flash ops block when running from flash
    
    The docs say that if you are executing from flash, then the CPU will
    stall after a flash write or erase command is started until the
    operation is complete. Take advantage of that to simplify the flash
    code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d8579f973bfe1047ee91f03555e74abdc483e69
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 7 16:31:43 2011 -0800

    altos: oops -- altitude reporting wasn't pausing between signals
    
    need to actually alternate the LED/tone with some space so you can
    count.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d007bccf6cb36d24a9c7c48de7d80759ac6f2e37
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 7 15:57:58 2011 -0800

    ao-load: Make usb descriptor rewriting optional
    
    TeleMini and TeleNano don't have USB descriptors to rewrite when
    loading firmware, so allow them to be missing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57d83f51377fb58018f422e42d74f29b86a821d2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 7 15:26:41 2011 -0800

    bringup: Add script for telemini
    
    Copied from teledongle with a few obvious changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ddd7485f05d0cad8f5b3e1ee9b9a4d2812ea1837
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 7 08:03:11 2011 -0800

    altos: Switch pins around for TeleMini
    
    TeleMini has fewer sensors and uses P0 for igniters instead of P2.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f8afc2641c779fc312a42a6358187d8716ebe61a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 23:52:11 2011 -0800

    altos: Switch LED usage for TeleMini around
    
    We're using the LEDs instead of tones, so make red mean 'low tone',
    green mean 'middle tone' and both mean 'high tone'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fc5d014721a7e5a7b22f07eb4ab0bb3c764473fe
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Feb 26 16:06:48 2011 +1000

    ao_intflash: Avoid overwriting code
    
    Require firmware to specify the end of its codespace in its Makefile,
    and use this to determine where the start of available flash is. Should
    give compile time errors if either there's no room left for storage, or
    if there's not enough room for code.

commit 0e4c55d78852415e79f7318471f4d00c89703b78
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 21:03:57 2011 -0800

    altos: Add TeleMini v1.0
    
    This adds initial code for the telemini board, a two channel
    flight computer with digital telemetry and a barometric sensor.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2d41358c80f2eb8b6e98d699149bb941a6671475
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 21:00:52 2011 -0800

    altos: Start with packet slave running. Turn off in pad mode.
    
    Instead of turning slave mode on in idle mode, start with it running
    and disable it in pad mode instead. This means packet mode is
    available in startup mode too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e56ed44e562f808addfd76bfb352f981db94094
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 21:59:08 2011 -0800

    altos/test: Add baro-only flight test program
    
    This builds the flight code in baro-only mode for testing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e339ffd8bd8b9e3f4758017ba355028000cb612e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 21:57:52 2011 -0800

    altos/test: Use ao_convert.c instead of hand-coded pres → alt func
    
    Fix up ao_convert.c so that it can be used within the flight test code
    instead of having a (broken) copy of the code there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02611efea0c485d78fad08c696c1f56e868d36b8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 20:56:25 2011 -0800

    altos: Make serial, usb, beeper and accelerometer optional components
    
    Not all boards will have these, so fix places that use them to deal
    with that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fdd15a254c6fab5ba2d02320ba0ceb3e6a56354c
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Feb 26 11:48:30 2011 +1000

    ao_intflash: Use internal flash for storage
    
    Makes any free pages at end of CC1111's internal flash available via
    the ao_storage API.

commit 8f1bd11b61d9423c62162f7bbe573fc69fd75269
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 16 14:10:06 2011 -0700

    aoview: remove -s option.

commit 45395c7825184efb835d5b165fa132be20c7f6fe
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 16 14:08:42 2011 -0700

    Bump published version number to 0.9.1

commit 9f3d26cadf37880d2c9223f59271d295b11c4c2a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 16 14:05:13 2011 -0700

    altosui: Missed jcommon.jar in the Mac OS install image
    
    This caused graphing to fail on Mac OS X
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e340c87d3198647cf075ed520a82703b0d59beb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 7 00:26:17 2011 -0800

    altos: Oops. Lost a couple of commands when merging the doc patch
    
    I didn't merge this carefully enough and managed to lose the 'f'
    and 'e' commands, which are kinda useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8cdf4fb051c22b35c251d90bc288551f7c2898bf
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Feb 27 11:11:12 2011 +1000

    src/ao_cmd: Shave off bytes from doc strings
    
    Switch to using { func, "X args\0Desc" } to specify command, saving
    a char field by looking at help[0] instead, and reduce help length by
    doing alignment with printf instead of hardcoded spaces.

commit 2cfe205de4242398e69c9e7c613af0d2a7094686
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 7 00:01:01 2011 -0800

    Revert "src/ao_gps_skytraq.c: Update logging rate to 10Hz"
    
    This reverts commit b080e933a65d268aaaec8cfd5f617a13d5babc43.
    
    10Hz data isn't any better than 1Hz data; it still doesn't like going
    upwards rapidly.

commit 249cd3b63d97581b068fff988e0cd7fcd5bf493e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 19 01:06:01 2011 -0800

    altosui: Display eeprom parsing errors to user
    
    When reading the eeprom, any parsing errors (most likely bad
    checksums) indicate some kind of problem with either the hardware or
    the flight software. Display these to the user and do not erase the
    flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 629a7637871b24fe6d1204aaa7185d84933d4639
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 19 01:04:19 2011 -0800

    altosui: Always read whole eeprom block, even at end of flight
    
    Instead of stopping early, continue reading the whole eeprom block so
    that the extra serial data doesn't end up confusing the next user of
    the serial line, which may well be reading the next flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ca2cf1b7e03b8453b45b45e313a33ad65da9ad5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 19 01:02:00 2011 -0800

    altosui: Mark empty eeprom records 'invalid', don't generate exception
    
    When reading empty eeprom records, mark them as 'invalid', but don't
    generate an exception as it's normal to read these at the end of the
    flight log.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 690feb166fd2bc6b6dfc26828f1efe9f5f1c6c0d
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Feb 18 23:56:01 2011 -0700

    update changelogs for Debian build

commit 0630e7d6d8cf6abf0fe07f9a6df40ee472cce1ef
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Feb 18 19:54:18 2011 -0700

    tie bringup scripts to Bdale's bench TeleDongle

commit b080e933a65d268aaaec8cfd5f617a13d5babc43
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Feb 19 05:49:15 2011 +1000

    src/ao_gps_skytraq.c: Update logging rate to 10Hz
    
    Send commands to skytraq to update baud rate to 57,600 bps, and
    set NMEA output rate to 10Hz.

commit aad7103dcf44e69a5a30e008836cce5542ea33e2
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Feb 19 04:17:17 2011 +1000

    src/ao_gps_skytraq: simplify parsing code
    
    Added macros to make correctly constructing skytraq commands easier.
    Simplified code path for NMEA processing marginally.

commit fe5123fa801f5dafed8b052da607899d1ef20500
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Feb 2 19:12:57 2011 +1000

    ao_radio: generalise setup of packet size

commit 8b09cc1825645a57c256f38a2f9586ddecf6bda5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 18 10:02:46 2011 -0800

    altos/test: auto-configure acceleration parameters from the log file
    
    The flight test code had static accelerometer configuration values,
    making it impossible to use data from different boards without
    recompiling. As the eeprom and telem log files both contain the
    necessary data, parse that instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3bc27fabb6159ce58b14d0f7929b0f46f67c378
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 18 09:54:01 2011 -0800

    altos/test: Add dependencies in the Makefile for ao_flight_test
    
    Yes, it would be nice to automate dependency generation here, but I
    can't be bothered.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c3080fdafff5212f267ba7c765a2f083435be799
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 18 09:51:37 2011 -0800

    ao-load: fix usage message to note that '=' is required for options
    
    The usage message was suggesting incorrect command line syntax; long
    options use '=' between the option name and value, not whitespace.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a09501ab714c0638410d06f80903a8769d93c688
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 19 12:47:25 2011 -0700

    update changelogs for Debian build

commit 2bb83d90aa03d825ca1b751418c91b194b72f1f9
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 19 12:46:02 2011 -0700

    elide changelog entries or re-release of 0.9

commit 9541ccd9ff9e67e0862ca31706358d8308fc85d8
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 19 12:42:40 2011 -0700

    update turnon script to prefer TeleDongle as programmer

commit 159fda30fe57349660c5e2d95017144ea3f5d7db
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 19 12:26:53 2011 -0700

    update changelogs for Debian build

commit 97f4f2e0d28eec1cf19d2d25140e42f6ac277700
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 19 11:21:52 2011 -0800

    altos: Program default flight log max value for new boards
    
    New boards have no config space values at all, and so they need each
    value to be set. Yes, this should be fixed so that there aren't two
    copies of these assignments.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 480587cf514ba21885b24c3b8fcb98d6b76ea8f4
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 19 00:05:25 2011 -0700

    update changelogs for Debian build

commit 6244f2316267738781e31a773b377bcf8c476918
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 19 00:04:45 2011 -0700

    prepare to release

commit 3c72103866f041107af49e01a5ccb6d4e6b6ac80
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 18 23:55:42 2011 -0700

    update changelogs for Debian build

commit 4ae724fe1d2ca0d712321c4fdc2200ff46d77428
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 18 23:54:36 2011 -0700

    we need an install target to prevent parent dir make from failing

commit ca7b549fbf62019b01a6e6c85da50645ea9a4502
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 18 23:48:08 2011 -0700

    update changelogs for Debian build

commit 9a5666f42d4d90a0a488fd0a85ae9914944fe0be
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 18 22:46:25 2011 -0800

    doc: Build with 'make all' from top level. Build with 'make fat'
    
    This will make sure the docs are up-to-date for both regular and
    fat builds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72a04d679d06aaad9c2b4297fefd585fc393ce2e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 18 22:39:07 2011 -0800

    fat: Add docs to Linux package
    
    Oops. Missed this one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d91c250179f44ca17c26fff36718b7026aa8ee0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 18 22:34:15 2011 -0800

    fat: Add firmware for v1.1 and docs to mac/windows/linux installers
    
    We'll need to be sure to update this each time we add a product.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26c4cc3054b1c7c9ed6ce3c2f21f6254b3245718
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 18 23:29:03 2011 -0700

    freshen copyright year

commit e2e20f6ce8a9c2bca36fde5730ccd7151377ec6f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 18 23:18:42 2011 -0700

    add 0.9 revision entry, with caveat about telemetry format change

commit 27e6dbbe95ae9b361d60576e0cbadb66792307f3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 18 20:39:58 2011 -0800

    doc: Add v0.9 features from altosui to documentation.
    
    New flight download UI and new config items.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92d7841edcfc8a841f71f7f97cc541f8e55c4627
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 18 20:39:30 2011 -0800

    doc: Don't delete telemetrum-outline.pdf
    
    This has a drilling template for the board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c411dce69be58238b8312c2fd7405cbe8b5d4a5a
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 18 17:27:11 2011 -0700

    update changelogs for Debian build

commit da42f406e88ccc821cd45d5a94d5afec65ec50e9
Merge: ea4cdfb8 cf550f9b
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Jan 17 09:50:17 2011 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit ea4cdfb87e03ecfb974f98305671265b6fb95372
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Jan 17 09:49:45 2011 -0700

    update documentation to reflect reality that modifying a board or separate
    pyro battery is not as simple as one trace cut on v1.0 and v1.1 boards

commit cf550f9b96fa94d8db559e01df0e265bb1c7b572
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 23:23:45 2011 -0800

    doc: Remove mention of ao_wake_task
    
    This has been removed from the altos sources, so remove it from the
    docs too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b71c4f4ed6cae23a7f4a2e7ae697da9ec614898
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 12:26:53 2011 -0800

    altos: Use 5V reference data to correct accelerometer measurements.
    
    When the 3.3V and 5V values shift relative to each other (usually due
    to changes in power consumption), the measured acceleration will
    appear to shift. This patch converts the 3.3V referenced acceleration
    value into a 5V referenced acceleration, eliminating this error.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2887fe7affc0706dbeb2f04df9a00a9b799903ed
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 12:25:57 2011 -0800

    altos: Optimize fetching of ADC data in flight code
    
    This stores the address of the desired sample in a local variable and
    then fetches through that. Saves quite a few instructions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2681a17500913cbaf3966f09380bb1d6b59e3863
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 12:18:32 2011 -0800

    altos: Sample the accelerometer reference voltage on v1.1 boards
    
    This places the 5v reference samples in an array parallel to the basic
    ADC values. It doesn't do anything with the values, just stores them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69290588980bb15732a99eca5c911a3b6e9a37b9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 12:12:02 2011 -0800

    altos: Ensure flight code gets first crack at new ADC data
    
    Instead of having everyone wait on the raw ADC ring, have the flight
    code wait on that and have everyone else wait for the flight code to
    finish looking at the data and move its pointer forwards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b8d7313504240ed04e0747e9b0f6e9a83d323e2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 15:57:15 2011 -0800

    altos: Auto-calibrate linux-based flight testing code
    
    Use the provided ground acceleration average to set the two
    accelerometer calibration values so that the flight code will
    detect pad/idle mode correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afd3d3cdb8c2291c1c7cda7908392d68cd04f87f
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Jan 17 15:03:40 2011 +1300

    Rework invalid accel cal detection code
    
    Slightly reduces code space.
    
    Uncalibrated accelerometer now enters invalid state as well.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 3566dee1cf83870396a0bb164f5549dd3faf58f5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 14:40:31 2011 -0800

    altosui: Remove spurious colons from eeprom selection headers
    
    This colons make the presentation a bit confusing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab31b1c737d8fd32af482e5b06699f1b832a25a1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 00:56:22 2011 -0800

    altos: Add DATA_TO_XDATA to linux test harness
    
    The flight test harness needs to expose every function used by the
    flight code in some form, and this macro is about to become used.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit add2802a8a33336180fe6856241a7f4a8200e89c
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Jan 16 00:10:30 2011 +1300

    altos: Added check for out of bounds accel
    
    Chose invalid flight mode instead of idle to give user feedback.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 58838c0b96a91da0bd0cd77c3ff312b589c08136
Author: Mike Beattie <mike@ethernal.org>
Date:   Sat Jan 15 23:21:26 2011 +1300

    altos: Added check for an accel value above 1.5g
    
    When detecting flight or idle mode, this should indicate
    that accel cal values are out of whack.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 118fe84c9ff1cc9d1653e67a2315e22e19d60a14
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 11:26:31 2011 -0800

    altos: average 512 accel/baro samples at startup instead of 1000
    
    This lets us use a simple shift instead of a divide, saving a huge
    amount of code space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a775b8f9ecefa143050653d74dfd218b32b9bb5
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Jan 16 10:54:45 2011 +1000

    altos: Restructure skytraq NMEA parsing code to save some space
    
    Splitting this into several smaller functions appears to make SDCC
    generate better code.

commit 7a35b2d7048669a96256d4ea0086299f8a0cb1df
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 22:42:38 2011 -0800

    altos: Flush log when full
    
    When the log storage is full, make sure any pending writes are flushed
    out so that the last bit isn't lost.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47ee4597e55749e8f66f61a585ea32776979bf80
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 16:25:10 2011 -0800

    altos: TELEMETRY PROTOCOL CHANGE. Switch to 16-bit serial numbers.
    
    What a terrible mistake! The flight computer serial numbers were
    recorded in only 8 bits, so serial numbers > 255 would get truncated.
    
    There's really no fix other than bumping the field to 16 bits and
    reflashing every TM and TD on the planet. Very unfortunate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b22ba359a02297e39a446cbd5ef51e63b795624a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 12:05:50 2011 -0800

    doc: inkscape tracks the filename inside the document
    
    telemetrum-outline.svg was renamed from telemetrum.svg and inkscape
    appears to care.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0a841b285fb398f0be72183ec3c9d1e358419a9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 12:02:43 2011 -0800

    altosui: Require 4 sats to light up the 'GPS locked' light.
    
    This tracks the same GPS signal requirement needed for 'GPS ready' and
    ensures that we have a 3d fix.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bfdce6fc3367fdf03e0dc7ddd94da18723b8ba3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 14:30:38 2011 -0800

    altosui: Ensure serial device is closed after eeprom download finishes
    
    As this code is all event-driven, track which events will trigger
    further work and block closing the device in those specific cases,
    ensuring that all other code paths end up closing the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 987039b8f0b1d889aca9109d4c6a83f034ff64a7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 14:29:57 2011 -0800

    altosui: Remove debug message when eeprom downloads are complete.
    
    This message isn't useful now that this code appears to work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb534aae15f0f1e5d69790e159d0287b6b8a514a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 14:28:35 2011 -0800

    altosui: Use long input flush timeout when remote.
    
    100ms isn't long enough to capture pending remote serial input, so use
    300 ms in that mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4add23186b3586c99579d83efdc003f79e9bf7a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 14:26:18 2011 -0800

    altosui: Make serial debug more complete and accurate
    
    Display all serial input, including telemetry.
    Wait to display serial output until flush time, to debug missing flushing.
    Show when devices are opened and closed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit deb3c7b9206be0c9c46f75d35c8f766c26d9838f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 22:43:37 2011 -0800

    altosui: Reset eeprom download instance variables before reading flight
    
    To deal with downloading multiple flights in a single invocation, make
    sure all relevant instance variables are set back to start of flight
    download values each time a log is read.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eec9eb2e81535e62c52fbb2e57a2d33f88f92c1a
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Jan 17 07:56:53 2011 +1300

    Close serial port if Download/Delete dialog is cancelled.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit df1c6ab3ac079199b5a12328c9ff5cfa6ac29b36
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Jan 17 00:40:07 2011 +1300

    Convert EepromSelect dialog to use a GridBag
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit fef302656f21ae0ab4772f72979cbb7f071da89a
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Jan 16 20:25:19 2011 +1300

    Re-order and re-arrange eeprom download dialog
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 35adb7c98fe02e84fff70c1bee22bfa019cfacc2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 14 21:44:59 2011 -0800

    doc: Add telemetrum mounting template in svg and pdf forms
    
    telemetrum-outline.svg and telemetrum-outline.pdf
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fdba0f24afd59becc499d750bbdb80aea86066ac
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 14 18:01:16 2011 -0700

    update changelogs for Debian build

commit 646e1926cdf56e2cf2425413ce716e6999b64a58
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 14 18:01:00 2011 -0700

    update changelogs for Debian build

commit d908c2ebd0b11a54cfd922a192249d0f0df0ddb0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 14 16:47:36 2011 -0800

    altosui: Add preference for serial debugging.
    
    This dumps serial input/output to stdout.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcaee12a64d5e195b55b8f77c19dfc0c57ef5d58
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 14 16:47:19 2011 -0800

    altosui: Ensure serial line is flushed after disabling remote link
    
    Flush the '~' character.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2d154be89246e111a36f7c2700effbb2c97da541
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 14 16:44:50 2011 -0800

    altosui: Show dialog after successful delete or when no flights
    
    Make sure the user always sees confirmation for flight log management.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b490455807d1c70c81785ed8931a07ab44e8e421
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 14 14:31:19 2011 -0700

    update changelogs for Debian build

commit 97b1ca994599ad262400eb3c685799582f7f1b94
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 14 14:30:49 2011 -0700

    update changelogs for Debian build

commit d794ef9e0fbe4d13259db1bbd69f01717c14400b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 12 12:41:26 2011 -0800

    altos: check for valid flight number in ao_log_delete
    
    Zero is not a valid flight number, and ao_log_flight uses that to
    indicate 'no flight in this slot'. Check the user-provided input for
    zero before looking through the slots.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8801b8c1947bd39f7c985b91a2ba8dbc81bcc91a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 12 12:40:45 2011 -0800

    altosui: Add eeprom 'manage' ui to download and delete multiple flights
    
    This shows the list of available flights and provides options to
    download and/or delete each one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 440d52e34364fdeeddc76a2d744cc6d1c934364f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 11 21:28:07 2011 -0800

    altosui: Add support for parsing list of flights from the 'l' command
    
    This adds parsing support to enumerate the available flights, but does
    not yet provide any UI to use it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ad419d81c90ef6a16656970466313767fef830f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 11 21:26:41 2011 -0800

    altos: oops -- 'e' command was only showing 7 of the 8 bytes per line
    
    Just a silly off-by-one error when printing out the data received from flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd2480fd757b67557d9c7de42e402034002c3e37
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 11 15:39:24 2011 -0800

    altosui: Split eeprom download code apart
    
    Create separate 'download config data', 'read single record' and 'read
    block' functions. This code will be shared with future multi-log
    reading code for new firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c437b14b7fc7afdfc7b809a04d7fa29d5e742307
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Jan 7 21:00:10 2011 -0800

    altos: Remove redundant initialization of ao_interval variables
    
    These are all initialized in the ao_flight_drogue state transition.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57de960b8148bf485607898c3d66af6994d76481
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Jan 7 20:52:33 2011 -0800

    altos: Remove unused accel_vel_mach and accel_vel_boost variables
    
    Presumably left-over debugging code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca66f86a899c191b6362a334417fc84a79349677
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 20:46:29 2011 -0800

    altosui: Add configuration of flight log size
    
    This adds to the TeleMetrum configuration UI the ability to set the
    maximum flight log size.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52ac83fedbfd380d14d4df2e79992bbdfba3552a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 20:26:39 2011 -0800

    altos: Check for full log and complain
    
    Reports special tone along with the continuity checks.
    Reports flight 0 in telemetry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00891b40754962ef6530b237ef52017bb58112d5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 20:25:09 2011 -0800

    altos: Check requested log max size against available space
    
    Make sure the amount of memory requested for a single log isn't more
    than is available on the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bbddcae2a15b6d430e84956ddf26955aa9173cc0
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Jan 7 20:18:25 2011 -0800

    altos: Optimize Morse code generation
    
    This reduces the size of data and code needed to report the
    flight states
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73620c41017c1774d6190dfd4be5b742eb64f8d3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 20:13:28 2011 -0800

    altos: ensure erase mark is written when erasing flights
    
    It was getting called only when *failing* to erase a flight (oops),
    secondly, it wasn't getting written because ao_storage_flush wasn't
    getting called.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit edd22ee49adf60c35f2fe6ba97c111b7ad4131c2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 17:56:06 2011 -0800

    altos: report flight log offsets in hex block numbers instead of bytes
    
    makes them compatible with the 'e' command.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1cc08af4f4a1ff61fc0deca3bdd95e8a5ca8ec5c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 17:55:54 2011 -0800

    altos: white space fix
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8c9684239b67a69a4a3d24202a6df0d73c4f7f5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 17:54:54 2011 -0800

    altos: Speed up at45 and 25lc erase speeds
    
    No need to read the block to be erased before erasing it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2722703bd848b07a02d3ce0c83a502eca52a9f1d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 14:58:39 2011 -0800

    altos: support storage of multiple flights.
    
    This adds the logging support for dealing with multiple flights
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9b210bc33cd95e7108ab51925fdf0d5e8deaf7e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 10:05:11 2011 -0800

    altos: Add configuration parameter for maximum flight log size
    
    This parameter will permit available storage to be split into multiple
    separate flight logs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3bcf14f12f6681888c3162d0f33ef2d454eb75dd
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 7 00:52:50 2011 -0700

    update changelogs for Debian build

commit 408a3e04362d626778640dd0ce7d356d3863de53
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 6 23:38:13 2011 -0800

    altos: Mark end of available flight list with 'done' to make the UI
    code easier to write
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e991f52276248fa08d96fbecc458bc478e98d299
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 6 23:35:31 2011 -0800

    altos: Rip out 'optimization' in ao_log_scan
    
    Remove premature optimization to avoid re-scanning the flight logs for
    the best empty entry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 569a1dac55b70c30f01afa7bcb74442ecdd85d85
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 6 22:37:38 2011 -0800

    altos: Move common storage code to ao_storage.c. Add M25P80 driver
    
    This reworks the storage API so that you erase blocks and then store
    data to them so that the M25P80 driver will work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4ba9bf4291bf17c777c8c3ef7c71e4a30b9947a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 6 17:34:58 2011 -0800

    altos: Require manual flight erasing.
    
    This supports flash chips that require larger erase blocks.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ddcc94da4326f9ce954bd31a46b36165c58e6c18
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 6 12:51:39 2011 -0800

    altos: Simplify storage API
    
    This removes the config-specific APIs and exposes global variables for
    the available storage space, block size and config storage location.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3f1b1488bdc92fa9277dc549ba9f3210a8d4c8c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 6 11:28:35 2011 -0800

    altos: packet and usb i/o routines use 'char', not 'uint8_t'
    
    Just fixing the type of a local variable holding a character
    passed from the packet link to usb.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5688af4e4d7ca8e559d758257e79b7979f1cc924
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 22 21:13:56 2010 -0800

    altos: Add telemetrum-v1.1 directory
    
    This just clones the v1.0 build; changes will be added on top of this.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f7296b3feab872bf51fc369ade69cc1e7cf7a3f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 22 21:06:22 2010 -0800

    altos: Split out SPI driver.
    
    For TM with the companion connector, the SPI bus will be shared among
    multiple devices. Split out the existing SPI code into a common
    driver, with the SPI bus protected by a mutex.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51c410c1c952e0e9bcf1b2c438813de63753be5f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 28 00:24:54 2010 -0800

    windows: Update NSIS installer file to use compatibility IDs
    
    This allows the file to contain a single InitDriverSetup function,
    making things shorter and (I hope) clearer.

commit 4a42f9d5c20dcaf5fd7591ccf9e32c6130d9d538
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 28 00:22:14 2010 -0800

    windows: Add compatibility IDs to telemetrum.inf
    
    This will allow the .nsi file to reference just the compatibility ID
    instead of needing to have all of the USB IDs listed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 484b44e81b655f1ecb48256095382a56d2839bae
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 26 17:39:40 2010 -0800

    altos: eliminate ao_wake_task
    
    Waking up a task waiting on some random object is a bad idea. Fix
    the waiters to look for suitable signalling.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07213dc34fa20470a4b36a327a83d75b0f010ebb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 26 16:14:15 2010 -0800

    altos: clean up radio abort paths. Share radio code.
    
    Instead of aborting the DMA and radio operation and expecting that to
    be handled reasonably by the radio receiving task, rewrite things so
    that the abort function just wakes the receiving task while that
    terminates the DMA and cleans up the radio.
    
    This eliminates all kinds of nasty bugs dealing with radio abort
    smashing the radio registers at the wrong time, or interrupting a
    radio transmission.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b62580855c5144f5bc7e0172289bce08814d9472
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Dec 14 03:40:18 2010 +1000

    altosui: move maps to subdir, fix E/W mismatch

commit b8d2eb5509096fd5bd04598b1312077659109620
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 1 00:15:17 2010 -0700

    update changelogs for Debian build

commit ea95c060f8bd959cefc60dd6d411151f3c91384e
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 1 00:12:05 2010 -0700

    fix symlink paths in rules file

commit f95220b6f0cc74928e0e7d7c7e1f443eafc32a02
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 1 00:03:23 2010 -0700

    update changelogs for Debian build

commit ea7130e953622884afc348265f5a4c58f9876823
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 1 00:00:58 2010 -0700

    modify Debian package build to deliver one copy of background.png for
    the themes and symlink it into place for gdm and slim

commit 3696b30a8d1eb351353d84b5f7af8eeff55c468b
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 29 21:47:13 2010 -0700

    update changelogs for Debian build

commit 11b3f9ff715017a2dec02003275885334f22c009
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 29 21:46:02 2010 -0700

    releasing 0.8.1

commit 5f3f11e11dff9b9f4d1dde279c0d474de0de12a5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 29 20:41:49 2010 -0800

    Add minimal release testing plan to Releasing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0a4deee23984a8f779917bbeaf74a66a0abf592
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 29 20:34:27 2010 -0800

    Move "Releasing" to top level
    
    This file documents the AltOS release process for all systems.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b727156ef0a7fb6e442ca28be27eb344a213ecf8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 29 20:17:35 2010 -0800

    windows: Add jfreechart.jar and jcommon.jar to windows install image
    
    These are necessary for the Graph Data button to do anything useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e2220a180f95971d222a597d2057ca328c27356
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 29 21:29:14 2010 -0700

    adding Bdale's release process document to the source tree

commit 61a924099800494b589cbbb87c65b552ccbd8394
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 29 14:40:27 2010 -0700

    fix an Altos vs Altus typo in the docs

commit e840b6594b8a939f148fa7231e1b06a280d94074
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 22:42:43 2010 -0700

    fix section layering

commit f39698bbc12afdfadfac56c90030e16db93cf4fc
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 19:46:03 2010 -0700

    fix publish target in doc/Makefile

commit 13cea7a96821165a10a8b2433af1da7508882b0a
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 18:48:31 2010 -0700

    moved doc dir in web content to AltOS tree

commit 6f3c72462af86a7d9dec20f4c813a524a5be9fbb
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 18:32:17 2010 -0700

    update changelogs for Debian build

commit a375942979dbcd8239d8c0addb10616e6048f6ea
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 18:31:26 2010 -0700

    rewind changelog to recover from stupid build failure

commit 263cf6c4fc5c1a240d719bb0ceb33393864fb3d6
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 18:24:00 2010 -0700

    update changelogs for Debian build

commit 2615289265b6f8fa08827be794b4eee569fc6333
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 18:23:17 2010 -0700

    update changelogs for Debian build

commit 5e23bcc2d2ad33a839fedd2158213098a05cd9ae
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 18:21:31 2010 -0700

    declaring 0.8 released

commit b09d3e11c32abd07f8e11b483ac4b57148f4f2d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 27 23:08:41 2010 -0800

    windows: Bump .inf file version

commit 42c2394ccc1a1ee6dc134ed963a4f79acf031d0b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 27 23:04:50 2010 -0800

    windows: more .inf file hacking
    
    Add a LayoutFile reference
    Add the FakeModemCopyFileSection
    
    Copy AltosMetrum.Install section to AltusMetrum.Install.NT section. I
    don't know what this might do; existing files seem inconsistent.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26369a92398f4ebe3fcd54ce34cebffae0cfdf07
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 27 22:39:31 2010 -0800

    windows: remove some non-existent .inf file section references
    
    The mfglt and VerboseResultCodes sections are not present in the .inf
    file, so remove refernces to them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 641c5373724d34c3adfcf42420a528d6bba736b9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 27 22:35:18 2010 -0800

    windows: try harder to get windows install to work
    
    Add devIDs to .nsi file. Fix install section name mapping from the
    hot-plug info.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd414e2c04ce5ecbc75f19325a6d6f82cd489fb3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 27 16:30:29 2010 -0800

    altosui: Correct windows hardware IDs for nsis installer file
    
    Need real hardware IDs (encoded USB ids) to get windows to
    auto-install the driver?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f834b22905db87557f729f942607dc363b013694
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 25 22:31:33 2010 -0700

    update changelogs for Debian build

commit da3b39d6b1b5ba48686c2a4add4b5448fd5711af
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 25 22:29:01 2010 -0700

    changed main document name from telemetrum-doc to altusmetrum

commit ab6c9c983a2830bc8807e1b75d2576141b73632d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 25 19:30:02 2010 -0700

    update fat target in Makefiles to reflect move of altosui and libaltos

commit b8f05cdc0e9b4a96852eed9d38ff6d5950e2d2ed
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 17:29:28 2010 -0800

    altosui: Clean up flash code to ensure swing gets called from right thread
    
    This moves all of the flash code to a separate thread and passes
    messages back to the swing thread to keep the UI up to date.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit adbb14c63d85b7a54223f88ac623571456f4a462
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 16:28:04 2010 -0800

    altosui: Remove gratuitous threading from device flashing UI
    
    There's no need for a thread here, and swing doesn't want us to use
    one anyways.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f88520089660845009148b69bfcea6c9dff9672
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 16:23:18 2010 -0800

    altosui: Flight data download GUI operations called only from main thread
    
    Swing doesn't like UI functions being called from non-dispatch thread,
    so fix up the eeprom download code to use SwingUtilities.invokeLater
    to make sure this works right.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d3612e267cd4c1e7fdd74fc33952b3f26f870f5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 16:09:37 2010 -0800

    altosui: Eliminate unnecessary thread from config UI
    
    There's no reason to use a thread to run a dialog box, and
    swing doesn't like threads anyways.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 12fb7f0e70cd244475d84469f93283112478d1e1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 15:56:42 2010 -0800

    altosui: Only call swing display functions from main thread.
    
    Swing insists that all display functions be called from a single
    thread, and the flight window wasn't following this for display
    updates. Use SwingUtilities.invokeLater to make sure the flight UI
    updates happen in the right context.
    
    Fixes a UI freeze on Mac OS.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b74cec6cd0bc043f53e9e28472765aa343136813
Author: Bob Finch <w9ya@qrparci.net>
Date:   Thu Nov 25 13:30:48 2010 -0700

    Updated AltOS PKGBUILD to track makefile changes

commit f88bde21d76a4ff91099a5051153ebace1619978
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 11:16:55 2010 -0800

    altosui: Hack up standalone makefile to maybe build altosui again
    
    This isn't tested, but at least the paths are more likely to be correct
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d98440d53378aaa6da87ed65e9abb2f96f7ee49
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 11:16:28 2010 -0800

    altosui: Make windows bits build after moving altosui directory
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4893ed50bc14772986ac02f9b39928f1882da923
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 23:54:08 2010 -0800

    Revert "altos: Don't abort radio transmissions with ao_radio_abort"
    
    This reverts commit 54468e5dc567aaac5c5c20e921859b7cec28bb88.
    
    With this patch in place, TD could not be placed in 'packet' mode.

commit cb08bc264c71ca972027392b42f347a03df76a43
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 22:55:08 2010 -0800

    doc: Rename telemetrum-doc as altusmetrum
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 554bdd25e132dbaec322bc11f94093d2c2e78751
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 22:49:33 2010 -0800

    doc: Add more authors, fix URL formatting, note that AltosUI actually exists
    
    Add aj and bfinch as authors. Insert an acknowledgements section. Fill
    in the Fire Igniter section in the AltosUI chapter. Then change the
    section talking about the future plans for Java to mention that they
    actually exist now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bcf78b67717374b5971820021b83061e2e9734cf
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 21:39:18 2010 -0800

    doc: Reformat altos to use sections for each function
    
    This places them in the TOC, making them easier to find.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51c7741040d95c5deece939dae5e4136cc04afc4
Merge: d1dbe3b6 4e47c44d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 21:00:52 2010 -0800

    Merge branch 'buttonbox'
    
    Conflicts:
            doc/telemetrum-doc.xsl
    
    Pull the buttbox version of the docs in as it had been updated.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e47c44d335276cf0dc5ed3a0756e50c98c1b9b9
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Nov 24 21:44:53 2010 -0700

    manually fold in documentation work from the master branch

commit 8a68c1da253c0b29a7cb9c7540c20585ad6e3dec
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Nov 24 21:21:53 2010 -0700

    tweak rev history

commit 7cd1c7765d137df711caeeb69abaaba1b36e0a65
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Nov 24 20:53:36 2010 -0700

    fix missing section close in Site Map content

commit db2b19b8f0d452d682d53c7ed0ff6e359b46efa0
Merge: b372f3c0 915f881d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 18:57:35 2010 -0800

    Merge remote branch 'aj/buttonbox' into buttonbox

commit b372f3c0ee4ec49aabe61c169cb1eb9bb4fb2cfc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 18:50:46 2010 -0800

    Missing change to top level Makefile to build altosui
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 915f881d61294dc6f5a6a3e8d75567e18492a631
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 25 09:52:30 2010 +1000

    doc: Document altosui "Site Map" tab

commit f01096c4b42f9a4720ed0414826c2a283a992545
Merge: 357826aa 3fbefb3e
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 25 09:10:50 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 3fbefb3eea981d34a09496cf8abf0119de2e35bf
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 14:57:57 2010 -0800

    Move altosui to the top level, placing libaltos inside it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 357826aa9c7b42c59f5d52b8eb016d73b6da0c7f
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 25 09:07:34 2010 +1000

    docs: Document altosui "Graph Data" button

commit 7811e6dfa6caf10251da7df7c24b98cdc3787892
Merge: 71b1949e 7a50837e
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 25 08:47:36 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 7a50837ea0d92db3f469f197ec8210aee22aa143
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 10:55:18 2010 -0800

    altosui: Make sure packet mode is turned off when the connection fails
    
    When the packet connection times out, turn packet mode off when
    closing the serial port.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d90e2f6009e060fb59c519f7e564483a7ca6872
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 20:17:44 2010 -0800

    altosui: Let people fire igniters that don't read as 'ready'
    
    This provides for igniter testing with LEDs or other materials that
    don't look like regular igniters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3233985a132e1d660e6df12d0056b6729f16faf
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 19:09:31 2010 -0800

    altosui: Disable radio configation over packet link.
    
    Attempting to configure the radio over the packet link will only end
    up confusing the user, so disable it. This also works around a bug in
    older TM code which would lock up when trying to do this.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6cd9be22f06f21d12ee2f668989d83d3c61d14c0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 19:08:07 2010 -0800

    altosui: New AltosSerial.set_radio function sets channel/call
    
    Use this anytime you need to set the device radio channel and call
    sign, either for telemetry reception or packet mode origination. This
    uses the saved callsign and per-device radio channel number. Do not
    use this when opening a telemetrum as there won't be a saved channel number.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ed7cf7d262fcf7c0c677c2fb981582b571de9e5e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 19:04:55 2010 -0800

    altosui: Make AltosSerial.flush_input keep reading while non-empty
    
    Flushing the input buffer can take a while, especially over the packet
    link. Keep reading while stuff is appearing on the reply queue.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b9db8c82d26a6a2e43d4ca40742fc1bdc502380
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 19:02:54 2010 -0800

    altos: Make radio test command careful with the radio mutex.
    
    Remember whether the radio test mode is on or off and don't try to do
    either of them twice to prevent the mutex from being acquired or
    released twice.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54468e5dc567aaac5c5c20e921859b7cec28bb88
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 18:57:49 2010 -0800

    altos: Don't abort radio transmissions with ao_radio_abort
    
    We only want to abort pending radio reception to release the radio for
    other use, or to change the radio channel. Let radio transmission
    proceed. This fixes a problem with using packet mode to configure the
    radio channel; if the packet transmission is aborted, the TM ends up
    wedged.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d873dc28f0752aeb58a6263e42bdd5b9095bd392
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 18:56:46 2010 -0800

    altos: remove unused variable from ao_igniter
    
    The 'status' variable used to hold a reported status value from the
    igniter after firing, but we ignore that now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71b1949e50f4533bcf44537da65b19bc67863c8e
Merge: a79225c2 f1892b13
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Nov 24 12:14:11 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit f1892b137b1de3d6caf0293bd40ed5c3e4948066
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Nov 23 18:58:11 2010 -0700

    lose the placeholder on how GPS works, as it's going to be a
    while before I tackle that, if ever.

commit a79225c215f17fa5218ddd9db4fc3f5c563a9f74
Merge: 84cd5d42 853b7112
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Nov 24 11:55:14 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 853b7112e34212040c4cb7289f9cfdb2f3ea9f90
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Nov 23 18:53:18 2010 -0700

    merge Keith's AltosUI documention into "the big book"

commit 84cd5d42d8b5659463544fe2a400758b56478609
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Nov 24 02:13:32 2010 +1000

    altosui: sitemap uses rocket gps if no pad gps

commit c7119c21baa9d4ca681975b8613ade6593f65577
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Nov 24 02:11:36 2010 +1000

    altosui: don't switch away from user selected tab

commit ae55a107f12546dc65f04618c7abc17beb920d73
Merge: d1005f68 737f2fdd
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Nov 24 01:53:46 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 737f2fdd012202f453120ece117ae5e859b32082
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 22 22:26:19 2010 -0800

    doc: Add internal documentation for AltOS
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5523e7d55ecc8d310e495fa4f5115f7483c42d65
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 22 21:07:10 2010 -0700

    add a rudimentary --help for command line use

commit d1005f68376d695039c314b8d7a68bbf9acbca4f
Merge: 9a83e0dc 22c09781
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Nov 23 10:14:55 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 22c09781af1df4b38562b577e9926c23e4a397f2
Merge: b27327a0 a79606a6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 22 16:02:22 2010 -0800

    Merge remote branch 'origin/buttonbox' into buttonbox

commit b27327a05d249eaf969b67d2a8d12fc6a93841f0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 22 15:56:04 2010 -0800

    altos: assume igniter worked.
    
    Many igniters don't go open when fired, so there's no way
    to know if they worked. Assume they did as a failed igniter is
    unlikely to do anything when fired again anyways.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68323cbb222f1f33198a42abaa0550af22f75a93
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 22 15:53:27 2010 -0800

    altosui: Close serial port when debug link fails
    
    If the debug connection isn't working, close down the serial port when
    reporting the failure.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a83e0dc79f7a7467c7814d58daa2a2b89e50972
Merge: 902735ff a79606a6
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Nov 23 08:07:04 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit a79606a6507fc01a74910f7959e84c4e9a730714
Author: Bob Finch <w9ya@qrparci.net>
Date:   Mon Nov 22 12:24:42 2010 -0700

    Added PKGBUILDs for deps into contribs

commit 377ee7e90ecd028f984cd1abce96b2efc3b5b977
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 21 14:03:17 2010 -0800

    altos: Add on/off modes to 'C' command
    
    This lets the user turn the radio on/off and then invoke other commands.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 902735ffbfdd97672d52b09f17cdcd619193fd05
Author: Anthony Towns <aj@erisian.com.au>
Date:   Mon Nov 22 05:29:26 2010 +1000

    altosui: keep sitemap more centred on rocket

commit b85df38b5611e45cb9296df07b720badf74ac26e
Author: Anthony Towns <aj@erisian.com.au>
Date:   Mon Nov 22 05:22:17 2010 +1000

    altosui: improve sitemap scrolling behaviour

commit 4a9ded5b39ed08e13abc2cddba8b712f62b983f2
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 17:39:50 2010 +1000

    AltosSiteMap: ensure buffer around active tile

commit ec47bc93a487614714a752cb30ec9fe3d8f72929
Merge: 0393830f e7954c82
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 16:08:37 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit e7954c820763f80e993f9f822e837725cf36af84
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 22:03:26 2010 -0800

    altosui: When fixing eeprom gps time information, make GPS data valid
    
    Eeprom files may be missing the GPS time (due to a firmware bug). Working
    around this involves finding the next valid GPS time and using that to
    create a fake GPS time entry. However, that next GPS time may not
    be locked or may have few sats as it is from the boost stage of the
    flight. Fix this by simply forcing the fake time packet to have
    4 sats and be locked.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0393830f85da5efc96bbdf0d9769b66019c34b33
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 15:13:35 2010 +1000

    AltosSiteMap: limit nr of tiles to 200x200

commit a08b2a6363c194195db92029743f6612676373ce
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 15:03:21 2010 +1000

    AltosSiteMap: never accept 0,0 as lat/long

commit 84e570d8a8a52e0d358582135ec1b3a12be94c26
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 14:45:10 2010 +1000

    AltosSiteMap: refactor tile collection

commit 71e487344395a8efc9cd279aad92f601ff4c6d3d
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 14:05:00 2010 +1000

    AltosSiteMap: thread safe tile addition

commit c040bcd06679484175542208fb564d0271a7fc1b
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 13:19:36 2010 +1000

    AltosSiteMap: try to get new tile construction right

commit c3994dd82d489289ebc99ff9c5fa88f560c023ac
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 13:07:11 2010 +1000

    AltosSiteMap: extend map if rocket goes far away

commit 835b903727a2eabda8d9659cc46e53301f92897c
Merge: 440a0f3f 87891355
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 11:15:02 2010 +1000

    Merge branch 'sitemap' into buttonbox
    
    Conflicts:
            ao-tools/altosui/AltosSiteMap.java

commit 878913551a1e4e3c8f2b39fa4aeb234880735a1c
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 10:55:22 2010 +1000

    AltosSiteMap: explain tile size better

commit 440a0f3f5130eb0c8e614691892be8c94e7fd3c3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 16:55:12 2010 -0800

    altosui: Set site map flight path lines to 6 pixels anti-aliased.
    
    Much more visible over the map.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a7dc3ba36bac81640a9498e0d0caf1470b57c19
Merge: e5b1adae ece2c86e
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 10:45:15 2010 +1000

    Merge branch 'buttonbox' into sitemap
    
    Conflicts:
            ao-tools/altosui/AltosFlightUI.java

commit 8df185cd95cfecbed8272dd1275d077c5b45535b
Merge: ece2c86e 1e712647
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 16:35:48 2010 -0800

    Merge remote branch 'aj/sitemap' into buttonbox
    
    Conflicts:
            ao-tools/altosui/AltosFlightUI.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e5b1adae9b23b98a6321986f5cd67c9d3166b87f
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 10:34:39 2010 +1000

    AltosSiteMap: better gps check, lower zoom

commit ece2c86e2641b2cd613791293526c492b1606aa1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 16:19:42 2010 -0800

    altosui: Rewrite info table to mix with scroll pane well. Fix startup size
    
    Using a single table for the info table means that the scroll pane
    automatically picks up the table headers and shows them above the
    scrollable view.
    
    This patch also fixes the application size at startup so that no
    scrollbar is required in the info table, and the window is < 800x600.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e712647dd6df1e77650db705f3ac32a3c8f6907
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 08:58:44 2010 +1000

    altosui: reindent

commit a59a204e188e40ec8848a0dc63d6de710cee3039
Merge: 82636305 37f0201d
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 08:56:13 2010 +1000

    Merge branch 'buttonbox' into sitemap

commit 82636305021c41d676f5f0f11378724fe0de0079
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 08:44:13 2010 +1000

    AltosSiteMap: be more polite about preferred size

commit 37f0201d724693528f37ac7d275f68f90cf94da0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 14:31:23 2010 -0800

    altosui: change descent tab formatting to four columns
    
    This places labels to the left of each field. For igniter voltages,
    it uses three columns for the labels.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 66ebd954d9c9a44a8db0ee713c682e39306fabd8
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 08:28:24 2010 +1000

    Add GrabNDrag.java

commit 72f5e05f9f0055f2cef8b840812f090556c94338
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 08:18:39 2010 +1000

    AltosSiteMap: major refactoring

commit b47517d4c2e49f6f7b9954d2c85f96397fe1103e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 14:06:37 2010 -0800

    altosui: re-indent

commit 6f8bc2ad20b715343e0510563ab0f14787ef3e07
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 01:34:52 2010 +1000

    AltosDescent: switch elev from height to range

commit 89f44c5587ea4f927d5e398b6af919df0d6561c3
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 01:27:01 2010 +1000

    AltosAscent/Descent: tidy up layout

commit 51e403145d28ac913e36d205077a613845596be2
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 00:17:51 2010 +1000

    AltosSiteMapTile: draw boost circle as well as landed

commit 25ffe1cc7823895886b4777f310b4bda1c80133b
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 00:07:16 2010 +1000

    AltosSiteMap: automatic fetching of map data

commit 20f714bbe3137de8fb7491b39985021fd1774930
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Nov 20 22:49:51 2010 +1000

    AltosSiteMapTile: seperate map and drawing layers

commit 58f8d069ce9488e2987b8e92caa69fe68cda7569
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Nov 20 21:06:37 2010 +1000

    AltosSiteMap: add autoscroll and grabndrag scroll

commit 74cab8503b51ba6fb05a4d12a031c749e870b0ef
Merge: 0ecf0331 9a99cabc
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Nov 20 18:20:45 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 0ecf033110084f1a8be98282d7029dc14f70dab5
Merge: 081fbd57 71c41ead
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Nov 20 18:14:30 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 9a99cabc1c34c657fc95246192ba6d330f5f22d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 00:13:58 2010 -0800

    altosui: Fix channel changing in flight UI to actually work
    
    Replacing the menu with a combo box required reworking the way events
    are delivered from that widget back to the channel changing
    function. Just delete the old magic and use the JComboBox action
    listener directly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71c41eadd12c3ece5fffce7669e4991778046d4e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 00:09:03 2010 -0800

    altosui: Initialize display thread state in constructor instead of run
    
    Some state will get set before run is called, initializing it there
    can be too late.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 081fbd5715f9d3d81d98e149fb95d40447c07a79
Merge: 90b9bc44 7920ed5c
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Nov 20 17:40:49 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
    
    Conflicts:
            ao-tools/altosui/AltosFlightUI.java

commit 7920ed5c34b088f45ce4213b061ddd1ffe22cee8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 23:18:51 2010 -0800

    altosui: calling thread.interrupt with null thread doesn't work well
    
    This was a left-over from debugging the previous patch.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c8dc3794c7b5fa5a5b43b1c461d6c8bb3ab425d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 23:09:15 2010 -0800

    altosui: When switching log files, don't terminate log thread
    
    The log thread automatically switches output files when the incoming
    telemetry changes. Don't use 'close' for that as 'close' terminates
    the log thread as well as closing the file. Create a new
    'close_log_file' function which just closes the file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 594e80572821f1848db062d0cff18ca8bf0d90ce
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 22:44:48 2010 -0800

    altosui: switch channel selector to combo box. Shorten displayed device names
    
    A combo box displays the current value, which is quite nice to
    have. Add a 'toShortString' for AltosDevice so that the window frames
    and error messages don't have extra spaces generated by the
    altos_device toString method.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa07afc73bc5eccff8464a2def05ad600da33c97
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 19 23:33:42 2010 -0700

    update turnon scripts to use stashed copies of stable release firmware

commit 9ffc2eb53a47e435f39b02896b0e43ae5f47f450
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 18:25:48 2010 -0800

    altosui: Use timeouts to recover from broken packet links.
    
    This puts timeouts every place the system reads from the packet link
    and aborts the in-progress operation if it takes more than a second to
    get a response.
    
    Also mixed in here are persistent igniter status displays for the
    ejection testing UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68078eab3c07d8dc83302747cf6f3dcb1797c6ce
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 20:44:29 2010 +0800

    doc: Document the 'Flash Image' operation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4bdda65488e8ef27d2889cb6cc8eda3c5d50e0a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 20:29:14 2010 +0800

    doc: git ignore generated doc files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0542085de2139ef562af068ec05fa73f47c73b1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 20:26:49 2010 +0800

    doc: Add preliminary altosui documentation
    
    Also, update the Makefile to allow for further documents to be added
    without a lot of custom rules.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e7a10f71803d60f8b34c5a91efd220449442769
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 17:16:03 2010 +0800

    altosui: Clean up global AltosUI configuration settings dialog
    
    This dialog had a mish-mash of styles and was confusing.
    Now it's got a label for each line, and suitable setters for
    each element
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f72f08839346fb225238420324f0edcd070e531
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 17:14:17 2010 +0800

    altosui: Unify datafile selection to AltosDataChooser
    
    Instead of having several separate intefaces, use a single dialog for
    selecting data files for graph/export/replay.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 24ffcf86c43290ce0f70fb4ee0984b3debdb8a5f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 15:41:30 2010 +0800

    altosui: Add igniter ground testing code
    
    Not yet hooked up, but the UI is finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 90b9bc4475011bead7117ed72fa5efa0f77b2813
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 19 13:30:00 2010 +1000

    AltosSiteMapTile: adjust scale to 1 nmi per tile

commit fa45336062523838ba8abb08427cdc4d9c7de7a8
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 19 13:17:29 2010 +1000

    AltosSiteMapTile: adjust centering calculation

commit fda93afcd8aa4133b0e5f008b824d072e338d0ed
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 19 13:02:05 2010 +1000

    AltosSiteMapTile: autoscale to about 2 nmi per tile

commit 483346a03c94b200692f5e6d59f3feee4dcf2ace
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 19 12:09:46 2010 +1000

    altosui: tile site maps

commit 939be6793238a275b7682ecc376fed14379cf044
Merge: e68fe945 1a4b6e96
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 18 05:54:06 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
    
    Conflicts:
            ao-tools/altosui/AltosFlightUI.java

commit 1a4b6e96f823035b113f01d1bdfd61afc1f33e25
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 16 22:46:29 2010 +0800

    altosui: Add igniter status to ascent and descent tabs
    
    Monitor igniters during all phases of the flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0eb41619544ead6d9dab3a8d024a12936c9cdd0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 16 22:20:00 2010 +0800

    altosui: Cleanup flight UI layout
    
    Use common constants for fonts and insets
    Shrink fonts so that the window is < 600 pixels tall.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcca333cda64be35f0c9fb0109eef1be3709dddd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 16 21:49:59 2010 +0800

    altosui: Add callsign configuration in AltosUI configuration dialog
    
    This callsign is used during packet communication.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1dbe3b69e6f95ef8ecd4cf959863b922ab47c66
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 15 11:08:00 2010 -0700

    add a paragraph about forcing TM back to idle mode if an accel cal goes badly

commit 39e371561469d8e5059638ffa4e7075f391de268
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 15 23:14:51 2010 +0800

    altosui: add reboot button to telemetrum configuration UI
    
    This lets you reconfigure and reboot telemetrum, including over the
    radio link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 257e97137325f5dbbd6aa034f20fd6937b67df90
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 15 22:38:35 2010 +0800

    altosui: eliminate menu bar, moving elements to buttons.
    
    This adds a new 'configure AltosUI' dialog to set the log directory
    and voice preferences.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 524644d8d8ce3f8a5a914ecfc7e2a8d474d89095
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 15 22:04:44 2010 +0800

    altosui: oops, missed a file in the previous commit
    
    AltosSerialInUseException.java just defines a new exception, thanks to
    java for making this live in a separate file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 511903704f7e1b22e88dd3e3cc35fd3c0583820e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 14 03:26:57 2010 -0800

    altosui: With --replay option, exit when replay window is closed
    
    Otherwise, the application hangs around forever.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 11c95f687b1f68d35fa1a0af2c4e7982b8bb226a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 13 17:09:51 2010 -0800

    altosui: Replace flight status table with labels, fix resize.
    
    There's no reason to use a table for the flight status data,
    replace that with a selection of widgets instead.
    
    Also, set all of the grid bag constraints for the various flight
    status displays so that resize does something sensible.
    
    Adds a scrollbar to the table display so that it can shrink.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcfa56498d1b65a213b8aba9cbd6c4806532383c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 13 16:07:04 2010 -0800

    altosui: Open serial device at 'new' time. Prohibit duplicate opens.
    
    With the per-serial UI, there's never a reason to create a serial
    device without opening it right away. This eliminates the bug caused
    by not opening the serial device for telemetry reception.
    
    Serial devices can now be opened only once; this eliminates errors
    when trying to reflash or configure devices while receiving telemetry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8463ffcaca6bcd31e645aba71c171f548dce96d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 13 15:19:14 2010 -0800

    altosui: Eliminate unncessary import altosui lines
    
    Java appears to automatically import every module from the current
    package.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 566c6486c8815ae241e0b116a93b1a0ff4783831
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Nov 13 12:19:12 2010 -0700

    continuing to work on the docs

commit e68fe9454352087889c560d95797922493117acb
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 14 00:59:01 2010 +1000

    AltosSiteMap: add targeting circles around landing site

commit 1e7e02987276847274493312202d22222c953149
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 14 00:57:45 2010 +1000

    AltosTelemetryReader: actually open serial port

commit 9c32b93ef5fb43558fb0179ea1b047e35b7ed6e8
Merge: 991541f5 a6f30fae
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 14 00:29:11 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit a6f30fae906bd87dff192c5fd4d10df283f99930
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 12 17:02:22 2010 -0800

    altosui: Add RF calibration to TeleMetrum config dialog
    
    I think that's the last user-settable value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bdc6166f3bc5ce3f8e55acb1484923781412e21
Merge: f1118717 5c6a5335
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 12 17:32:43 2010 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit f1118717780a81f9257d2eed7828b66538deb8a8
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 12 17:32:21 2010 -0700

    fold in content from Keith's email on the re-flashing subject

commit 7def9dd0d0a4ce9cf7c65de573100e664f278717
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 12 10:58:54 2010 -0700

    first cut at instructions on how to re-flash TM and TD devices based on email
    reply to a user who asked

commit 991541f57f065f429c6ec425efd6ac731280b2c1
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 12 23:42:42 2010 +1000

    better error behaviour if no map

commit 1bcfa22de7821984149db10cb79913efed36b41e
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 12 23:29:40 2010 +1000

    pull up maps for arbitrary locations

commit beb6c881ec006241c7d2820c64e5381131d41180
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 12 03:24:26 2010 +1000

    make infotable scrollable, revert its fontsize to 14

commit 0327c1da01a3f6ede01f05c1d775651a57fd0c68
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 12 02:08:58 2010 +1000

    tabs -> spaces

commit 81e7b43ecad666e2e2310c7c94184f888bc86585
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 12 02:07:41 2010 +1000

    add site map tab, at least for QRS launches

commit 5394548fa5c7bdbfcc01e8aa19e93e1cf6345e2a
Merge: 891e629f 75f7698b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 10 22:11:21 2010 -0800

    Merge remote branch 'aj/buttonbox' into buttonbox

commit 75f7698b99a661ed17a91748a99699fa6761772a
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 16:06:32 2010 +1000

    add compass bearing during descent

commit cc0a730de093c49be2a921101d27622b6f592e92
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 15:57:52 2010 +1000

    add compass bearing to voice output

commit 317ec72a34906faad88c6924e634617b074e71db
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 15:52:01 2010 +1000

    use grayled.png for off

commit 8503943e3613f8670b128012b12ff14fb54321d7
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 15:45:43 2010 +1000

    reduce font size for FlightInfoTable

commit 3ffaa5d1c00b28be20fd4a26deb7bd41d953e92a
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 15:43:05 2010 +1000

    read preferences for --replay

commit 1f3e091efdfb2fe6f06a066cac60f5d267b94856
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 15:40:37 2010 +1000

    add --replay command line argument

commit b16b873723ee3e5097e6725c59ce191119439ad7
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 15:38:27 2010 +1000

    use value_font for values

commit 891e629f6ba20654b614f3ca7211a0f1c92670cb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 10 16:28:19 2010 -0800

    altos: Use grey leds when unlit - easier to see

commit 5c6a5335a057be0219450b4b9889c647d8d4a012
Author: Bob Finch <w9ya@qrparci.net>
Date:   Mon Nov 1 14:36:41 2010 -0600

    Updated PKGBUILD-git.altos
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b0d31910da592e2f67c47c8fc3e15ce8135d5094
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 9 23:34:32 2010 -0800

    altosui: Add ascent, descent and landed tabs
    
    This completes the set of tabs for in-flight status information.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 22d00785188a880700cd372528189a7a15278da9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 9 14:40:58 2010 -0800

    altosui: Add tab UI with 'pad' mode.
    
    This creates a multi-tab interface for flight monitoring
    and includes a special tab for 'pad' mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb77e806ded99532dc7eaa39c1893f075b028af6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 9 10:21:34 2010 -0800

    altosui: Create abstract interface for flight data display
    
    This allows the implementation of the flight data display to occur in
    the flight UI instead of the display thread.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0a92c605e238277c9881545a7226e53b5dbc295
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 8 22:17:26 2010 -0800

    altosui: Fix more calls to AltosPreferences.channel()
    
    Oops. Two more.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 94f4a50d6430cc8280cbdaa9f39d3cb858d0e077
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 8 22:10:46 2010 -0800

    altosui: Fix channel setting at serial open time
    
    Was using the previous non-device-specific preferences API.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b17d276271faa8a420a1c8f6be17faaa0c7043c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 8 22:07:04 2010 -0800

    altosui: Create buttons for main actions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16916be51d746b1e1057b3219e5bec8f8814259e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 5 23:44:47 2010 -0700

    altosui: Split out flight monitoring to separate window
    
    This creates a per-TD (or replay) window to contain the flight
    monitoring information, allowing multiple monitors.
    
    This also adds per-TD preferences for monitoring channel.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca931b1c484bd6b64617370e81b16e169fdae1c2
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 17:47:44 2010 -0600

    update changelogs for Debian build

commit 811ced628d586134224c1b501b40ce9eb435fc7c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 6 16:42:27 2010 -0700

    altosui: Separate out jfreechart and jcommon directories
    
    This allows these packages to be referenced separately
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2c4d515ef9cc2cae8a8f2803e9498bb0794c4ed
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 6 16:25:49 2010 -0700

    altosui: Remove ability to graph data in .csv files
    
    There's no reason to support these files when the raw .eeprom or
    .telem files which generate them should be used instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d5caf6f2f4d9257e26aa4305b26c02d1b263fa24
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 17:14:35 2010 -0600

    remove the csv build dep, as that code will be abandoned

commit 43e23a60780191e3c6f61df44c5dd08cc8604c51
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 16:27:57 2010 -0600

    update changelogs for Debian build

commit 8103432bf7adfe6ee5bf3ee42e1672475e6edd5a
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 16:26:33 2010 -0600

    update changelogs for Debian build

commit 635066cd35fb24cacf8400a477ea4b4e3dd2c39c
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 16:26:19 2010 -0600

    update changelogs for Debian build

commit 4396aaaf34cda3751dcca0eceb05b4ffeb411cde
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 16:25:22 2010 -0600

    add build-dep on libcsv-java

commit 7475ab5804bf3fb12b1b755e850af90d5a15d3eb
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 16:19:35 2010 -0600

    update changelogs for Debian build

commit d8a2f4ceb1c70a6be976a78e2264c961de2f2277
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 16:18:45 2010 -0600

    add build dep on jfreechart lib

commit f0d1468ceae065f0cdae6f6ae3323dec5636f073
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 28 17:56:49 2010 -0700

    altosui: Add KML file export.
    
    Command line has switches now, --kml and --csv
    Export save dialog has combo box to select kml or csv result.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a119fd92532d53e552efe1f7c61e87181fcace0
Merge: 28da3406 82744c34
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 27 22:28:07 2010 -0700

    Merge remote branch 'aj/master'

commit 82744c3497d37650b88dee80be7956c4bd1cffb2
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Sep 28 15:27:07 2010 +1000

    Add callsign/serial/flight to graph title

commit 28da3406426437604125d332e4cda90d459df487
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 27 22:26:56 2010 -0700

    altosui: use Altos constants in graphing code
    
    The Altos class nicely defines constants for all of the flight states.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce7f59fbfb5a94a67a4ceced3cc371b4c6b6e5d1
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Sep 28 14:45:01 2010 +1000

    Hax0r graphing to support telem/eeprom files

commit e2b9f47a205348d38756c70e928a2a9183de6884
Merge: 7ef3ad0c 80320319
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Sep 28 12:55:47 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit 803203197e51e71e9c77b3610047fd5bf9a56c56
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 27 18:52:30 2010 -0700

    altosui: Deal with eeprom dates going backwards across wrap
    
    eeprom timestamps can go backwards as the GPS time stamps are
    recorded when the first GPS character is received, but not placed into
    the eeprom log until the last GPS packet is complete. If this happens
    at the same time the tick count is wrapping, then the tick count will
    wrap backwards across the 0 boundary causing time to jump forwards.
    
    Fix this by letting time go backwards across the tick boundary, which
    requires that we know when the first 'real' tick is read from the
    eeprom file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe7eba2e4af36cf29d8dc2378ac6985be04f68c6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 27 18:51:05 2010 -0700

    altosui: .CSV output: add link quality, gps hdop and sat C/N0 numbers
    
    This makes the CSV files contain all of the available information.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c89a34d1eb25155405b0036baeadc7bbfeade1c2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 27 17:11:48 2010 -0700

    altosui: Create iterables for log file scanning. Split out display threads
    
    Convert from log file reading paradigm to using iterators which is
    more idiomatic for java. Split more code out of AltosUI.java,
    including the display update threads for telemetry monitoring and
    logfile replay.x
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ef3ad0c9354c0484c25badc69334b59c7f355e2
Merge: eb74866e e66919aa
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Sep 24 10:28:06 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit e66919aa46193bd8c7a1e86fb32a3367dae121f5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 23 16:52:51 2010 -0700

    altosui: Require 4 sats for 'good' GPS data
    
    Wait for 10 consecutive GPS reports with at least 4 sats before
    reporting "GPS ready" state.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 34ca8c00f4be72c314baff4c96f1e2f010948454
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 20 06:30:49 2010 -0700

    altosui: remove unused ReplayThread wrapper classes
    
    These aren't used now that the replay opener dialog knows how to build
    a reader from a filename.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd010661ced6075f82a961625826665a3d8d1efe
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 14:00:04 2010 -0700

    altosui: Factor some UI elements into separate classes
    
    Clean up AltosUI by moving the two main tables to separate class files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb74866e919e8c661153847871f5a79e66d37296
Merge: af404b42 12605899
Author: Anthony Towns <aj@erisian.com.au>
Date:   Mon Sep 20 22:05:26 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit 1260589976c1a95848b298497fd251c4ee7d3f93
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 02:52:29 2010 -0700

    altosui: Write raw sensor data to .csv files
    
    For data export, provide the raw sensor samples instead of the
    filtered values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a4d7110debb88f4e906fee7c46f2badd561809d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 02:50:43 2010 -0700

    altosui: Use recorded ground acceleration when reading eeprom files
    
    The flight software records 1000 accelerometer samples and records
    that in the flight log. Use that value instead of using the very few
    samples recorded in the eeprom before boost is detected. This
    generates far more accurate accerometer data in the .csv files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af404b428bd742039afc25ff3850f76bc92c7c29
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Sep 15 07:24:04 2010 +1000

    Add JFreeChart to Makefile.am

commit 61590b8729831cb138b2ba6b88802c208d114753
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Sep 15 06:51:05 2010 +1000

    Add graphing.

commit 3d64f5a6511529ca53699190f4d54de1ba62a9bd
Merge: ec6da082 b9623f8e
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Sep 11 15:15:14 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit b9623f8ef26491e9fa14e2478295fe6f5cbbd87f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 10 21:07:14 2010 -0700

    altosui: Remember directory containing firmware files
    
    Instead of forcing the user to navigate to the firmware directory each
    time, this remembers the previous directory and starts there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f2204e0832b14b1edca4266a2cbc272141ecc2b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 10 20:55:05 2010 -0700

    altosui: set default .csv file name in file save dialog
    
    This uses setSelectedFile to specify which output filename to make the
    default in the save dialog.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e053ae1f2d09347123ac9fa79e46645378b4c70
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Sep 10 10:42:35 2010 -0600

    make the column headers comma separated, too, so they align with the data

commit ec6da0824474e46de842845d7b53fe1a1dde33ed
Merge: 7c2e4114 10310672
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Sep 10 16:11:34 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit 10310672a83a66dc630718b151d653fc066f8e59
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Sep 10 00:09:25 2010 -0600

    update changelogs for Debian build

commit 9d0e89e8ad8926dc8371fa809835a580ae49711d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 23:04:59 2010 -0700

    altosui: Stop parsing eeprom file after hitting 'landed' state
    
    Sometimes there are additional records found in the eeprom file; the
    reader is mostly worried about not losing anything, so it reads as
    much as it can. However, the last record written for any flight is the
    'landed' record, so we can stop looking at the file after hitting that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 67b6952f7126704478ede5575e5e938d18fcc329
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 23:04:14 2010 -0700

    altosui: Fill in time value of last Eeprom record read from file
    
    The last record is handled separately, and was missing the code to
    compute the time. Sigh.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b0b584cd0ca7542e65aac0c7897ad7ab4115122
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 22:55:47 2010 -0700

    altosui: Remove debug printfs from AltosTelemetryReader
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a80bfae15f1499c49f7ef47978bf0337d8120892
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 23:57:34 2010 -0600

    rewind packaging changelog, again

commit 78ce3120e5a53858ca0d43c734aa5d28b4948ce3
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 23:52:20 2010 -0600

    update changelogs for Debian build

commit 71c85613a28c24c3aad7b4aa3299d8677ef1268e
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 23:51:23 2010 -0600

    rewind packaging changelog

commit 7c2e4114a3a43f919a7a6c967d3f16e5d630f90f
Merge: ddc83b4c af200f5b
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Sep 10 15:50:01 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit af200f5b84555de0556b52146379f3934774a3f3
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 22:30:48 2010 -0700

    altosui: Fix telemetry file reader to handle tick count wrapping
    
    The telemetry reader was ignoring tick count wrapping, so you'd see
    time go backwards in jumps. Not useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96ca7051f60ea299e3e05bafbe5717fc83c3afd2
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 22:50:03 2010 -0600

    update changelogs for Debian build

commit 2d5e48c5dc0e822fdf430f43804c1e5e79fdbf84
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 21:28:10 2010 -0700

    Add --with-fat-dir configure option to publish finished stand-alone bits
    
    --with-fat-dir specifies a directory to copy the finished
    linux/macosx/windows stand-alone ("fat") packages to. A sub-directory
    will be created under the specified directory based on the product
    version number and the files copied there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd2b77b2a516a055f29191dcdfeb727e637aae86
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 20:59:29 2010 -0700

    altosui: libaltos.so is built with libtool -- it's in ../libaltos/.libs
    
    It used to be in ../libaltos
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72a5c1258db92d0ddd660bfa875e8e55cab47af7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 20:39:41 2010 -0700

    altosui: Remove some debug printfs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 031fd9a954f2e3447d0150eb4ecc81af7b620dca
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 20:36:12 2010 -0700

    Add firmware and libaltos to 'fat' target at top-level
    
    This ensures that all of the necessary bits are available to construct
    the distribution images.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcaa480b1dfeb2fd4044f9c4e1b6d50c46fc9984
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 21:29:20 2010 -0600

    update changelogs for Debian build

commit 48f57997452e17564e28fe3e37403f6f63d32dea
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 20:24:42 2010 -0700

    altosui: conflating USB product and vendor IDs is a bad idea
    
    We've now got a USB vendor ID called 'altusmetrum' for generic
    altusmetrum devices (old USB ID 0x000A) while the general vendor name
    for all devices is 'altusmetrum' as well.
    
    This patch splits vendors and products into separate name spaces,
    products are prefixed with product_ and vendor with (oddly) vendor_.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 632d276118ab04de67561104be650f8fb69a0450
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 20:34:43 2010 -0600

    update changelogs for Debian build

commit 1ac3d7e3ba52d1b0dc834eaa5d7886c730eaf307
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 20:34:22 2010 -0600

    initial cut at an altosui man page

commit 5c4e437975054d33604402591e1ea2f314932593
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 20:06:09 2010 -0600

    update changelogs for Debian build

commit 0ea75761416bff299233991e961ba25b6c7dcf89
Merge: 35d70c92 8ee3464d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 20:05:27 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 8ee3464d8064ebe1694c7b20177878c0d9961451
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 17:54:41 2010 -0700

    altosui: Display error dialog when AltOS JNI library can't be loaded
    
    Having an error dialog appear at application startup seems better than
    simply failing to present the device dialog later on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4224a7526e51eb8fbf1f0a31bae7ee68c6385095
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 17:52:46 2010 -0700

    altosui: Store libaltos.so in $(libdir)/altos
    
    It's not a public library, so hide it away in a subdirectory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e4c18777d982061f5e507a4d4f4f1cd4d685268
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 17:49:37 2010 -0700

    altosui: Need to have JVM include path substituted into libaltos Makefile
    
    The libaltos Makefile needs to find the relevant jni.h file, which is
    found in the JVM_INCLUDE path, all nicely located by the configure.ac script.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35d70c92307dd478bc619b2f6c5a88e155cdad28
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 17:27:07 2010 -0600

    handle versioning of ihx files (poorly) by just wildcarding the file name,
    which assumes there's only one matching .. probably ok on Debian?

commit c286ada6457579d64e9d8ca44b927258b4a561da
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 16:27:40 2010 -0600

    update changelogs for Debian build

commit 6c0ae7e966a81ece35bccbe89d626a58afe899a2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 15:25:18 2010 -0700

    altosui: remove FATJAR from all-local to avoid building fat .jar file
    
    the fat .jar file is used in non-native builds to run from a directory
    containing all of the freetts jar files along with the altosui jar
    file. We don't want this on a real install where freetts is installed separately.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 737a64c57a8f979f51c3fa6b3f214520c736cf8a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 15:22:14 2010 -0700

    altosui: hack to make JAVAROOT directory get created before javac runs
    
    This ensures that the JAVAROOT directory gets created by adding it to
    the variable used to set the CLASSPATH environment value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b456bd9d7bcd9d968e43c38eeb6fa6ad8c58f895
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 15:11:41 2010 -0700

    altosui: fix telemetrum.inf FFFE:000A product names on AMD64 and ia64
    
    This appears to matter to Vista. Dunno why.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16980b848651a6b20a0b458446f0a19fb517539d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 15:10:25 2010 -0700

    altosui: Add explicit requirement to create classes directory
    
    The implicit ordering doesn't appear reliable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15da683c2f747baef49c8b8d321a86faede0de30
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 15:51:50 2010 -0600

    update changelogs for Debian build

commit 012e7176954a6b74b3b667317be0f6dc41d7ab70
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 15:51:02 2010 -0600

    add libtool to build deps

commit 3e5824b9a71971ce99bfe38a1e860b421e265f02
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 15:43:47 2010 -0600

    update changelogs for Debian build

commit ddc83b4c401be965a9947782becf20cc8c54e6a2
Merge: afea6c26 3d49d5f6
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Sep 5 20:49:34 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit 3d49d5f69b41c27003dbc5ccf1899014bd13bd99
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 02:05:06 2010 -0700

    altosui: ensure that 'altosui' script is installed. Pass arguments along.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b61fec225ada6a9e252e4c7920101ee18c77cbdc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:55:56 2010 -0700

    altosui: eeprom files place 'boost' time in the flight number record.
    
    Instead of looking for the first state change record, use the Flight
    record to get the boost tick.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c653a4cba5fef8d49261cf1c024f3e86e9058c6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:52:36 2010 -0700

    altosui: Record flight number when scanning file, not when running
    
    The very first record in the eeprom is the flight number, but it is
    time-stamped with the 'boost' time, and so it gets sorted until much
    later, delaying the return of data until the rocket enters boost
    mode. This drops all of the nice pad GPS and state date on the floor.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38e1d87c8d449866faac026577fefa9a118428cb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:23:53 2010 -0700

    altosui: Use local .class files in the classpath
    
    This ensures that compiling only a few changed files will
    locate the old .class files instead of using a stale .jar file.

commit 9941b05a1d03dafd6cd899b5fe999ed769efb1d6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:21:14 2010 -0700

    altosui: Prevent voice altitude data from queueing up
    
    When flight status changes rapidly, the queue of voice data can get
    quite long. This change does two things -- first, it remembers when
    the altitude reporting happens due to flight events and delays the
    periodic reporting until a suitable time after that, second it ensures
    that the voice data has all been delivered before generating a new
    altitude report.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4dec5c36702d76dc95beada7c1d3222a638a2cbb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:19:11 2010 -0700

    altosui: Add AltosVoice.drain() to wait for queued speech to finish
    
    drain() blocks until all pending phrases have been processed, allowing
    the UI code to avoid pending data that will end up stale by the time
    it is emitted.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 410ba89eef9c9817eef81b702966cb88820ff7c4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:13:01 2010 -0700

    altosui: Start idle thread after the rocket leaves the pad
    
    This makes the first altitude report time consistently 10 seconds
    after launch, instead of some random time depending on when the rocket
    launched relative to the time the device connection was made.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6205547ec7191aab0259a8449520e966a96129e6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:08:50 2010 -0700

    altosui: When replay thread is interrupted, don't make final report
    
    Normally, the replay process makes one final report after the file has
    been parsed. However, if the reading process is interrupted to display
    something else, this report is just annoying, so don't make it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d99584fcfe43b22e8581874e0ac77ce3d635d48
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:03:18 2010 -0700

    altosui: Add elevation and range data to main display
    
    Reported by voice, it's useful to see these on the display as well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2d58f319a7c1a6a8ccc6a539722009996ba886ab
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:01:10 2010 -0700

    altosui: Eeprom files contain only one date; save it.
    
    While reading eeprom files, the GPS record is reconstructed each time
    the system sees the first GPS log item (the time field), but as the
    date isn't repeated, we need to copy it from the old GPS data record.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b2aa689bf3d61e4a3ebe7c828162d1be20aad0f6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 00:59:54 2010 -0700

    altosui: Remove debugging printf from AltosEepromReader
    
    These were in place while validing the GPS data reconstruction code
    that handles eeprom files missing the first GPS date line due to the
    record overwriting bug in old firmware versions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb0e7a59f0806734a4c959a3ce7c57f71cbe3986
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 00:57:38 2010 -0700

    altosui: Return AO_LOG_INVALID instead of exception for eeprom files
    
    When an eeprom file contains an invalid line, just return
    AO_LOG_INVALID instead of throwing an exception. This allows us to
    replay and parse files with extraneous serial communication.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c3a17c71a45207dd715d537704f161de9219f0d7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 18:49:22 2010 -0700

    altosui: Fix linux fat distribution
    
    Again, use 'cp -p' instead of 'cp -a' to get files into the archive
    instead of links. Also, make the shell script 'altosui' instead of
    'altosui-fat'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 828e9e4c68e3ac90b6ba2e9fd5f131a9975f7e4a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 18:39:58 2010 -0700

    altosui: Fix up Mac OSX .zip file
    
    Must contain 'altosui.jar' instead of altosui-fat.jar.
    Also, was using 'cp -a' instead of 'cp -p' which made files
    represented by symlinks not end up in the archive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 044fd27449c70474f51b99dec25fd23d3c03a559
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 18:20:45 2010 -0700

    altosui: Fix windows installer to ship correct files
    
    Was shipping altosui.jar instead of altosui-fat.jar
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 148b927c3b8bc7b7b5c5356392032faf2b1203d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 18:04:04 2010 -0700

    Add top-level 'fat' target to aid building distribution files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aed59e1c057c13e28fd368dc2592aa4628211097
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 17:59:11 2010 -0700

    Add version numbers to released files. Set version to 0.7.1
    
    Instead of using git revision counts for version numbers, use explicit
    versions numbers configured in the configure.ac file. Expose published
    files with version numbers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2808bba3efa1cff133cc060dabff06fab8b75388
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 17:58:52 2010 -0700

    Ignore libtool files.

commit bc183400ab93d5902c52851319999cc77f27bc81
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 17:35:17 2010 -0700

    altos: add some SDCDB config files

commit 887b11f6b9c81b9f15348d54017e700ca7dc5e55
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 17:27:17 2010 -0700

    Use autotools for altosui and libaltos
    
    This switches from hand-written Makefiles to automake with libtool
    for these parts of the system.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e844e8a0695e27af6f8e3e37a5e3bcc865b862e3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 01:13:42 2010 -0700

    altosui: Add icons to application and Windows menus.
    
    Use the altus-metrum icon for an application icon and a windows start
    menu/desktop icon.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9ea28504c646fc25791aab09b9e5faf73e0ac0c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 01:08:34 2010 -0700

    icon: add some icons for application programs
    
    altus-metrum.ico: Windows ICO file
    altus-metrum-16x16.jpg: 16x16 jpg image for java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f550677df016070430ed38bfa2b2be33f1b8c40a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 00:16:41 2010 -0700

    altosui: oops. renamed the nsis file to altos-windows.nsi
    
    And forgot to change the dependency in the Makefile
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c0988ddbf104ea729090c2e7e2a28cc6dc9e90f6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 00:14:15 2010 -0700

    altosui: ignore built files

commit ecb4a09535b6a8da0765010489a96e605dbdeb46
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 00:13:11 2010 -0700

    altosui: Add windows installer build using 'nsis'
    
    nsis happens to be packaged in debian, and it appears to build usable
    installers, which is all very cool.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf22923cd8b4f6f954718358b411b5b10d8e7b4d
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Sep 4 00:46:29 2010 -0400

    update changelogs for Debian build

commit 59798c6fd11502a9c8b66090c23ba50eb250692e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 3 12:43:45 2010 -0700

    altosui: Catch I/O errors on telemetry device, report to user
    
    This catches the USB device being unplugged and makes sure the
    user sees an error dialog in this case.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16d8d6a8853d09f683b13f9cda3c3174a0aab130
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 3 12:31:05 2010 -0700

    altosui: Must flush serial line after configuring for telemetry
    
    Without flushing the configuration commands to the serial device, it
    never sees them as the telemetry input thread doesn't flush.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4f64e95e31e2335470efc15df2ab357b7d197f3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 3 11:48:55 2010 -0700

    Revert "altosui: Deal with altos bug setting radio channel while monitoring"
    
    This reverts commit ba65e4aeb952a1cf49a77f1e24e235508fcea71f.
    
    Testing the old code

commit 71191ecef3ba0e00d0f8a7cd1a24982bfa44ec72
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 3 01:30:33 2010 -0700

    altosui: Allow 'connect to device' when already connected
    
    Opening another serial device involves shutting down the display
    thread (to reset its state) and spawning another one. Shutting down
    the display thread normally closes the serial device as a part of the
    process, and if this isn't done before the new serial device is
    opened, then the new serial device ends up getting closed too.
    
    Interrupting the display thread and waiting for it to stop before
    opening the new serial device solves the problem.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba65e4aeb952a1cf49a77f1e24e235508fcea71f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 3 01:21:57 2010 -0700

    altosui: Deal with altos bug setting radio channel while monitoring
    
    If the monitoring thread is active, then setting the radio channel can
    sometimes cause the monitoring thread to get stuck. I'm not entirely
    sure why though. For now, work around the issue by making sure
    monitoring is off, and the monitoring thread has stopped, before
    changing the radio channel.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e5ef42c2b22c6639d90631dbbb588f9fd2494385
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 3 01:12:24 2010 -0700

    altosui: Report telemetry CRC errors in UI
    
    Telemetry CRC errors can signal problems with TeleMetrum or TeleDongle
    units, so report them in the UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b3aa448f3a0f44137f7530b04b58967ba5f22f5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 2 21:11:29 2010 -0700

    altosui: build Mac OS .zip file to include paths
    
    Without the paths, the OS X zip file doesn't create a usable
    application structure.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cff0d1ef6b338b3d5ad9450d4d5f95df934cb5e4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 22:56:34 2010 -0700

    altosui: Post error dialog on invalid ROM config values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d8980f56a4f2c7d6f2ce667130706e0f04f8ded
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 22:56:12 2010 -0700

    altosui: Remove some debug printfs from AltosRomconfig class
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ee6cd41ed189c3166f76558ecada80917f40652
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 22:47:15 2010 -0700

    altosui: Hide internal rom config UI helper function
    
    This was getting mis-used by the flash UI causing the rom dialog
    'cancel' button to work just like 'ok'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a690c9795e8257d2a3225f905117681668a472f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 22:46:04 2010 -0700

    altosui: allow flashing to be canceled from the rom config dialog
    
    Was using the rom config class wrong, causing cancel actions to work
    just like 'ok' actions. Oops.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f07ad14a16dbf1b75c71784ceae303825c90ade
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 22:43:22 2010 -0700

    altosui: Abort flashing if debug port isn't working
    
    Check each command going over the debug port and make sure it works as
    expected. This commit adds checks for initializing the clock,
    selecting the desired program counter and running the flash
    program.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf30343aadd5039627a85319872685f743e64b16
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:55:41 2010 -0400

    update changelogs for Debian build

commit 59a40f6d5a2159b9009a3fa0737bb679efd5b32c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:55:01 2010 -0400

    another distclean fix

commit 59ff9180f11063c257746b895a167179b3a4ff7c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:53:16 2010 -0400

    and a few more distclean fixes

commit 3aafd70257b70b7c11ba9c55749157979bc61ea2
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:52:04 2010 -0400

    more makefile distclean target work

commit d5a6ad87c7a9ac03b2e694bed0a54b6cc4322a6f
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:50:16 2010 -0400

    update changelogs for Debian build

commit 14fa24ed93b3b1cec08a170004c6fb7f4d74f7e5
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:48:31 2010 -0400

    update changelogs for Debian build

commit 83552dfa0d38db9cdf3efc89e64e6c7896467856
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:47:54 2010 -0400

    add distclean targets to libaltos and altosui to all Debian package to build

commit 6f24d2a476759104a10b26b54faff2b18b0e208b
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:46:21 2010 -0400

    update changelogs for Debian build

commit d079bfe86ed40ff450ece445cf5f5e3970e44cec
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:44:30 2010 -0400

    update changelogs for Debian build

commit a470315e5d822a69ef5304512cf73c604c88e481
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 20:14:51 2010 -0700

    altosui: Remove Manifest.txt from git repo as it's built now
    
    This file is built with appropriate contents for each different .jar file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1177e0a684328422be5adc68093d0091a218a824
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 19:53:24 2010 -0700

    altos: Bounds check Skytraq GPS tracking data array
    
    Missing GPS serial data could cause the tracking array reset to
    get skipped, causing the array to be overrun, smashing critical data
    beyond the array.
    
    This was detected using the 'altosui' flash command to program a
    device from TM. Hitting the USB that hard caused TM to crash with a
    mutex error (3 beeps) after the ao_gps_task structure was overwritten
    with zeros.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 775acb89660cdee2f3c54c38297baefe39f2414c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 22:24:09 2010 -0700

    altosui: missed AltosReader.class in the Makefile
    
    This caused clean builds to fail to make this file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd2b9d958c2b7f846031b076ed51c4fbaaf2d68f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 31 00:20:06 2010 -0400

    update changelogs for Debian build

commit d006c5e1255433181aca4c8e6a277b2d1bc0841b
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 31 00:19:37 2010 -0400

    add runtime dependencies for altos binary package

commit c1c7d731e3774883fa0bb5538be225a59334d124
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 19:52:51 2010 -0600

    update changelogs for Debian build

commit c35632efb1919764e4b8581ed6fcf2bedd4bd517
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 19:37:50 2010 -0600

    update changelogs for Debian build

commit 2a004d17a13b4ff52d892bfdecff8ad3d0823f7c
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 19:37:17 2010 -0600

    don't build all the "fat" jar deliverables by default

commit 507e429db6638f82c32449e9c5ca06b46da30134
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 19:09:00 2010 -0600

    update changelogs for Debian build

commit 25764fcd1b65c3a5a817afdb5901ac30e8a5f0c0
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 19:08:29 2010 -0600

    update changelogs for Debian build

commit 4790f78aead8a816e5b247c022b2998ce3a94053
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 18:48:50 2010 -0600

    add a .gitattributes file, configuring the Mac and Windows binary library
    files with the export-ignore attribute, in hopes that this will prevent
    them showing up in source packages

commit 81318e5b7179b0311ab099043ecb04a25d763750
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 18:15:40 2010 -0600

    make invocation of 'install' pathless to work on more Unix variants

commit cbc72399a0f4d7429df0189bcdae683dd491cb9e
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 17:56:56 2010 -0600

    continue even if rm's don't have anything to do

commit a9a8d23c877e6f6c76857b7c85e3d43b4da1db27
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 05:49:11 2010 -0700

    altosui: Devices with USB id 0x000a always get listed
    
    List 'unknown' AltusMetrum devices anytime the UI needs a device
    name.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a94900b8862b99b4e317ea0ee3edd2a560f270c7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 05:48:23 2010 -0700

    altosui: build debian-style altosui too
    
    This adds the dependencies to make sure altosui and altosui.jar get built.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38ac388baf8125c0644b868a7aaf8eba1bdf990d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 05:28:37 2010 -0700

    altosui: Build linux, mac and windows archives on Linux
    
    This adds 'fat' archives for each target OS.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35d9a8214252dbe79aeb69ae47d2e5c58a654702
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 05:27:45 2010 -0700

    libaltos: Use overlapped I/O on windows
    
    Otherwise, reads block writes and vice-versa. Crazy stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7ba92317ac55272acbde12416448ebd17b983a6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 04:52:00 2010 -0700

    altos: Windows sends USB Out packets of 0 length. Ack them.
    
    This was an untested case as no other operating system sents 0-length
    out packets (they're not necessary). The correct response is to ACK
    them by clearing the OUTPKT_RDY bit so that another packet can be sent.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20a472cfe3369200150ea4ff067ceb28968dbcac
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 02:58:23 2010 -0700

    libaltos: Add pre-built Windows .dll
    
    This lets us create the windows distribution on Linux.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0300fe581c949232bc52b05fe9c1f6032cad6b60
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 02:56:25 2010 -0700

    libaltos: Add pre-built Mac OS X libaltos.dylib
    
    This allows the mac bits to be built on Linux.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d48c494325524bbeed10e0dc7300ed44e7e208e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 02:53:26 2010 -0700

    Update telemetrum.inf to include all current USB ids.
    
    Windows 7 has 'encouraged' us to split out each product into a
    separate USB ID. telemetrum.inf now has all of them listed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit df34bbe7d1c43b12ab6d610fe810b6e1683e4c21
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 02:49:49 2010 -0700

    libaltos: Improve Makefile
    
    Builds Windows .dll correctly now and sample app.
    Moves linux install target to end so it is not default
    Adds .NOTPARALLEL to disable parallel gnumake.
    Removes -g debugging flags to shrink file size.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd5374b8e660012ae4f8b058454fd101e0749ca7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 02:00:30 2010 -0700

    libaltos: Fix windows build.
    
    Need stdlib.h to get calloc/free defined, remove debug printfs, fix
    serial timeouts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 63c832394a829f41b8f77d075786530536360349
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 23:22:27 2010 -0700

    altos: shut down packet mode cleanly
    
    Instead of constantly bashing the packet master thread, let it shut
    itself down in an orderly fashion. It will shut down fairly quickly as
    all of the activities in that thread are bounded. Otherwise, the
    master packet thread might leave mutexes locked and all sorts of other
    horrors.
    
    Tested on Linux and Mac OS X and shown to be reliable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43619c13f749b79c096d1e8fdab3d5cfb5fd85f1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 22:42:23 2010 -0700

    altos: Abort radio harder when terminating packet mode.
    
    Make sure the master radio tasks don't get stuck waiting for an
    incoming packet again by aborting the radio each time we poke the
    tasks.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4a8569f61eddf690d00337543462235ecbfbe54
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 22:41:18 2010 -0700

    altos: flush pending output when terminating packet mode
    
    Just in case the last command sent hasn't been transmitted, hang
    around for up to a second waiting for the data to get across the link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1acd3c7ec167b1b18e4ea493e5978c938a91cc89
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 21:45:19 2010 -0700

    libaltos: cjnitest needs altos_flush now

commit 6527357d1f0e94faf9e7dacac10a39875131be7c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 21:43:46 2010 -0700

    libaltos: Missing OS_LDFLAGS on cjnitest build

commit b7fa1ea3338f63b8edcf8aacccb5e519ca0b213f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 21:41:40 2010 -0700

    libaltos: Mac OS X cannot use 'poll(2)' on serial lines.
    
    Who ships this stuff, anyway? Instead of blocking, we'll poll every 100ms now,
    otherwise, we won't be able to abort the read when the device is closed. Yay!
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e60c59123232915e808cee23ef89eb1a38ced34b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 21:40:21 2010 -0700

    altosui: discard invalid lines while reading Eeprom flight data
    
    This shouldn't happen, but it's easy enough to get back in sync by just
    skipping lines with weird contents.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae02b1590439d5c8dfb472cf1f83a14fdcfbaf11
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 21:36:47 2010 -0700

    altosui: provide separate flush_input/flush_output for serial. deal with monitor automatically
    
    (yes, this should be two patches, but the diffs in AltosSerial were merged together).
    
    First, this replaces the existing flush/flush_reply mess with two simple functions,
    one to flush output to the serial device, making sure that all data written will be seen
    while we wait for input. The other sucks any pending input off of the serial line and
    discards it.
    
    Second, AltosSerial now tracks whether the serial line is being used for telemetry
    monitoring. If so, it enables monitoring, otherwise it disables it. Eliminates a
    bunch of manual state tracking elsewhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit edcfb1bdf64772d3b83405ccf99385b8fea5d8e4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 17:33:59 2010 -0700

    libaltos: AltusMetrum devices use more than one USB ID.
    
    List all usb devices, picking those with AltusMetrum IDs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 236685807b63860ad033aa0254ce8f6d8d36d4ef
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 22:26:09 2010 -0600

    update changelogs for Debian build

commit 1cda15fdef2d9d3e54354bd5c43a0bcc7e3240cb
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 22:24:51 2010 -0600

    fix up for an 0.7 release

commit 4c5c7c7f198775c398c1ad2edafb3488384cc297
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 22:13:38 2010 -0600

    update changelogs for Debian build

commit 42055af5c6f17d14a2f1c6a2b5e1ce6d3b45a615
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 13:13:19 2010 -0600

    update changelogs for Debian build

commit 0bd4cc03b3bf23aa32b5ce1921078021d1d8a9c6
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 13:12:46 2010 -0600

    fix path to installed shared library

commit 99c1d9b4ef10ec4ebbee058ce0bb38c954a0a3a6
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:41:26 2010 -0600

    update changelogs for Debian build

commit cf65c6b8056c4af7c26b52ec6f9fbd3400cef638
Merge: 5f2f6a8f ae5eff7b
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:38:25 2010 -0600

    Merge branch 'bdale'
    
    Conflicts:
            debian/control

commit ae5eff7bc0b63047737223423009707bedcb00f5
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:37:36 2010 -0600

    Revert "lose the prebuild hook for now while I'm fumbling"
    
    This reverts commit a21b6bb60ac1c07ebd161534a4ea63bfde50dcdf.

commit de2e71c4923a0282df74dbe37d087c34b4ddd279
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:25:20 2010 -0600

    fix man page delivery path

commit a8dbe082960dc9bdd44c6e4b1198423c4e566029
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:18:28 2010 -0600

    install altosui man page

commit 5cc933039e4763b8675611c63b6147b42878a2bb
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:16:19 2010 -0600

    fix permissions on installed jar file, switch from ao-view to altosui in
    the desktop file

commit 138009e9fad01f79df4c3820fbc206f78688bdce
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:06:01 2010 -0600

    update Debian standards version

commit c280071b7db4e9a7af31dc5740eb8d27f137950e
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:04:13 2010 -0600

    fix up the wrapper's path to the jar file

commit 5f2f6a8f9ba56be867888758848bc7f152ccbd47
Merge: 63bd34cd 9d1b27fa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 27 11:00:31 2010 -0700

    Merge remote branch 'origin/master' into new-packet-format

commit 63bd34cd1b5a411489e8c3ab377f0fe0eec11f67
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 27 10:58:55 2010 -0700

    altosui: add elevation and range information
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72a18502e40f55cbba6418dc94315517881cd411
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 11:51:24 2010 -0600

    add an install target for altosui

commit 72c33a72ee105ec692dad62d6d9c1ad40b89bfe8
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 11:45:19 2010 -0600

    add install target for libaltos

commit a21b6bb60ac1c07ebd161534a4ea63bfde50dcdf
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 11:26:29 2010 -0600

    lose the prebuild hook for now while I'm fumbling

commit 9ea94411c9730f7a271366d309ab4827beeeb839
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 11:17:54 2010 -0600

    add a dummy install target

commit c443f43f8dee6e0fcbcecf9d09e948fd928b7af4
Merge: 29504311 2923cf50
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 03:08:53 2010 -0600

    Merge branch 'new-packet-format' of ssh://git.gag.com/scm/git/fw/altos into new-package-format

commit 2923cf5057f9cef110dd547d8677ea5b60e00796
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 27 00:10:29 2010 -0700

    altos: prepare for sdcc 2.9.1
    
    A few minor language changes -- non-standard keywords are now prefixed
    with __, such as 'at', 'interrupt', 'naked'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68967157cee620ebedcc8c2ffd6fc7656532087b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:55:44 2010 -0700

    altosui: command line args are converted to csv format
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e0506dc2014b7178f52b950e8c1cb820b35f9c6
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:54:53 2010 -0700

    altosui: Remove debug printf from AltosState.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 49364608b59de7421ab00d87d2685bc3b5f58411
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:53:06 2010 -0700

    altosui: When parsing saved telem files, errors shouldn't abort file
    
    Make syntax errors in telem files just skip the current line and move
    on to the next one instead of abandoning the whole file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a16db143fc7ca72dc91e7989420049192114642d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:50:51 2010 -0700

    altosui: Serial line is in UTF-8 encoding. Deal with it.
    
    We read bytes from the serial line and need to convert each line into
    a string. So, save the bytes and at EOL, pass the whole mess to the
    string constructor with the appropriate encoding info.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0942912163255523d923140c01afbdb5da1c19b5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:49:37 2010 -0700

    altosui: Add support for old (version < 3) telemetry files
    
    This lets the code read telemetry files from pre-released versions of
    the software. Not strictly necessary for production, but useful for
    analysing old files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e383595cd281687de903fb6176564bbef270cb83
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:47:38 2010 -0700

    altosui: AltosEepromReader was mis-setting boost tick
    
    It was supposed to use record.tick instead of the (unset) state.tick
    value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 651f6102ac79459fc8d5679d852c963dcb5bb3fc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:44:25 2010 -0700

    altosui: add rssi and distance/dir from pad to CSV files
    
    Just adds a couple more fields to the CSV files that might be interesting.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3dc67c1401976d6e9e2e942d5a4707a4810a0404
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:43:00 2010 -0700

    altosui: Add AltosGreatCircle constructors
    
    This adds constructurs from AltosGPS pairs and also one from empty
    args (which defines both distance and bearing as 0).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0fd423d0bf83bc5c3f9d39e9c09397fbe8caed2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:41:26 2010 -0700

    altosui: Move number parsing code to Altos general class
    
    This moves these shared functions to the global shared class.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68b2b66d7574dfd0bd5e3571b8ffad32ca5d2b73
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:37:29 2010 -0700

    altos: mark gps date written only after it gets into eeprom
    
    Data logging doesn't start until boost detect occurs. As the GPS date
    is only logged once, if that happens before logging is written to the
    flash, then the GPS date will never get saved.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa6c27df5db6bdae59d00affccb891854a6caa18
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 15:59:09 2010 -0700

    altos: print GPS state flags in GPS 'g' command
    
    Having the GPS state information can help with GPS debugging.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 34055129b4008f6a9833887b12dee39ffa408002
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 15:57:09 2010 -0700

    altos: always rebuild ao_product.c to track git version
    
    The git version is built into ao_product.c and saved in eeprom log
    files, providing useful diagnostics about the firmware revision used
    for each flight. However, if ao_product.c isn't recompiled, then the
    updated version won't be included. Force recompilation of this file
    each time make is run to ensure that the final output contains an
    updated version number.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 99400fdc0f19ef538fc362dde5c3ab5b7cdac409
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 16:43:38 2010 -0700

    altosui: flush replies from serial link when entering debug mode
    
    We use replies in debug mode a lot and depend on them matching the
    expected parameters. The case which caused trouble was using
    TeleMetrum to reprogram TeleDongle -- sending the 'm 0' command (to
    disable telemetry monitoring on TeleDongle) to the TeleMetrum caused
    it to reply 'Syntax Error' which confused the subsequent flashing
    operation. Flushing that reply gets things back in sync.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba086cc77273efe5397f60dcaccd1e3771441481
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 04:02:27 2010 -0700

    altosui: write USB serial number string while flashing
    
    USB serial number is encoded in UCS2 as a part of the string
    descriptors. Place those right after the other rom config bits so that
    altosui can find it. altosui is changed to write the serial number there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 220f3afdaa432c65f8ad45be7cdbe5c8a3616db3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 04:01:47 2010 -0700

    altosui: always display romconfig ui while flashing

commit f62b2aa08ebfd912b3c732397d43ff9f6162ec88
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 04:01:14 2010 -0700

    altosui: fetch existing romconfig for flashing

commit d93787284c8e514a929edb9f944c98ae0206a33f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 03:59:09 2010 -0700

    altosui: Delay mapping Flash UI until flashing actually starts
    
    The flash operation may be abandoned before it even starts; this makes
    sure the UI doesn't flash up on the screen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d44cbd621d2b113ac2b802ef17e3d8a660ce7f2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 03:58:00 2010 -0700

    altosui: disable radio monitoring while using serial line for debugging

commit 7bd220dfd9b3fb0e42eb90c3b37eb7b4169eb21b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 00:29:11 2010 -0700

    altosui: Add ability to create CSV file from telem or eeprom files
    
    This creates a comma separated value file to export data for
    external programs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 634a550149e7c344a22a637ba484f115592b1018
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 23:15:05 2010 -0700

    altosui: refactor logfile chooser dialog to share more code
    
    Move file opening logic into logfile chooser as it can be shared that way.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afea6c264c5ebf12f1d629bd4bc724da86d11b7a
Merge: 0e17853c 9d1b27fa
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Aug 24 00:02:31 2010 -0600

    Merge branch 'master' of git://git.gag.com/fw/altos

commit a55b132668a819cc26478a609cb79bd9190deb9d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 23:01:36 2010 -0700

    altosui: Separate out log file choosing dialog to share with CSV generator
    
    This dialog will be shared with the CSV file generating code, so split
    it out instead of duplicating it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 295043112ccde35092945c286596f9045ee6fa05
Merge: 2007288d ef8376c4
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 23 23:11:22 2010 -0600

    Merge branch 'new-packet-format' of ssh://git.gag.com/scm/git/fw/altos into new-package-format

commit ef8376c4dd8262a34e02b6bb9e19e907ac2f4330
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 22:08:30 2010 -0700

    altosui: make default Manifest look for built-in freetts

commit 56b906f535ac2f86bcab71addbbcd376d74f6a73
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 22:03:36 2010 -0700

    altos: Place rom config variables in fixed location
    
    The device serial number and radio calibration values are stored in
    flash, mostly so that TeleDongle gets them saved.
    
    Placing them in well-known locations (starting at 0xa0) makes it
    possible to find the previous configuration and to re-write it
    easily, without requiring the .map file.
    
    altosui doesn't have the .map file parsing code, so it relies upon
    this new technique. As a benefit, it reads the old values from the
    device before reprogramming it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4c0c099716197ef7539be0cf55bbb164f6804958
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 22:02:21 2010 -0700

    altosui: Finish device programming code
    
    Altosui can now reprogram Altusmetrum devices.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd2b44ddd61fadd8bf8ee6bf783ce019b1be7cc0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 22:01:38 2010 -0700

    altosui: Remove debug printf from AltosRomconfig

commit c3f57ffdb6c74de90d982eacd604e658ce9b00a5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 22:01:11 2010 -0700

    altosui: flush serial output before waiting for reply

commit 8857ac5e43eac6db8d5594b8864df497a712242b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 22:00:16 2010 -0700

    altosui: remove debug printf from AltosHexfile

commit b1758be01397fd49c441f40852f3558fe9343a2d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 21:58:50 2010 -0700

    altosui: Add lots more cc1111 debug interface functions
    
    These are sufficient to program the flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9e80f39bc39e5882bfe75f959b6501cb3277cd2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 21:55:49 2010 -0700

    libaltos: use pipe to wake up getchar on close. use mutexes

commit 86f7b9314b042f2e512fdf35067817e68532867b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 21:54:47 2010 -0700

    altosui: pad TM config dialog values to avoid clipping descenders

commit b8519b8669ff54741dd738ac343fbd2424451247
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 21:53:37 2010 -0700

    ao-dumplog: Fix --remote and --channel options to actually work

commit ebeb13688a9a5442c838641ede6ba0dc92c9a1a4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 14:32:58 2010 -0700

    altosui: Add debug dongle API, split flash UI out
    
    Create an API to talk through the debug port on another AltOS
    device. Split the flash UI out from the flash implementation so that a
    command line flash utility can be written.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f8d7978606abe544b1b9b6065c5480ed813b8ec
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 11:53:19 2010 -0700

    altosui: Add .ihx file reading code and stub out flashing UI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2007288da8a83e3aa925e11cc196f1c65aab2e5c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:00:15 2010 -0400

    working on java packaging details

commit 44b26dd550eef789e70082ccaa46d7d430c67bce
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:15:04 2010 -0400

    add freetts as a build dep

commit 0e17853c08f77debef3e8cf82e9cdb6a5079fc9b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 22 23:06:15 2010 -0700

    altosui: Set callsign when fetching eeprom data over the air
    
    The updated firmware places the callsign in each packet to comply with
    regulations, this ensures that TeleDongle has the current callsign
    configured.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 953bc3438b10b21f3d65d292356c4ab2de23cddd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 22 23:05:20 2010 -0700

    altosui: Add TeleMetrum configuration
    
    This presents a dialog with all of the user-settable options in the
    TeleMetrum set for editing. Combo boxes are used for everything except
    the callsign.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e1463d8e265dfd42c824d90088cd2a51b4cf8131
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 21 17:57:31 2010 -0700

    altosui: Make teledongle callsign configurable
    
    Teledongle uses the callsign in packet mode; this provides a way to
    set that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09252ec22d58e946494e4ca2cf367bf3bbe1cc50
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 21 17:09:41 2010 -0700

    altos: Define USB product ID in per-product Makefile.defs file
    
    This allows Win7 to tell which kind of device is connected purely by
    USB id as it doesn't expose the USB product ID string to user space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 22800dc094797e1e0ad99124198809d0360f7556
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 17 18:22:28 2010 -0700

    altosui: Select devices by USB vendor/product ID.
    
    Because Win7 doesn't expose the product name, we're swtiching to using
    the USB idProduct/idVendor values. This patch adds support for
    selecting devices by those new IDs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d14c96663a1027164fa30ed89b53f5a9d3fdb82b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 17 18:19:43 2010 -0700

    libaltos: integrate Windows support.
    
    This adds Windows support for discovery and I/O.
    
    The API to the library is mostly unchanged, except that it now exports
    product and vendor USB IDs as Win7 doesn't expose the product name
    anywhere that we've been able to find, so we'll be updating the
    firmware to use unique idProduct values for each product.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d1b27fa147fc8b765d5be165ebef7ee0f85bd37
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 11 22:11:50 2010 -0400

    update changelogs for Debian build

commit b6da90b4627dde1fe88240c38c51559d8f781dd0
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 11 17:15:39 2010 -0400

    update changelogs for Debian build

commit 4918f73fd0a0f3f5d52907f95a0ec385e901d447
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 11 08:50:27 2010 -0400

    update changelogs for Debian build

commit f63f16a70e4d0535667a6364cafcbff026ee6a8c
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 11 08:36:59 2010 -0400

    update changelogs for Debian build

commit 294d9c7db21eaf1e71504dbcca5040371abcce55
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 7 22:30:55 2010 -0400

    ao-dumplog: add --channel option (for use with -R option)
    
    Sets the channel when downloading data with the -R option.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f317f1324b69b4241f4bb192e164b33d712d5a43
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 7 00:42:25 2010 -0400

    altosui: Start adding code to write csv files from eeprom/telem files
    
    This is a start to code which can write out a csv file full of flight
    data from either an eeprom or telem input file. It's not hooked up,
    but the restructuring necessary is finished and the output is started.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4738cb2fc639adb1d9237e6c903479f0690dd81a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 7 00:40:59 2010 -0400

    altos: add callsign to packet mode, increase payload to 64 bytes
    
    Untested, but it 'should' work. Need to add callsign setting to packet
    mode users.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b7699a5907e64bc7547fcc27e73f4a35bbaabfff
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 6 13:09:21 2010 -0400

    altosui: Add comments to Eeprom reader

commit 0e917f3ff822616adb147517ac961422e5fedbfd
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 5 22:49:53 2010 -0400

    altosui: Compute flight state from eeprom data
    
    This lets eeprom files be used to replay flights.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0a9b445a4d379730b67720f8d7b682d5206a582
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:16:48 2010 -0400

    update changelogs for Debian build

commit e075b8623533965b1b77b77d38c2df32f5f77fce
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:16:24 2010 -0400

    update changelogs for Debian build

commit 410de62715a0830f03b0a65d6c7730dff51e6ef4
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:15:04 2010 -0400

    add freetts as a build dep

commit 0b85160c44d934f3d1352c1c07c296d01ceffc32
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:02:17 2010 -0400

    update changelogs for Debian build

commit d091099753d9cae01c4805812425ebea19ec09cf
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:00:46 2010 -0400

    update changelogs for Debian build

commit aed55ef1ce45b0f6e6fefeebf50be97607b31d65
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:00:15 2010 -0400

    working on java packaging details

commit d8bf05f7ad55964c9bce0551e58f4ef6c9f721ad
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 5 13:50:18 2010 -0400

    altosui: Split flight record out of telemetry class
    
    This will permit either telemetry or eeprom data to be used to
    construct the sequence of flight events for reply or data generation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85a670b5a904d6750d0f179ae307baeb8fc7cbd2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 5 13:40:17 2010 -0400

    altosui: Explicitly initialize Altos class
    
    Because the Altos class is never instantiated, the static initializers
    are never called, leaving the string to state mapping empty. Hand-code
    the call to the initialer instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02f17f2cd26189e2676a9dc0d86bd959ed0bc3f4
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 00:54:05 2010 -0400

    move to science menu

commit 9e8f7f75442303f9bfa99a0435984f5d36863ae6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 31 10:34:21 2010 -0700

    altosui: Split status and info panels into separate files
    
    This moves some code out of AltosUI.java into separate files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9c9b35254c693b3ade42b24d1e29eaf31e6ba2aa
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 31 10:24:56 2010 -0700

    altosui: Clear displayed data rows as needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 88e0137a60d7a13ddb7781befa76650e13ad44ae
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 31 10:07:38 2010 -0700

    altosui: Merge gps date and time classes into gps class
    
    No reason to split out the date and time information from the other gps info.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c3b2fe357d6acf28f48aeddd91693f10381be51
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 31 10:05:15 2010 -0700

    altosui: Capture config and version info in .eeprom files
    
    Instead of only writing the serial number to the .eeprom file, write
    all of the config values and all of the version reply to the .eeprom
    file. The config values, in particular, contain the accelerometer
    calibration data which is needed to correctly compute acceleration
    from the captured accelerometer data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e286eb61ad2a90746c1c31f95d26d5edb48738d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 31 09:57:49 2010 -0700

    altosui: rename AltosEeprom -> AltosEepromDownload, split out Altos constants
    
    Renames the eeprom downloading code and adds a new file to share the
    flight data constants across the various UI modules.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e3a9e3815db3f290e28b40ae02aa654f515cfc37
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Jul 31 10:55:27 2010 -0600

    update changelogs for Debian build

commit 8fc261c2b77bb8aab201a0649a84b5ffa236ce26
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Jul 31 10:55:07 2010 -0600

    see if my new freetts package works

commit 2f114c7ff6b0deddb790d34139bb11ac37f8c0da
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 13:30:36 2010 -0600

    update changelogs for Debian build

commit 7877496d47ce6d25210c0e1c6500666dbfc0876c
Merge: c71061a3 4cf39b13
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 12:07:49 2010 -0700

    Merge remote branch 'origin/master'

commit c71061a37d3d3be2855b61cde33d2371989d7681
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 12:06:06 2010 -0700

    Make altosui test script executable

commit 4cf39b13a574cb656999cf329f5b08e7f910604b
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:57:31 2010 -0600

    update changelogs for Debian build

commit d1848193d8208388e4ccdfbed4e5663a9ba04dd3
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:56:59 2010 -0600

    add a jdk to the build deps

commit 9ad4984124b6c05114feac4c4ac078dc248ce16a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 11:56:24 2010 -0700

    altosui: remove option to install to alternate volume

commit 2e797b18f0724caf7aaf96f45997998c7416f34e
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:50:57 2010 -0600

    update changelogs for Debian build

commit 89109f9dff3ce855d80da166e3362375282f745d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:47:37 2010 -0600

    ugh, fixing failure due to aborted build

commit 6fb8546575f6d99676dbb1dce190b0b7cf24b657
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 11:45:56 2010 -0700

    Moved Mac OS packaging to altosui dir

commit 865d5cdf8931ffc796f608e3e12d7c5a70832825
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:45:18 2010 -0600

    add swig as a build dep

commit 91d75fb3919f606a1956bf8c6423a8012d99a56a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 11:45:12 2010 -0700

    altosui: Switch eeprom extension back to .eeprom

commit 33ffd89d5a64c991d28bd7369b61e1faa18f605b
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:40:52 2010 -0600

    update changelogs for Debian build

commit 62b4cc51a0f54ef363cbff46caef80a0afecdea2
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:40:25 2010 -0600

    update changelogs for Debian build

commit 6f86db5e0360bef26b21336769b7635e3a11e160
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 11:24:47 2010 -0700

    Add Mac OS X packaging bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 950f0a8c54e5835ee5d8b0aea360bd8362c21bc5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 11:09:19 2010 -0700

    altosui: construct Darwin application directory
    
    This adds the necessary files and build steps to construct
    AltosUI.app on a Darwin system.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 669c5f52abb972a82ed6efbee7a8c7d20afb5cd0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 10:48:52 2010 -0700

    libaltos: build with java src encoding UTF8
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit efa0e034a161f4852947cbac06537d6ba4422a0e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 10:48:25 2010 -0700

    altosui: remove debug printf
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 53c279b9e96da8b69837ae84038a78ca5707f2a5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 10:45:02 2010 -0700

    altosui: Close serial, join reader thread, free altos_file
    
    Separating out the close and free actions ensures that the reader thread will not
    access freed memory or dereference a null pointer while shutting down the
    connection to the serial device. Otherwise, a race condition exists between the
    serial close and the thread join.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8bc9994d8bfde6116c8a509e70ddf45fc4decce
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 10:24:59 2010 -0700

    altosui: Remove unnecessary freetts .jar files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e33dbbba94ce42295e9fed9f4ba7e46f9eff1517
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 10:24:09 2010 -0700

    altosui: check for closed serial device before reading
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27a2d0c00acf78628428c20ab68e2bfba06340da
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 11:02:38 2010 -0600

    update changelogs for Debian build

commit 537492dc961ee6a1945b1041ee3cc0d3f519a42c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 11:01:21 2010 -0600

    update changelogs for Debian build

commit adf6cbcba23e24a3824f7e242ec37baa2750ab94
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 10:59:18 2010 -0600

    update changelogs for Debian build

commit d0fd53bdab2f480cd43b6d7010c2094f4fccda91
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 21:49:23 2010 -0700

    Reset GPS ready status when GPS comes unlocked on the pad
    
    If GPS becomes unlocked, then report that in the UI and via
    voice.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5fd225c3a52445ecdc7c04fac5e3d9a0db177c66
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 21:01:41 2010 -0700

    altosui: report rocket ground bearing at landing only if known
    
    if state.from_pad is null, then there isn't any data to report.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2d772164af95a35ea0f5d2413a5be67de9a210f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 20:18:36 2010 -0700

    altosui: Replace device dialog. Center eeprom monitor.
    
    This adds a custom dialog for selecting device, which makes it look
    much nicer on the screen and allows the user to double-click on an
    entry to select it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea32290704a8ca468f01172166b561833b20c954
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 19:37:02 2010 -0700

    altosui: Fix Save flight data monitor layout, add cancel
    
    Use GridBagLayout to improve the appearance of the flight data monitor
    widget, add a cancel button to stop loading data (useful if the
    connection is wedged).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce90f3fe2aa6e23695ccccb36a8e6e614a08ba31
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 17:08:42 2010 -0700

    altosui: Add progress bar for eeprom downloading status
    
    This has a progress bar tracking the state and block count while
    downloading stuff from telemetrum.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6599e9576c3da9325a1731144c1b8bc4943184c0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 15:41:34 2010 -0700

    altosui: Add eeprom data capture function. No UI yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a6040e143ecc7830cc1c0114de85f3b72c067eb
Merge: 024d0773 554a97ef
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 13:29:51 2010 -0700

    Merge remote branch 'keithp/macos'

commit 024d077302f91bdb17abe70d3211ab0949dab8b9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 13:29:21 2010 -0700

    Remove debug printf
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 826061eaca88c0dd75051a6006ef6703c91af595
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 13:10:11 2010 -0700

    Add voice test command for help in adjusting volume.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71da54a5ce255395376a44586782ab8b6f3b289f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 13:01:52 2010 -0700

    Make voice and channel menus work.
    
    Stores voice and channel data to preferences.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e76b9cc32bbcc5176d9bdd6f8d79778024627382
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 12:24:53 2010 -0700

    altosui: Catch errors opening USB devices. Limit list to relevant devices
    
    Avoids a segfault when failing to open a device. Limit listed telemetry
    devices to just TeleDongle units.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 172a2817dde6718724f2b5fad5a7761801446fa0
Merge: f2a006fd 81bf2042
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 11:20:22 2010 -0700

    Merge branch 'macos'

commit f2a006fd98045066bdf429cc142d033e9feb0a8f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 09:31:09 2010 -0700

    Make ao_log_data re-entrant as it is used for both sensor and GPS logs
    
    Because ao_log_data is called from two different threads, failing to
    make it re-entrant would cause the 'log' pointer parameter to get
    overwritten if another thread asked to log data while the eeprom was
    busy writing out a block.
    
    This would cause the second thread to re-writing data from the first
    thread's address, but without re-checksumming the data as the checksum
    is computed before the log mutex is taken.
    
    The bug can be seen by log blocks with invalid checksums.
    
    Here's what happens with the ao_gps_tracking_report and ao_log threads:
    
      ao_gps_tracking_report                ao_log
    
       Writes a bunch of records
       *blocks* in the eeprom flush
                                            sets ao_log_data 'log' to global 'log'
                                            computes checksum for 'log' block
                                            *blocks* on ao_log_mutex
       Wakes up
       sets ao_log_data 'log' to 'gps_log'
       writes remaining records
       'gps_log' is left with svid = 0
       *blocks* on ao_gps_tracking_data
                                            writes data, reading from
                                            the current ao_log_data 'log'
                                            pointer which points at 'gps_log'
    
    Making ao_log_data re-entrant fixes this by ensuring that the 'ao_log'
    thread has its own copy of the ao_log_data 'log' parameter.
    
    I made this function take an __xdata restricted pointer so that it
    could be passed in the dptr register instead of needing to go on the stack.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 554a97ef455c801dcab825815f44520f96f4c3f3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 19:29:38 2010 -0700

    Force java source encoding to UTF-8

commit 81bf2042ca39eb106b789e5a08647c3114669358
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 15:29:28 2010 -0700

    Java voice reporting cleanups.
    
    Make sure it says something at the end of a log file replay.
    Make sure it reports max speed after motor burn out, and max height
    after apogee.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f2f38f2a9fb0c106e2c6b60cdc205292ce329ea
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 10:18:20 2010 -0700

    Java clean ups -- use varargs where possible, remove AltosSerialReader
    
    Add methods that format stuff using String.format for voice and serial
    link, remove AltosSerialReader class and just embed that in the
    AltosSerial class directly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 734cd15ccff691f851359518ce6118f29dc9f88d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 10:18:09 2010 -0700

    Remove directories as .class file dependencies; it makes them get rebuilt all the time

commit 809feb75e2155e84aebfcc431867edcfd9054670
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 01:22:56 2010 -0700

    Clean up altosui build a bit

commit 3784578a40dcc61f447435cfdf22e13c409cb9c0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 00:16:15 2010 -0700

    Add application icons for Mac OS X

commit 2c273710ea9b76ebee4101893f9fe84be8a02354
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 00:11:58 2010 -0700

    Add Mac OS X packaging files for altosui

commit a58c44cd904e5429b807e5c23913051ed6484edc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 00:09:41 2010 -0700

    libaltos: build fat 10.5-compatible library
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e3285575e0c7d029e799258587e965779990099
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 00:09:18 2010 -0700

    libaltos: make clean remove all built files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb8507975c6e081de2e909eca6faaa8f868b609e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 00:08:38 2010 -0700

    libaltos needs -I. on all systems
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a782026f6b19e84ffd44f1ae1b466363474bd30
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 18:10:07 2010 -0700

    Darwin doesn't have strndup.
    
    This provides a private version of this GNU extension.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b51497597868a40df039dd3ca11b35a6258bbbb3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 18:04:10 2010 -0700

    Re-enable Linux support for altosui.
    
    This steals code from cc-usbdev for scanning the USB tree and uses the
    same tty code as on Darwin
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9153c4f2c71ed965822fcfe5112d2bc38506baf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 17:04:04 2010 -0700

    Re-enable freetts

commit 17188f36fe18c23bc2eb877ac9a01b7693f4b863
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 17:03:47 2010 -0700

    Present list of altos devices in nice format

commit 005e2d6a7bb3b0546b0c1273296875621632ec6d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 15:42:48 2010 -0700

    Switch AltosUI to libaltos for device access
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c726d8f6eb861801d7543552beab6ee2c920c96f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 15:41:39 2010 -0700

    Add libaltos which talks to USB connected altos devices

commit 05111d5be4d37bedaaee6415d6ee27347e6a112c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 12:52:17 2010 -0700

    When the EP0 IN buffer is full, don't panic, just skip sending another
    
    If the host doesn't pull the IN packet out of EP0 before sending
    another SETUP command along, the IN buffer will still be busy when we
    try to reply to the SETUP command. While I don't quite understand why
    this would ever happen, there's no need to panic about it, just drop
    the reply packet on the floor.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0647950b76bfa9942e4f8cf87353f2b724099f4
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jul 21 14:26:36 2010 -0600

    fix text since TM only has one led to blink

commit 8eda9fe94a7fd40cb84f50e17e64956f1584ebdc
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:24:32 2010 -0600

    update changelogs for Debian build

commit cd8aa79de72b8b6b3a26d0c2522e94c621b70f13
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:24:01 2010 -0600

    update to latest Debian standards version

commit 3284c7516e302e6db403d18866924ad926ffb2a7
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:20:08 2010 -0600

    update changelogs for Debian build

commit 8f1933717e3acfbcb09191da6e79a7944f91f9d9
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:19:27 2010 -0600

    reflect documentation file name change

commit 2cf1ef555a7feceeb1c333b273c19dd848e8d03f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:15:47 2010 -0600

    update changelogs for Debian build

commit 74c67fc466118b86b4eb5173f7a6886ae220a985
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:14:27 2010 -0600

    add build dep for sndfile

commit 0794ab1e13313fa49b7caf01aef20b052ad78a88
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:10:01 2010 -0600

    update changelogs for Debian build

commit 15a6791ba8f8313b6b55752c3fa7dc254d56dd5c
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:08:56 2010 -0600

    update changelogs for Debian build

commit e747954b6a9e71705f619684df8a118a909b1039
Merge: bd40a5b4 695879db
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:07:22 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit bd40a5b431847c071f5c486d754eca5627e5e3b9
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 02:12:03 2010 -0600

    significant update

commit 695879dbccfc5ec6b79698653c58814158f91686
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 14 19:07:02 2010 -0700

    Switch DBG pins to GPIO when using any debug commands. Reboot to restore.
    
    If you want to use TeleMetrum as a debug dongle, you need to flip the
    three pins used to talk to the remote debug port from SPI mode to GPIO
    mode.
    
    This patch doesn't provide any way to get back to SPI mode, so you'll
    have to reboot the TeleMetrum to write out config parameters or log
    flight data after using any debug commands.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9ec6be0e92dee01f7aac006ef6f7779c1da1b36
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 3 17:42:36 2010 -0400

    Telemetry code was mis-computing RSSI
    
    The RSSI data from the hardware reports in 1/2 dBm increments, and so
    must be divided to report plain RSSI numbers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 62294ea3830d3ea261a8761edc9fa6f98201d321
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jun 24 12:38:23 2010 -0700

    update changelogs for Debian build

commit 4766b13d1241fa585907c6f77707d2d4b3ccff75
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jun 24 12:37:55 2010 -0700

    update changelogs for Debian build

commit 52834517c0706b1f16fb81643a42dc1c1997e00a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 21 15:53:33 2010 -0700

    Abort any in-progress radio operation when changing radio channel
    
    In monitor mode, the current receive operation must be aborted so that
    the radio channel change can take effect without receiving a
    telemetry packet on the old channel. Aborting any in-progress radio
    operation will make sure that happens.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5933eaa44fe45027b856f1303dd657b974eb53e7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 21 11:44:32 2010 -0700

    ao-postflight: was walking off state.data array

commit 11d155d558d0b121b66f089adee0a47d71f65a78
Merge: 544003a8 24393eab
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 16 21:54:06 2010 -0700

    Merge remote branch 'mjb/master'

commit 544003a8da0248fd6f3c62ded86af74ab7cdadf6
Merge: 267923e5 93c1e29b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 16 21:52:23 2010 -0700

    Merge remote branch 'origin/master'

commit 267923e56e22b3635a21f42ef77a3a36158bc273
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 16 21:49:43 2010 -0700

    Add special code for USB panic's.
    
    The USB system may panic if the hardware isn't ready for IN data when
    the driver thinks it should be. This adds a special panic code to make
    figuring this out easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50ae347bf9de49ccfc92d26888f36e155fb406a3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 16 21:48:04 2010 -0700

    ao-view: disable radio telemetry monitoring during channel change
    
    This makes ao-view disable the radio so that the channel change has an
    immediate effect rather than waiting for a packet on the old channel.
    
    Note that this should also be fixed in the TM code itself so that this
    change wouldn't be required.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 24393eab0ea085f2d0224b59fdc3c00693e5d3a9
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Jun 17 14:04:01 2010 +1200

    Extension to KML output format, and minor bug fix
    
    Extended KML output by breaking flight into coloured segments representing
    flight state. Add extra statistical information to description bubbles
    visible in Google Earth when clicking on links in My Places.
    
    Fix Bugs:
    * output kml to file provided as argument.
    * move kml coordinate output code to take advantage of nsat calculation
    * remove superfluous %9.2f format specifier from raw_file output.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 93c1e29b07c331a5ca6e0f647b9d2e9266ed3014
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue May 18 23:12:45 2010 -0600

    updates from Bob

commit bb46c9a1da5788a082e4483e576a5a6d3963507b
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue May 18 00:26:28 2010 -0600

    update changelogs for Debian build

commit 16c4cae7ebed7bd3ee0f12b8872bf950574f17e8
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue May 18 00:26:00 2010 -0600

    update changelogs for Debian build

commit bc89d962c87b50e5487628f8ca25e4443ac4823d
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue May 18 00:24:03 2010 -0600

    merge the altusmetrum-themes package

commit 0c6cf621dfd8339b8bc3915750a3147235f1331b
Merge: 32e430b8 563a9dcd
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon May 17 23:59:43 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 32e430b8a5f93b312f6359b4d553bad92ed37b19
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon May 17 22:43:19 2010 -0600

    merge in a derivative of Bob Finch's mere mortals guide as a getting started
    chapter

commit 563a9dcdfef42718370c49f16cc2271642b3e055
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 17 21:30:57 2010 -0700

    Finish basic flight monitoring UI with voice using FreeTTS
    
    This captures telemetry data to log files and presents flight status
    information in audio form using FreeTTS.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69092ffd23ac1928d5c84413fd00c2423f313fc2
Merge: 3c2211ad cc002c0a
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon May 17 20:10:46 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit cc002c0a43a02845ba67d1a61828be382f307b2e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 16 22:31:23 2010 -0700

    Fix telemetrum.inf, tested by Adrian and Keithp

commit 3c2211ad7877d622435bc9e8c9c0b01d62be6ff0
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 13 15:37:37 2010 -0600

    typo fix from Bob

commit f0433c83d76e90d78fb86a1f4a2f145f3c57fb25
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 13 01:27:39 2010 -0600

    updates from Bob

commit 0f05cf06e3f1ec510b11d993d9038211ac66c97b
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 19:54:04 2010 -0600

    update changelogs for Debian build

commit 6bd85138c1bfbc1d8b78dce1501870a65a64db36
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 19:53:40 2010 -0600

    lose the quotes since they apparently aren't necessary

commit d639144b9bb840fbbced199738787ec054eddf12
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 17:04:41 2010 -0600

    update changelogs for Debian build

commit ae6854df00579ea1c3486f1bf8f19443d5ac9498
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 17:04:13 2010 -0600

    update desktop file for conformance with current standards

commit 7191d74e680a63728f5eb139069a674fef969e6c
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 16:45:00 2010 -0600

    update changelogs for Debian build

commit 68eaaa694bb7bf20642ad11eac8a13c1c8e21b7d
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 16:44:14 2010 -0600

    add desktop file

commit 9d3d09578381bb6e6f88c39b0e945371bbc22c5a
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 16:34:49 2010 -0600

    add desktop file provided by Bob Finch

commit 3cc1dad3b497524ffef61190dd68908cb19e8c35
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 16:28:35 2010 -0600

    add initial package build scripts for Arch Linux from Bob Finch

commit 1b8671bd0a00cec6ae4ccf442cd007b18af82fb0
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun May 9 01:41:00 2010 -0600

    lots of updates

commit 53b9a9bc28a9278249ff37f92110c21380e93cda
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 6 13:59:23 2010 -0600

    update changelogs for Debian build

commit cde60f16f6ab2cdd5010a0e106ae312d144947cf
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 6 13:58:31 2010 -0600

    Revert "Merge remote branch 'remotes/origin/fix-reset'"
    
    This reverts commit 314d27a73c903fef2968dabac3d5313573713460, reversing
    changes made to fa77db2ffd8a749c93767db5a6311131e00473ae.
    
    For whatever reason, this is utterly not doing the right things today!

commit 8be04df7e1e0a369ffb1137c6e2ec63585e3c935
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 6 12:48:00 2010 -0600

    update changelogs for Debian build

commit 314d27a73c903fef2968dabac3d5313573713460
Merge: fa77db2f 823fc0ac
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 6 12:47:30 2010 -0600

    Merge remote branch 'remotes/origin/fix-reset'

commit 823fc0ac27b8df9b4ba1ca0f229b431baf5b46dd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 5 12:50:39 2010 -0700

    Don't change dbg clock while changing reset_n. Use 20ms everywhere
    
    This changes the reset code to be more conservative about changing
    things at the same time, and also sets all timings to 20ms to make
    debugging with the scope easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa77db2ffd8a749c93767db5a6311131e00473ae
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 5 02:34:41 2010 -0600

    update changelogs for Debian build

commit 8b6767e24a88482dbd3d4c4c969a0be08917d22b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 5 01:32:46 2010 -0700

    Use ao_delay to sleep for 2 seconds instead of trying ao_sleep
    
    ao_sleep doesn't delay for a specified time interval as much as one
    might want it to.

commit e6bb80975fde20928a830170f0821d59a8c72690
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 5 01:31:57 2010 -0700

    Fix all stdio reading functions to be __critical
    
    Oh, right SDCC has '__critical' to mark sections of code that need to
    run with interrupts disabled; no need to use EA = 0 and EA = 1.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff03cdf746b83542ebcca00d32e6cc69ccfc122d
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 5 01:57:54 2010 -0600

    update changelogs for Debian build

commit 8702f497c4278648303eced1aed5bd76d559521a
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 5 01:57:11 2010 -0600

    initial attempt at a telemetrum turn on script .. needs work

commit 01cefa181b04e53c20109ef8f3ffff633744da73
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 5 01:56:51 2010 -0600

    update changelogs for Debian build

commit 45a1c2d2dfb69e5269ef2756fcd0f734b48d41cb
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 5 01:54:33 2010 -0600

    update changelogs for Debian build

commit f7ff3278bb670df59d7425a014cfe8e3718fea3f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 5 00:44:42 2010 -0700

    Disable interrupts while reading from stdin
    
    With multiple input source support, there is a lag between asking a
    device if it has data and then waiting for more data to appear. If an
    interrupt signalling additional input arrives in this interval, we'll
    go to sleep with input available.
    
    This patch uses a big hammer by just disabling interrupts for the
    whole process.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa9ff021d683764a43800eaa18ea0c9be5134939
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 4 21:42:54 2010 -0700

    Revert "Add optional 's' command to packet slave to enable/disable slave mode"
    
    This reverts commit e7dc7fab787df63a4de72c8450e94092eb04d7db.
    
    This patch didn't work, and magically appears to break flashing TM
    from TD.

commit 8c95f33686f69da717013ec2c25dbcd99c03aa45
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 29 17:48:44 2010 -0600

    more text created during SFO->DEN flight

commit af0613ffc178b9b1f011c315923f92f2581fe53e
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 27 00:18:43 2010 -0600

    update changelogs for Debian build

commit 99094f02bf4849ba1f6b9842ded6c39d894320f7
Merge: 641e76c5 75d8ffd4
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 27 00:17:37 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 641e76c5d419dab057298541b3a7546877643198
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 27 00:17:15 2010 -0600

    add some RF usage information from an email reply sent today, and re-indent

commit 75d8ffd4eadf31d50b2f58c021530c17ff1bdc66
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 23 13:53:25 2010 -0700

    Autodetect flite voice registration function
    
    Old versions of flite exported the function 'register_cmu_us_kal'
    while new ones export 'register_cmu_us_kal16'. This patch just checks
    which one is available and uses that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97f4874d19ec05c81a04a3ecd06abffcf7fbfafc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 22 16:25:35 2010 -0700

    More ALtosUI changes

commit e7dc7fab787df63a4de72c8450e94092eb04d7db
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 22 14:53:44 2010 -0700

    Add optional 's' command to packet slave to enable/disable slave mode
    
    This option has been selected for teledongle so that you can use slave
    mode and hook two teledongles together over the RF link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f4383394b5d2b275b21e3ce8040d8cb9e48bb375
Merge: 5f93cf8c c879b178
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 18 08:36:07 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 5f93cf8c73555f43c14b1b0757f264bde69e9b8a
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 18 08:35:43 2010 -0600

    capture work done on SFO->DEN flight

commit c879b178d83c9a9a521f42a960b10e19b11cee92
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 10 22:09:57 2010 -0700

    Increase reset switch time to 100ms
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3a2e1221735d54dc3f2b97b4e75ed6f33ab8227
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 10 15:01:14 2010 -0600

    update changelogs for Debian build

commit 9394393c24c0a96b94319f2d0aa78fb498a121c9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 9 17:51:01 2010 -0700

    Only have the slave return a packet if it received one.
    
    When the receive is aborted to switch modes, it's important to not
    immediately re-acquire the radio and try to send a packet as the
    aborting thread won't know to kick the receiver again.
    
    This prevents the 'C' command from locking up as it tries to stop the
    packet slave before turning on the transmitter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce39372a3aeffff1a08d609e63164a00cf974663
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Apr 9 13:50:49 2010 -0600

    wrong Yaesu model

commit a832c7e9d9e9e420e1281136188bd53b34c56464
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Apr 9 00:10:03 2010 -0600

    update changelogs for Debian build

commit c0ee1ae25e1d18138d8372f47085de48ffada344
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Apr 9 00:09:21 2010 -0600

    file changed by auto tools

commit 25e69ebfec94560e0714cf2cc623dc9697b4ea99
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Apr 9 00:08:32 2010 -0600

    update changelogs for Debian build

commit ea5d4f01d18d93d032f05933041b7b6881289780
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 8 22:45:04 2010 -0700

    libflite may forget to reference libasound

commit 4b02f293e9c32a568fad89558274f21157e7d473
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 20:08:07 2010 -0600

    update changelogs for Debian build

commit 5c3b6e2d1989bcaa19ae3e294f297ec3e5648a53
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 19:56:40 2010 -0600

    update changelogs for Debian build

commit 01e524f11a67390a8ea1f20aa2d611909b4da363
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 19:55:05 2010 -0600

    choose a better set of docbook xsl files

commit f93c9bf3695862db31f2c3b3bc5a7bb24ef3766c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 8 17:28:17 2010 -0700

    When changing RESET line, delay 20ms
    
    The GPS data sheet suggests a 1uF cap on the reset line to ensure it
    is held low long enough for the power supply to come up to voltage. TM
    v1.0 loads a 0.001uF cap there, but in case that isn't large enough,
    it could be replaced with the larger one. This change makes sure that
    even with that larger value, the debugging link will be able to reset
    the target.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit baaaac499cfbc1286ae55374cfdc796d32983b92
Merge: a4356b9b dec9971d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 8 13:31:23 2010 -0700

    Merge remote branch 'origin/master'

commit a4356b9bcf679c4d7b88fbbad77a98ecb0f80098
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 8 13:30:16 2010 -0700

    Use 16-bit flite voice (which appears to have changed symbols recently)

commit 447c121fc1ceb878e45718ad1364a5349965a59a
Merge: 10330d23 53ca3f98
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 8 11:46:56 2010 -0700

    Merge remote branch 'origin/master' into altosui

commit dec9971d70f17067ba0051206851b49c7604ac85
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:43:03 2010 -0600

    update changelogs for Debian build

commit 6629ec52def8917ad033847812a1adc4c3e9c947
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:42:47 2010 -0600

    lose the url entirely for now

commit a1539a075a0cc79c9122fea878d9a20ee722a18c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:41:42 2010 -0600

    update changelogs for Debian build

commit 934434ffb3514fe9ff95692784750d7c5217a5d3
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:41:28 2010 -0600

    fix typo in url

commit 8a067cd0eebbec313fc39086747ef618f2d1cf37
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:36:18 2010 -0600

    update changelogs for Debian build

commit 05ad58389fa3814ecb56344bf4ec3a3e025920a2
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:34:54 2010 -0600

    need another build dep

commit 6fbdc7037db185f03bd5ff96b9d9320646572df7
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:28:49 2010 -0600

    update changelogs for Debian build

commit 8f1d47e9cd61738e516d15fc97d5730d80611e87
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:28:20 2010 -0600

    update changelogs for Debian build

commit 10330d23518c94a8b791193a97a6cc07b1c9a97c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 6 00:58:00 2010 -0700

    Enable telemetry monitoring
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e10e43eff9de3f034da49c4f88728fb933f5035
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 6 00:56:57 2010 -0700

    Tasks may move in task structure as a result of ao_exit
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a7fc7901cd591c93d9d0cffeec2977ebb17554d4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 6 00:55:19 2010 -0700

    TD reports "not-connected" when GPS has 0 sats

commit e064d05da87926c19fb665b40fb280fb59328183
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 6 00:54:52 2010 -0700

    serial port read function cannot be interrupted. poll every 1 second

commit c099a67d9ea37e731e0eca318102560281ac240f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 5 22:42:05 2010 -0700

    Interrupt running replay thread when starting another replay
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc600a0389720bc7e435dbda8bec080ef19e0c58
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 5 22:21:46 2010 -0700

    Add Linux device discovery
    
    AltosDeviceLinux.java scans /proc to locate suitable devices. This
    will be hooked up to the UI shortly.

commit c28646d72005daeadb70b95fd3b0050bd752cc55
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 4 20:55:30 2010 -0700

    Switch TeleMetrum from v0.2 to v1.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d22ba55ae0e056530a727df50f14ad853d79a2c8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 4 20:55:18 2010 -0700

    Clean up some altosui comments

commit 6251e89c6eea655769f77bc18e98e79c99cf3cad
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 4 19:54:46 2010 -0700

    Don't abort the radio when enabling telemetry monitoring
    
    If telemetry monitoring is already on, then there isn't any point, and
    if it's not on, then presumably there isn't any radio work to abort.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b0b99f30c4e00689e9faceb363a5c7284541c6be
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 4 19:48:50 2010 -0700

    Make ao_radio_idle keep trying to get the radio to idle.
    
    Attempting to abort a radio operation could lead to a hang if the user
    of the radio jumped in and started using it again before the task
    attempting to abort woke up. This change just keeps smacking the radio
    until the radio goes idle long enough to detect it.

commit 0e7abc9fedec568b431c983d3df1b0b29f4f10e3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 4 16:32:04 2010 -0700

    Use RXTX for serial comm. Add logdir preference saving

commit c66eebad323e4572bb7cc23bc476ee144f03e9b8
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 3 08:02:44 2010 -0600

    rewrite urls in docbook format

commit 3d34c488c5b71020d86f83156fd821fd860bf214
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 3 00:02:44 2010 -0700

    Make .jar file

commit 4bea4c327e002ce8f88218f0d840af7c1521bc35
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 23:25:02 2010 -0700

    Remove unused cell renderer class

commit 4ad062969ae8a608b8428620579bbe114e580a11
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 23:20:38 2010 -0700

    Remove GPS data missing from skytraq. Save max height/accel/speed

commit ebd49d4ec6b0b60c85b2de45cfe2e36add8fe9bf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 23:05:40 2010 -0700

    Report current gps nsat, not last locked nsat

commit 3f9b66b307ee88172151e3bee58e50f5acbde109
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 23:00:30 2010 -0700

    Clean up GPS data formatting

commit 9cc48698ec14c34d437baad7b6540edc31e9741c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 22:47:40 2010 -0700

    Fix state updates

commit 6d523ee4dad3b9890d3cf05852459101fe7e26ea
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 21:48:41 2010 -0700

    Fix status update

commit caa0bf49668344937483190d1c258bfa32971d19
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 21:44:00 2010 -0700

    Fix up table formatting

commit a579402f428dd6a0529505069d1846f70b83ab5d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 18:10:59 2010 -0700

    Display table of flight info. gps is not working yet though

commit 65079f84ea64220fa928c3ad96652fed159bf74b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 16:07:40 2010 -0700

    Steal C code from ao-view

commit 02f2be90879b682b6e648cf2debc83223d127b9d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 13:37:52 2010 -0700

    Add telem parsing code

commit 8c600abf87c95f8f214b5e56ff6eab955795dff5
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 1 23:56:47 2010 -0600

    crudely incorporate "day in the life" info from web page

commit 53ca3f98aeb70cb780031fee788de950e4388cf6
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 1 23:39:42 2010 -0600

    tweak copyright assertion

commit 6454e309858aeef7912e862de8632618d89b4205
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 1 18:31:14 2010 -0700

    Fix windows install file

commit 584ab100640a07dec6e06829e73b7260d17d2232
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 1 18:30:56 2010 -0700

    Add Windows install .inf file

commit a06bee96e648d9ded8776f3d6cba9505e7be1a60
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 31 23:05:03 2010 -0700

    Add telemetry data parsing code

commit 7f233369e32c3254165ee251df0a3dbc21ea5a29
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 31 13:49:54 2010 -0700

    Start adding java-based UI

commit 76768804e68ed09421d7a48cb0b390f102ce2d76
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:26:35 2010 -0600

    make lintian happy

commit eb3cc3e9b60ec23acbb7d797affa743d671801ab
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:19:48 2010 -0600

    update changelogs for Debian build

commit 00f49c8fb0aa38331360bdb85c32bcebe60dcdc3
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:19:07 2010 -0600

    fix typo

commit f03ed0876c67b58624abf0c14bf73444b0322d3c
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:18:37 2010 -0600

    update changelogs for Debian build

commit b41e617080fe825f7810ee5eee52ea37f7618ec6
Merge: 28e40ccf df7bda1f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:15:32 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
    
    Conflicts:
            ChangeLog

commit 28e40ccfcd80ab8764d4aa235257cea4d193a0c1
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:14:47 2010 -0600

    update changelogs for Debian build

commit 20d4d410e0fc04fe192e309811eed6c0194fa5a8
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:11:40 2010 -0600

    initial harness for documentation

commit 9801ff7de21027935f52ccabaa3ff157e22d21ce
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Mar 15 12:04:18 2010 -0600

    move gbp.conf into debian/

commit df7bda1f32b0049c3878c325ea0b55999f3980e3
Merge: 23da4f3b a7042fe7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 12 10:38:26 2010 -0800

    Merge remote branch 'origin/master'

commit 23da4f3bcdd1d780c9e1f6b68ad2fb309fcae6ba
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 12 10:37:32 2010 -0800

    Document the ao-dumplog '--remote' flag for radio-link downloads
    
    The --remote (or -R) flag uses TeleDongle to fetch data over the radio
    command link from TeleMetrum. It's been there for a while, but the man
    page failed to mention it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93df98898f8cd199ae13158bc4f65e3494c954ad
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 12 10:35:12 2010 -0800

    Round radio calibration value instead of truncating
    
    The radio calibration function in the bring-up code was truncating the
    radio calibration value which caused the resulting frequency to
    always measure above the target frequency, instead of trying to get as
    close as possible. This change will result in a closer frequency
    match, but may sometimes be below the target frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a7042fe7d065d1da1252be5ad43e3c9856214dc8
Author: Bdale Garbee <bdale@Deborah.(none)>
Date:   Fri Mar 5 19:11:11 2010 -0800

    update changelogs for Debian build

commit eda5e1166a97766aa22561beaa1086ba4e19ee16
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Mar 4 17:33:39 2010 -0700

    update changelogs for Debian build

commit 6e61170d42936c18cd6efba6f4c14af616a30745
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 28 18:24:46 2010 -0800

    Need to duplicate new altitude conversion code in aoview.
    
    Altitude conversion is now done with a smaller table and interpolation
    instead of a giant table.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4e17e6d3844ae682a0e7a9469a522359bac77b6
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Feb 27 17:36:13 2010 -0700

    update changelogs for Debian build

commit a1478f65538fdaac7b58ffbd958a035b74956099
Merge: 901fce5f bbf8c9f1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 15:19:33 2010 -0800

    Merge remote branch 'origin/master'

commit 901fce5fe3e2762406079ecaa787612b5ed4b34a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 15:18:47 2010 -0800

    Add .gitignore for ao-bringup
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7aab73a265841aac817ea34235dd1eb819debf76
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 15:14:04 2010 -0800

    Fix up LED colors for each product.
    
    Different products assign different color LEDs to the two available
    LED drivers (P1_0, P1_1). Make the LED color pin assignments
    per-product (in ao_pins.h), then deal with not always having a green LED.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d6d8d76ec65373ffee70add75d183f5c4168f61
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 15:11:44 2010 -0800

    Eliminate deadlock when writing config from radio link
    
    Writing the 'Saved\r\n' string would fill the packet buffer and cause
    a flush to occur, which would need to wait for the radio link to
    receive and transmit a packet. The radio link always re-fetches the
    radio channel number when lighting up the radio, so it need to look in
    the config space. If the config mutex was held by the config writing
    process while the radio was trying to get the channel number, then
    we'd get a deadlock.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f1956ebadd7bf46b84a05a0c383b6404ca26b344
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 15:10:16 2010 -0800

    Leave .ihx files in the build directory too - easier to debug that way
    
    sdcdb wants the .ihx and .cdb files in the same directory, so humor it
    by copying the .ihx files to the src directory instead of moving them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bbf8c9f1748af3f1fac08ddf80ae98da2e9b5727
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Feb 26 15:21:12 2010 -0700

    create a turn on script for lighting up TeleDongle v0.2 boards

commit 461d4a1948e112ec7353caf88967391d876469dd
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 26 10:33:13 2010 -0800

    Add LED test

commit 5d7a3a5fbc0af4621c67a6fd51a9c9d5ae688fa5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 25 16:40:13 2010 -0800

    Fix and document the ao-rawload --run flag
    
    This allows ram-based programs to be loaded and executed easily.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e60deca147c85a064719dfad14ccabd1049bbbd
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 25 16:33:34 2010 -0800

    Allow product names to have suffixes (like board revisions)
    
    When looking for a board by product name, just look at the prefix of
    the name instead of requiring an exact match. This will allow products
    to have board version suffixes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f4d5790a284e2d02dd7568fbca90402fa5ed1aea
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 25 16:32:57 2010 -0800

    Add ao_radio_xmit to help test boards without flashing them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7d551b0078acb1596a9b9023c3df6dbfa46213c
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:30:23 2010 -0700

    update changelogs for Debian build

commit 2f45953ee54034209a23c254e65da36e44cf075f
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:29:47 2010 -0700

    un-muck changelog

commit 540f86678853e7ea80ae91f3f2ec0ec88c5b1ca7
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:27:51 2010 -0700

    debugging

commit cdccd92f6ed97be7385e84de5694064cb8f43946
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:25:28 2010 -0700

    conditionalize use of git on executability of /usr/bin/git binary

commit 54dd7a200e6956aace5a580d4c4d6a10a13c654b
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:22:45 2010 -0700

    update changelogs for Debian build

commit 4b6b28530206c6fdbe46699b81746fbbcab5b148
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:22:20 2010 -0700

    see if this works

commit c74958d3e8c5ce8006a9f9f6853238fce0c77432
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:13:29 2010 -0700

    move git-using variable declaration into the prebuild target

commit cf091a7252eba09902a42a3cfe7b4d6a343907ce
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 16:44:44 2010 -0700

    update changelogs for Debian build

commit deccc10f0305c0cd02bf6317d6dc9d2ae38c3dac
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 16:43:32 2010 -0700

    add gawk as a build dependency since strtonum is a gawk extension

commit ac45da6e61597dcdb119b976f7301b2cc7fdced4
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 14:57:26 2010 -0700

    update changelogs for Debian build

commit 24912821b3230b8357b9e0094cd69fa0bccc5513
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 14:53:27 2010 -0700

    update changelogs for Debian build

commit 82fdbfe1229d1ea5e6906ea240d54b3da73d9a69
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 20 21:35:43 2010 -0800

    Must install .map files for ao-load to work
    
    ao-load uses the .map files to rewrite the serial number and other
    config parameters into the program flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5215c2bd9249a285fc834db0c453fb3e7daed87
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 20 21:20:05 2010 -0800

    Add back stack size checking to altos linking phase
    
    This verifies that the stack start specified during the compile
    will work with the resulting program
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18eeb79026f7e5c54bf99435537c024427011a36
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 20 21:05:45 2010 -0800

    Quiet make output.
    
    This borrows ideas from the notmuch project to reduce the command line
    clutter seen when compiling or linking stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 004c2a9b7a4b44ef71ca60482573e8e9d8c6ce93
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 20 20:36:08 2010 -0800

    Update .gitignore files

commit 84c93bb2fc4558a5e4654794ba90e730a84eaf67
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 20 20:22:16 2010 -0800

    Change altos build process to support per-product compile-time changes
    
    This creates per-product subdirectories and recompiles everything for
    each product, allowing per-product compile-time changes for things
    like peripheral pin assignments and attached serial devices.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd0a42e0e96dcb8ecc9e999f70bcf70692692af9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 20 20:21:07 2010 -0800

    Change barometer conversion code to shrink conversion table

commit 876e9a10b9096ead85fbe08ec9a6a0329cf7cbd4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 13 16:42:27 2010 -0800

    Log GPS data on pad after boost detect.
    
    This wakes up the two GPS reporting tasks and gets them to report out
    any existing GPS data to the log file. To make sure the timestamps in
    that GPS data are accurate, this also records GPS time on receipt of
    the GPS data instead of when that is logged.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c83615567b4567f3dc45a7f7b894943b45fbb65c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 7 00:25:22 2010 -0800

    Pull in a bit more data for filtering the start of the boost

commit f8967607b3dda0c0ce7afe8bb077da2da5ed3dcd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 7 00:24:56 2010 -0800

    Compute daytime using GPS as time base

commit 2a6350149407c7d2e7d143906c40c5e331248aeb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 11 18:48:56 2010 -0800

    Missing ao_mutex_put in gps_dump

commit 9856b7c4397afcecc8f541af9a83824e817b3612
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 16:31:50 2010 -0800

    Switch to using internal cc1111 temperature sensor
    
    v0.2 has no temperature sensor, and several of the v0.1 boards didn't
    get a temperature sensor loaded. Use the internal temperature sensor
    on the cc1111 in all cases instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c2533be15858774ef9381aa8c8344356fd5b971
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 22:06:19 2010 -0800

    Force idle mode by shorting the SPI clock to ground at boot time.
    
    This allows you to override the flight mode detection code in case the
    accelerometer calibration is broken somehow. Hold the SPI clock shoted
    to ground until the LED comes on, then remove it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 28346736a7799c0767e54511d9949cd61d35e471
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 20:57:48 2010 -0800

    Add simple gps dump command 'g'
    
    This just dumps out the data in a very simple format to verify the GPS
    receiver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a6082a8b4501ac4cb18584ace1f0c40e088e5484
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 20:57:29 2010 -0800

    Remove flash debugging printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 05bb953830604721c9a49dd56256b86f3666b5ff
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 20:42:57 2010 -0800

    Don't set ao_flash_setup_done until we're actually done.
    
    Because we're accessing this variable outside of the mutex, we need to
    make sure it isn't set until the data it covers has been initialized.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 327e5e782958e516a7b7a786ab6c176b0decb8b8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 20:04:42 2010 -0800

    Dump config block from read/write config and flash_status commands

commit 05e5bb2d330b755967d06fb859585c81f5f5fbb5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 19:46:46 2010 -0800

    Dump more flash parameters for the flash_status command

commit d4c8895b349998e02e03ed83466a0ca7afb3d99b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 17:57:52 2010 -0800

    Add 'f' command to display flash status register contents
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1334f712f01543adb10809bc1a3ca120e27290b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 09:55:04 2010 -0800

    Add at45db161d.h header file for new flash part.
    
    Forgot to add this when I added the driver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0d4c1b06d27e850d233f8ddf8fe32912bf0ec8f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 01:29:41 2010 -0800

    Remove green LED and temp sensor from v0.2 code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc8d18736239b14c2ec48a40a01515912c5c25e6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 01:22:06 2010 -0800

    Add AT45DBxx1D driver
    
    This driver supports the AT45DB011D through AT45DB321D DataFlash
    parts as found in TeleMetrum v0.2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3bab7e66d25988f5d63ec139c8814a85b983f8f3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 19 20:32:18 2009 -0800

    Remove dbg driver code from telemetrum/teledongle
    
    The only board with debug outputs is the TI dongle at this point, so
    the debug modules were disabled in TM and TD some time
    ago. Unfortunately, the code was not removed then.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eddb82390a0ecb07ef83c04861993842906b03ab
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 19 15:31:36 2009 -0800

    Ensure that ao_alarm waits at least the specified time
    
    Because the timer tick may happen soon, it's important to delay by
    another tick to ensure that we don't wake up early.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 598d168bd6552c3756e4b0267de44147eadab9f6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 19 14:03:11 2009 -0800

    Disable monitor mode before attempting radio test.
    
    If monitor mode is left active, then the radio lock will not be able
    to be acquired for the radio test.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4cf1446680d8b47396bcda338e8df7af395d102
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Dec 19 13:53:38 2009 -0700

    update changelogs for Debian build

commit 10d1bbcd9709a5eee8d50989215242b16feb7232
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 19 11:34:16 2009 -0800

    Use ao_radio_get/ao_radio_put in packet code.
    
    The ao_radio_get function both acquires the mutex *and* configures the
    radio channel and frequency. Failing to use this in the packet code
    would leave the radio frequency unconfigured.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a15abc1882a3bdd2c980eed169f3b80337528390
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Dec 19 12:15:29 2009 -0700

    update changelogs for Debian build

commit bbb152c712801653374a8f82869e2e8bf41f7279
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Dec 19 12:05:40 2009 -0700

    update changelogs for Debian build

commit 7ac8efea5d60b81adccdc1e38ac4c13facfae7c9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 15 23:58:29 2009 -0800

    Add --cal to man page

commit 5481082b18226a0de6b377215b3b330bdbc4a6c6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 5 19:50:38 2009 -0800

    Allow radio calibration to be set from ao-load
    
    This moves the initial radio calibration value into const memory where
    it will be used if no eeprom configuration value is available, either
    on an unprogrammed board with eeprom or a device without an eeprom.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46f03ab3145a61139c8ca6fc99e8f2798728b5a9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 5 15:36:12 2009 -0800

    Re-order config values. Change frequency to cal
    
    Place more often used values at top, and consistently call the radio
    value 'calibration' instead of 'frequency'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf29a62532fec12e6af2d2f3a6624882c863e933
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Dec 5 11:03:42 2009 -0700

    update changelogs for Debian build

commit cd49847f3125df1733f298b56a43e8027ab5ce05
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 4 23:38:26 2009 -0800

    Add radio calibration configuration.
    
    The crystal we use is only good for 20ppm, which generates a fairly
    significant error bounds at our RF frequency. This commit adds a
    configuration variable that sets the RF frequency control variable so
    that the output frequency can be adjusted.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c671a3f31f54715284beef5baa4a72ca922e4018
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 4 23:36:54 2009 -0800

    Make ao_cmd_decimal produce both 32 and 16 bit values.
    
    ao_cmd_lex_u32 is produced in addition to ao_cmd_lex_i so that
    functions can easily read 32-bit values from the command line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e6d6ad66ce177eb6e49eaa04b1ecc6426f4bbdbf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 4 23:35:40 2009 -0800

    Remove send_serial and serial_baud commands.
    
    No longer useful, and they take up space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce7325cefbbe91054c1e8174cf40a6c687f6694b
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Dec 4 21:02:07 2009 -0700

    update changelogs for Debian build

commit 9a1d7dd78c07d18954ef620b6ed25d6701df21e2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 4 14:35:39 2009 -0800

    Change default callsign to "N0CALL"

commit 291e2004e77debdc1543912cf11043c849305de8
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 26 11:18:37 2009 -0700

    update changelogs for Debian build

commit 40533095a96b6c6364eebdc4b7d53c4eabe72e9a
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 26 11:16:04 2009 -0700

    update changelogs for Debian build

commit ab1075e7219b02258c1613d93379582be4168947
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 26 11:15:13 2009 -0700

    change home URL in control file to be the AltOS page

commit d34dcc5f3616e59ee90ed172770fe2a3eb1e0cac
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 26 10:40:07 2009 -0700

    fix absolute path in debian/dirs, add Suggests for slim-altusmetrum

commit ea40561b36519a5dcabedabe18672b79ea5e9993
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 22 10:18:44 2009 -0700

    update changelogs for Debian build

commit d6ba07e885bdc62ba64719c9d8cc42fcecbcb09d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 22 01:10:44 2009 -0800

    Automatically extract flight number for eeprom and telem filenames.
    
    Extract flight number from either telemetry or eeprom files and use
    that in the resulting filenames. To ensure that files remain unique,
    add a new field, -seq-%03d. This is appended only when the sequence
    number is non-zero as it shouldn't occur in normal usage.
    
    This also eliminates some duplicate filename creation code in the
    library and aoview sources.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06cebd1026dc1bd6ee51526fa2d02905df3b3b37
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 22 00:52:58 2009 -0800

    ao-postflight: don't try to use missing gps sat data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9ada1b538af3308e1b22bd024d9204521184173
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 22:12:21 2009 -0800

    ao-postflight: compute barometric alt for each GPS position
    
    Print that to the --gps file, and use that in the --kml file for the
    altitude. Gives a very different picture of our flight tracks,
    presumably far more accurate (at least in altitude).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b84b634d9ae8ce6ab1c02833a3ed8514404e1ca3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 22:11:45 2009 -0800

    Don't crash if --plot isn't passed on ao-postflight command line
    
    Crashing is not nice.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2d77c18b15834046b7b79d49d87211828f2409e9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 21:10:09 2009 -0800

    Convert telemetry file GPS satellite information in cc_log_read
    
    The satellite info wasn't being correctly converted from telemetry
    files to the data log structure, so ao-postflight was not seeing it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e7fb61700f1f6f2ed5fdbc4380d7187b0cd187b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 21:09:03 2009 -0800

    Fix --plot arg handling. Add -all option.
    
    The --plot file name handing is special as the library wants a
    filename instead of a stdio file pointer.
    
    Add a --all option that just creates all of the possible outputs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 199f0cecae22645140185238682b9e1aba0e5715
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 20:36:20 2009 -0800

    Make TD print 0000-00-00 for invalid dates.
    
    This 'shouldn't' happen, but in case it does, I want to know about it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 238d03462a56dc1b7c871608cb00f961a88c1b97
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 20:35:22 2009 -0800

    Make ao-postflight create filenames using input filenames.
    
    Instead of requiring the user to provide names for the various output
    options, just create them from the input name by replacing the extension.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a3b4c02a01187f8b7b9a9c97712476d0007ab35
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 19:52:26 2009 -0800

    Document ao-postflight --gps and --kml options.
    
    These were missing from the man page, but included in the --help output.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80b23f3044a654d61212891a61fadb8a3a4e5572
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 18:57:45 2009 -0800

    Decode HDOP data from skytraq GPS
    
    The hdop data was getting dropped on the floor, but is rather useful
    when deciding if the GPS position is crazy or not. This reports HDOP *
    5 (giving a useful range of .2-50).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f036ee7cd30ce3ed2e5cc8501914a4c19b73875
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 20 13:19:02 2009 -0700

    update changelogs for Debian build

commit 87e6f3e5c1688503ab8595912d8d6eb7139830b7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 20 12:16:37 2009 -0800

    Eliminate SiRF state values from ao-view.
    
    With Skytraq not having any visible GPS state information, just
    remove this from the display.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8065b8146a31438e66f83c13b99281ec47439a73
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 20 11:56:48 2009 -0800

    Add GPS date/time output to ao-postflight.
    
    GPS date/time information was already being stored in the log, it just
    wasn't getting displayed by ao-postflight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6894541e0ee144bfc689cc02d4ed333711d3b500
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 20 11:55:28 2009 -0800

    Reduce igniter firing time from 500ms to 50ms.
    
    Given that the system will brown-out with the longer pulse, it doesn't
    make sense to even try; failure at 50ms probably indicates a short.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b75aa1c825b84bd7fa1578320fbc7e904c373a7d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 19 21:43:13 2009 -0700

    fix typo in comment

commit c2f661b75ec035f6a3f700962290ef297f9ab0af
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 20 11:44:06 2009 -0700

    update changelogs for Debian build

commit b0d7e3f9c9322542e9b649bb6ad7f7e5bb99dffa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 15 16:20:18 2009 -0800

    Stop using SiRF state info.
    
    With the switch to the skytraq GPS unit, we don't have the same level
    of detail in the GPS stream, so stop reporting that in the telemetry
    stream, in the UI and writing it to eeprom.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 524665fc221b0d483453c67b7211e282cebc8980
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 15 16:04:41 2009 -0800

    Add date to GPS data, captured from GPRMC packet.
    
    Pull the date out of the GPS stream and send it over the telemetry
    link and write it to the eeprom.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ee279ba76c2a79d142c466f19ef758cf4c01d70
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 15 15:59:01 2009 -0800

    Add flight number to telemetry stream.
    
    This makes it easier to tie the telemetry and eeprom files together as
    they're now both labeled with serial and flight numbers, which should
    be unique.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6391c89bd5b89f5f46255b8365c658a873e5959a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 15 15:53:01 2009 -0800

    Switch order of serial/flight in ao-postflight summary

commit 9b06e294e2777f69bcf5e98789c3f5477097d53b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 15 15:51:58 2009 -0800

    Enable telemetry receive in ao_view

commit 4cffc9c4b079e39c8196ddbaf91129cda6df7f8b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 14 22:24:37 2009 -0800

    Share telemetry parsing code in cc library.
    
    ao-view had a private copy of the telemetry parsing code which
    included the ability to parse the newer version of that file. Those
    changes have been moved to the library version and the private copy removed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e0db8ca3af4c07bae909938486766c646bf580b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 14 22:24:09 2009 -0800

    Provide a dummy 'uninstall' target in the src directory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c654a9369294c9b8066c33f91161d8005b96680
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 14 22:17:24 2009 -0800

    Loosen tolerances for main->landed transition
    
    Detecting that the rocket has landed is required for the system to
    flush the eeprom log and re-enable the RDF beacon. This patch changes
    the landed state entry requirements for the accelerometer to require
    only that the accelerometer stay within a quarter of a g (down from
    1/10g) and changes the testing interval from 20 seconds to 5
    seconds.
    
    The requirement that the barometric altitude be within 1000m of the
    launch altitude and that the barometer change by no more than 0.05kPa
    are unchanged.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 03092d1a72a9651711e22c58dca6d6aba5705c5e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 14 16:35:12 2009 -0800

    ao-postflight: fix sloppy gps sat data realloc code (was crashing).
    
    Realloc'ing the wrong data, and failing to set the realloc'ed size was
    causing ao-postflight to crash while reading long logs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit adf656192441eb7f44792955c86e469145477e29
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 5 22:11:59 2009 -0800

    Return radio to telemetry settings when packet system closed.
    
    To receive telemetry after disabling the packet system, the radio must
    be reconfigured for telemetry mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83afdbdc154fe013bfe35ce5ecf1d61570b04ed6
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 5 21:45:00 2009 -0800

    Add reboot command.
    
    This resets the processor using the watchdog timer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0358988ac0ee25a564d48af79b1c3fb0c0fe0a88
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 5 21:44:31 2009 -0800

    Add Watchdog Timer Control register definitions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4114210e0b813f4af99d0cb7755ad2ac2c4b120e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 5 21:43:21 2009 -0800

    Move ao_match_word from ao_ignite.c to ao_cmd.c
    
    This is a generally useful command line utility.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a79a04ddb0b3ee64de34e366f71a0f6db509c01
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 4 21:59:51 2009 -0800

    Stop recording in ao-dumplog after receiving an invalid block
    
    If no samples in a block are valid, assume the flight log is over.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 843ee489aac34ad6d81f55f1c85fb9eecc42d86b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 4 21:59:12 2009 -0800

    Flush pending input when switching to remote packet mode
    
    Any pending input would just confuse the application, so pull it off
    the link and dump it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 036400a2db303f3db3be7cc0426f88359c6bd2b1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 4 21:42:51 2009 -0800

    Explicitly use USB I/O routines in packet code
    
    Using the implicit stdio functions (putchar/getchar/flush) would
    result in essentially random redirection of each, depending on whether
    the packet code had characters available when getchar was called. This
    would cause lockups in putchar.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ece984f4d72b4f720a5efdfaad7cff77a93d676
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 4 21:32:07 2009 -0800

    In USB pollchar, wait for packet before re-checking USB out len
    
    This probably wouldn't actually cause a problem, but it seems more
    reliable to wait for a packet interrupt before re-reading the packet
    OUT len register. This could avoid spinning while waiting for a USB
    packet, which seems like a good thing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc62bb254085cc705203b57260c04ac5e14c6611
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 4 21:29:37 2009 -0800

    In packet master, move USB flush from packet thread to echo thread
    
    This keeps the packet thread from blocking on USB and also makes the
    flush happen after every packet (slightly more USB traffic, but
    packets are slow anyway).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27ebaf8e13aed06bb1ea6e770f767495a02be6c5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 3 01:27:37 2009 -0800

    Add ability to dump eeprom data over radio link.
    
    This adds a '-R' option to ao-dumplog to redirect the connection
    through a USB attached TeleDongle over the radio link to a remote
    TeleMetrum device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1de322b960005c9a16051afa1881fadb00f4bcd6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 3 00:40:38 2009 -0800

    Pass accel calibration over telemetry stream. Telemetry data format change.
    
    This allows the ground station to convert the accelerometer sensor
    values into acceleration and speed data. This requires a new telemetry
    data structure, and so TeleMetrum and TeleDongle units must be updated
    synchronously. ao-view will parse either telemetry stream, and the
    serial format from TeleDongle now has a version number to allow for
    future changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b529e5e8998702986909111a457f3ce9932e1ccf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 23:48:29 2009 -0800

    ao_flight_test was using accel value for pressure too

commit f57bea012d4fbca097df0d98fcd30eb4abd9701a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 21:47:41 2009 -0800

    Reformat ADC values to show all 16 bits

commit 79718e798e96567f0ba11c61f187e432fdcf95ee
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 21:48:16 2009 -0800

    Remove "f" command

commit a4137263b69864c524d39c6ff88a0225fd06e79b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 21:47:15 2009 -0800

    Remove "d" command

commit 47f510464907d2b9488109c96ade87a41d878842
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 21:46:39 2009 -0800

    Remove "l" command as ao-dumplong no longer uses it

commit 144db05f6b286a0450d486f69ce192632a2c0656
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 21:38:18 2009 -0800

    Add two-point accelerometer calibration.
    
    Calibration now uses two values, one upside right and the other upside
    down instead of a single horizontal value. This allows the use of
    other accelerometers and compensates for variations in the divider
    circuit to provide more accurate data.

commit 17611788aadc9460287145a340a7c18bf63766aa
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 2 16:54:06 2009 -0700

    update changelogs for Debian build

commit 7db9d86178ecfd58cc1c17ac9fcbdcfd2f13aaec
Merge: b219801f f9de2000
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 15:47:40 2009 -0800

    Merge remote branch 'origin/master'

commit b219801fb0e5eaff7778d21701da977104522da3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 15:45:58 2009 -0800

    Add ao_usb_pollchar to ao.h

commit b92333ff5e75bf96804359e9fbf464d3b518bd95
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 15:45:42 2009 -0800

    Disable interrupts while removing tasks from task list

commit d519564fd08d2defe1211de83ccbdfa3c7cfe702
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 15:45:07 2009 -0800

    Add more docs to the README file

commit f9de20000794c97a04d5bc2476191864bd2af371
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 2 16:00:11 2009 -0700

    update changelogs for Debian build

commit 127c3125e5a4b86b8f304bc2889e313688c3d83e
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 2 15:59:12 2009 -0700

    update changelogs for Debian build

commit 6b1e77569e2fed3c44606ed268421df5d3ed4020
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 2 15:57:41 2009 -0700

    update changelogs for Debian build

commit 8203bfa58af32a1d07a44c1c151b200df0b65f15
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 2 15:56:42 2009 -0700

    de-version the libreadline-dev build dependency

commit 0b483233118673cbc2cda1be6acd379df82bc95a
Merge: ca5d323a 550482d9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 1 20:59:02 2009 -0800

    Merge remote branch 'origin/master' into skytraq

commit ca5d323a3d206050d95f52a61e92c69e1f54e7b5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 1 20:57:03 2009 -0800

    Enable packet-based communcation to command processor
    
    This splits the packet code into master/slave halves and hooks the
    slave side up to the getchar/putchar/flush logic in ao_stdio.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c1a9ce16b966a21c885bf3be31cbcb85368b3fa
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 31 01:30:22 2009 -0700

    No need to wakeup &ao_tick_count now

commit cd0d495d7ef276956e730196476daa70a4359918
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 31 01:20:26 2009 -0700

    Poke master to speed up packet rate when things are busy

commit 442b1ef18c8320d4e5329dc92bb5268a36058fc5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 31 01:19:41 2009 -0700

    Use ao_alarm for ao_delay so it can be easily interrupted

commit 4f7ed9ff484778381db647c27d2a34d0cadec41e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:53:03 2009 -0700

    Do more flushing in packet test code

commit 6a7aa1810a90a9216160aec55ec4bd02b3240e1b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:52:44 2009 -0700

    Add RFIM register

commit bf65e0b2a1299b49adc2d339ab9d9c7599aded9e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:52:22 2009 -0700

    Send SYN packet to set sequence numbers

commit d46797e5c08d4955d516458185e2cfb51ee2d567
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:51:38 2009 -0700

    Use ao_radio_done to wait for TX to completely finish with packet

commit c5ec6fcfa1bd17aad0f85d2fbe603f1d125836e6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:50:54 2009 -0700

    Switch packet code from timer thread to ao_alarm

commit b428faf74ae145126ec1da972028fcfe0b4b2b18
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:48:36 2009 -0700

    Remove reason from ao_dma_abort

commit 73db30b2f9128c37dc7fa075793a8862814ce044
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:46:21 2009 -0700

    Add ao_alarm

commit 251b0971f049cbf2f8db79a32729d47441ce65f3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:45:43 2009 -0700

    Wait for TX to finish sending data

commit 9b31f07fe3556896b3e997bba156e30ef5777a80
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:43:52 2009 -0700

    Add radio carrier command

commit 7b14c3e609749f4fc00dbd660541375048535218
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 16:39:15 2009 -0700

    Initial packet bits. Just testing transmission

commit 690fc263516d8beb6b24e86fbcd6588f42ce4e5c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 21 17:18:49 2009 +0900

    Add keyhole-markup generation for ao-postflight.
    
    This lets you see the flight path in googleearth.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b657aa209b9ea3b3efd33a940283b3ba60a169af
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 16 12:59:53 2009 +0900

    Add ao_wake_task and ao_exit
    
    ao_wake_task signals a specific task to wake up.
    ao_exit terminates the current task.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d709a0688eff84e25e24d755850ef045d6b0c3de
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 16 12:56:45 2009 +0900

    Save some DSEG space by marking cmd functions __reentrant
    
    __reentrant causes the compiler to place args and locals on the stack
    instead of in the data segment.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 550482d953c491a5ede9f2d243493afb13289898
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:58:46 2009 -0600

    update changelogs for Debian build

commit 2de548f45d0f50b558acc83f57e1e2fc1223ab92
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:58:19 2009 -0600

    oops, forgot to specify the repo to push to

commit 68008ac11c2735ca53a1b474324df43f2f1d5cdd
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:57:33 2009 -0600

    update changelogs for Debian build

commit 513328ac5f7c25f9ee144ab6befbea60d69eed1a
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:56:50 2009 -0600

    automate push of updated and tagged master branch during debian/rules prebuild

commit 67bf7d388a6dd2dbf65575bf4f0423ad355b4f2f
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:54:44 2009 -0600

    update changelogs for Debian build

commit 23bc21a93ccb9f35917f283ac5df6ce0870df71a
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:54:16 2009 -0600

    undue damage from partial build

commit 7da56ad8576ef212ffb6cb573bdaf578453e3fe0
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:52:52 2009 -0600

    add support for tagging git repository on each Debian package build

commit 8d4aa4ee54f85f4951cdd7293d58aaa405cfcdc5
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:49:34 2009 -0600

    update changelogs for Debian build

commit 241a860fe856b1dfad6e792736313648300d5c24
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:48:43 2009 -0600

    flush repetitive junk out of debian/changelog, and update the prebuild target
    in debian/rules to put git commit details into the Debian changelog

commit 6c4cdc927b43736b39be29d23ac3dc723f69e4d6
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 15:57:19 2009 -0600

    update changelogs for Debian build

commit c57bd7fd2f80e50b0b4c87fccb024ab07c93773d
Merge: adf8764b 2b765728
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 15:57:08 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 69b6f6bb465163cf767bb68e0e4a716d8ad2b39c
Merge: bc77da68 2b765728
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 17:16:21 2009 -0700

    Merge branch 'master' into skytraq

commit 2b765728ce177e26899f6feef00bfdf6aeaf2678
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 17:15:38 2009 -0700

    Add apogee igniter delay.
    
    Provide for a delay after apogee before the drogue charge is
    fired. This allows TM to be used as a back-up altimeter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc77da68c9cb7d4cca483eadbbb7e9ccf71c0060
Merge: 46cccf62 8f7ea3de
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 15:09:48 2009 -0700

    Merge branch 'master' into skytraq

commit 8f7ea3de7037f40b0ff462b60d503c19431ae62b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 15:08:14 2009 -0700

    Report igniter continuity in pad/idle mode via beeper
    
    one short beep = drogue
    two short beeps = main
    three short beeps = both
    one long warble = neither
    
    In idle mode, it does this just once. In pad mode, it keeps testing
    and reporting.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit adf8764bc4591795ba4e618ccbd6393fc6ce6450
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 10 15:11:23 2009 -0600

    update changelogs for Debian build

commit 541da6f3bbf81be93dfe3c01f7c8cfd757b28a2b
Merge: dfc73cba 5f26ad66
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 10 15:05:50 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 46cccf62fb40514b5930fcb2ffdaf2735415c764
Merge: fb8f3fee 5f26ad66
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 14:00:03 2009 -0700

    Merge branch 'master' into skytraq

commit 5f26ad663b3f60dddc9d967206e365f45dc4acd1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 13:58:16 2009 -0700

    ao-dumplog: switch to 'e' command, display progress
    
    Using the 'e' command allows additional checking of the data,
    including end-to-end checksums and detection of missing data.
    
    Progress is displayed by showing the recorded flight state along with
    a '.' for each eeprom block read.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb8f3fee6a1bab1e46d782e84405845cee2dadb4
Merge: 22856cf8 b8fc3975
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 13:41:00 2009 -0700

    Merge branch 'master' into skytraq

commit b8fc3975bd92037a0cf53b0ff2b0e05ce0ba668f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 13:39:01 2009 -0700

    Send 0-length IN packet to flush USB after full packet
    
    USB bulk transfers are a sequence of maximum-sized packets followed by
    a short packet, which signals the end of the transfer. When the last
    packet of the transfer would be a full-sized packet, an additional
    packet of zero length is sent to signal the transfer end.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 22856cf8bb0f5e1f37c9b774132d9ef6934526ed
Merge: 2f760349 e29961fd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 11:44:20 2009 -0700

    Merge branch 'master' into skytraq

commit e29961fdb2a48874c895829880eadbf13e094c0c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 11:43:31 2009 -0700

    Add channel menu to ao-view.
    
    Sets radio channel when TD is connected, saves selected channel in
    gconf database.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f7603490a169df8f18b565db4fa967832ffc9bd
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 9 22:48:29 2009 -0700

    Build two versions of TM, one for SiRF, one for SkyTraq
    
    This creates two separate images, depending on which GPS unit is
    connected.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 33b0b6f2f2e07de105619a7b463226d2813152ab
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 9 22:02:40 2009 -0700

    Add support for the SkyTraq GPS unit
    
    This is a build-time option selected by hacking the Makefile at present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a3771bfc5ce740f9d89193e9f8b1d7987aa57264
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 6 20:06:00 2009 -0700

    ao-view: fix snd_pcm_open return checking
    
    I don't know how this code was supposed to work before...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac4b8a73848f434999a532eab4665253c267c597
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 6 20:05:36 2009 -0700

    ao-postflight: dump out GPS signal data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dfc73cba1bee8b121e00e8cba45e7dfaaf79e9d8
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 21 22:46:59 2009 -0700

    update changelogs for Debian build

commit 459ff3d377297f80ee2fba0df0a29ff6603467a1
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 21 11:00:32 2009 -0700

    update changelogs for Debian build

commit 327c64305a59f48ababf19875874a550af6b9cef
Merge: c8a81a41 74f0fb4d
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 21 11:00:22 2009 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 74f0fb4dd189abc1d5027c64fa5a648a6003285a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 20 13:33:59 2009 -0700

    make bit-banging reset script actually reset

commit 7ea371a09385e2a93199f78685e8cb86793ed104
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 20 13:33:26 2009 -0700

    Add --gps option to ao-postflight

commit bc7ccb339e538a0e6120db0e5c0d9130c565e0dd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 20 13:32:59 2009 -0700

    ao_rawload: Don't reset after we finish loading

commit c8a81a419f7f2331624f90bd6c107a86f6b04451
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 20 09:21:00 2009 -0600

    update changelogs for Debian build

commit df42ccaaf468cdc5d93cbd1c001f58df58419722
Merge: 0b24e403 078e9cdb
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 20 09:19:28 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 078e9cdbdb388b22c6151f76ff0660fc14b8ef55
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 10 11:53:06 2009 -0700

    Plot raw accel data for the motor accel section.
    
    This shows a short sequence of accelerometer data without any filtering.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b485d937ff148848ebda7f9ca6be29bb1de1f16
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 21:02:48 2009 -0700

    Show acceleration only during boost phase.
    
    We're interested in motor performance; the rest of the flight is
    boring, after all.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e660315e1bd2bf71ab1c0574e895e1f7608a58f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 21:01:44 2009 -0700

    Fix cc_period_make to not get stuck on samples with matching time
    
    When two samples have matching times, step to the second one;
    otherwise, we'll get stuck forever.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 932f1539b38567e565fd484171c13539b1467308
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 20:26:17 2009 -0700

    Color plots, integrate only flight portion of data.
    
    Telemetry files have piles of pad data which shouldn't be integrated
    into the velocity data as it tends to generate huge values from the
    noise of the sensor.
    
    Also make the data lines colored to keep them visually distinct from
    the rest of the plot image.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9177f5f4e9d832558ddd9ab227c4511f6201e7e5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 18:11:24 2009 -0700

    Update usage and man page for ao-postflight

commit 0b24e4034f93010372a3d084668d10f0e4a2c2e1
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 18:01:20 2009 -0600

    update changelogs for Debian build

commit a5e94aa0677070a051714443cf7fd7e2b5e90269
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:59:47 2009 -0600

    need a run-time dependency to pull in the cairo module

commit 97acef95cc9843998963921459fdd71dd7eaa6b4
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:48:23 2009 -0600

    update changelogs for Debian build

commit 3f95a5abbf8ada70328ced45fbb2781ed1cb3d29
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:48:10 2009 -0600

    more build deps for plotting lib

commit 9d7e96e323d652de08b2f2a73e0eb3c321080185
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:47:56 2009 -0600

    update changelogs for Debian build

commit ae4e131b61244e06020b82919e31e05dd7dba88f
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:46:39 2009 -0600

    update changelogs for Debian build

commit 37e6c9a492a1d51373bf9333fb3172e0c377720f
Merge: d256f820 2e6686b1
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:46:10 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 2e6686b1e183c66188ea447b8a54e4c29402443b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 16:45:47 2009 -0700

    Use plplotd instead of plplotd-gnome2

commit d256f8204e9fce53ae4309562bb4c0cde1fae43e
Merge: 0fc344df 32d35367
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:34:08 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 32d3536706324808df6cd02248a236302b831571
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 16:24:35 2009 -0700

    Add plots to ao-postflight using the plplot library
    
    It's not perfect, but it generates .svg plot output.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0fc344dfc031a8b1eef7cc40efb1d5ba7782269d
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 14:15:57 2009 -0600

    update changelogs for Debian build

commit 4b0de757874c0ecaf38e3dfd3beefc398150e3d5
Merge: 773c4ffb d0eac989
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 14:15:53 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit d0eac989b1ffc8ae30ba12da403eb4bf1ad42d6b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 13:15:10 2009 -0700

    Don't look at NULL strings (summary_name)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73f4a57239f770aff603b961169c0e2cfe2c276b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 13:08:54 2009 -0700

    Use pressure speed for drogue and beyond states. Fix differentiation time.
    
    Drogue state should always use pressure speeds.
    
    Differentiation code was using centi-seconds instead of seconds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 773c4ffbc1d2e02eb02cfa543a077a408986da30
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 14:05:55 2009 -0600

    update changelogs for Debian build

commit 45ede4a4b203ef9da5bf05c49cb9c5a2e6382ec5
Merge: 45e29381 e35e485f
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 14:05:51 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit e35e485ffe6b26034788ab295121bc2693b7eec1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 13:04:31 2009 -0700

    Initialize summary_name and detail_name so stuff appears on stdout.
    
    Uninitialized variables lead to mysterious results.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 45e2938121411d1fc9b3aec3fdeaaeb3c90db5ed
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 14:02:14 2009 -0600

    update changelogs for Debian build

commit d42ebf0661ecf15455e5051de1e16ae66f8dd857
Merge: 384dbe9f 7a19aac5
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 14:02:09 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 7a19aac5e881e635962a64fff73027ca2143b96f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 12:51:48 2009 -0700

    Add DSP code to filter data, allowing for integration/differentiation
    
    This adds the computation of speed from both accelerometer and
    barometer measurements and then presents a periodic flight profile
    using filtered data as a detailed flight record.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 384dbe9fc7fa8e4e5dceec5e150f0f1d3383bbdc
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 10:40:06 2009 -0600

    update changelogs for Debian build

commit 35c54b3a278fa9bc2bc7f4b5ee04866697c93ba0
Merge: 4f8eff74 6d018ab9
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 10:39:23 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 6d018ab933832e2d80bb1564c339d9fb18b57be2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 5 22:45:49 2009 -0700

    Handle vageries of .telem files in ao-postflight
    
    Telem files have multiple entries of the same state, and sometimes
    long gaps between recordings. Deal with this as best as possible.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c46e832b28820d7c5be4efaacbbd7c0607927fe5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 5 22:03:31 2009 -0700

    Add simple post-flight analysis tool (ao-postflight)
    
    This tool reads either an eeprom or telem log file and displays some
    rudimentary data (max accel/alt for each flight stage).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26f56b51bd11aa91f1d77b81827b49c28cb6ec5f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 5 00:29:26 2009 -0700

    Add ao-dumplog to capture flight log from command line
    
    This duplicates the functionality of the flight log stuf in ao-view,
    except from the command line where it belongs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73adae3661160d410dcc802873b530d255c210e5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 15:30:22 2009 -0700

    Add --device/-D support to the command line tools and manuals
    
    Use the new cc_usbdevs_find_by_arg function to locate suitable target
    devices connected via USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4f8eff7401ee2d8092ab36fa33411f9b23dda880
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Sep 4 16:03:55 2009 -0600

    update changelogs for Debian build

commit 332b056459b1352e233a8bf5f08498df12d32160
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 15:01:32 2009 -0700

    'fix' ao-eeprom to read two blocks at once. Work around kernel bugs.
    
    The kernel appears to leave serial data undelivered at times. Reading
    two blocks at once appears to make it relinquish the queued data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit df88ae4c5f229efcc0ea5cb0a81fc2bb8f96fea2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 14:23:02 2009 -0700

    Add 'ao-list' utility to show attached AltOS devices
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0935d6a7e907e20381a42882ae728051f9bece02
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 14:21:19 2009 -0700

    Parse the USB serial number as an integer.
    
    AltOS devices use simple integer serial numbers, so parse the USB
    value as such to make matching values more forgiving.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c771d999914f9d17c723900f2987acc45fd0fbb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 13:00:02 2009 -0700

    Move usb scanning code to ao-tools library
    
    This will allow the scanning code to be used by the command line tools
    as well as the ao-view GUI.
    
    Now that ao-view depends on the ao-tools library, it has been moved to
    the ao-tools directory as well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15341b6e6dcf52df083d6aa37ef881ea6ad48ee5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 12:25:37 2009 -0700

    Set all of the values to reset the radio for telemetry
    
    Was sizeof(rdf_setup) instead of sizeof(telemetry_setup) when
    resetting the radio back to telemetry data mode from rdf mode. With
    the length value removed from the rdf config, these two arrays are no
    longer the same length, and so the last config value was not set
    leaving the radio sending garbage.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fee46389b70a624ab5b1128a8b4c3083c7747bcb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 11:46:55 2009 -0700

    Make RDF beacon only run on pad and after landing.
    
    It's pretty much impossible to RDF the rocket during flight, and it
    interferes with the telemetry data stream. Leave it enabled on the pad
    so that radios can be tested, and then re-enable it once the rocket
    has landed.
    
    This patch also turns the rdf 'on' time into a parameter so it can be
    changed, and then sets that parameter to 500ms, once every 5 seconds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54545640b0db7747137655f84bc67fd290ecb904
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 11:45:52 2009 -0700

    Add back the RDF tone generator
    
    Tracking the rocket on the ground may be easier using tones than using
    the digital data stream, so we'll try that and see what we think.
    
    This reverts commit 3a3bfd471a868d546d83cdc431b53c8f5208edb9.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9fafee109e96435c96639b21211cac0500673a63
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 2 23:18:15 2009 -0600

    update changelogs for Debian build

commit cb4a73f3b65ba72f645fd37ab8712829c9537bf8
Merge: 9ddd8696 e2e449d5
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 2 23:17:37 2009 -0600

    Merge commit 'origin/master'

commit e2e449d5c23356e913f312de1fb2611a9dd5a352
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 2 22:01:52 2009 -0700

    Remove bit-banging debug support from TM board builds
    
    Our current TM boards don't have the wires to do bit-banging to
    another cc1111 board, so it doesn't make sense to fill up their flash
    with useless code (and the 'help' text with useless commands). Leave
    this to the TI board until we have boards that can serve as debug dongles.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit acea083d80e1ecc4287083519ea666964016b257
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 2 22:00:37 2009 -0700

    Make the ao_log_record structures 8 bytes again.
    
    When the GPS signal strength data was added, the structure was
    accidentally extended to 9 bytes, making all log records 9 bytes
    long. While not a serious problem, this left log records spanning
    across eeprom block boundaries, which seems like a bad plan.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d39f17684feb49ac8a0017902158f298696e37c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 2 21:57:54 2009 -0700

    Make eeprom reads and writes across block boundary work
    
    Reading and writing across the block boundary was not stepping the
    eeprom position after the partial i/o operation at the end of the
    first block. This meant that the operation would re-use the end of the
    previous block, either re-reading or re-writing it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9ddd8696b4004ccc03238d95a8c2a1d07075e0fb
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 31 16:48:03 2009 -0600

    update changelogs for Debian build

commit 6926c4ab5d87a8f2eb4fcde2c673fb3a4639e115
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 31 16:47:44 2009 -0600

    pixmap file should not be executable

commit 1495e2f27acde3743c3764a0c31ee082224d6c64
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 31 16:42:55 2009 -0600

    update changelogs for Debian build

commit c8c5b7963babe8eb16e2651fba9cd2c8d1cba74e
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 31 16:42:37 2009 -0600

    deliver an icon for the Debian menu system

commit 591b99c232e780246fc07841c09c8c4e7835facb
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 31 16:26:00 2009 -0600

    update changelogs for Debian build

commit b34474c1f3083e73b7184d519f54d4c8031836fd
Merge: 8df16979 0d65bff4
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 31 16:25:32 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 6358041f846ba9a20fa650c367d907dc4336e54c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 22 13:38:56 2009 -0700

    Enable GPS degraded mode, set 10 sec degraded timeout.
    
    No reason not to let the GPS report solutions whenever it likes, let's
    see how this works.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d65bff443c17d4d98c18b620ec075ab66b30efd
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 21 10:47:46 2009 -0700

    Turn off GPS tracking data when not present in data stream
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8df169791835510d96c11a3b0aa3cc5b79fa7fde
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 02:21:23 2009 -0600

    update changelogs for Debian build

commit 42ab6d52540d0326ef89e9d57954b08248558468
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 02:21:06 2009 -0600

    fix location for delivery of sources.list fragment

commit 977f5dc0bc7c666dcc1f21db77416efca0d696aa
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 02:11:11 2009 -0600

    update changelogs for Debian build

commit 8d4d6655f1b4c2fbc522fd255bfb75406e5ddaef
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 02:11:00 2009 -0600

    oops, aoview is now ao-view!

commit b9a97aea65f871fd287bc0bb566d8664766f4afd
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 02:07:16 2009 -0600

    update changelogs for Debian build

commit 21e3dd0affac89919e5d0e29c6e9eb1eacb51801
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 02:06:49 2009 -0600

    enable support for Debian menus

commit 0087c1776e0253fc2bd3b86f15bf9d1b32bdc45a
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 00:52:57 2009 -0600

    update changelogs for Debian build

commit 4486d9156e19e4280b42bcd422d81d04f2d04a92
Merge: dd09f0bc 33edd629
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 00:49:24 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 33edd62992a32b0ec8ca66d879fa300871db5937
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 23:38:16 2009 -0700

    Update ao-view to add GPS satellite tracking data
    
    This adds another column to the display to hold per-satellite GPS
    tracking data and a count of the visible and locked sats.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29687cbd462a332d9a36ed87500c5b737dcae3f4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 22:35:15 2009 -0700

    Handle GPS satellite tracking data
    
    SiRF message #4 includes signal strength and GPS engine state for each
    of the satellites being tracked. This data is now parsed and sent to
    eeprom and the radio.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd09f0bc2b950c00f3b489878cd69ad8a003f46c
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 18 21:57:01 2009 -0600

    update changelogs for Debian build

commit cd5ce661e2a8f9694933358ccb5b916fbed089c2
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 18 21:49:39 2009 -0600

    add support for building Debian package

commit d996aa9b32fb0eb385bd3d158256c29788a42fe3
Merge: b3b2d3c4 7d4ceb75
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 18 18:56:09 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 7d4ceb75a454e6c9b3fe0bd934fadcb5104dea36
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 17:55:22 2009 -0700

    Add ao-ejection.1 man page
    
    Document the input requirements and output format
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3b2d3c475a135084b5628c730fc6fca1ba0817b
Merge: 4685fc54 da12b89f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 18 18:36:03 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit da12b89fb056a68e65ba363fef91d266727cb685
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 17:30:43 2009 -0700

    Create ChangeLog from git log

commit 7d69e2b3715faed10ce21ad562fc4d25dfc5f9c1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 17:29:29 2009 -0700

    Fix ao-bitbang examples to not have . in the first column

commit 4685fc541466afbeefc151bcb64cd054739c048b
Merge: 1c2a0b66 c29275b7
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 18 18:09:38 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
    
    Conflicts:
            ao-tools/ao-bitbang/Makefile.am
            ao-tools/ao-eeprom/Makefile.am
            ao-tools/ao-load/Makefile.am
            ao-tools/ao-load/ao-load.c
            ao-tools/ao-rawload/Makefile.am

commit c29275b72438637d46d7a50742882d2736eb176a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 15:21:57 2009 -0700

    Add manual pages for remaining commands.
    
    Manuals written for ao-bitbang, ao-eeprom, ao-load, ao-rawload and
    ao-view.
    
    Manual for ao-dbg updated to reflect program name change.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b03d620722dc54630539afba40720c30de69b2d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 12:19:31 2009 -0700

    Use --tty/-T on command line to specify target device
    
    Also, use the ALTOS_TTY environment variable in all tools. Note that
    the magic value of "BITBANG" switches the library to connecting
    through a CP2103 instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c790fe859dff062692964338091ffbbcdf63257
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 12:40:24 2009 -0700

    Rename tools to ao-<foo>
    
    Use a consistent prefix to make it easier to remember which programs
    belong to this package
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c2a0b6653623b689d68d7349a6b2dce3e20a4a6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 13:36:54 2009 -0700

    re-add debugger sources

commit 9a9cce5510b87252f863239ac807b9fb4395b288
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 12:19:31 2009 -0700

    Start working on using getopt for the tty name

commit 9789ca5e8caa9a013e804f307b9da380e147bd75
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 12:40:24 2009 -0700

    Rename tools to ao-<foo>
    
    Use a consistent prefix to make it easier to remember which programs
    belong to this package
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5782398d968e7cb11f7203afada7c216f233b3b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 11:34:28 2009 -0700

    Remove unused cctools code paths for old libusb and cp2103 ioctls.
    
    Communication with the CP2103 board has gone through three revisions,
    first using ioctls supported by the CP2103 kernel driver, then using
    the old synchronous usb library and now using the newer libusb
    asynchronous interface. There's no reason to keep shipping the old
    stale code now that the new stuff works reliably.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7cba411de0780c65e3490ab67186a514f0ea42ec
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 17 20:47:31 2009 -0700

    test for sdcc, nickle and readline
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f48dcffae761700355a17b59345d55a60703f0c4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 9 20:43:10 2009 -0700

    Sync USB data after each memory write command
    
    This makes sure we flush the USB link often enough for the other end to keep
    up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd5456f18e4b39ad76d5549df91a0e0cfb18a2e9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 9 16:08:07 2009 -0700

    Handle partial ALSA PCM writes
    
    The ALSA spec says that snd_pcm_writei will not return a partial write, but
    at least on the OLPC, that's not true. Deal with this.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3056cb8eef5aee0dcd342488386355d8b8f574c8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 9 15:55:19 2009 -0700

    Check more alsa return statuses

commit 8ddf3345afd8cbf638e81993633f7861d8dbca63
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 01:47:34 2009 -0700

    Don't report distance to rocket without valid GPS
    
    When there's no valid GPS data, don't try to report the distance and bearing
    to the rocket after landing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fbcb7b20fa701a6e534d38e307839466545668e3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 01:05:33 2009 -0700

    Add B command to set serial baud rate
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91b023e7e4eeed838e0320d2ddac0f6aac39e565
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 01:05:13 2009 -0700

    Get rid of spaces after minus sign in climb value

commit 28be20cf914fb34dc3c776519708d0f02091764e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 01:04:39 2009 -0700

    Switch to 57600 baud for GPS data

commit d3f76ce58b9c0ed2e5a9fe3bbc7fb9cb38247714
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 01:04:17 2009 -0700

    Drain serial port before changing speed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7c2d358ed8a1afc9f0ba2bd830b10f6b56dc7b1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 00:44:42 2009 -0700

    Display last known GPS coord while unlocked
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5195fcfe239e430e1f9f11774c9a245c7b29dae9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 00:44:01 2009 -0700

    use g_source_destroy instead of free on serial object

commit 1e5e98bd8f5ea0bc15592de454e3629383462371
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 00:43:22 2009 -0700

    Trim aoview_serial_set_callback args down to just port and callback

commit 08f37056deec25d77062bc411a04033401b033a5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 22:11:03 2009 -0700

    Reset GPS at boot time

commit 1150aa850f5a025b849556e32c4dddb27937d9af
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 22:10:43 2009 -0700

    Fix up serial debug output

commit 2a7956a64935246475f92d44c08369e0230b676a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 21:34:13 2009 -0700

    Allow the GPS port to run at 4800 baud if desired

commit 8d650769c319261c97f5e68eff9138207b95c0f8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 21:33:53 2009 -0700

    Initialize the GPS serial protocol state
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab40d224b39ba6d29c4056e2d2c365e1eb3d3793
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 21:33:18 2009 -0700

    Use uint8_t for comparisons to avoid int conversions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d6749bf24792bb41ca700cf4b8e5e1ac1a63cbf0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 21:30:53 2009 -0700

    Add AO_GPS_RUNNING state.
    
    This tracks whether the GPS receiver has ever sent a valid report to the
    flight computer, allowing the user to tell whether the GPS receiver is
    working at all.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1da7e871aee75308bc05ce1b7a0dc402e4c9509
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 21:25:35 2009 -0700

    Add M command to monitor serial bytes

commit ddfa2308c0be4c002f982ae9da6032ee7854117d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 21:24:45 2009 -0700

    Support the not-connected GPS state

commit 34f148500df427c148188c0ada20bf914a7c74ba
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 19:23:10 2009 -0700

    Use 57600 baud for GPS. Clean up gps init.
    
    Assume GPS is either in 4800 NMEA or 57600 SiRF mode, send just the sequence
    to get from 4800 NMEA to 5760 SiRF.
    
    Also, eliminate threads from the gps test program.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2deca0c52cd6cfb4baceb59c8a5458344bada338
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 17:09:20 2009 -0700

    Try harder to get the GPS receiver serial link sync'd up.
    
    We cannot assume that the GPS receiver is in any particular state when it
    boots, so we try to send the serial configuration at several rates and hope
    that it eventually sees something that it likes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31d5670a9144b943ce9c8cb00deb5fb659af0b1c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 17:06:18 2009 -0700

    Rolling average for pad location. Say 'GPS ready'.
    
    Use a rolling average for the pad location, instead of just averaging all
    positions. This filters out old (presumably less accurate) values eventually.
    
    When enough GPS samples have been acquired, say 'GPS ready'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bfe1e76c82738baaf65abbc58c3244a07ea8fefe
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 16:22:51 2009 -0700

    Split GPS data into a separate column
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f0179652e8bb85add9067e5253e981c60f2c51e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 16:03:35 2009 -0700

    Fix up SiRF parsing and test code so that it actually works
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b35447d05a0c7eaf4fefcbcf0065fe3320bba82
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 13:58:14 2009 -0700

    Add host-side gps protocol testing program

commit fef7334bddb9fccfbd6deab7d5d466ab3e76323a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 00:56:13 2009 -0700

    Hook aoview directly to alsa
    
    This skips the flite internal audio stuff which opened and closed the audio
    device for each phrase. This caused the first part of some phrases to be
    missed when using an external audio device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80cadf44f5f1accd6ddfca25c2af8d4d424f26d9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 9 20:55:10 2009 -0700

    Show speed. Format numbers. Timeout and report final status.
    
    The speed value is now shown in the top label bar. Ascent shows
    accelerometer-derived data, otherwise it's baro derived.
    
    All of the numbers displayed are now given sensible printf formats so they
    don't contain way too many digits.
    
    Instead of doing periodic reporting based on flight tick count, data is
    reported every 10 seconds based on wall time. After landing, or when no data
    have been received for a while, final flight information is spoken.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 19630ef084866f4230e68ccf11284b30c68128b1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 5 08:35:28 2009 -0700

    Dont smash aoview_monitor_parse input buffer

commit e506ed4b6efb86eab50204658fcd433b987e3831
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 30 15:25:52 2009 -0700

    Integrate flite into aoview directly. Fix great circle computation.
    
    Use a separate thread for flite rather than a separate program.
    Save voice state to gconf.
    Add filters for replay file selection
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5b988e0146075d57434f8484e1ec9fcf3e183df2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 30 15:24:53 2009 -0700

    Make window taller

commit 696233b088645bba1aaa6aa6c5358c3ecfa5cd3f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 30 15:24:31 2009 -0700

    Use 16kHz voice

commit 2e06772c8b6fd74f86e640ed97f0d5bc8c095c2f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 30 11:58:30 2009 -0700

    Add telem replay and larger labels
    
    Replays telemetry files in real time
    Shows height/state/rssi in big values at the top.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 566dde161385263700eaae51095eecfa9b5972ee
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 29 23:06:47 2009 -0700

    Update aoview/.gitignore
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ca2d910f3be689fd3c78a4f1be0555d6b1a30c1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 29 23:05:27 2009 -0700

    Use flite to announce flight state
    
    This uses the flite voice synthesis library from festival to announce
    altitude and speed information during the rocket flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 527d7c803ed9597b210634018cb2eb9d048d9846
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 29 23:03:58 2009 -0700

    Add GPS speed and error data to telemetry and aoview
    
    Having switched to the SiRF binary GPS format, the velocity and error data
    can now be displayed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee4919dd771b00e2a2dd1083c9528efa7baab50f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 29 13:54:00 2009 -0700

    Convert GPS to SiRF binary protocol.
    
    This switches the GPS unit from NMEA to SiRF protocol at startup and then
    parses the binary data. The binary data uses a different encoding of lat/lon
    than the NMEA strings, and so the telemetry and eeprom data formats change
    with this switch.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 49bf37767d2453869f2ca2c0832d1124322c66e0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 17 23:22:25 2009 -0700

    Add ejection computation utility
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e59520e343c2573b1b92c0b3c4aaa93e51bc55d3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 17 13:55:23 2009 -0700

    Fix clock initialization to not try to use 32kHz xtal on P2_3/P2_4
    
    None of our boards have a 32kHz xtal oscillator, instead we use those pins
    (on Telemetrum) for the deployment firing circuits. The old clock
    initialization code was switching from the 32kHz RC oscillator to the 32kHz
    crystal and overriding our use of those pins.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c3cc12c08ddefbd6456a55c54ef87dd94d4ae9a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 14 17:25:34 2009 -0700

    Some kernels reference USB ttys as tty/tty* instead of tty:tty*
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f2cbd41332b1b63865c5f1a4e749419b469853a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 14 16:45:19 2009 -0700

    Rename state apogee -> coast

commit 5834a12c1d3d71105c9e3d1ceaf9f3ffac9ff1eb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 14 16:39:28 2009 -0700

    rename states. launchpad -> pad, coast -> fast

commit 8c40f19acd09fe93d492c9355da8a1198c34b1c3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 14 16:36:29 2009 -0700

    Disable monitor mode when communicating via usb

commit 7adea9c59c73acd52743446c74fb675e0a1d6d05
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 4 14:38:45 2009 -0700

    Format GPS seconds as %02d.%04d to avoid spaces in the value
    
    The aoview GPS parsing code doesn't deal well with spaces in the middle of
    the value, so pad the seconds field with a zero as needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0e6bfee635b64092262936c858542318f6fc6dc
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jun 4 13:11:48 2009 -0600

    newer INSTALL file pulled in by autogen.sh

commit cf1e258d52b878df10b51a047709b10ecd51a68e
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jun 4 13:09:29 2009 -0600

    add a distclean target to src/Makefile

commit 176052b7c14fcad067835ecb550778faf67cf4da
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jun 4 13:07:10 2009 -0600

    add lib to the front of the subdir list

commit 208bc15714c7b4020c017eef19011c4eb9ab51e2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 4 11:20:10 2009 -0700

    Move build and debug tools to 'cctools' directory.
    
    These tools were merged in from the ccdbg package.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17d2432a8b9c15963cd3b821f025ad33972ef477
Merge: 210dbaa2 8a9a3f02
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 4 11:13:15 2009 -0700

    Merge ccdbg and altos sources into one giant repository
    
    Keeping these separate isn't making things any easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 210dbaa23cdacf3a6f2d6e23493e96ee2ac9bca7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 4 10:41:34 2009 -0700

    Use autotools, move altos to src subdir
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8cce307bb3156584ba17ae5a787f645dfee5fb94
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 4 10:25:30 2009 -0700

    Make menu seperator insensitive

commit 778cae8fc5a4b30e5045e4703316fc61ae18562a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 3 17:07:34 2009 -0700

    aoview: Add eeprom data fetching
    
    Fetches the last flight data from a TM device connected via USB and writes
    it to the flight log directory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf140966e9649e75b884c8aa5f25ffbf9eed10ea
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 3 10:57:46 2009 -0700

    Stop log dumping at flight end. Print 'end' at end of log.
    
    No reason to continue dumping data past the end of the flight now that the
    logging stuff has been demonstrated to work reliably. Also, to make
    automated log dumping easier, this prints out 'end' after the log data so
    that aoview knows when to stop reading.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35ac66969abe24ca23776618306a59fc17770e06
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 31 09:22:01 2009 -0700

    Start adding bi-directional packet link

commit 3a3bfd471a868d546d83cdc431b53c8f5208edb9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 23:17:33 2009 -0700

    Eliminate RDF tone generation.
    
    Now that we have a viable telemetry-signal based RDF device via TeleDongle,
    there's no reason to continue to waste power and bandwidth with a NFM tone.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d83eef0fe1d24a845ab29a535dfc56e13e7ee20
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 23:17:25 2009 -0700

    Change .gitignore to match new aoload procedure

commit dcfcf3bec6788460b6fe8c239c80bad4526bd15b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 27 22:01:37 2009 -0700

    Leave serial number writing to aoload
    
    Instead of building per-serial hex files, leave that
    process to the new aoload program
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a9a3f02b951382573ff74dd6ce5a1c0f335fa86
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 27 21:53:15 2009 -0700

    Add aoload to load serial-numbered altos binaries.
    
    aoload is a custom version of ccload which edits the data before sending it
    to the target machine, writing the target serial number into the data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a7a63c34b778e40a61ddabd16ec1af9a2be50c3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 23 21:20:12 2009 -0700

    Fix aoview telemetry GPS parsing code to use correct columns
    
    This code was trying to pull the GPS data from the wrong columns, causing
    aoview to fail to display GPS information.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26988c3e7acb2fa832810475e43e08fd2867459c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 23 21:18:57 2009 -0700

    Parse both telemetry or log data ao_flight_test
    
    Change the way data is fed from files to the flight test rig to handle
    either kind of input file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d6f5a0689023546464a71561f53fa2c943077c88
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 23 21:16:22 2009 -0700

    Avoid 16-bit overflow in velocity computation.
    
    Adding two 16 bit integers together can wrap around to negative numbers,
    this resulted in velocity values which never decreased, making the switch
    from coast to apogee state not occur.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa6d87aeb616dd62f0debaded297232022b4f8bd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 20 09:44:55 2009 -0700

    Make file handling more general so it can be reused.
    
    The log file handling stuff will be useful for saving eeprom data, so pull
    it out of the real-time log handling code and make a general interface.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b730c8bcbce649cdddba935e1112aaae538bc526
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 23:54:44 2009 -0700

    Ignore aoview_glade.h

commit 91b07410122d0eaaf292cdb31c200925d45eaf2c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 23:36:21 2009 -0700

    Transmit computed ground pressure and acceleration values
    
    These are the last two values relevant to figuring out the state of the
    flight computer, and as they are computed by averaging 10 seconds of 100Hz
    sample data, they're a lot more accurate than anything the receiver could do
    on its own.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71d1689759829f1bc8550f1a4d8c9f2dc90b2ab4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 23:18:09 2009 -0700

    Provide install target

commit f301b95e87c8ec1e3b58d595a05d486bede5e0c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 23:13:20 2009 -0700

    Embed glade file in executable
    
    This eliminates install issues nicely.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26361686d6fc63dc22d22285f0543c5c2c756fb4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 23:05:23 2009 -0700

    Add About dialog to aoview.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f3233c49f43cd4e372e613303919ce4d50255b2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 22:44:19 2009 -0700

    USB device names can contain '.' too
    
    Depending on the hierarchy of devices, names can contain '.', so allow those
    too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 33221277690e6ee30387c506c3f2b8237ed48efd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 22:43:34 2009 -0700

    scandir returns -1 on error
    
    In which case, the namelist is invalid, so don't look at it, and don't free
    it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7cb9fb675f56bf30ab6bf0bcdc5cb679709ffe3e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 22:29:54 2009 -0700

    Send computed accel/vel/pres values over the radio
    
    These computed values reflect what the flight computer is actually refering
    to for state changes, and will be useful in debugging the flight software as
    well as provide a filtered view of the data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c780d67b8a22d75a2da4b2af21fd35f0c6f5236
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 22:29:06 2009 -0700

    Handle disappearing serial devices
    
    Put up a dialog when the serial open fails, and shut down monitoring when
    the serial device disappears while running.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69616104813fc5ba89fb3128d04fb9328961c59c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 22:24:53 2009 -0700

    While on the pad, zero out velocity every second
    
    We integrate acceleration to get velocity, but that means sitting on the pad
    for a long time can add substantial error to the velocity value. Each
    second, take the velocity value from a full second ago and subtract that out
    of the current velocity. Once we detect boost, this will stop, which means
    that as long as we detect boost within a second, we won't have subtracted
    out any "real" velocity.
    
    This keeps the pad velocity hovering around zero, which is pretty useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1234694eb903b204488ddc7cb30bcfe34bf1e677
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 01:29:06 2009 -0700

    Clear table, reset log on disconnect

commit 4316b6af86b37522038e642235c163fcaad52e96
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 01:28:16 2009 -0700

    Add pad lat/lon, max accel, max height
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4348281bd788a13ea700413537f12da3c00356e4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 00:46:09 2009 -0700

    Clean up GPS display
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff68e38770351ddac3285ce275cd85adab01fd3d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 00:45:38 2009 -0700

    Make aoview window taller
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be3f4fed7b863c8cdaabe32b61b65a8b3cd11355
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 00:13:45 2009 -0700

    Add lots more aoview UI bits
    
    Logs data to files, displays current state in window.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93d7ce8e054515ed7b166eb042ae7f47e564d21d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 16 20:45:26 2009 -0700

    When logging starts up, right the whole ring to the log.
    
    This preserves the data pre boost-detect for later analysis.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fec4212a59a7b3321536b25707dcabc43c797c33
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 16 20:04:31 2009 -0700

    Abandon use of accelerometer for apogee detect.
    
    Integrating the accelerometer data to compute velocity worked for one rocket
    flight, but additional testing shows that it doesn't work in other
    airframes. Until we figure out how this should work, we'll rely on the
    altimeter to detect apogee.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09771c644de54ae354e8f98af7ba74289b3c0fcc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 16 02:25:04 2009 -0700

    Add preliminary aoview code
    
    AoView connects with TeleDongle to present telemetry information in a
    reasonable form. Right now, it just displays information to stdout, but it
    does have fancy dialogs for finding the USB devices.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 37250b00f6286aee4b3b28604f5d463db3079a89
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 20:41:54 2009 -0700

    Discard usb output before connection. Handle USB reset.
    
    Discarding output before USB is plugged in allows threads that send output
    and do other things to work without a USB connection. Unfortuantely, there
    doesn't appear to be any way to detect when the USB link is disconnected,
    which means that once USB is enabled, future writes will continue to block.
    
    USB reset causes the USB interrupts to all be reconfigured back to power-on
    state.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b974217958b1017e62d6c4f4568f547ccc30c58
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 20:40:42 2009 -0700

    Enable radio monitor by default in teleterra, teledongle and tidongle
    
    These ground loads want to monitor the radio constantly, and not require use
    of the 'm' command before listening.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 25fc03a333b2cfad0a93ebc385fbcf74b63c229e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 20:39:28 2009 -0700

    Remove monitor/rssi functions from telemetrum load
    
    Telemetrum is now a flight-only load, use teleterra or teledongle for ground
    boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 05493b98eb1ae4d30cb0b600849d70b03fa33594
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 20:38:11 2009 -0700

    Split out ao_state_names to separate file
    
    Allows state names to be used in programs without monitoring enabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d085d43701e3cdd2119e947a9ae45baa78c80318
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 14:29:30 2009 -0700

    Indicate RSSI with a blinking LED
    
    Blink the red LED at a rate proportional to the RSSI value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 055331d5f7d5adc40c348c3efd331a562dcda82a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 11:19:13 2009 -0700

    Make ao_flight_test show AGL altitude and positive acceleration under boost
    
    This makes the output more readable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d91208fbf5fc7797b93087ef8619454c4bed0130
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 11:18:24 2009 -0700

    Make ao_flight_test able to read raw logging data
    
    Protect ao_flight_test reading functions so that a simple
    'script' output can be fed to the program and have it work correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3dbd8949e1102220ad5fd0863f493c819b96e46
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 11:16:53 2009 -0700

    Print only RSSI when packet CRC is invalid
    
    Packets with invalid CRC usually contain bogus data, so don't print that,
    just print out the RSSI which may contain useful data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8168820b667cc1deffab64dd81cb4e6e2e6eabe4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 11:00:43 2009 -0700

    Accelerometer-based velocity values are invalid after apogee
    
    Because the orientation of the flight computer relative to the ground is
    unknown after apogee, the accelerometer data cannot be integrated to compute
    velocity. Main deploy is now based purely on barometric altitude and landing
    detection no longer checks for a low velocity value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 24fdda44ff8604e40510b196ead17564d8f8cd3d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 10:59:04 2009 -0700

    Add velocity check for boost detect via accelerometer
    
    Bumping the rocket can cause a brief period of high acceleration, which may
    cause a mistaken boost detection. Require both a high acceleration and
    reasonable velocity to trigger boost phase.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a1aa3fdbc0d1fae5e7ee027bf8904598c6ebe41
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 10:58:30 2009 -0700

    Typo in callsign

commit 497c89a7d08920630894b2605c3b6a0bdc4c229b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 10 23:11:06 2009 -0700

    Use recorded accelerometer baseline data in ao_flight_test
    
    With the flight computer recording a long-term average value for the
    accelerometer in the flight record, use that to prime the flight test code
    when running a log file through the simulator.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba3c53636e485450f48093d0a88a6629775f7c3a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 10 23:01:16 2009 -0700

    Don't re-initialize the landing range data at each apogee detect sample
    
    The landing range values are used only after apogee detect, so we need only
    initialize them on the transition from apogee to drogue.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b623b1098bc7a10d471730259438fb82804221d0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 10 23:00:06 2009 -0700

    Initialize ao_min_vel with |ao_flight_vel|
    
    As ao_min_vel is stored as an absolute value, it's important to preserve
    that invariant, even though we don't expect ao_flight_vel to be negative at
    coast.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9584e846b9bd7926d61451d32ba5d7a30416f7b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 10 22:58:31 2009 -0700

    Decrease telemetry rate on the pad to 1/sec instead of 20/sec
    
    Transmitting telemetry through the radio consumes a significant amount of
    battery; reducing the rate to 1/sec will reduce power usage while waiting
    for launch.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97cecb517cd7bf75e1219c76a93bfe6964c07052
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 10 22:57:19 2009 -0700

    Increase the initial accel/baro average to 1000 samples
    
    To get an accurate baseline of the launchpad state, take a longer average of
    the two sensors as the unit boots up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98806b1ff3f41484663d61ff430e9e2764c7b5e6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 10 22:54:14 2009 -0700

    Record average accelerometer value in flight start log record
    
    The average accelerometer value cannot be extracted from the log as the
    record starts after that is computed. As that drives much of the
    accelerometer-based state transition logic, it is an important value to
    have, so we log it as part of the flight start record now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a12edbfe21fe27a9efbf87bacda9ab4806256e2b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 9 10:24:10 2009 -0700

    Add version command to show product information

commit e80b87f5e3ccf152d67a2e87bdefda161c455599
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 9 10:23:49 2009 -0700

    Pad callsign with nuls

commit beae3360828da21eb1a3c4f88e930f242d4e36b7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 1 08:14:57 2009 -0700

    USB spec limits bulk endpoints to 64 byte payload max.
    
    For full-speed devices, bulk endpoints may use 8, 16, 32 or 64 bytes, but no
    more.

commit de7814c738488c2c16c6216c93fa78128895e5d5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 29 17:46:56 2009 -0700

    Use 'char' instead of 'uint8_t' for character data
    
    String and character constants are of char type, so using uint8_t causes
    promotion to 16-bit types when comparing the two.

commit 4ae74fffb939d67424efa3e7f433637f1f920ebc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 29 17:46:36 2009 -0700

    Eliminate incorrect cast in printf string argument
    
    char * is a pointer to a string in the default address space, not a generic pointer
    to a string. As such, the compiler (at least 2.9.0) mis-compiles this if the
    cast is included.

commit 39f2a3c6bd501d12a92bfd38434ce67bb5beb70d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 29 17:44:41 2009 -0700

    Correct radio frequency shown in config display.
    
    Radio frequency base is 434.550, not 435.550

commit 75ca1751b7cac2f8074d0713ee96d6ab45b54f19
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 29 17:42:26 2009 -0700

    Reset landing interval tests at apogee
    
    This moves all of the interval management into the landing test code and
    out of the main loop. The interval is reset at apogee to make sure the
    sensors produce a stable reading for at least 20 seconds

commit 7a1b77c2d7253a681389f32b70e2460aac188807
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 26 17:53:13 2009 -0600

    clean up host programs, too

commit 5df80c346d65a9d56a8699b056dc44924acb31fe
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 16:04:07 2009 -0700

    Was missing v_batt in adc dump command

commit c3fec2c4c65db71e88ef0c05c69463438a7cfc6c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 15:38:28 2009 -0700

    Add manual ignition and igniter test commands

commit 819f1de8dd6010fae050bcef930943c7923929f9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 15:38:03 2009 -0700

    Clean up commands a bit

commit 178abb5c8439509926a5507911d7148b84f051b8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 15:08:58 2009 -0700

    Clear more files on make clean

commit 70a69f3acdca27b80cdb2069de59bbc6dba83dbd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 15:05:29 2009 -0700

    Label binaries with product and serial info

commit 5ed3b1cb52b573db1fee9655a29a0e6dd72f53fe
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 01:37:02 2009 -0700

    Make sure full log is written and flushed on landing.
    
    The final state change to landing is recorded in the logging thread, so have
    that turn off logging once it has recorded that state. Then make it go to
    sleep.

commit 2e737ad00cad5d893b252d8aa9dbff3d9b800731
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 01:36:53 2009 -0700

    Clean up monitor output a bit

commit 38a0b61b0a0b3c00f064c8d562950a17a6ddff4a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 00:11:32 2009 -0700

    Add configuration support
    
    Current config variables:
    Main deploy altitude above launch (in meters)
    Acceleration zero g calibration (manual or automatic)
    Radio channel (freq = 435.550MHz + channel * 100kHz)
    Callsign (max 8 characters)
    
    Supporting this involved shuffling code around so that the
    non-telemetrum builds could include only the stuff they needed.

commit c65f1a1acd2ca00758833cec5d3f8056d303d3e2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 14:44:33 2009 -0700

    Allow for slower ADC operation. Add power saving code.
    
    This tries to make the flight computer use less power by disabling USB in
    flight mode, lowering the telemetry rate after ascent. It also disables the
    RDF beacon during ascent and re-enables it once descent has started.

commit 8e7b48b5f090be81980ab00fbce814ae1cc253e4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 14:44:04 2009 -0700

    Allow ADC to be disabled

commit 7bc3d9962872850e7b420221cf689db16b4305cc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 14:43:23 2009 -0700

    Place CPU in P0 state while idle

commit e45fce7f82d704d677f84c69b0e07588d109d780
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 14:42:20 2009 -0700

    Add RDF beacon and callsign to telemetry

commit 61510f98404bca6861b2da98f6cd9ba9deb76968
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 14:40:51 2009 -0700

    Add radio code to emit a 1kHz tone

commit 0f07803d84b5ac89500ee33a6818c50583e3ff7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 13:18:37 2009 -0700

    Allow the USB system to be disabled/enabled at run-time

commit 45976af820fc41099928df71ea8304c56eb9fc7c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 13:16:27 2009 -0700

    Make LED usage depend on target device

commit 4a050704ad2c497e9f1b0988334228b0bbc4c170
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 13:13:24 2009 -0700

    Make some functions reentrant to save DSEG space

commit 6b3d25a6d6d7847765eb03b836913dd5ecef2993
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:17:37 2009 -0700

    Add monitor task to flight software
    
    Allows the use of telemetrum in teledongle mode.

commit ad0d2d88a91cbd02c56ea5ff6dab23e16aec6510
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:17:19 2009 -0700

    Report difference from ground to max altitude at landing

commit f94ab879ff6f97708827c74facd11003a2d8b590
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:16:29 2009 -0700

    Display data with units while running simulation

commit 6fb26340b150e831a8a9e25e3b68074c29e48dbe
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:13:31 2009 -0700

    Enabling apogee detect via speed: < 200m/s && < max_speed - 50m/s
    
    This change ensures that we actually got going fairly fast, and then slowed
    down a bunch before enabling apogee detect. Otherwise, we'll detect apogee
    right off the pad as we're not going very fast at that point...
    
    This also adds the 'f' command to show the current flight status on the USB
    port.

commit 20b9f304ecbddd73a0ee2461b4c5e80f08157f98
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:12:28 2009 -0700

    configure igniter ports, set values to measured ones

commit 6bf1d91ce0b723abe2bcec89668c13135ec044cf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:11:40 2009 -0700

    Move ao_led_init to end of file to be consistent with other files

commit b4de7d550ec9a09ccf5f6a72debc6646706e3516
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:10:20 2009 -0700

    Define ao_state_names in ao.h so other people can share

commit 8e62747b3692d0ac75b08eaf5c3e4b5d766be6ad
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:09:31 2009 -0700

    Bump NUM_CMDS to 10

commit 2f781beb73ef24ab5fbe2688a83d07ad26c15972
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:09:09 2009 -0700

    Move beep_init to end of file to be consistent with other files

commit b99315cee4ab796376458a2442cf36806fa4aed3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 10:19:31 2009 -0700

    Update flight algorithm based on data collected from SN-1 Flight 1
    
    This now correctly sequences through the flight data collected from the
    first TeleMetrum test flight.
    
    This also completes up the flight algorithm test harness (ao_flight_test),
    which runs the flight algorithm on the Linux host from a captured data log.

commit b32f2f0090ff967edac07ae4d7a9895ed0b96d31
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 23 22:17:44 2009 -0700

    Add igniters and update flight control algorithm

commit f155333ae18a25068644792e8940269d9fb28033
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 00:15:09 2009 -0700

    Avoid ram from 0xfda2 through feff, its funky

commit f9c1c545c9dc11c3190a6cf7504883131fffce2f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 23 22:18:33 2009 -0700

    remove ao_flight_test until its ready

commit 86e73c009f78dc4664883353124fc891fbb01dce
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 23 20:50:07 2009 -0700

    Add teledongle module

commit 204daac71ad56926730f5d6860bd70c645302e19
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 23 14:26:01 2009 -0700

    Set telemetry rate to 100ms

commit 306b28f632e21b42ab165e7944283cf9764b590e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 23 14:23:26 2009 -0700

    Wrong license on ao_monitor.c

commit dca3a6de26d26c0020f3fb2cf5d8ac1552c195b1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 23 14:23:00 2009 -0700

    Crank up radio to 10dBm

commit fbe3096f7e9a8112dbc79f376eccdaa6872ae520
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 16:03:28 2009 -0700

    Add COPYING file

commit 9b7788f18bbaf3c4e5ebbf6c5ebd926468b0e045
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:55:01 2009 -0700

    Clean up TeleTerra files

commit 61cee50c86e275f9fde875bd317c3e74255394ec
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:53:55 2009 -0700

    simplify ao_time function

commit 3703ecdc9e190f2e0b7ead0e71b78be881c1f3b7
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:53:46 2009 -0700

    One line radio status

commit 1fbb3c17672a03ea6318fee07f9c2dcd7a8d0b16
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:49:16 2009 -0700

    Add new binaries to .gitignore

commit 00d5610caff61559eb24c24beaa56629d6bb03be
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:49:00 2009 -0700

    Speed up dbg port bit frobbing

commit c7555eb16876aa8ff9fe7f648d325a1b8fb54d23
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:48:28 2009 -0700

    Use sdcc from path

commit ada6dea04b94be016598566c4c13e6105aaec353
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:48:14 2009 -0700

    Clean up task list formatting

commit 0a1b2297ee9f5bbb918bd72f26088a3e0b84839a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:47:57 2009 -0700

    Control radio monitoring with the M command

commit 837c620f07b63efc171be3ac14c78bc99adf7592
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 14:25:43 2009 -0700

    Shrink USB output buffers, work around USB packet errors

commit d87e9c25947d7cc2eba8894a524977f2c55a089a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 21 02:07:24 2009 -0700

    Clean up telemetry now that all packets are the same

commit 1b333def5052d2ed47fdeaef23a897fe326f6340
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 21 02:07:08 2009 -0700

    Add longer debug delays to reset/debug_mode entry

commit d1887ded41a5bfec8e10e9fd736fa9444b9b6222
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 21 01:17:03 2009 -0700

    Fix up fancy dbg stuff. Add teleterra initial bits.
    
    The dbg stuff needed a bit of help to actually walk the tables; it appears
    that complex expressions confuse sdcc.
    
    This also adds primitive teleterra bits, but no UI, etc.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43c8f7012102cdb591ace899420c10e4a78385ad
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 20 23:33:41 2009 -0700

    Add radio support. Build separate executables for TeleMetrum and the TI dongle
    
    Ok, way too big a patch, but things were in rough shape.
    This patch adds support for the radio, both transmit and receive.
    Then, because I could no longer run the TeleMetrum code on the TI
    dongle, I ended up building a separate image for the TI board, which
    involved creating a mechanism for having multiple command sets and splitting
    code for different functions into different files.

commit 5be13b76a2e29b84cd6d1eec065e3354b0dafce5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 18 23:19:24 2009 -0700

    Start using pdata area for less-frequently used data

commit 3e18b5a0d4c7d84df98b6ed0b7783de1d42d45bf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 18 23:19:05 2009 -0700

    Slow down panic presentation

commit c4e983daa4579896b227fdcb2be43fad75e94307
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 18 23:17:45 2009 -0700

    Parse GPS data locally. Add 'g' command to display recent GPS results.
    
    This parses the GPS GGA message and stores it in a global variable,
    protected by a mutex.

commit ed6f67dc47d750d5ff8bea63ae7cbb560689b9b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 18 23:16:01 2009 -0700

    Add task names and 'T' command to show task status.
    
    The T command shows the current wchan and PC for each task in the system.

commit 3d5a5fc4db5f681e848202c4ee4099d2879677d6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 18 19:32:18 2009 -0700

    Fix GPL version at 2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 022f83ca6fd589005d8eb3e25e633950fef69fa7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 23:38:14 2009 -0700

    Add gps, debug dongle support and pressure alt tables
    
    GPS also pulled in serial support. The altitude tables take raw 11-bit
    pressure sample numbers and convert them to standard pressure altitude
    values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31fce622b1bab7e3f421069d7f6d4d9bdcd825de
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:32:45 2009 -0700

    Enable FEC in radio packets

commit 293a357911090a2f37bdd6f7ea96942079ffdf2e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:29:42 2009 -0700

    Add CRC to radio packets

commit 20834caf01ddf481e8362b0d2627ef383a82e09d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:23:10 2009 -0700

    Add data whitening

commit 94e5343a72121a81ab19bf5025e6b6fc9847eb4f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:19:25 2009 -0700

    Add packet status byte defines

commit 04bc51c170c6f22bb5cc16867ce9a307818a7a00
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:11:31 2009 -0700

    Add separate xmit/recv programs to radio demo

commit fafe55c3405964e0defdf25b6c00236f9aaefbc5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:11:11 2009 -0700

    Get env var for debug method selection

commit 26095fc0511ee0d5213f038986032f7c59964cf0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:10:47 2009 -0700

    Run-time selection between cp2103 and cc1111

commit 543bedde83cbce5145668e72965e02d892187b59
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 16 20:38:14 2009 -0700

    Send data

commit 5e2393eb6b1a6d7b180bd63d5165ee7b7ff5f9e0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 15 14:25:26 2009 -0700

    Move a bunch of variables from __data to __xdata

commit 4d1091d9bd121f05f5fe0a9c9d2bc0da8c562b9a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 21:25:15 2009 -0700

    Slow down panic code, disable interrupts

commit 545478dd02eaeff6a65d318e722b1e4fce5e01b4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 21:24:25 2009 -0700

    Keep reporting flight state while it changes

commit 9605045164882b4ca3d1317ac860b02513a51f30
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 21:23:55 2009 -0700

    use red LED to indicate system startup

commit dc844ee7e49a3b6145b3165252a592ed070d600f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 21:23:13 2009 -0700

    Use ao_ee_flush_internal while holding mutex

commit 5e45d1c89b00e74d5b2730345843f43aab516af2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 21:22:56 2009 -0700

    Leave beeping and lights to the flight code

commit 902c342289c1d13a4d55b9224acb6d67578b7a60
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 21:22:31 2009 -0700

    Make mutex functions reentrant

commit acc4fc635edb70ec1ba2dff9f7ac0c8542c72c47
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 19:08:01 2009 -0700

    Add in existing flight pieces: flight/report/log
    
    These pieces come from the old telemetrum firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac99982b10fd5772218660137ee21db9b90cd885
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 14:21:56 2009 -0700

    Add eeprom driver and command loop
    
    This involved adding dma control and a mutex implementation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fbd8f4aff5058f4d371596b04715b7cb6d38e729
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 11:04:09 2009 -0700

    Switch from --model-large to --model-small
    
    This shrinks the application quite a bit, and should make it faster as well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb63262699d3a6fbf347d24efda8b01f75b7d0d3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 10:02:19 2009 -0700

    Add comments, clean up white space, etc.
    
    Various clean ups now that the basic code appears to work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e4abf3a40c39d0ce4f466281bef9a464df85dd4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 13 21:58:07 2009 -0700

    Switch USB to double-buffered

commit b56a44e48552bc32dbba9ff21770c370219a684a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 13 21:51:59 2009 -0700

    Fix USB input/output by reloading packet limits.
    
    The USB controller is reset during the connection process, which clears the
    packet limits set in the controller at initialization time. Reload those
    values when the configuration is set.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdaf3fc5802acf2ddc7972a15649ab0e1b31b873
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 13 20:39:46 2009 -0700

    USB working up through reading strings

commit c5c1e3fb1c253d387be02c127253ac2a55d577b4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 13 13:51:08 2009 -0700

    Add USB support.
    
    This offers a single CDC ACM device over USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3f25a1cec7d2a034aa544569cfd23bea1a996c5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 23:53:55 2009 -0700

    Add beep/led support.
    
    Support our P2_0 connected buzzer, and formalize LED output support.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e14f07bfdb8824fc7ed6df1129c66ee39ffd6d54
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 23:17:16 2009 -0700

    Add A/D sampler
    
    Sample A/D at the timer tick, placing data in a ring
    of samples.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 823f4f92de0c1f8dd7a644a8e56ffe9822bee6e2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 22:52:47 2009 -0700

    Add 100Hz timer
    
    Use Timer 1 to generate a 100Hz timer interrupt

commit 650a77e209dbb54c8d8fd9824cee430985564973
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 21:58:49 2009 -0700

    Update README

commit 870e98334018a66de8a6e4a659d2dc5dee1cbecf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 21:52:56 2009 -0700

    GPL Version 2 only

commit 11c526bdcbf4012e18fbfdc29ca8832870ca38f0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 21:47:32 2009 -0700

    Add load command to s51

commit 55402ba3e87fd699c51079843309f1f0d1534724
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 21:33:55 2009 -0700

    Make test more complicated

commit 3d3f849c9af9028f667cef4afedc0798d39a9efc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 21:33:46 2009 -0700

    SP points at last pushed byte

commit f72c4cbc8fd9412dd1cce0fc446e7bbd2edc2d34
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 20:27:03 2009 -0700

    Add .gitignore

commit 1903a86bf2cc6b685ccc475e62eabe49a4ec5b43
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 20:25:39 2009 -0700

    Initial AltOS import

commit 5221dc63cf3a059a32aca2bfa7828c215be814a1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 12:38:58 2009 -0700

    Add ccdump

commit ee110425fb814780476d1d3d8a257af126f41763
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 6 17:09:23 2009 -0700

    Bump buffer pointer as data is written to cc-usb

commit 2d9b8a83a2d9f495199033e43f519d26f27938fe
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 6 11:31:49 2009 -0700

    Add support for a serial-connected custom debug dongle
    
    This uses the cc1111 board as a custom debug dongle with faster
    methods for communicating with the debug target.

commit 24edd56155ed0fa02fdd8f66fdc7aa5a1021bf7d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 1 17:50:47 2009 -0700

    Reset cc1111 on s51 exit

commit 5fcfe854d29e1862d9a6adcbef3ef5119eb52fa3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 1 00:06:45 2009 -0700

    Add timer-based beep test

commit 91607bebdd167ac632aca4b66e22cb0cabdf0d20
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 26 22:41:47 2009 -0700

    Add readline support to s51

commit 66ee94ed10e3d79b24f45a5c63e58456d4d30343
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 11:37:48 2009 -0700

    Deal with MSB-outputing DMA engine

commit d3732fd405af03c3752a84c4b78da7ef5ebd3744
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 11:14:03 2009 -0700

    Flip ADC bytes around

commit 50cc8e97e76d9b60c622962e1c74cf422dfb2c0f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 11:01:30 2009 -0700

    Add spacing for serial adc data

commit 5577ca3762bfc000b0bc3782c73a8f95996a28a6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 10:58:57 2009 -0700

    Inc only one on dest addr

commit 378227d869a3e8787c532c8c4e1563b44002c4b5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 10:55:17 2009 -0700

    Dump remaining inputs

commit f54a41e37d6897db2e24fbc82880076b78a0ae41
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 10:50:36 2009 -0700

    Remove poll for ti demo button

commit 2b93a70fdd9e47e8195855451aa19ecad5d8b068
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 10:50:14 2009 -0700

    Add adc to serial conversion

commit d9fd548db15232e3a8823815962b252c7a5e7cba
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 10:04:50 2009 -0700

    Add ADC via DMA example

commit 61faf2b773300988fe27cfde5bc045be9950a1b0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 09:45:14 2009 -0700

    Add DMA example

commit 7b3fdf5b42c9be9bebc1ceb7a52ff0f5a2a28fcd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 01:05:36 2009 -0700

    Back to 0dBm

commit 31d59b88baa2cd96dc6263d1c5877283f2cd8c36
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 01:03:08 2009 -0700

    Make radio test compile again

commit 9ce713fdd19bf1a51370dacba3670504356c5c11
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 01:02:07 2009 -0700

    Wait for xtal to stabilize

commit ffd43886dc902f3bb7407294018e3d62cac39480
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:55:11 2009 -0700

    Check serial input

commit 029963cc94fbb47560118b5de73c537e2c14ed7c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:50:02 2009 -0700

    Eliminate array walking

commit 019456a17d36f8f9f9b72cfbc980492175086d32
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:41:49 2009 -0700

    Add a per-char delay

commit cfaf187e96ba98eb8dd934409a10bc70273fe68a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:36:35 2009 -0700

    Use UTX1IF to wait for serial TX complete

commit 006124529b243c7657a94312d2c868a82878d8bb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:29:29 2009 -0700

    Send more interesting text

commit 5049acd3d1ae42304513f667f55a2ddffa4c685a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:24:56 2009 -0700

    More random serial bit frobbing

commit 50bdc2407c674a4770912d3a626f36820a7f1527
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:13:15 2009 -0700

    Flip serial TX code around a bit

commit 7b7617e376afe0df1d505375b76198358330370c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:09:47 2009 -0700

    Try serial polarity high/high

commit 18edacdb1e6e429cc29a164e22ef2a566096b9d9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:06:32 2009 -0700

    Make serial test simpler

commit 62744c186792739c3bf5798c80ff87c69fbe2b65
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:03:45 2009 -0700

    Flip start/stop bits around

commit 9e96107d5d1a9681b07c36bb5860c748bfe10ec0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 23:57:12 2009 -0700

    Stop high

commit c41ceb9a488b2209d1d3c09967d1473ce608030f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 23:24:01 2009 -0700

    Change radio to -30dBm

commit c35de083ca3d4f362063b056a0fd74ffe629d168
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 23:11:48 2009 -0700

    Add serial test program

commit 8ecbd8734f0fb5588b2a8eb20720cfc6f43dfb47
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 22:37:38 2009 -0700

    Wait for xtal to stabilize after changing to 24MHz

commit e120269fc0f8e14ddf1755337b1d092173e16da2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 22:21:31 2009 -0700

    Actually return byte read from SPI

commit de1ac6f99a1526fa840a52cfc10fa3edc0589bed
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 22:12:51 2009 -0700

    Clear UxCSR_TX_BYTE after transmitting a byte

commit 3ed3ff63e46767a256d30c5da5c52ae20089a91d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 20:04:58 2009 -0700

    Led the LED turn on

commit 91b3a6ae74184692f45702587c4d678b2799ad8c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 19:55:04 2009 -0700

    actually write and compare SPI test bits

commit 7de3a43887485c3c6cf52960376ccde33fb33985
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 19:54:02 2009 -0700

    Add USART-based SPI test code

commit ef0eef68280e9b6ca5e3bb71062e23054340e1ed
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 17:22:36 2009 -0700

    Change spi test string

commit 8131389ee5018c05b721146a98367150cf500fdf
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 17:15:09 2009 -0700

    Oops, not merging in the bit read for SPI test

commit 3429016d1359ec650993d2fb0596184e3f717871
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 17:04:45 2009 -0700

    Adjust clock/data phase for spi test

commit fedd18b28ea54e1dabcd2f9e8cab3ae4ee0fd070
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 16:35:13 2009 -0700

    MISO needs to be an input

commit f0c233f25a208a636833312b1766825815735304
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 15:41:55 2009 -0700

    Add bit-banging spi eeprom test program

commit 6eeee64cf16ccc9218dbdde5426f25bda5e3407f
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Mar 18 02:58:33 2009 -0600

    working beep at around 4khz

commit 4726317de811c20e8d6754762437b5c9cbb3a48c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 18 01:54:34 2009 -0700

    Add simple test program to light up the transmitter at 434.550MHz
    
    This starts a transmit sequence, but doesn't send any data so the
    transmitter just locks on.

commit a0a27600ee2bf237e74eb83767a8d2e7c91df24f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 15 18:14:21 2009 -0700

    Correctly comment which bit the beep program uses

commit 25b77d236c01258abfc03114c2fc9ea2d69ca6e7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 15 18:11:53 2009 -0700

    Add telemetrum beeper example

commit 164b4e4749ad64ebbe26e84fd7b4fa1aa733dbe4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 15 18:11:20 2009 -0700

    sdcc gets the lib path correct based on the model

commit 04a316133af93b79bfbebb91f05eec1015ec2abc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 15 18:10:43 2009 -0700

    Bump debug speed back up

commit 9fd63972758d6d5572f7bcaadec9b1c0e974a2e8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 21:05:40 2009 -0800

    Only flip changing bits in async mode

commit c8fd04e154bcfd65ae1200980bd8163caabd7fe4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 21:05:06 2009 -0800

    The debug port only works if reset is higher than clock. weird

commit ade11f88754b4ab0386ebf86afc5257e59238f62
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 21:04:38 2009 -0800

    Make manual bit flipping sync after every transaction

commit e63b5271bb54afc36e4b9891e51e053ff6011092
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 14:49:22 2009 -0800

    Add ccmanual

commit 77d754afc2d14aaa4413c13ebe3777ef385f62a9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 14:48:49 2009 -0800

    Sync after manual bit reading

commit 5a338c8a7394d003355f96a8777b6fe83bb8493c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 14:48:35 2009 -0800

    Flip debug pins around to match telemetrum

commit cc0495b7028f4b1189a00707d828a68534d1dea2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 6 22:52:35 2009 -0800

    Wait for a while when switching the RESET_N line
    
    The cc1111 manual suggests placing a 2.7kΩ resister and 1nF capacitor on the
    RESET_N line to filter out noise. This increases the time necessary to reset
    the chip to several microseconds which is longer than the interval between
    two USB packets. Flush the USB packet queue and sleep for a while after
    changing the value on the RESET_N line to make sure the chip sees the state
    change.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41289e6d8f1767547a33fea349866e928e44910f
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Mar 2 07:46:20 2009 -0700

    minor s51.1 formatting fixes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fdee231ed097a4348aee78fbd4aa92826b80de03
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 1 23:12:31 2009 -0800

    Add s51 manual.
    
    This documents (briefly) the s51 hex debugging interface program, including
    some simple commands to test the operation of the system interactively.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7d91bd23b8214e09deae0aafb516331e934c49b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 1 18:43:03 2009 -0800

    Sometimes the link breaks and the GET_PC command returns garbage

commit 3cc8d11eb8d5d0b42141dd84a58d461287f59e3a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 25 08:38:48 2009 -0800

    Support 'set' command
    
    The 'set' command modifies target memory and registers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 60940b4be23962db79b8e914ec943d0636dd68ad
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 5 21:45:21 2009 -0800

    Expose ccdbg_set_clock API
    
    This allows applications to change the debug port clock
    rate on the fly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb09e61b0682eb2aeac8e1a34d58b897ba6db8e7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 5 21:44:44 2009 -0800

    Use custom sdcc libraries (this needs to be configured...)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ccfe0887c794397131ab1c986c25f66eea86a6c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 5 21:43:44 2009 -0800

    Have S51 ignore SIGINT while running under sdcdb.
    
    This prevents keyboard interrupts from accidentally stopping
    s51.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c03937b36aac82b08f4ea0c6da33a994fe15ec7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 30 22:40:13 2008 -0800

    Add simple and timer sample programs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c2a65c743a4ffae96ed27dbc38c1bf9242ed1df
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 30 22:35:53 2008 -0800

    Save/restore registers to host during memory operations. Cache ROM data.
    
    Because the debug port uses instructions for most operations, the debug code
    will clobber registers used by the running program. Save and restore these
    to avoid corrupting application data.
    
    If the ROM file is known, use that to return data instead of fetching it
    from the target to improve performance.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea366058aa467a8a7caf17e7014758f3741ea7f7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 29 12:35:11 2008 -0800

    Fix flashing less than a full page of data. Verify page at a time.
    
    The 8051 flashing code requires special help with counts with non-zero low
    byte. Also, instead of verifying the entire flash contents at the end,
    verify each page as it goes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0697186a2f9b6139636ff5d5c162879c85caf9c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 28 00:11:13 2008 -0800

    Use SFR access funcs. Support 'dump' command. Add -m (monitor) flag.
    
    Not all SFRs are visible in the unified address space, so the SFR-specific
    accessors are required.
    
    The dump command is the same as the various 'd*'
    commands, but also supports dumping program memory.
    
    The new -m (monitor) flag watches the command stream between s51 and sdcdb.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 23aca1fcbc169184e32d4ec19f28dd4fd4cfda36
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 28 00:09:30 2008 -0800

    Save/restore regs when reading/writing memory. Add SFR access.
    
    The DPL and ACC registers are used by the memory access code,
    so they need to be saved and restored. Stuff them up high in ram for now;
    this should probably be fixed to pull them back to the host instead.
    
    Special SFR access is required as not all SFRs are visible in the unified
    address space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1405838160b69e2cda456e21502a1d03b3aa7548
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 27 11:25:58 2008 -0800

    s51: get start address from ihx file. re-enable breakpoints after reset.
    
    Use the start of the ihx file when asked to run from 0x0, this lets
    sdcdb run programs from ram.
    
    The reset command clears all hw breakpoints, so reset them afterwards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1264c3676e95427bba5d01e05c303d036a7f9eca
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 26 23:05:04 2008 -0800

    Switch to libusb-1.0 and use async interface.
    
    The async libusb interface offers substantial performance benefits by not
    making each command wait for the reply. This makes talking over this
    interface almost reasonable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2d9cfd74fd66836c913c02276e09136d83b35dc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 26 17:58:48 2008 -0800

    s51: add breakpoints and the ability to block awaiting a breakpoint.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4c4093c3fdd309123fdd068c0e1ff4947104492d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 22 19:11:56 2008 -0800

    Add more commands to s51 assembly-language debugger
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55eba4fa08b022197106245d36a70f575a070b0a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 22 19:10:27 2008 -0800

    Make read_memory debug output use ccdbg_debug.
    
    This makes it default to not being presented, which makes s51 much happier
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e75918f3667a5c8ad294bec4acef6fe81682edf6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 21 23:33:35 2008 -0800

    Add preliminary version of s51, a UI clone of the 8051 emulator.
    
    sdcdb provides source-level debugging using the 8051 emulator, s51. By
    emulating that emulator a the UI level, we should be able to get source
    debugging right on our target platform.
    
    This is just the preliminary structure for the program with most commands
    not yet implemented.

commit f7d49868aeae80d515b12a7e339628f1296754a6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 20 23:30:06 2008 -0800

    Cleanup work; separating out the cp interface to be more abstract.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30f23f23a6db3d12fdc9c088cf6ab47c5e5077fb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 21:13:04 2008 -0800

    Clean up autotools stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9025eb792861930e6af918d2727c4f5d97a69936
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 21:11:45 2008 -0800

    Autotools.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab909db28307cfbf7ee8d692506bb79d7ffd627a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 19:08:13 2008 -0800

    Ignore .ihx files

commit cc8db276bc4f2fd7eb00168a5c0689a8457a5c6f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 19:07:37 2008 -0800

    Move blink example to subdir
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82e2d7ebed6682062dc400478c736bd6c91195c9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 19:04:26 2008 -0800

    Clean up makefiles, move ihx files to .ihx

commit 52fb5f795adfd7f62e5b6dbe65877d14361cfdae
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 14:39:57 2008 -0800

    ignore more stuff

commit 4ecfc33f16aa36b315519e6f279da65374b67aba
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 14:37:53 2008 -0800

    Add cc1111 isr stub example

commit d32e6658c3e489b62ba3cf6d22e3ab177b9b8a3a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 14:37:29 2008 -0800

    Add blink-tiny flash and ram versions

commit b4d1127ef007843c643b778b3b2f6b915b1d5d9a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 14:19:29 2008 -0800

    Flash multiple pages. Eliminate off-by-one error in hex_image length.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55995515b9d4fc1e193039eab697c5d03db417c2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 11:04:16 2008 -0800

    Add flash writing code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bc52385b8f86f9ca1c450ad106e6d8afe3bc153
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 18 12:37:32 2008 -0800

    faster
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3779cc8b32cac3640f42bd0400d4199ddae965a1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 18 12:17:41 2008 -0800

    cq
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc03adc179669d41e3551d74b3c5a60db41ff217
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 18 12:07:06 2008 -0800

    Add ability to load Intel HEX files. Add sample sdcc LED blinker.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 807e2adacb025af77bb53c03209e9c8e0d7a5f95
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 18 00:18:50 2008 -0800

    Add ability to read/write arbitrary memory. Write LED blinker program.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c879bf51c14a5928135d59211facd72f6a32808
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 17 23:15:47 2008 -0800

    Move manual bit-banging debug code to separate file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aec3bbce84a5ceb92060a4b3889379f2af2404ac
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 17 23:15:19 2008 -0800

    reduce clock to 50us
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa168f963f8b00144d12aa2770e9c0917cfae123
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 17 23:12:59 2008 -0800

    Fill out ccdbg-command to support all debug commands.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5df84df7cd6a31527dcfd11030f00ef9d8abf170
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 17 22:24:59 2008 -0800

    Clean up bitbanging layer. Add debug printfs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 584e28bac8af38de433767e017977ed1adddeb36
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 17 12:32:15 2008 -0800

    Clean up sample debug files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e64b4dbf15e9ee1cb0de002985de7575e83d46e9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 8 17:25:28 2008 -0800

    Add support for input-only lines (-)

commit 4f38974a9941cddaba27c17c5a46f923db386c94
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 6 16:32:27 2008 -0800

    Add another example

commit 3709ec3205cfb152b6568f3ea505c67fe7504c2a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 6 16:32:12 2008 -0800

    Add libusb support and lots more examples

commit 39801e6e9fb9388072ee414a447f74095a6ac960
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 28 22:57:07 2008 -0800

    Random hacking

commit 01cb2799875e086ee6096627c058ee235bbc33d5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 27 17:07:15 2008 -0800

    Add prototypes, add stub mainline, add .gitignore

commit 0ffe4ef870b0e564789a1990aeab5b6651868e5b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 27 12:33:40 2008 -0800

    cc1111 debug port access through cp2103 serial chip
